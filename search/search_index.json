{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u5f15\u8a00 \u00b6 \u6b22\u8fce\u9605\u8bfb soui3 \u7684\u6587\u6863\u3002 \u201c\u90a3\u662f\u4e00\u4e2a\u5c5e\u4e8e\u9177Q\u7684\u65f6\u4ee3\uff0c\u5c0f\u5de7\u7684\u9177Q\u754c\u9762\u4ee4\u4eba\u559c\u7231\uff0c\u6781\u4f4e\u7684\u5360\u7528\u5185\u5b58\u4ee4\u4eba\u75f4\u72c2,\u9177Q\u5012\u4e0b\uff0c\u754c\u9762\u5728\u6211\u8111\u6d77\u4e2d\u6325\u4e4b\u4e0d\u53bb\uff0c\u6253\u7b97\u4eff\u4e00\u4e2a\u8bd5\u8bd5\uff0c \u5f00\u59cb\u5bf9\u9177Q\u8fdb\u884c\u9006\u5411\uff0c\u6613\u8bed\u8a00\u3002\u6211\u5931\u671b\u4e86\uff0c\u6211\u5f00\u59cb\u5bfb\u627ec++ windows\u754c\u9762\u5e93\uff0cQT,duilib,\u4e00\u6b21\u5076\u7136\uff0c\u53d1\u73b0\u4e86soui3......\u201d","title":"\u5f15\u8a00"},{"location":"#_1","text":"\u6b22\u8fce\u9605\u8bfb soui3 \u7684\u6587\u6863\u3002 \u201c\u90a3\u662f\u4e00\u4e2a\u5c5e\u4e8e\u9177Q\u7684\u65f6\u4ee3\uff0c\u5c0f\u5de7\u7684\u9177Q\u754c\u9762\u4ee4\u4eba\u559c\u7231\uff0c\u6781\u4f4e\u7684\u5360\u7528\u5185\u5b58\u4ee4\u4eba\u75f4\u72c2,\u9177Q\u5012\u4e0b\uff0c\u754c\u9762\u5728\u6211\u8111\u6d77\u4e2d\u6325\u4e4b\u4e0d\u53bb\uff0c\u6253\u7b97\u4eff\u4e00\u4e2a\u8bd5\u8bd5\uff0c \u5f00\u59cb\u5bf9\u9177Q\u8fdb\u884c\u9006\u5411\uff0c\u6613\u8bed\u8a00\u3002\u6211\u5931\u671b\u4e86\uff0c\u6211\u5f00\u59cb\u5bfb\u627ec++ windows\u754c\u9762\u5e93\uff0cQT,duilib,\u4e00\u6b21\u5076\u7136\uff0c\u53d1\u73b0\u4e86soui3......\u201d","title":"\u5f15\u8a00"},{"location":"discussion/","text":"\u8ba8\u8bba\u4ea4\u6d41\u4e0e\u95ee\u9898\u53cd\u9988 \u00b6 \u76ee\u524d\u6587\u6863\u7f51\u9875\u5316\u8fd8\u4e0d\u5b8c\u5168\uff0c\u4e2a\u4eba\u7cbe\u529b\u6709\u9650\uff0c\u6073\u8bf7\u5927\u5bb6\u5e2e\u5fd9\u3002 \u6587\u6863\u5168\u90e8\u7528markdown\u4e66\u5199 \u6b22\u8fce\u63d0\u4ea4Pull request \u5982\u679c\u4f60\u6709\u4efb\u4f55\u60f3\u8981\u8ba8\u8bba\u7684\u95ee\u9898\uff0c\u8bf7\u9009\u62e9 Github Discussion","title":"\u8ba8\u8bba\u4ea4\u6d41\u4e0e\u95ee\u9898\u53cd\u9988"},{"location":"discussion/#_1","text":"\u76ee\u524d\u6587\u6863\u7f51\u9875\u5316\u8fd8\u4e0d\u5b8c\u5168\uff0c\u4e2a\u4eba\u7cbe\u529b\u6709\u9650\uff0c\u6073\u8bf7\u5927\u5bb6\u5e2e\u5fd9\u3002 \u6587\u6863\u5168\u90e8\u7528markdown\u4e66\u5199 \u6b22\u8fce\u63d0\u4ea4Pull request \u5982\u679c\u4f60\u6709\u4efb\u4f55\u60f3\u8981\u8ba8\u8bba\u7684\u95ee\u9898\uff0c\u8bf7\u9009\u62e9 Github Discussion","title":"\u8ba8\u8bba\u4ea4\u6d41\u4e0e\u95ee\u9898\u53cd\u9988"},{"location":"theme/","text":"\u7f51\u7ad9\u4e3b\u9898\u914d\u8272 \u00b6 Material color palette \u989c\u8272\u4e3b\u9898 \u00b6 Color Scheme \u914d\u8272\u65b9\u6848 \u00b6 \u6839\u636e\u6d4f\u89c8\u5668\u4e0e\u7cfb\u7edf\u8bbe\u7f6e\u81ea\u52a8\u5207\u6362\u660e\u6697\u4e3b\u9898\uff0c\u4e5f\u53ef\u624b\u52a8\u5207\u6362 Default Slate var buttons = document.querySelectorAll(\"button[data-md-color-scheme]\") Array.prototype.forEach.call(buttons, function(button) { button.addEventListener(\"click\", function() { document.body.dataset.mdColorScheme = this.dataset.mdColorScheme; localStorage.setItem(\"data-md-color-scheme\",this.dataset.mdColorScheme); }) }) Primary colors \u4e3b\u8272 \u00b6 \u70b9\u51fb\u8272\u5757\u53ef\u66f4\u6362\u4e3b\u9898\u7684\u4e3b\u8272 Red Pink Purple Deep Purple Indigo Blue Light Blue Cyan Teal Green Light Green Lime Yellow Amber Orange Deep Orange Brown Grey Blue Grey White var buttons = document.querySelectorAll(\"button[data-md-color-primary]\"); Array.prototype.forEach.call(buttons, function(button) { button.addEventListener(\"click\", function() { document.body.dataset.mdColorPrimary = this.dataset.mdColorPrimary; localStorage.setItem(\"data-md-color-primary\",this.dataset.mdColorPrimary); }) }) Accent colors \u8f85\u52a9\u8272 \u00b6 \u70b9\u51fb\u8272\u5757\u66f4\u6362\u4e3b\u9898\u7684\u8f85\u52a9\u8272 Red Pink Purple Deep Purple Indigo Blue Light Blue Cyan Teal Green Light Green Lime Yellow Amber Orange Deep Orange var buttons = document.querySelectorAll(\"button[data-md-color-accent]\"); Array.prototype.forEach.call(buttons, function(button) { button.addEventListener(\"click\", function() { document.body.dataset.mdColorAccent = this.dataset.mdColorAccent; localStorage.setItem(\"data-md-color-accent\",this.dataset.mdColorAccent); }) }) button[data-md-color-accent]> code { background-color: var(--md-code-bg-color); color: var(--md-accent-fg-color); } button[data-md-color-primary] > code { background-color: var(--md-code-bg-color); color: var(--md-primary-fg-color); } button[data-md-color-primary='white'] > code { background-color: var(--md-primary-bg-color); color: var(--md-primary-fg-color); } button[data-md-color-accent],button[data-md-color-primary],button[data-md-color-scheme]{ width: 8.4rem; margin-bottom: .4rem; padding: 2.4rem .4rem .4rem; transition: background-color .25s,opacity .25s; border-radius: .2rem; color: #fff; font-size: .8rem; text-align: left; cursor: pointer; } button[data-md-color-accent]{ background-color: var(--md-accent-fg-color); } button[data-md-color-primary]{ background-color: var(--md-primary-fg-color); } button[data-md-color-scheme='default']{ background-color: hsla(0, 0%, 100%, 1); } button[data-md-color-scheme='slate']{ background-color: var(--md-default-bg-color); } button[data-md-color-accent]:hover, button[data-md-color-primary]:hover { opacity: .75; }","title":"\u7f51\u7ad9\u4e3b\u9898\u914d\u8272"},{"location":"theme/#_1","text":"","title":"\u7f51\u7ad9\u4e3b\u9898\u914d\u8272"},{"location":"theme/#material-color-palette","text":"","title":"Material color palette \u989c\u8272\u4e3b\u9898"},{"location":"theme/#color-scheme","text":"\u6839\u636e\u6d4f\u89c8\u5668\u4e0e\u7cfb\u7edf\u8bbe\u7f6e\u81ea\u52a8\u5207\u6362\u660e\u6697\u4e3b\u9898\uff0c\u4e5f\u53ef\u624b\u52a8\u5207\u6362 Default Slate var buttons = document.querySelectorAll(\"button[data-md-color-scheme]\") Array.prototype.forEach.call(buttons, function(button) { button.addEventListener(\"click\", function() { document.body.dataset.mdColorScheme = this.dataset.mdColorScheme; localStorage.setItem(\"data-md-color-scheme\",this.dataset.mdColorScheme); }) })","title":"Color Scheme \u914d\u8272\u65b9\u6848"},{"location":"theme/#primary-colors","text":"\u70b9\u51fb\u8272\u5757\u53ef\u66f4\u6362\u4e3b\u9898\u7684\u4e3b\u8272 Red Pink Purple Deep Purple Indigo Blue Light Blue Cyan Teal Green Light Green Lime Yellow Amber Orange Deep Orange Brown Grey Blue Grey White var buttons = document.querySelectorAll(\"button[data-md-color-primary]\"); Array.prototype.forEach.call(buttons, function(button) { button.addEventListener(\"click\", function() { document.body.dataset.mdColorPrimary = this.dataset.mdColorPrimary; localStorage.setItem(\"data-md-color-primary\",this.dataset.mdColorPrimary); }) })","title":"Primary colors \u4e3b\u8272"},{"location":"theme/#accent-colors","text":"\u70b9\u51fb\u8272\u5757\u66f4\u6362\u4e3b\u9898\u7684\u8f85\u52a9\u8272 Red Pink Purple Deep Purple Indigo Blue Light Blue Cyan Teal Green Light Green Lime Yellow Amber Orange Deep Orange var buttons = document.querySelectorAll(\"button[data-md-color-accent]\"); Array.prototype.forEach.call(buttons, function(button) { button.addEventListener(\"click\", function() { document.body.dataset.mdColorAccent = this.dataset.mdColorAccent; localStorage.setItem(\"data-md-color-accent\",this.dataset.mdColorAccent); }) }) button[data-md-color-accent]> code { background-color: var(--md-code-bg-color); color: var(--md-accent-fg-color); } button[data-md-color-primary] > code { background-color: var(--md-code-bg-color); color: var(--md-primary-fg-color); } button[data-md-color-primary='white'] > code { background-color: var(--md-primary-bg-color); color: var(--md-primary-fg-color); } button[data-md-color-accent],button[data-md-color-primary],button[data-md-color-scheme]{ width: 8.4rem; margin-bottom: .4rem; padding: 2.4rem .4rem .4rem; transition: background-color .25s,opacity .25s; border-radius: .2rem; color: #fff; font-size: .8rem; text-align: left; cursor: pointer; } button[data-md-color-accent]{ background-color: var(--md-accent-fg-color); } button[data-md-color-primary]{ background-color: var(--md-primary-fg-color); } button[data-md-color-scheme='default']{ background-color: hsla(0, 0%, 100%, 1); } button[data-md-color-scheme='slate']{ background-color: var(--md-default-bg-color); } button[data-md-color-accent]:hover, button[data-md-color-primary]:hover { opacity: .75; }","title":"Accent colors \u8f85\u52a9\u8272"},{"location":"updatelog/","text":"SoUI \u7248\u672c\u66f4\u65b0\u65e5\u5fd7 \u00b6 3.0.1.20 \u00b6 \u66f4\u65b0\u65b0\u7248\u672cpropgrid\u63a7\u4ef6\u3002 3.0.1.19 \u00b6 \u8c03\u6574realwnd\u53c2\u6570\u3002ver:3.0.1.19 3.0.1.18 \u00b6 \u4fee\u590d\u4e0a\u4e00\u7248\u672c\u7684skinPool\u9519\u8bef,\u7248\u672c\u53f7\u5347\u7ea7\u52303.0.1.18 3.0.1.5 \u00b6 \u6e05\u7406\u7f16\u8bd1\u8b66\u544a\uff0c\u5c06skin\u7684lazyload\u5c5e\u6027\u653e\u5230initfinished\u91cc\u5904\u7406\u3002 3.0.1.2 \u00b6 update version to 3.0.1.2 3.0.0.28 \u00b6 fix caret show while there are transform matrix. 3.0.0.25 \u00b6 upgrade ver to 3.0.0.25 3.0.0.23 \u00b6 make SWindow::GetAttribute public. 3.0.0.18 \u00b6 update clone_demos.bat 3.0.0.17 \u00b6 \u8c03\u6574\u8bed\u8a00\u7ffb\u8bd1\u63a5\u53e3\uff0c\u7b80\u5316\u8bed\u8a00\u4e2d\u6307\u5b9a\u5b57\u4f53\u7684\u65b9\u5f0f\u3002 \u89e3\u51b3\u591a\u5b57\u8282\u7248\u672c\u7f16\u8bd1\u95ee\u9898\u3002 3.0.0.13 \u00b6 Merge branch 'master' of https://gitee.com/setoutsoft/soui3 3.0.0.10 \u00b6 update version to 3.0.0.10 3.0.0.9 \u00b6 update ver to 3.0.0.9 3.0.0.6 \u00b6 \u66f4\u65b0\u5411\u5bfc\u6a21\u677f\u6587\u4ef6 3.0.0.5 \u00b6 \u5c06SIntAnimator::getValue \u79fb\u52a8\u5230TValueAnimator\u4e2d\uff0c\u51cf\u5c11\u4ee3\u7801\u91cd\u590d\u3002 \u5728demo\u4e2d\u6ce8\u610f\u5904\u7406\u6570\u636e\u52a8\u753b\u5b8c\u5168\u540e\u7684release(). 2.9.0.2 \u00b6 \u7248\u672c\u53f7\u5347\u7ea7\u52302.9.0.2 \u8c03\u6574\u5e03\u5c40\u4e2dinclude\u5143\u7d20\u7684\u7528\u6cd5\uff0c\u5f53\u88abinclude\u4f7f\u7528\u7684\u5e03\u5c40\u4e0d\u662finclude\u7ed3\u70b9\u65f6\uff0c\u652f\u6301\u4eceinclude\u8282\u70b9\u4f20\u9012\u5e03\u5c40\u5c5e\u6027\u3002 2.8.0.6 \u00b6 update version to 2.8.0.6 2.8.0.5 \u00b6 \u8c03\u6574SMenu\u7684DpiAware\u5b9e\u73b0\u3002 \u589e\u52a0SSliderBar, SProgress\u7684dpiaware\u652f\u6301\u3002 2.8.0.4 \u00b6 update version to 2.8.0.4 2.8.0.3 \u00b6 fix linearlayout bug. 2.8.0.2 \u00b6 update ver to 2.8.0.2 2.8.0.1 \u00b6 update version to 2.8.0.1 2.7.1.2 \u00b6 fix LresultFromObject link error. 2.7.1.1 \u00b6 fix bug for vs2010 compiling. 2.7.0.1 \u00b6 forward mousewheel to parent for single line edit 1.0\u52302.0\u7248\u672c\u65e5\u5fd7 \u00b6 1\u3001\u4fee\u6539 uiresbuilder\uff0c\u589e\u52a0\u8d44\u6e90 ID \u81ea\u52a8\u751f\u6210\u529f\u80fd\u3002\u5305\u62ec\u81ea\u52a8\u63d0\u53d6\u6240\u6709\u5e03\u5c40\u4e2d\u63a7\u4ef6\u7684 name\uff0c\u81ea\u52a8\u751f\u6210 ID\uff0c\u81ea\u52a8\u63d0\u53d6\u5b57\u7b26\u4e32\u8868\uff0c\u989c\u8272\u8868\u3002\u5177\u4f53\u4f7f\u7528\u65b9\u5f0f\u53c2\u89c1\u4e0b\u4e00\u7bc7\u3002 2\u3001\u4fee\u6539\u5e03\u5c40\u4e2d\u5f15\u7528\u5b57\u7b26\u4e32\u7684\u65b9\u5f0f\u3002\u539f\u6765\u4f7f\u7528%str-name%\u8fd9\u79cd\u65b9\u5f0f\u6765\u5f15\u7528\u5728\u5b57\u7b26\u4e32\u8868\u4e2d \u5b9a\u4e49\u7684\u5b57\u7b26\u4e32\uff0c\u4fee\u6539\u4e3a\u4f7f\u7528\u548c android \u4e00\u6837\u7684\u65b9\u5f0f\uff1a@string/str-name\uff0c\u4e0d\u652f\u6301\u5d4c\u5957\u3002 3\u3001\u589e\u52a0\u989c\u8272\u8868\uff0c\u53ef\u4ee5\u5728\u5e03\u5c40 XML \u4e2d\u4f7f\u7528@color/color-name \u8fd9\u79cd\u65b9\u5f0f\u4f7f\u7528\u989c\u8272\u8868\u4e2d\u5b9a \u4e49\u7684\u989c\u8272\u503c\u3002 4\u3001\u7ed9 EventArg \u589e\u52a0\u4e00\u4e2a bubbleUp \u5c5e\u6027\uff0c\u9ed8\u8ba4\u4e3a true, \u5e94\u7528\u4e2d\u5904\u7406\u4e00\u4e2a\u4e8b\u4ef6\u540e\u53ef\u4ee5\u5c06 bubbleUp \u8bbe\u7f6e\u6210 false\uff0c\u6b64\u65f6\u4e4b\u524d\u8ba2\u9605\u7684\u4e8b\u4ef6\u5904\u7406\u65b9\u6cd5\u5c06\u4e0d\u518d\u8c03\u7528\uff08\u4e2d\u65ad\u4e8b\u4ef6\u7684\u5192\u6ce1\u8fc7 \u7a0b\uff09\u3002 5\u3001\u589e\u52a0\u4e00\u4e2a STreeView \u63a7\u4ef6\uff0cSTreeView \u4e2d\u4e00\u4e2a\u91c7\u7528 MVC \u6a21\u5f0f\u8bbe\u8ba1\u7684\u9ad8\u6027\u80fd TreeCtrl\uff0c\u76ee\u524d\u8be5\u63a7\u4ef6\u8fd8\u5728\u6d4b\u8bd5\u9636\u6bb5\uff08\u6b22\u8fce\u4f7f\u7528\uff0c\u6b22\u8fce\u8865\u5145\u529f\u80fd\uff09\u3002 6\u3001\u5728 SOUI \u4e2d\u589e\u52a0 soui-version.h\uff0c\u7248\u672c\u53f7\u79fb\u52a8\u5230\u8be5\u6587\u4ef6\u4e2d\u5b9a\u4e49\u3002","title":"SoUI \u7248\u672c\u66f4\u65b0\u65e5\u5fd7"},{"location":"updatelog/#soui","text":"","title":"SoUI \u7248\u672c\u66f4\u65b0\u65e5\u5fd7"},{"location":"updatelog/#30120","text":"\u66f4\u65b0\u65b0\u7248\u672cpropgrid\u63a7\u4ef6\u3002","title":"3.0.1.20"},{"location":"updatelog/#30119","text":"\u8c03\u6574realwnd\u53c2\u6570\u3002ver:3.0.1.19","title":"3.0.1.19"},{"location":"updatelog/#30118","text":"\u4fee\u590d\u4e0a\u4e00\u7248\u672c\u7684skinPool\u9519\u8bef,\u7248\u672c\u53f7\u5347\u7ea7\u52303.0.1.18","title":"3.0.1.18"},{"location":"updatelog/#3015","text":"\u6e05\u7406\u7f16\u8bd1\u8b66\u544a\uff0c\u5c06skin\u7684lazyload\u5c5e\u6027\u653e\u5230initfinished\u91cc\u5904\u7406\u3002","title":"3.0.1.5"},{"location":"updatelog/#3012","text":"update version to 3.0.1.2","title":"3.0.1.2"},{"location":"updatelog/#30028","text":"fix caret show while there are transform matrix.","title":"3.0.0.28"},{"location":"updatelog/#30025","text":"upgrade ver to 3.0.0.25","title":"3.0.0.25"},{"location":"updatelog/#30023","text":"make SWindow::GetAttribute public.","title":"3.0.0.23"},{"location":"updatelog/#30018","text":"update clone_demos.bat","title":"3.0.0.18"},{"location":"updatelog/#30017","text":"\u8c03\u6574\u8bed\u8a00\u7ffb\u8bd1\u63a5\u53e3\uff0c\u7b80\u5316\u8bed\u8a00\u4e2d\u6307\u5b9a\u5b57\u4f53\u7684\u65b9\u5f0f\u3002 \u89e3\u51b3\u591a\u5b57\u8282\u7248\u672c\u7f16\u8bd1\u95ee\u9898\u3002","title":"3.0.0.17"},{"location":"updatelog/#30013","text":"Merge branch 'master' of https://gitee.com/setoutsoft/soui3","title":"3.0.0.13"},{"location":"updatelog/#30010","text":"update version to 3.0.0.10","title":"3.0.0.10"},{"location":"updatelog/#3009","text":"update ver to 3.0.0.9","title":"3.0.0.9"},{"location":"updatelog/#3006","text":"\u66f4\u65b0\u5411\u5bfc\u6a21\u677f\u6587\u4ef6","title":"3.0.0.6"},{"location":"updatelog/#3005","text":"\u5c06SIntAnimator::getValue \u79fb\u52a8\u5230TValueAnimator\u4e2d\uff0c\u51cf\u5c11\u4ee3\u7801\u91cd\u590d\u3002 \u5728demo\u4e2d\u6ce8\u610f\u5904\u7406\u6570\u636e\u52a8\u753b\u5b8c\u5168\u540e\u7684release().","title":"3.0.0.5"},{"location":"updatelog/#2902","text":"\u7248\u672c\u53f7\u5347\u7ea7\u52302.9.0.2 \u8c03\u6574\u5e03\u5c40\u4e2dinclude\u5143\u7d20\u7684\u7528\u6cd5\uff0c\u5f53\u88abinclude\u4f7f\u7528\u7684\u5e03\u5c40\u4e0d\u662finclude\u7ed3\u70b9\u65f6\uff0c\u652f\u6301\u4eceinclude\u8282\u70b9\u4f20\u9012\u5e03\u5c40\u5c5e\u6027\u3002","title":"2.9.0.2"},{"location":"updatelog/#2806","text":"update version to 2.8.0.6","title":"2.8.0.6"},{"location":"updatelog/#2805","text":"\u8c03\u6574SMenu\u7684DpiAware\u5b9e\u73b0\u3002 \u589e\u52a0SSliderBar, SProgress\u7684dpiaware\u652f\u6301\u3002","title":"2.8.0.5"},{"location":"updatelog/#2804","text":"update version to 2.8.0.4","title":"2.8.0.4"},{"location":"updatelog/#2803","text":"fix linearlayout bug.","title":"2.8.0.3"},{"location":"updatelog/#2802","text":"update ver to 2.8.0.2","title":"2.8.0.2"},{"location":"updatelog/#2801","text":"update version to 2.8.0.1","title":"2.8.0.1"},{"location":"updatelog/#2712","text":"fix LresultFromObject link error.","title":"2.7.1.2"},{"location":"updatelog/#2711","text":"fix bug for vs2010 compiling.","title":"2.7.1.1"},{"location":"updatelog/#2701","text":"forward mousewheel to parent for single line edit","title":"2.7.0.1"},{"location":"updatelog/#1020","text":"1\u3001\u4fee\u6539 uiresbuilder\uff0c\u589e\u52a0\u8d44\u6e90 ID \u81ea\u52a8\u751f\u6210\u529f\u80fd\u3002\u5305\u62ec\u81ea\u52a8\u63d0\u53d6\u6240\u6709\u5e03\u5c40\u4e2d\u63a7\u4ef6\u7684 name\uff0c\u81ea\u52a8\u751f\u6210 ID\uff0c\u81ea\u52a8\u63d0\u53d6\u5b57\u7b26\u4e32\u8868\uff0c\u989c\u8272\u8868\u3002\u5177\u4f53\u4f7f\u7528\u65b9\u5f0f\u53c2\u89c1\u4e0b\u4e00\u7bc7\u3002 2\u3001\u4fee\u6539\u5e03\u5c40\u4e2d\u5f15\u7528\u5b57\u7b26\u4e32\u7684\u65b9\u5f0f\u3002\u539f\u6765\u4f7f\u7528%str-name%\u8fd9\u79cd\u65b9\u5f0f\u6765\u5f15\u7528\u5728\u5b57\u7b26\u4e32\u8868\u4e2d \u5b9a\u4e49\u7684\u5b57\u7b26\u4e32\uff0c\u4fee\u6539\u4e3a\u4f7f\u7528\u548c android \u4e00\u6837\u7684\u65b9\u5f0f\uff1a@string/str-name\uff0c\u4e0d\u652f\u6301\u5d4c\u5957\u3002 3\u3001\u589e\u52a0\u989c\u8272\u8868\uff0c\u53ef\u4ee5\u5728\u5e03\u5c40 XML \u4e2d\u4f7f\u7528@color/color-name \u8fd9\u79cd\u65b9\u5f0f\u4f7f\u7528\u989c\u8272\u8868\u4e2d\u5b9a \u4e49\u7684\u989c\u8272\u503c\u3002 4\u3001\u7ed9 EventArg \u589e\u52a0\u4e00\u4e2a bubbleUp \u5c5e\u6027\uff0c\u9ed8\u8ba4\u4e3a true, \u5e94\u7528\u4e2d\u5904\u7406\u4e00\u4e2a\u4e8b\u4ef6\u540e\u53ef\u4ee5\u5c06 bubbleUp \u8bbe\u7f6e\u6210 false\uff0c\u6b64\u65f6\u4e4b\u524d\u8ba2\u9605\u7684\u4e8b\u4ef6\u5904\u7406\u65b9\u6cd5\u5c06\u4e0d\u518d\u8c03\u7528\uff08\u4e2d\u65ad\u4e8b\u4ef6\u7684\u5192\u6ce1\u8fc7 \u7a0b\uff09\u3002 5\u3001\u589e\u52a0\u4e00\u4e2a STreeView \u63a7\u4ef6\uff0cSTreeView \u4e2d\u4e00\u4e2a\u91c7\u7528 MVC \u6a21\u5f0f\u8bbe\u8ba1\u7684\u9ad8\u6027\u80fd TreeCtrl\uff0c\u76ee\u524d\u8be5\u63a7\u4ef6\u8fd8\u5728\u6d4b\u8bd5\u9636\u6bb5\uff08\u6b22\u8fce\u4f7f\u7528\uff0c\u6b22\u8fce\u8865\u5145\u529f\u80fd\uff09\u3002 6\u3001\u5728 SOUI \u4e2d\u589e\u52a0 soui-version.h\uff0c\u7248\u672c\u53f7\u79fb\u52a8\u5230\u8be5\u6587\u4ef6\u4e2d\u5b9a\u4e49\u3002","title":"1.0\u52302.0\u7248\u672c\u65e5\u5fd7"},{"location":"Ask/1/","text":"6.1 \u6a21\u5757 utilities \u4e3a\u4ec0\u4e48\u8981\u7528 DLL \u7f16\u8bd1\uff1f \u00b6 SOUI \u76f8\u5bf9\u4e8e DuiEngine \u4e00\u4e2a\u91cd\u8981\u7684\u53d8\u5316\u5c31\u662f\u5f88\u591a\u6a21\u5757\u53d8\u6210\u4e86\u4e00\u4e2a\u5355\u72ec\u7684 DLL\u3002 \u7136\u540e\u5f88\u591a\u60c5\u51b5\u4e0b\u7528\u6237\u53ef\u80fd\u5e0c\u671b\u6574\u4e2a\u4ea7\u54c1\u5c31\u662f\u4e00\u4e2a EXE\uff0c\u539f\u6765 DuiEngine \u63d0\u4f9b\u4e86 LIB \u7f16\u8bd1\u6a21 \u5f0f\uff0c\u6b64\u65f6\u94fe\u63a5 LIB \u6a21\u5f0f\u7684 DuiEngine \u5c31\u884c\u4e86\u3002 \u4f46\u662f SOUI \u9ed8\u8ba4\u81f3\u5c11 Utilities \u90a3\u4e2a\u6a21\u5757\u662f\u4e0d\u63d0\u4f9b LIB \u7f16\u8bd1\u6a21\u5f0f\u7684\u3002 utilities \u4e4b\u6240\u4ee5\u9ed8\u8ba4\u53ea\u63d0\u4f9b DLL \u7f16\u8bd1\u662f\u56e0\u4e3a SString \u7c7b\u662f\u7531 utilities \u5b9e\u73b0\u7684\u3002 \u5b57\u7b26\u4e32\u662f\u7f16\u8bd1\u4e2d\u78b0\u5230\u7684\u6700\u6700\u89c1\u7684\u57fa\u672c\u5bf9\u8c61\u4e4b\u4e00\u3002\u5728\u8fd0\u884c\u5e93\uff08CRT\uff09\u52a8\u6001\u7f16\u8bd1\uff08MD\uff0c MDd\uff09\u65f6\u8fd9\u4e0d\u662f\u95ee\u9898\uff0c\u56e0\u4e3a\u6240\u6709\u6a21\u5757\u7684\u5185\u5b58\u5206\u914d\u90fd\u662f\u5728\u4e00\u4e2a\u76f8\u540c\u7684\u8fd0\u884c\u5e93\uff08CRT\uff09\u4e0a\uff0c\u8fd9 \u65f6\u5728\u4e0d\u540c\u6a21\u5757\u4e4b\u95f4\u4f20\u9012\u5bf9\u8c61\u76f8\u5bf9\u7b80\u5355\u3002\u5982\u679c\u9879\u76ee\u91c7\u7528\u8fd0\u884c\u5e93\u9759\u6001\u7f16\u8bd1\uff08MT or MTd)\uff0c\u5728 \u4e0d\u540c\u6a21\u5757\u4e4b\u95f4\u4f20\u9012\u5b57\u7b26\u4e32\u5bf9\u8c61\u662f\u975e\u5e38\u56f0\u96be\u7684\uff0c\u56e0\u4e3a\u4e00\u4e0d\u5c0f\u5fc3\u5c31\u4f1a\u53d1\u751f\u5728 A \u6a21\u5757\u4e2d\u5206\u914d\u7684\u5b57 \u7b26\u4e32\u5bf9\u8c61\u88ab B \u6a21\u5757\u91ca\u653e\u3002 utilities \u91c7\u7528 DLL \u7f16\u8bd1\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684\u8de8\u6a21\u5757\u4f20\u9012\u3002 \u91c7\u7528\u8fd0\u884c\u5e93\u52a8\u6001\u7f16\u8bd1\u7684\u60c5\u51b5\u5c31\u4e0d\u8bf4\u4e86\uff0c\u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecd\u91c7\u7528\u9759\u6001\u5e93\u7f16\u8bd1\u7684 CRT \u7684\u60c5\u51b5\u3002 SOUI \u4e2d\u4f7f\u7528\u7684\u5b57\u7b26\u4e32\u5bf9\u8c61\u91c7\u7528\u4e86\u4e00\u70b9\u6280\u5de7\uff1a\u6bcf\u4e00\u4e2a String \u5bf9\u8c61\u4e2d\u53ea\u6709\u4e00\u4e2a\u6307\u9488\u6210\u5458\u53d8 \u91cf\uff1a template < class tchar , class tchar_traits > class TStringT { public : typedef tchar _tchar ; typedef const _tchar * pctstr ; protected : tchar * m_pszData ; // pointer to ref counted string data }; \u867d\u7136 TStringT \u662f\u4e00\u4e2a\u6a21\u677f\u7c7b\uff0c\u5728 SOUI \u4e2d\u91c7\u7528\u7c7b\u5bfc\u51fa\u7684\u65b9\u5f0f\u5c06\u8be5\u6a21\u677f\u7684\u4e24\u4e2a\u7279\u5316\u7c7b\u5bfc\u51fa\uff1a #ifdef UTILITIES_EXPORTS # define EXPIMP_TEMPLATE #else # define EXPIMP_TEMPLATE extern #endif #pragma warning (disable : 4231) EXPIMP_TEMPLATE template class UTILITIES_API TStringT < char , char_traits > ; EXPIMP_TEMPLATE template class UTILITIES_API TStringT < wchar_t , wchar_traits > ; \u901a\u8fc7\u5c06 string \u7c7b\u5bfc\u51fa\uff0c\u4fdd\u8bc1 string \u7684\u6240\u6709\u8fd0\u884c\u4ee3\u7801\u90fd\u662f\u5728 utilities \u8fd9\u4e2a\u6a21\u5757\u5185\u90e8\uff0c\u8fd9\u4e5f\u5c31 \u4fdd\u8bc1\u4e86 string \u5bf9\u8c61\u7684\u552f\u4e00\u6210\u5458\u53d8\u91cf\uff1a tchar* m_pszData\uff1b \u7684\u5185\u5b58\u5206\u914d\u53ca\u91ca\u653e\u56fa\u5b9a\u5728 utilities \u8fd9\u4e2a\u6a21\u5757\u91cc\u3002 \u901a\u8fc7\u8fd9\u6837\u5904\u7406\uff0c\u65e0\u8bba\u7528\u6237\u5b9a\u4e49 string \u662f\u5728\u54ea\u4e00\u4e2a\u6a21\u5757\uff0c\u771f\u6b63\u7684\u5185\u5b58\u7ba1\u7406\u8fd8\u662f\u5728 utilities \u91cc\uff0c\u4ece\u800c\u4f7f\u5f97 string \u5bf9\u8c61\u53ef\u4ee5\u65b9\u4fbf\u7684\u5728\u4e0d\u540c\u6a21\u5757\u4e4b\u95f4\u4f20\u9012\u3002 \u6bd4\u8f83\u4e00\u4e0b std::string \u5c31\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c\u4f7f\u7528 std::string \u5728\u4e0d\u540c\u6a21\u5757\u4e4b\u95f4\u4f20\u9012\u5bf9\u8c61\u5c06\u662f\u975e\u5e38 \u5371\u9669\u7684\uff0c\u56e0\u4e3a std::string \u662f\u6a21\u677f\u7c7b\uff0c\u5b83\u7684\u4ee3\u7801\u5c06\u4f1a\u88ab\u7f16\u8bd1\u5230\u4e0d\u540c\u7684\u6a21\u5757\u4e2d\uff0c\u4e5f\u5c31\u662f\u8bf4\u5728\u4e0d \u540c\u7684\u6a21\u5757\u4e2d\u8c03\u7528 std::string \u7684\u6210\u5458\u51fd\u6570\u6267\u884c\u7684\u4ee3\u7801\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u8fd9\u6837\u5728 A \u6a21\u5757\u4e2d\u58f0\u660e\u7684 string \u4f20\u9012\u5230 B \u6a21\u5757\u518d\u88ab B \u6a21\u5757\u91ca\u653e\u7a0b\u5e8f\u5c31\u5d29\u6e83\u4e86\u3002 \u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48 utilities \u6a21\u5757\u9ed8\u8ba4\u53ea\u63d0\u4f9b DLL \u7f16\u8bd1\u7684\u539f\u56e0\u3002 \u77e5\u9053\u4e86\u539f\u56e0\u5c31\u597d\u529e\u4e86\u3002 \u5bf9\u4e8e\u90a3\u4e9b\u5e0c\u671b\u6574\u4e2a\u9879\u76ee\u5c31\u662f\u4e00\u4e2a EXE \u7684\u60c5\u51b5\uff0c\u76f4\u63a5\u4fee\u6539 utilities \u6a21\u5757\u7684\u7f16\u8bd1\u7c7b\u578b\u4e3a LIB \u5c31 \u884c\u4e86\uff0c\u56e0\u4e3a\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6839\u672c\u4e0d\u5b58\u5728\u8de8\u6a21\u5757\u5bf9\u8c61\u4f20\u9012\u7684\u95ee\u9898\u3002","title":"6.1 \u6a21\u5757 utilities \u4e3a\u4ec0\u4e48\u8981\u7528 DLL \u7f16\u8bd1\uff1f"},{"location":"Ask/1/#61-utilities-dll","text":"SOUI \u76f8\u5bf9\u4e8e DuiEngine \u4e00\u4e2a\u91cd\u8981\u7684\u53d8\u5316\u5c31\u662f\u5f88\u591a\u6a21\u5757\u53d8\u6210\u4e86\u4e00\u4e2a\u5355\u72ec\u7684 DLL\u3002 \u7136\u540e\u5f88\u591a\u60c5\u51b5\u4e0b\u7528\u6237\u53ef\u80fd\u5e0c\u671b\u6574\u4e2a\u4ea7\u54c1\u5c31\u662f\u4e00\u4e2a EXE\uff0c\u539f\u6765 DuiEngine \u63d0\u4f9b\u4e86 LIB \u7f16\u8bd1\u6a21 \u5f0f\uff0c\u6b64\u65f6\u94fe\u63a5 LIB \u6a21\u5f0f\u7684 DuiEngine \u5c31\u884c\u4e86\u3002 \u4f46\u662f SOUI \u9ed8\u8ba4\u81f3\u5c11 Utilities \u90a3\u4e2a\u6a21\u5757\u662f\u4e0d\u63d0\u4f9b LIB \u7f16\u8bd1\u6a21\u5f0f\u7684\u3002 utilities \u4e4b\u6240\u4ee5\u9ed8\u8ba4\u53ea\u63d0\u4f9b DLL \u7f16\u8bd1\u662f\u56e0\u4e3a SString \u7c7b\u662f\u7531 utilities \u5b9e\u73b0\u7684\u3002 \u5b57\u7b26\u4e32\u662f\u7f16\u8bd1\u4e2d\u78b0\u5230\u7684\u6700\u6700\u89c1\u7684\u57fa\u672c\u5bf9\u8c61\u4e4b\u4e00\u3002\u5728\u8fd0\u884c\u5e93\uff08CRT\uff09\u52a8\u6001\u7f16\u8bd1\uff08MD\uff0c MDd\uff09\u65f6\u8fd9\u4e0d\u662f\u95ee\u9898\uff0c\u56e0\u4e3a\u6240\u6709\u6a21\u5757\u7684\u5185\u5b58\u5206\u914d\u90fd\u662f\u5728\u4e00\u4e2a\u76f8\u540c\u7684\u8fd0\u884c\u5e93\uff08CRT\uff09\u4e0a\uff0c\u8fd9 \u65f6\u5728\u4e0d\u540c\u6a21\u5757\u4e4b\u95f4\u4f20\u9012\u5bf9\u8c61\u76f8\u5bf9\u7b80\u5355\u3002\u5982\u679c\u9879\u76ee\u91c7\u7528\u8fd0\u884c\u5e93\u9759\u6001\u7f16\u8bd1\uff08MT or MTd)\uff0c\u5728 \u4e0d\u540c\u6a21\u5757\u4e4b\u95f4\u4f20\u9012\u5b57\u7b26\u4e32\u5bf9\u8c61\u662f\u975e\u5e38\u56f0\u96be\u7684\uff0c\u56e0\u4e3a\u4e00\u4e0d\u5c0f\u5fc3\u5c31\u4f1a\u53d1\u751f\u5728 A \u6a21\u5757\u4e2d\u5206\u914d\u7684\u5b57 \u7b26\u4e32\u5bf9\u8c61\u88ab B \u6a21\u5757\u91ca\u653e\u3002 utilities \u91c7\u7528 DLL \u7f16\u8bd1\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684\u8de8\u6a21\u5757\u4f20\u9012\u3002 \u91c7\u7528\u8fd0\u884c\u5e93\u52a8\u6001\u7f16\u8bd1\u7684\u60c5\u51b5\u5c31\u4e0d\u8bf4\u4e86\uff0c\u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecd\u91c7\u7528\u9759\u6001\u5e93\u7f16\u8bd1\u7684 CRT \u7684\u60c5\u51b5\u3002 SOUI \u4e2d\u4f7f\u7528\u7684\u5b57\u7b26\u4e32\u5bf9\u8c61\u91c7\u7528\u4e86\u4e00\u70b9\u6280\u5de7\uff1a\u6bcf\u4e00\u4e2a String \u5bf9\u8c61\u4e2d\u53ea\u6709\u4e00\u4e2a\u6307\u9488\u6210\u5458\u53d8 \u91cf\uff1a template < class tchar , class tchar_traits > class TStringT { public : typedef tchar _tchar ; typedef const _tchar * pctstr ; protected : tchar * m_pszData ; // pointer to ref counted string data }; \u867d\u7136 TStringT \u662f\u4e00\u4e2a\u6a21\u677f\u7c7b\uff0c\u5728 SOUI \u4e2d\u91c7\u7528\u7c7b\u5bfc\u51fa\u7684\u65b9\u5f0f\u5c06\u8be5\u6a21\u677f\u7684\u4e24\u4e2a\u7279\u5316\u7c7b\u5bfc\u51fa\uff1a #ifdef UTILITIES_EXPORTS # define EXPIMP_TEMPLATE #else # define EXPIMP_TEMPLATE extern #endif #pragma warning (disable : 4231) EXPIMP_TEMPLATE template class UTILITIES_API TStringT < char , char_traits > ; EXPIMP_TEMPLATE template class UTILITIES_API TStringT < wchar_t , wchar_traits > ; \u901a\u8fc7\u5c06 string \u7c7b\u5bfc\u51fa\uff0c\u4fdd\u8bc1 string \u7684\u6240\u6709\u8fd0\u884c\u4ee3\u7801\u90fd\u662f\u5728 utilities \u8fd9\u4e2a\u6a21\u5757\u5185\u90e8\uff0c\u8fd9\u4e5f\u5c31 \u4fdd\u8bc1\u4e86 string \u5bf9\u8c61\u7684\u552f\u4e00\u6210\u5458\u53d8\u91cf\uff1a tchar* m_pszData\uff1b \u7684\u5185\u5b58\u5206\u914d\u53ca\u91ca\u653e\u56fa\u5b9a\u5728 utilities \u8fd9\u4e2a\u6a21\u5757\u91cc\u3002 \u901a\u8fc7\u8fd9\u6837\u5904\u7406\uff0c\u65e0\u8bba\u7528\u6237\u5b9a\u4e49 string \u662f\u5728\u54ea\u4e00\u4e2a\u6a21\u5757\uff0c\u771f\u6b63\u7684\u5185\u5b58\u7ba1\u7406\u8fd8\u662f\u5728 utilities \u91cc\uff0c\u4ece\u800c\u4f7f\u5f97 string \u5bf9\u8c61\u53ef\u4ee5\u65b9\u4fbf\u7684\u5728\u4e0d\u540c\u6a21\u5757\u4e4b\u95f4\u4f20\u9012\u3002 \u6bd4\u8f83\u4e00\u4e0b std::string \u5c31\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c\u4f7f\u7528 std::string \u5728\u4e0d\u540c\u6a21\u5757\u4e4b\u95f4\u4f20\u9012\u5bf9\u8c61\u5c06\u662f\u975e\u5e38 \u5371\u9669\u7684\uff0c\u56e0\u4e3a std::string \u662f\u6a21\u677f\u7c7b\uff0c\u5b83\u7684\u4ee3\u7801\u5c06\u4f1a\u88ab\u7f16\u8bd1\u5230\u4e0d\u540c\u7684\u6a21\u5757\u4e2d\uff0c\u4e5f\u5c31\u662f\u8bf4\u5728\u4e0d \u540c\u7684\u6a21\u5757\u4e2d\u8c03\u7528 std::string \u7684\u6210\u5458\u51fd\u6570\u6267\u884c\u7684\u4ee3\u7801\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u8fd9\u6837\u5728 A \u6a21\u5757\u4e2d\u58f0\u660e\u7684 string \u4f20\u9012\u5230 B \u6a21\u5757\u518d\u88ab B \u6a21\u5757\u91ca\u653e\u7a0b\u5e8f\u5c31\u5d29\u6e83\u4e86\u3002 \u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48 utilities \u6a21\u5757\u9ed8\u8ba4\u53ea\u63d0\u4f9b DLL \u7f16\u8bd1\u7684\u539f\u56e0\u3002 \u77e5\u9053\u4e86\u539f\u56e0\u5c31\u597d\u529e\u4e86\u3002 \u5bf9\u4e8e\u90a3\u4e9b\u5e0c\u671b\u6574\u4e2a\u9879\u76ee\u5c31\u662f\u4e00\u4e2a EXE \u7684\u60c5\u51b5\uff0c\u76f4\u63a5\u4fee\u6539 utilities \u6a21\u5757\u7684\u7f16\u8bd1\u7c7b\u578b\u4e3a LIB \u5c31 \u884c\u4e86\uff0c\u56e0\u4e3a\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6839\u672c\u4e0d\u5b58\u5728\u8de8\u6a21\u5757\u5bf9\u8c61\u4f20\u9012\u7684\u95ee\u9898\u3002","title":"6.1 \u6a21\u5757 utilities \u4e3a\u4ec0\u4e48\u8981\u7528 DLL \u7f16\u8bd1\uff1f"},{"location":"Ask/2/","text":"6.2 \u4e3a\u4ec0\u4e48\u5728 soui \u4e2d\u52a0\u8f7d JPG \u6587\u4ef6\u5931\u8d25\uff1f \u00b6 \u5728 SOUI \u4e2d\u89e3\u51b3\u89e3\u7801\u5668\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u6a21\u5757\u3002 \u4e0d\u540c\u7684\u89e3\u7801\u5668\u51b3\u5b9a\u4e86\u7a0b\u5e8f\u4e2d\u80fd\u591f\u52a0\u8f7d\u4ec0\u4e48\u6837\u7684\u56fe\u7247\u7c7b\u578b\u3002 \u4f7f\u7528 SComMgr \u6765\u52a0\u8f7d SOUI \u7684\u6a21\u5757\u65f6\uff0cdebug \u6a21\u5f0f\u4e0b\u9ed8\u8ba4\u7684\u56fe\u7247\u89e3\u7801\u5668\u662f imgdecoder-png\u3002\u8fd9\u4e2a\u89e3\u7801\u5668\u53ea\u80fd\u89e3\u7801 PNG \u56fe\u7247\u3002\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u7528\u8fd9\u4e2a\u89e3\u7801\u5668\u4f5c\u4e3a debug \u7248\u672c\u7684\u9ed8\u8ba4\u89e3\u7801\u5668\u662f\u4e3a\u4e86\u6f14\u793a\u5728 SOUI \u4e2d\u4f7f\u7528 APNG \u52a8\u753b\uff0c\u53ea\u6709\u8fd9\u4e2a\u89e3\u7801\u5668\u652f\u6301 APNG \u89e3\u7801\u3002 \u8981\u4f7f\u7528\u5176\u5b83\u89e3\u7801\u5668\u53ea\u9700\u8981\u5728\u5b9e\u4f8b\u5316 SComMgr \u65f6\u63d0\u4f9b\u4e00\u4e2a\u89e3\u7801\u5668\u53c2\u6570\u5c31\u884c\uff1a class SComMgr { public : SComMgr ( LPCTSTR pszImgDecoder = NULL ) { if ( pszImgDecoder ) m_strImgDecoder = pszImgDecoder ; else m_strImgDecoder = COM_IMGDECODER ; } BOOL CreateImgDecoder ( IObjRef ** ppObj ) { if ( m_strImgDecoder == _T ( \"imgdecoder-wic\" )) return SOUI :: IMGDECODOR_WIC :: SCreateInstance ( ppObj ); else if ( m_strImgDecoder == _T ( \"imgdecoder-stb\" )) return SOUI :: IMGDECODOR_STB :: SCreateInstance ( ppObj ); else if ( m_strImgDecoder == _T ( \"imgdecoder-png\" )) return SOUI :: IMGDECODOR_PNG :: SCreateInstance ( ppObj ); else if ( m_strImgDecoder == _T ( \"imgdecoder-gdip\" )) return SOUI :: IMGDECODOR_GDIP :: SCreateInstance ( ppObj ); else { SASSERT ( 0 ); return FALSE ; } } //... } \u53ef\u4ee5\u770b\u51fa SOUI \u5b9e\u73b0\u4e86 4 \u79cd\u56fe\u7247\u89e3\u7801\u5668\uff0c\u9664\u4e86 imgdecoder-png \u5916\uff0c\u5176\u5b83 3 \u4e2a\u90fd\u662f\u5168\u56fe \u7247\u683c\u5f0f\u652f\u6301\u7684\u3002 \u56e0\u6b64\u53ea\u9700\u8981\u4f7f\u7528 SComMgr pComMgr = new SComMgr(\"imgdecoder-gdip\"); \u4ee3\u66ff SComMgr pComMgr = new SComMgr(); \u5373\u53ef\u5b9e\u73b0 JPG \u7684\u89e3\u7801\u3002","title":"6.2 \u4e3a\u4ec0\u4e48\u5728 soui \u4e2d\u52a0\u8f7d JPG \u6587\u4ef6\u5931\u8d25\uff1f"},{"location":"Ask/2/#62-soui-jpg","text":"\u5728 SOUI \u4e2d\u89e3\u51b3\u89e3\u7801\u5668\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u6a21\u5757\u3002 \u4e0d\u540c\u7684\u89e3\u7801\u5668\u51b3\u5b9a\u4e86\u7a0b\u5e8f\u4e2d\u80fd\u591f\u52a0\u8f7d\u4ec0\u4e48\u6837\u7684\u56fe\u7247\u7c7b\u578b\u3002 \u4f7f\u7528 SComMgr \u6765\u52a0\u8f7d SOUI \u7684\u6a21\u5757\u65f6\uff0cdebug \u6a21\u5f0f\u4e0b\u9ed8\u8ba4\u7684\u56fe\u7247\u89e3\u7801\u5668\u662f imgdecoder-png\u3002\u8fd9\u4e2a\u89e3\u7801\u5668\u53ea\u80fd\u89e3\u7801 PNG \u56fe\u7247\u3002\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u7528\u8fd9\u4e2a\u89e3\u7801\u5668\u4f5c\u4e3a debug \u7248\u672c\u7684\u9ed8\u8ba4\u89e3\u7801\u5668\u662f\u4e3a\u4e86\u6f14\u793a\u5728 SOUI \u4e2d\u4f7f\u7528 APNG \u52a8\u753b\uff0c\u53ea\u6709\u8fd9\u4e2a\u89e3\u7801\u5668\u652f\u6301 APNG \u89e3\u7801\u3002 \u8981\u4f7f\u7528\u5176\u5b83\u89e3\u7801\u5668\u53ea\u9700\u8981\u5728\u5b9e\u4f8b\u5316 SComMgr \u65f6\u63d0\u4f9b\u4e00\u4e2a\u89e3\u7801\u5668\u53c2\u6570\u5c31\u884c\uff1a class SComMgr { public : SComMgr ( LPCTSTR pszImgDecoder = NULL ) { if ( pszImgDecoder ) m_strImgDecoder = pszImgDecoder ; else m_strImgDecoder = COM_IMGDECODER ; } BOOL CreateImgDecoder ( IObjRef ** ppObj ) { if ( m_strImgDecoder == _T ( \"imgdecoder-wic\" )) return SOUI :: IMGDECODOR_WIC :: SCreateInstance ( ppObj ); else if ( m_strImgDecoder == _T ( \"imgdecoder-stb\" )) return SOUI :: IMGDECODOR_STB :: SCreateInstance ( ppObj ); else if ( m_strImgDecoder == _T ( \"imgdecoder-png\" )) return SOUI :: IMGDECODOR_PNG :: SCreateInstance ( ppObj ); else if ( m_strImgDecoder == _T ( \"imgdecoder-gdip\" )) return SOUI :: IMGDECODOR_GDIP :: SCreateInstance ( ppObj ); else { SASSERT ( 0 ); return FALSE ; } } //... } \u53ef\u4ee5\u770b\u51fa SOUI \u5b9e\u73b0\u4e86 4 \u79cd\u56fe\u7247\u89e3\u7801\u5668\uff0c\u9664\u4e86 imgdecoder-png \u5916\uff0c\u5176\u5b83 3 \u4e2a\u90fd\u662f\u5168\u56fe \u7247\u683c\u5f0f\u652f\u6301\u7684\u3002 \u56e0\u6b64\u53ea\u9700\u8981\u4f7f\u7528 SComMgr pComMgr = new SComMgr(\"imgdecoder-gdip\"); \u4ee3\u66ff SComMgr pComMgr = new SComMgr(); \u5373\u53ef\u5b9e\u73b0 JPG \u7684\u89e3\u7801\u3002","title":"6.2 \u4e3a\u4ec0\u4e48\u5728 soui \u4e2d\u52a0\u8f7d JPG \u6587\u4ef6\u5931\u8d25\uff1f"},{"location":"Ask/3/","text":"6.3 \u4e0d\u6ce8\u518c COM \u5728 Richedit \u4e2d\u4f7f OLE \u652f\u6301\u590d\u5236\u7c98\u8d34 \u00b6 \u6b63\u5e38\u60c5\u51b5\u4e0b\u5728 Richedit \u4e2d\u4f7f\u7528 OLE\uff0c\u5982\u679c\u9700\u8981 OLE \u652f\u6301\u590d\u5236\u7c98\u8d34\uff0c\u90a3\u4e48\u8fd9\u4e2a OLE \u5bf9\u8c61\u5fc5 \u987b\u662f\u5df2\u7ecf\u6ce8\u518c\u7684 COM \u5bf9\u8c61\u3002 \u6ce8\u518c COM \u5f88\u7b80\u5355\uff0c\u5173\u952e\u95ee\u9898\u5728\u4e8e\u6ce8\u518c\u65f6\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u5982\u679c\u5e0c\u671b APP \u505a\u6210 \u7eff\u8272\u7248\u672c\u5c31\u4e0d\u597d\u4f7f\u4e86\u3002 \u4e3a\u4ec0\u4e48\u9700\u8981\u6ce8\u518c\u6210 COM\uff1f\u56e0\u4e3a\u5728\u7c98\u8d34\u65f6 Richedit \u9700\u8981\u80fd\u591f\u4ece COM \u5bf9\u8c61\u7684 GUID \u5b9e\u4f8b\u5316 \u51fa\u4f60\u7684 OLE \u5bf9\u8c61\u3002 \u4ece\u4e00\u4e2a COM \u7684 GUID \u521b\u5efa\u4e00\u4e2a COM \u5bf9\u8c61\uff0c\u5fc5\u7136\u9700\u8981\u901a\u8fc7 CoCreateInstance(Ex)\u8fd9\u4e2a\u7cfb \u7edf API\u3002\u90a3\u4e48\u6211\u4eec\u662f\u4e0d\u662f\u53ea\u8981 Hook \u5230\u8fd9\u4e2a API \u5c31\u53ef\u4ee5\u4e0d\u9700\u8981\u6ce8\u518c\u4e86\u5462\uff1f \u901a\u8fc7 Hook CoCreateInstance\uff0c\u6211\u4eec\u53d1\u73b0\u521b\u5efa\u5df2\u7ecf\u6ce8\u518c\u7684 COM \u786e\u5b9e\u4f1a\u5230 CoCreateInstance \u8fd9\u4e2a API \u91cc\u6765\u3002\u7136\u800c\u5728\u8bd5\u56fe\u7c98\u8d34\u672a\u6ce8\u518c\u7684 COM \u5bf9\u8c61\u65f6\uff0c\u786e\u5e76\u6ca1\u6709\u8d70 \u5230\u81ea\u5df1 Hook \u7684 CoCreateInstance\uff0c\u7c98\u8d34\u5e76\u6ca1\u6709\u6210\u529f\u3002 \u4e3a\u4ec0\u4e48\u5462\uff1f \u65e2\u7136\u662f\u7c98\u8d34\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u770b\u4e00\u4e0b\u526a\u8d34\u677f\u91cc\u6709\u4e9b\u4ec0\u4e48\u4e1c\u897f\uff0c\u968f\u4fbf\u627e\u4e00\u4e2a\u526a\u8d34\u677f\u67e5\u770b\u7684\u5de5\u5177\uff0c \u770b\u4e00\u4e0b\u91cc\u9762\u7684 RTF \u683c\u5f0f\u91cc\u6709\u4e9b\u4ec0\u4e48\u4e1c\u897f\u3002\u5f53\u590d\u5236\u7684\u662f\u6ce8\u518c\u7684 COM \u65f6\uff0cRTF \u91cc\u6709\u8fd9\u4e2a COM \u7684\u5b57\u7b26\u4e32 ID\uff0c\u800c\u5f53\u590d\u5236\u6ca1\u6709\u6ce8\u518c\u7684 COM \u65f6\uff0c\u526a\u8d34\u677f\u91cc\u6ca1\u6709\u8fd9\u4e9b\u4fe1\u606f\u3002 \u95ee\u9898\u51fa\u5728\u54ea\u5462\uff1f \u6709 Richedit \u7684\u539f\u4ee3\u7801\u5c31\u597d\u4e86\u3002 \u6b63\u597d\u6709\u4e00\u4efd Wince \u91cc\u7684 Richedit \u7684\u6e90\u4ee3\u7801\uff0c\u901a\u8fc7\u5206\u6790 Richedit \u7684\u590d\u5236\u7684\u4ee3\u7801\uff0c\u53ef\u4ee5\u53d1\u73b0 \u5728\u590d\u5236 OLE \u5bf9\u8c61\u65f6\uff0c\u5148\u8981\u8c03\u7528 ProgIDFromCLSID \u6765\u67e5\u8be2\u8fd9\u4e2a\u5bf9\u8c61\u7684 ProgID\u3002 \u5982\u679c\u4e00\u4e2a OLE \u5bf9\u8c61\u6ca1\u6709\u6ce8\u518c\uff0c\u90a3\u4e48 ProgIDFromCLSID \u4f1a\u8fd4\u56de\u5931\u8d25\uff0c\u4ece\u800c\u5bfc\u81f4\u590d\u5236\u9636\u6bb5\u5c31 \u5931\u8d25\u4e86\u3002 \u77e5\u9053\u4e86\u8fd9\u4e2a\u6d41\u7a0b\u5c31\u597d\u529e\u4e86\uff0c\u7ee7\u7eed HOOK\uff0c\u628a ProgIDFromCLSID \u52a0\u5230 HOOK \u8868\u5c31\u597d\u4e86\u3002 HOOK \u4e86\u8fd9\u4e2a\u51fd\u6570\u540e\u53d1\u73b0\u7c98\u8d34\u65f6\u80fd\u591f\u6267\u884c CoCreateInstance \u4e86\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5b9e\u4f8b\u5316 \u8fd9\u4e2a\u7b49\u5f85\u7c98\u8d34\u7684\u5bf9\u8c61\u4e86\uff0c\u4f46\u4e8b\u5b9e\u662f\u8fd8\u662f\u7c98\u8d34\u5931\u8d25\u4e86\uff0c\u56e0\u4e3a\u5728\u6267\u884c\u8fd9\u4e2a\u5bf9\u8c61\u7684 Load \u65b9\u6cd5\u524d \u8fd8\u6ca1\u6709\u8bbe\u7f6e ClientSite \u5bf9\u8c61\uff0c\u800c\u6211\u7684\u8fd9\u4e2a\u8868\u60c5\u5bf9\u8c61\u9700\u8981\u4ece\u8fd9\u4e2a ClintSite \u6765 QueryInterface \u51fa\u4e00\u4e2a\u81ea\u5df1\u5b9a\u4e49\u7684\u63a5\u53e3\uff0c\u6ca1\u6709\u8fd9\u4e2a\u63a5\u53e3\u5bf9\u8c61\u5c31\u6ca1\u6709\u529e\u6cd5\u521d\u59cb\u5316\u3002 \u4e3a\u4ec0\u4e48\u5462\uff1f\u4e3a\u4ec0\u4e48\u5462\uff1f \u5982\u679c\u6709 Windows \u7684\u539f\u4ee3\u7801\u67e5\u4e00\u4e0b\u5c31\u597d\u4e86\u3002 \u5bf9\u4e86\uff0c\u53ef\u4ee5\u770b\u770b Wine \u91cc OleLoad \u662f\u600e\u4e48\u505a\u7684\uff08\u901a\u8fc7\u8c03\u7528\u6808\u53ef\u4ee5\u77e5\u9053 Richedit \u91cc\u76f4\u63a5\u8c03 \u7528\u7684\u662f OleLoad)\u3002Wine \u662f\u4e00\u4e2a\u5728 Linux \u4e0a\u8fd0\u884c Windows \u7a0b\u5e8f\u7684\u5f00\u6e90\u6846\u67b6\uff0c\u91cc\u9762\u6709\u5404\u79cd Windows API \u7684\u5b9e\u73b0\uff0c\u867d\u7136\u548c Windows \u8fd8\u662f\u4e0d\u4e00\u6837\uff0c\u4f46\u5927\u4f53\u6d41\u7a0b\u5dee\u4e0d\u591a\u4e86\u3002 https://source.winehq.org/ \u8fd9\u4e2a\u7f51\u7ad9\u4e0d\u9519\uff0c\u60f3\u770b\u54ea\u4e2a API \u7684\u5b9e\u73b0\u641c\u7d22\u4e00\u4e0b\u5c31\u51fa\u6765\u3002 /*************************************************************************** *** * OleLoad [OLE32.@] */ HRESULT WINAPI OleLoad ( LPSTORAGE pStg , REFIID riid , LPOLECLIENTSITE pClientSite , LPVOID * ppvObj ) { IPersistStorage * persistStorage = NULL ; IUnknown * pUnk ; IOleObject * pOleObject = NULL ; STATSTG storageInfo ; HRESULT hres ; TRACE ( \"(%p, %s, %p, %p) \\n \" , pStg , debugstr_guid ( riid ), pClientSite , ppvObj ); * ppvObj = NULL ; /* * TODO, Conversion ... OleDoAutoConvert */ /* * Get the class ID for the object. */ hres = IStorage_Stat ( pStg , & storageInfo , STATFLAG_NONAME ); if ( FAILED ( hres )) return hres ; /* * Now, try and create the handler for the object */ hres = CoCreateInstance ( & storageInfo . clsid , NULL , CLSCTX_INPROC_HANDLER | CLSCTX_INPROC_SERVER , riid , ( void ** ) & pUnk ); /* * If that fails, as it will most times, load the default * OLE handler. */ if ( FAILED ( hres )) { hres = OleCreateDefaultHandler ( & storageInfo . clsid , NULL , riid , ( void ** ) & pUnk ); } /* * If we couldn't find a handler... this is bad. Abort the whole thing. */ if ( FAILED ( hres )) return hres ; if ( pClientSite ) { hres = IUnknown_QueryInterface ( pUnk , & IID_IOleObject , ( void ** ) & pOleObject ); if ( SUCCEEDED ( hres )) { DWORD dwStatus ; hres = IOleObject_GetMiscStatus ( pOleObject , DVASPECT_CONTENT , & dwStatus ); } } /* * Initialize the object with its IPersistStorage interface. */ hres = IUnknown_QueryInterface ( pUnk , & IID_IPersistStorage , ( void ** ) & persistStorage ); if ( SUCCEEDED ( hres )) { hres = IPersistStorage_Load ( persistStorage , pStg ); IPersistStorage_Release ( persistStorage ); persistStorage = NULL ; } if ( SUCCEEDED ( hres ) && pClientSite ) /* * Inform the new object of its client site. */ hres = IOleObject_SetClientSite ( pOleObject , pClientSite ); /* * Cleanup interfaces used internally */ if ( pOleObject ) IOleObject_Release ( pOleObject ); if ( SUCCEEDED ( hres )) { IOleLink * pOleLink ; HRESULT hres1 ; hres1 = IUnknown_QueryInterface ( pUnk , & IID_IOleLink , ( void ** ) & pOleLink ); if ( SUCCEEDED ( hres1 )) { FIXME ( \"handle OLE link \\n \" ); IOleLink_Release ( pOleLink ); } } if ( FAILED ( hres )) { IUnknown_Release ( pUnk ); pUnk = NULL ; } * ppvObj = pUnk ; return hres ; } \u4e0a\u9762\u662f Wine 1.9.4 \u91cc OleLoad \u7684\u6e90\u4ee3\u7801\u3002 \u53ef\u4ee5\u770b\u5230\u5728\u6267\u884c IPersistStorage_Load \u524d\u4f1a\u5148\u8c03\u7528 IOleObject_GetMiscStatus \u8fd9\u4e2a\u65b9 \u6cd5\uff0c\u7136\u800c\u4ece\u4ee3\u7801\u6765\u770b\u5b83\u5e76\u6ca1\u6709\u4ec0\u4e48\u7528\u554a\uff1f \u54e6\uff0c\u6211\u5dee\u70b9\u5fd8\u8bb0\u4e86\uff0c\u8fd9\u662f Wine\uff0c\u5e76\u4e0d\u662f\u771f\u6b63\u7684 Windows \u7684\u4ee3\u7801\u3002\u8d76\u7d27\u67e5\u4e00\u4e0b IOleObject_GetMiscStatus \u5e94\u8be5\u8fd4\u56de\u4ec0\u4e48\u3002 \u4e0d\u770b\u4e0d\u77e5\u9053\uff0c\u4e00\u770b\u5413\u4e00\u8df3\uff0c\u539f\u6765\u8fd9\u91cc\u6709\u4e00\u4e2a OLEMISC_SETCLIENTSITEFIRST \u8fd9\u4e2a\u6807\u5fd7\uff0c \u770b\u540d\u5b57\u5c31\u77e5\u9053\u6709\u8fd9\u4e2a\u6807\u5fd7\u65f6\uff0c\u4f1a\u5148\u8c03\u7528 SetClientSite \u518d\u8c03\u7528 Load\u3002 \u597d\u4e86\uff0c\u6539\u5199 OLE \u7684\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u4e0d\u53bb\u67e5\u6ce8\u518c\u8868\uff0c\u76f4\u63a5\u8fd4\u56de\u8fd9\u4e2a\u6807\u5fd7\u5c31\u597d\u4e86\u3002 \u5230\u8fd9\u91cc\uff0c\u4e00\u4e2a\u4e0d\u9700\u8981\u6ce8\u518c\u7684 OLE \u5bf9\u8c61\u5c31\u5b8c\u6210\u4e86\u3002 \u5199\u8fd9\u4e48\u591a\uff0c\u5e0c\u671b\u770b\u5230\u7684\u4eba\u80fd\u591f\u6709\u6240\u542f\u53d1.","title":"6.3 \u4e0d\u6ce8\u518c COM \u5728 Richedit \u4e2d\u4f7f OLE \u652f\u6301\u590d\u5236\u7c98\u8d34"},{"location":"Ask/3/#63-com-richedit-ole","text":"\u6b63\u5e38\u60c5\u51b5\u4e0b\u5728 Richedit \u4e2d\u4f7f\u7528 OLE\uff0c\u5982\u679c\u9700\u8981 OLE \u652f\u6301\u590d\u5236\u7c98\u8d34\uff0c\u90a3\u4e48\u8fd9\u4e2a OLE \u5bf9\u8c61\u5fc5 \u987b\u662f\u5df2\u7ecf\u6ce8\u518c\u7684 COM \u5bf9\u8c61\u3002 \u6ce8\u518c COM \u5f88\u7b80\u5355\uff0c\u5173\u952e\u95ee\u9898\u5728\u4e8e\u6ce8\u518c\u65f6\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u5982\u679c\u5e0c\u671b APP \u505a\u6210 \u7eff\u8272\u7248\u672c\u5c31\u4e0d\u597d\u4f7f\u4e86\u3002 \u4e3a\u4ec0\u4e48\u9700\u8981\u6ce8\u518c\u6210 COM\uff1f\u56e0\u4e3a\u5728\u7c98\u8d34\u65f6 Richedit \u9700\u8981\u80fd\u591f\u4ece COM \u5bf9\u8c61\u7684 GUID \u5b9e\u4f8b\u5316 \u51fa\u4f60\u7684 OLE \u5bf9\u8c61\u3002 \u4ece\u4e00\u4e2a COM \u7684 GUID \u521b\u5efa\u4e00\u4e2a COM \u5bf9\u8c61\uff0c\u5fc5\u7136\u9700\u8981\u901a\u8fc7 CoCreateInstance(Ex)\u8fd9\u4e2a\u7cfb \u7edf API\u3002\u90a3\u4e48\u6211\u4eec\u662f\u4e0d\u662f\u53ea\u8981 Hook \u5230\u8fd9\u4e2a API \u5c31\u53ef\u4ee5\u4e0d\u9700\u8981\u6ce8\u518c\u4e86\u5462\uff1f \u901a\u8fc7 Hook CoCreateInstance\uff0c\u6211\u4eec\u53d1\u73b0\u521b\u5efa\u5df2\u7ecf\u6ce8\u518c\u7684 COM \u786e\u5b9e\u4f1a\u5230 CoCreateInstance \u8fd9\u4e2a API \u91cc\u6765\u3002\u7136\u800c\u5728\u8bd5\u56fe\u7c98\u8d34\u672a\u6ce8\u518c\u7684 COM \u5bf9\u8c61\u65f6\uff0c\u786e\u5e76\u6ca1\u6709\u8d70 \u5230\u81ea\u5df1 Hook \u7684 CoCreateInstance\uff0c\u7c98\u8d34\u5e76\u6ca1\u6709\u6210\u529f\u3002 \u4e3a\u4ec0\u4e48\u5462\uff1f \u65e2\u7136\u662f\u7c98\u8d34\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u770b\u4e00\u4e0b\u526a\u8d34\u677f\u91cc\u6709\u4e9b\u4ec0\u4e48\u4e1c\u897f\uff0c\u968f\u4fbf\u627e\u4e00\u4e2a\u526a\u8d34\u677f\u67e5\u770b\u7684\u5de5\u5177\uff0c \u770b\u4e00\u4e0b\u91cc\u9762\u7684 RTF \u683c\u5f0f\u91cc\u6709\u4e9b\u4ec0\u4e48\u4e1c\u897f\u3002\u5f53\u590d\u5236\u7684\u662f\u6ce8\u518c\u7684 COM \u65f6\uff0cRTF \u91cc\u6709\u8fd9\u4e2a COM \u7684\u5b57\u7b26\u4e32 ID\uff0c\u800c\u5f53\u590d\u5236\u6ca1\u6709\u6ce8\u518c\u7684 COM \u65f6\uff0c\u526a\u8d34\u677f\u91cc\u6ca1\u6709\u8fd9\u4e9b\u4fe1\u606f\u3002 \u95ee\u9898\u51fa\u5728\u54ea\u5462\uff1f \u6709 Richedit \u7684\u539f\u4ee3\u7801\u5c31\u597d\u4e86\u3002 \u6b63\u597d\u6709\u4e00\u4efd Wince \u91cc\u7684 Richedit \u7684\u6e90\u4ee3\u7801\uff0c\u901a\u8fc7\u5206\u6790 Richedit \u7684\u590d\u5236\u7684\u4ee3\u7801\uff0c\u53ef\u4ee5\u53d1\u73b0 \u5728\u590d\u5236 OLE \u5bf9\u8c61\u65f6\uff0c\u5148\u8981\u8c03\u7528 ProgIDFromCLSID \u6765\u67e5\u8be2\u8fd9\u4e2a\u5bf9\u8c61\u7684 ProgID\u3002 \u5982\u679c\u4e00\u4e2a OLE \u5bf9\u8c61\u6ca1\u6709\u6ce8\u518c\uff0c\u90a3\u4e48 ProgIDFromCLSID \u4f1a\u8fd4\u56de\u5931\u8d25\uff0c\u4ece\u800c\u5bfc\u81f4\u590d\u5236\u9636\u6bb5\u5c31 \u5931\u8d25\u4e86\u3002 \u77e5\u9053\u4e86\u8fd9\u4e2a\u6d41\u7a0b\u5c31\u597d\u529e\u4e86\uff0c\u7ee7\u7eed HOOK\uff0c\u628a ProgIDFromCLSID \u52a0\u5230 HOOK \u8868\u5c31\u597d\u4e86\u3002 HOOK \u4e86\u8fd9\u4e2a\u51fd\u6570\u540e\u53d1\u73b0\u7c98\u8d34\u65f6\u80fd\u591f\u6267\u884c CoCreateInstance \u4e86\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5b9e\u4f8b\u5316 \u8fd9\u4e2a\u7b49\u5f85\u7c98\u8d34\u7684\u5bf9\u8c61\u4e86\uff0c\u4f46\u4e8b\u5b9e\u662f\u8fd8\u662f\u7c98\u8d34\u5931\u8d25\u4e86\uff0c\u56e0\u4e3a\u5728\u6267\u884c\u8fd9\u4e2a\u5bf9\u8c61\u7684 Load \u65b9\u6cd5\u524d \u8fd8\u6ca1\u6709\u8bbe\u7f6e ClientSite \u5bf9\u8c61\uff0c\u800c\u6211\u7684\u8fd9\u4e2a\u8868\u60c5\u5bf9\u8c61\u9700\u8981\u4ece\u8fd9\u4e2a ClintSite \u6765 QueryInterface \u51fa\u4e00\u4e2a\u81ea\u5df1\u5b9a\u4e49\u7684\u63a5\u53e3\uff0c\u6ca1\u6709\u8fd9\u4e2a\u63a5\u53e3\u5bf9\u8c61\u5c31\u6ca1\u6709\u529e\u6cd5\u521d\u59cb\u5316\u3002 \u4e3a\u4ec0\u4e48\u5462\uff1f\u4e3a\u4ec0\u4e48\u5462\uff1f \u5982\u679c\u6709 Windows \u7684\u539f\u4ee3\u7801\u67e5\u4e00\u4e0b\u5c31\u597d\u4e86\u3002 \u5bf9\u4e86\uff0c\u53ef\u4ee5\u770b\u770b Wine \u91cc OleLoad \u662f\u600e\u4e48\u505a\u7684\uff08\u901a\u8fc7\u8c03\u7528\u6808\u53ef\u4ee5\u77e5\u9053 Richedit \u91cc\u76f4\u63a5\u8c03 \u7528\u7684\u662f OleLoad)\u3002Wine \u662f\u4e00\u4e2a\u5728 Linux \u4e0a\u8fd0\u884c Windows \u7a0b\u5e8f\u7684\u5f00\u6e90\u6846\u67b6\uff0c\u91cc\u9762\u6709\u5404\u79cd Windows API \u7684\u5b9e\u73b0\uff0c\u867d\u7136\u548c Windows \u8fd8\u662f\u4e0d\u4e00\u6837\uff0c\u4f46\u5927\u4f53\u6d41\u7a0b\u5dee\u4e0d\u591a\u4e86\u3002 https://source.winehq.org/ \u8fd9\u4e2a\u7f51\u7ad9\u4e0d\u9519\uff0c\u60f3\u770b\u54ea\u4e2a API \u7684\u5b9e\u73b0\u641c\u7d22\u4e00\u4e0b\u5c31\u51fa\u6765\u3002 /*************************************************************************** *** * OleLoad [OLE32.@] */ HRESULT WINAPI OleLoad ( LPSTORAGE pStg , REFIID riid , LPOLECLIENTSITE pClientSite , LPVOID * ppvObj ) { IPersistStorage * persistStorage = NULL ; IUnknown * pUnk ; IOleObject * pOleObject = NULL ; STATSTG storageInfo ; HRESULT hres ; TRACE ( \"(%p, %s, %p, %p) \\n \" , pStg , debugstr_guid ( riid ), pClientSite , ppvObj ); * ppvObj = NULL ; /* * TODO, Conversion ... OleDoAutoConvert */ /* * Get the class ID for the object. */ hres = IStorage_Stat ( pStg , & storageInfo , STATFLAG_NONAME ); if ( FAILED ( hres )) return hres ; /* * Now, try and create the handler for the object */ hres = CoCreateInstance ( & storageInfo . clsid , NULL , CLSCTX_INPROC_HANDLER | CLSCTX_INPROC_SERVER , riid , ( void ** ) & pUnk ); /* * If that fails, as it will most times, load the default * OLE handler. */ if ( FAILED ( hres )) { hres = OleCreateDefaultHandler ( & storageInfo . clsid , NULL , riid , ( void ** ) & pUnk ); } /* * If we couldn't find a handler... this is bad. Abort the whole thing. */ if ( FAILED ( hres )) return hres ; if ( pClientSite ) { hres = IUnknown_QueryInterface ( pUnk , & IID_IOleObject , ( void ** ) & pOleObject ); if ( SUCCEEDED ( hres )) { DWORD dwStatus ; hres = IOleObject_GetMiscStatus ( pOleObject , DVASPECT_CONTENT , & dwStatus ); } } /* * Initialize the object with its IPersistStorage interface. */ hres = IUnknown_QueryInterface ( pUnk , & IID_IPersistStorage , ( void ** ) & persistStorage ); if ( SUCCEEDED ( hres )) { hres = IPersistStorage_Load ( persistStorage , pStg ); IPersistStorage_Release ( persistStorage ); persistStorage = NULL ; } if ( SUCCEEDED ( hres ) && pClientSite ) /* * Inform the new object of its client site. */ hres = IOleObject_SetClientSite ( pOleObject , pClientSite ); /* * Cleanup interfaces used internally */ if ( pOleObject ) IOleObject_Release ( pOleObject ); if ( SUCCEEDED ( hres )) { IOleLink * pOleLink ; HRESULT hres1 ; hres1 = IUnknown_QueryInterface ( pUnk , & IID_IOleLink , ( void ** ) & pOleLink ); if ( SUCCEEDED ( hres1 )) { FIXME ( \"handle OLE link \\n \" ); IOleLink_Release ( pOleLink ); } } if ( FAILED ( hres )) { IUnknown_Release ( pUnk ); pUnk = NULL ; } * ppvObj = pUnk ; return hres ; } \u4e0a\u9762\u662f Wine 1.9.4 \u91cc OleLoad \u7684\u6e90\u4ee3\u7801\u3002 \u53ef\u4ee5\u770b\u5230\u5728\u6267\u884c IPersistStorage_Load \u524d\u4f1a\u5148\u8c03\u7528 IOleObject_GetMiscStatus \u8fd9\u4e2a\u65b9 \u6cd5\uff0c\u7136\u800c\u4ece\u4ee3\u7801\u6765\u770b\u5b83\u5e76\u6ca1\u6709\u4ec0\u4e48\u7528\u554a\uff1f \u54e6\uff0c\u6211\u5dee\u70b9\u5fd8\u8bb0\u4e86\uff0c\u8fd9\u662f Wine\uff0c\u5e76\u4e0d\u662f\u771f\u6b63\u7684 Windows \u7684\u4ee3\u7801\u3002\u8d76\u7d27\u67e5\u4e00\u4e0b IOleObject_GetMiscStatus \u5e94\u8be5\u8fd4\u56de\u4ec0\u4e48\u3002 \u4e0d\u770b\u4e0d\u77e5\u9053\uff0c\u4e00\u770b\u5413\u4e00\u8df3\uff0c\u539f\u6765\u8fd9\u91cc\u6709\u4e00\u4e2a OLEMISC_SETCLIENTSITEFIRST \u8fd9\u4e2a\u6807\u5fd7\uff0c \u770b\u540d\u5b57\u5c31\u77e5\u9053\u6709\u8fd9\u4e2a\u6807\u5fd7\u65f6\uff0c\u4f1a\u5148\u8c03\u7528 SetClientSite \u518d\u8c03\u7528 Load\u3002 \u597d\u4e86\uff0c\u6539\u5199 OLE \u7684\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u4e0d\u53bb\u67e5\u6ce8\u518c\u8868\uff0c\u76f4\u63a5\u8fd4\u56de\u8fd9\u4e2a\u6807\u5fd7\u5c31\u597d\u4e86\u3002 \u5230\u8fd9\u91cc\uff0c\u4e00\u4e2a\u4e0d\u9700\u8981\u6ce8\u518c\u7684 OLE \u5bf9\u8c61\u5c31\u5b8c\u6210\u4e86\u3002 \u5199\u8fd9\u4e48\u591a\uff0c\u5e0c\u671b\u770b\u5230\u7684\u4eba\u80fd\u591f\u6709\u6240\u542f\u53d1.","title":"6.3 \u4e0d\u6ce8\u518c COM \u5728 Richedit \u4e2d\u4f7f OLE \u652f\u6301\u590d\u5236\u7c98\u8d34"},{"location":"Ask/Summary/","text":"6\u3001\u5e38\u89c1\u95ee\u9898 \u00b6 \u672c\u7ae0\u8282\u6536\u5f55\u4e86\u5728\u4f7f\u7528 SOUI \u754c\u9762\u5e93\u65f6\u5e38\u9047\u5230\u7684\u95ee\u9898\uff0c\u4e5f\u6b22\u8fce\u5927\u5bb6\u628a\u9047\u5230\u7684\u95ee\u9898\u53d1\u7ed9\u6211\u4eec\u3002 1\u3001\u7a97\u4f53\u3001\u9759\u6001\u6587\u672c\u63a7\u4ef6\u7684\u5b57\u4f53\u8bbe\u7f6e\uff1f \u5b57\u4f53\u989c\u8272\uff1aSwndStyle \u7c7b\u5c5e\u6027 colorText \u793a\u4f8b\uff1acolorText=\u201d#00ff00\u201d\u6216 colorText=\u201drgb(255,255,255)\u201d \u5b57\u4f53\uff1aSwndStyle \u7c7b\u5c5e\u6027 font \u793a\u4f8b\uff1afont=\u201d???\u201d \u5b57\u7b26\u4e32\u600e\u4e48\u586b\u5199\uff1f 2\u3001\u2026\u2026","title":"6\u3001\u5e38\u89c1\u95ee\u9898"},{"location":"Ask/Summary/#6","text":"\u672c\u7ae0\u8282\u6536\u5f55\u4e86\u5728\u4f7f\u7528 SOUI \u754c\u9762\u5e93\u65f6\u5e38\u9047\u5230\u7684\u95ee\u9898\uff0c\u4e5f\u6b22\u8fce\u5927\u5bb6\u628a\u9047\u5230\u7684\u95ee\u9898\u53d1\u7ed9\u6211\u4eec\u3002 1\u3001\u7a97\u4f53\u3001\u9759\u6001\u6587\u672c\u63a7\u4ef6\u7684\u5b57\u4f53\u8bbe\u7f6e\uff1f \u5b57\u4f53\u989c\u8272\uff1aSwndStyle \u7c7b\u5c5e\u6027 colorText \u793a\u4f8b\uff1acolorText=\u201d#00ff00\u201d\u6216 colorText=\u201drgb(255,255,255)\u201d \u5b57\u4f53\uff1aSwndStyle \u7c7b\u5c5e\u6027 font \u793a\u4f8b\uff1afont=\u201d???\u201d \u5b57\u7b26\u4e32\u600e\u4e48\u586b\u5199\uff1f 2\u3001\u2026\u2026","title":"6\u3001\u5e38\u89c1\u95ee\u9898"},{"location":"BuildSoUI/build/","text":"2\u3001SOUI \u7684\u7f16\u8bd1 \u00b6 2.1 \u83b7\u53d6 SOUI \u7684\u6e90\u4ee3\u7801 SOUI \u662f\u5f00\u6e90\u8f6f\u4ef6,\u53ef\u4ee5\u901a\u8fc7 git \u5ba2\u6237\u7aef\u83b7\u53d6\u7a33\u5b9a\u7248\u672c\uff1a https://github.com/setoutsoft/soui \u8fd9\u91cc\u4e3b\u8981\u5305\u542b\u4e24\u4e2a\u76ee\u5f55\uff1atrunk \u53ca third-part\u3002trunk \u76ee\u5f55\u4fdd\u5b58 SOUI \u9879\u76ee\u7684\u5168\u90e8\u4ee3\u7801\uff0c third-part \u4fdd\u5b58 soui \u7cfb\u7edf\u4f7f\u7528\u5230\u7684\u4e0d\u65b9\u4fbf\u653e\u5230 trunk \u7684\u7b2c\u4e09\u65b9\u5e93\uff0c\u76ee\u524d\u53ea\u6709\u4e00\u4e2a WKE(\u4e00 \u4e2a\u7cbe\u7b80\u7684 webkit)\u7684\u6e90\u4ee3\u7801\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\u53ea\u83b7\u53d6 trunk \u7684\u4ee3\u7801\u5c31\u884c\u3002 2.2 \u7f16\u8bd1 SOUI \u754c\u9762\u5e93 SOUI \u9879\u76ee\u91c7\u7528 QT \u7684 qmake \u7ba1\u7406\u9879\u76ee\u6587\u4ef6\uff0cqmake \u5df2\u7ecf\u4ece QT \u4e2d\u5206\u79bb\u51fa\u6765\uff0c\u4e0d\u9700\u8981\u4f60 \u7684\u673a\u5668\u4e0a\u5b89\u88c5 QT\u3002\uff08\u9879\u76ee\u4e2d\u4e5f\u5305\u542b\u4e86\u7f51\u53cb\u63d0\u4f9b\u7684 cmake \u7f16\u8bd1\u811a\u672c\uff09 \u5982\u679c\u4f60\u5728\u4f7f\u7528 vs2015\uff0c\u5efa\u8bae\u76f4\u63a5\u4f7f\u7528 build.bat \u6765\u7f16\u8bd1 SOUI \u5e93\u3002 \u9996\u5148\u8fd0\u884c\u201cvs2015 \u5f00\u53d1\u4eba\u5458\u547d\u4ee4\u63d0\u793a\u201d\uff0c\u5982\u679c\u63d0\u793a\u65e0\u6cd5\u627e\u5230\u8def\u5f84\u4e4b\u7c7b\u7684\u63d0\u793a\uff0c\u8bf7\u7528\u7ba1\u7406 \u5458\u6743\u9650\u8fd0\u884c\uff0c\u8fd9\u79cd\u60c5\u51b5\u5927\u90e8\u5206\u662f\u5728\u8fdc\u7a0b\u684c\u9762\u7f16\u8bd1 SOUI \u5e93\u65f6\u51fa\u73b0\u3002 \u4f7f\u7528\u201ccd /d \u201d\u547d\u4ee4\uff0c\u628a\u5f53\u524d\u8def\u5f84\uff0c\u5207\u6362\u81f3 SOUI \u9879\u76ee\u6587\u4ef6\u5939\uff0c\u8fd0\u884c build.bat \u6279\u5904\u7406\u3002 \u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u914d\u7f6e\u7f16\u8bd1\u9009\u9879\uff1b \u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u4f1a\u8be2\u95ee\u662f\u6253\u5f00 sln \u6587\u4ef6\u3001\u76f4\u63a5\u7f16\u8bd1\u3001\u6216\u8005\u9000\u51fa\u6279\u5904\u7406\u3002 \u53ef\u4ee5\u76f4\u63a5\u9009\u62e9\u76f4\u63a5\u7f16\u8bd1\uff0c\u7701\u5f97\u8fd8\u7528 vs2015 \u6253\u5f00 sln \u6587\u4ef6\u8fdb\u884c\u7f16\u8bd1\u3002 \u4e0d\u77e5\u9053 vs2015 \u7f16\u8bd1\u6bd4\u8f83\u4e25\u683c\uff0c\u8fd8\u662f\u4ec0\u4e48\u539f\u56e0\uff0c\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u51fa\u73b0\u5f88\u591a\u7684 waring\u3002 \u7b49\u5f85\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u4f1a\u63d0\u793a\u6210\u529f 35 \u4e2a\uff0c\u8fd9\u8bf4\u660e\u5df2\u7ecf\u6210\u529f\u7f16\u8bd1 SOUI \u754c\u9762\u5e93\u4e86\uff08\u5982\u4e0b\u56fe\uff09\uff1a ==================\u9644\u3001\u4f5c\u8005\u5fae\u535a\u63d0\u4f9b\u7684\u7f16\u8bd1\u6559\u7a0b================= \u5982\u679c\u4f60\u7684\u673a\u5668\u4e0a\u5b89\u88c5\u4e86 VS2008\uff0c\u53ef\u4ee5\u76f4\u63a5\u6253\u5f00 trunk \u7684\u6839\u76ee\u5f55\u4e0b\u7684 soui.08.sln \u6765\u7f16\u8bd1\uff0c \u8fd9\u4e2a\u9879\u76ee\u4e2d\u5404\u5de5\u7a0b\u7684\u7f16\u8bd1\u4f9d\u8d56\u5df2\u7ecf\u8bbe\u7f6e\u597d\uff0c\u76f4\u63a5 F7 \u5c31\u53ef\u4ee5\u5168\u90e8\u5b8c\u6210\u7f16\u8bd1\u3002 \u5982\u679c\u4f60\u7684\u673a\u5668\u5b89\u88c5\u7684\u662f\u5176\u5b83\u7248\u672c\uff08\u652f\u6301 vs2005-vs2015)\uff0c\u53ef\u4ee5\u91c7\u7528 trunk \u76ee\u5f55\u4e0b\u7684 make( ).bat \u6765\u751f\u6210\u5bf9\u5e94\u7248\u672c\u7684\u9879\u76ee\u6587\u4ef6\uff0c\u9879\u76ee\u6587\u4ef6\u751f\u6210\u6210\u529f\u540e\u4f1a\u5728\u6839\u76ee\u5f55\u751f\u6210\u4e00\u4e2a soui.sln\uff0c\u6253\u5f00\u8be5 sln \u5373\u53ef\u3002VS2010+\u7684\u7248\u672c\u9700\u8981\u5148\u751f\u6210 VS2010 \u7684\u9879\u76ee\u6587\u4ef6\uff0c\u518d\u7528 VS \u6253\u5f00\u5e76\u5347\u7ea7\u3002\u8981\u751f\u6210 vs2005\uff0c\u53ef\u4ee5\u624b\u52a8\u4fee\u6539 make( ).bat \u4e2d\u7684\u53c2\u6570\u3002 \u5982\u679c\u5b89\u88c5\u7684\u662f vs2008 \u6216\u8005 vs2010 \u8fd8\u53ef\u4ee5\u4f7f\u7528 buildAll_x86.bat \u6765\u751f\u6210\u9879\u76ee\u6587\u4ef6\u5e76\u4f7f\u7528 \u547d\u540d\u884c\u5b8c\u6210\u7f16\u8bd1\u3002 \u6253\u5f00 make(dll-win32-vs08).bat \u53ef\u4ee5\u770b\u5230\u91cc\u9762\u53ea\u6709\u4e24\u884c\u4ee3\u7801\uff1a call \"%VS90COMNTOOLS%....\\VC\\vcvarsall.bat\" x86 tools\\qmake -tp vc -r -spec .\\tools\\mkspecs\\win32-msvc2008 \"CONFIG += DLL_SOUI USING_MT CAN_DEBUG\" \u7b2c\u4e00\u884c\u901a\u8fc7 VS \u7684\u73af\u5883\u53d8\u91cf\u52a0\u8f7d VS \u7684 PATH \u4fe1\u606f\u3002 \u7b2c\u4e8c\u884c\u8c03\u7528 qmake \u751f\u6210\u9879\u76ee\u6587\u4ef6\uff1a -spec \u540e\u9762\u7684\u53c2\u6570\u6307\u5b9a\u751f\u6210\u7684\u9879\u76ee\u6587\u4ef6 VS \u7248\u672c (03,05,08,10)\uff0cCONFIG += ***\u7528\u6765\u63a7\u5236\u5982\u4f55\u751f\u6210\u9879\u76ee\u6587\u4ef6\u3002\u9879\u76ee\u6587\u4ef6\u652f\u6301 4 \u4e2a\u9884\u5b9a\u4e49\u53c2 \u6570\uff1a DLL_SOUI:\u4ee3\u8868\u5c06 SOUI \u6a21\u5757\u7f16\u8bd1\u751f\u6210\u4e00\u4e2a DLL\uff0c\u6ca1\u6709\u8be5\u53c2\u6570\u5219\u751f\u6210 LIB\uff1b USING_MT:\u4ee3\u8868\u4f7f\u7528 MT \u65b9\u5f0f\u8fde\u63a5 CRT\uff0c\u5426\u5219\u91c7\u7528 MD \u65b9\u5f0f\uff1b CAN_DEBUG:\u4e3a release \u7248\u672c\u751f\u6210\u8c03\u8bd5\u7b26\u53f7\uff1b USING_CLR:\u9879\u76ee\u63d0\u4f9b\u201c\u516c\u5171\u8bed\u8a00\u8fd0\u884c\u65f6\u201d\u652f\u6301\uff1b \u5982\u679c\u9700\u8981\u5176\u5b83\u914d\u7f6e\uff0c\u53ef\u4ee5\u624b\u52a8\u4fee\u6539 common.pri\u3002 SOUI\u63d0\u4f9b\u4e86\u591a\u79cd\u7f16\u8bd1\u65b9\u5f0f\u5305\u62ecqmake,cmake,nmake\u7b49\u7b49.\u6211\u4eec\u63a8\u8350\u4f7f\u7528qmake\u65b9\u5f0f\u751f\u6210\u7b26\u5408\u81ea\u5df1\u7684Visual Studio \u7248\u672c\u9879\u76ee\u5de5\u7a0b\u6587\u4ef6,\u5f53\u7136,\u5982\u679c\u4f60\u6709\u5174\u8da3\u4e5f\u53ef\u4ee5\u5c1d\u8bd5cmake\u4e0enmake\u4e24\u79cd\u65b9\u5f0f qmake(\u63a8\u8350) \u00b6 \u4f7f\u7528 git \u6458\u53d6\u4ee3\u7801\u540e,\u8fdb\u5165\u4ee3\u7801\u6839\u76ee\u5f55,\u53cc\u51fb\u8fd0\u884c\"build.bat\" 1.\u9009\u62e9\u7f16\u8bd1\u7248\u672c[1=x86;2=x64;3=x86+x64]: \u9009\u62e9\u9700\u8981\u7f16\u8bd1\u7684cpu\u67b6\u6784(eg:1\u5219\u8868\u793a\u751f\u6210win32\u7684\u53ef\u6267\u884c\u6587\u4ef6) 2.\u9009\u62e9\u5f00\u53d1\u73af\u5883[1=2008;2=2010;3=2012;4=2013;5=2015;6=2017;7=2005]: \u9009\u62e9\u5bf9\u5e94\u7684 Visual Studio \u7248\u672c(eg:1\u8868\u793a\u9009\u62e9\u4f7f\u7528 Visual Studio 2008)\u6ce8\u610fSOUI\u81f3\u5c11\u9700\u8981Visual Studio 2008 SP1\u53ca\u4ee5\u4e0a\u7684 Visual Studio \u7248\u672c 3.\u9009\u62e9SOUI\u7f16\u8bd1\u6a21\u5f0f[1=\u5168\u6a21\u5757DLL;2=\u5168\u6a21\u5757LIB;3=\u5185\u6838LIB,\u7ec4\u4ef6DLL(\u4e0d\u80fd\u4f7f\u7528LUA\u811a\u672c\u6a21\u5757)]: \u9009\u62e9\u751f\u6210\u5185\u6838\u7684\u6587\u4ef6\u65b9\u5f0f(eg:1\u8868\u793a\u6240\u751f\u6210\u7684\u5185\u6838\u6587\u4ef6\u53ca\u7ec4\u4ef6\u5747\u4e3adll) 4.\u9009\u62e9\u5b57\u7b26\u96c6[1=UNICODE;2=MBCS]: (\u63a8\u8350\u90091) 5.\u5c06WCHAR\u4f5c\u4e3a\u5185\u5efa\u7c7b\u578b[1=\u662f;2=\u5426]: (\u63a8\u8350\u90091) 6.\u9009\u62e9CRT\u94fe\u63a5\u6a21\u5f0f[1=\u9759\u6001\u94fe\u63a5(MT);2=\u52a8\u6001\u94fe\u63a5(MD)]: (\u6839\u636e\u81ea\u5927\u9879\u76ee\u9700\u6c42\u9009\u62e9) 7.\u662f\u5426\u4e3arelease\u7248\u672c\u751f\u6210\u8c03\u8bd5\u4fe1\u606f[1=\u751f\u6210;2=\u4e0d\u751f\u6210]: (\u6839\u636e\u81ea\u5927\u9879\u76ee\u9700\u6c42\u9009\u62e9) open[o], compile[c] \"soui.sln\" or quit(q) [o,c or q]? \u8f93\u5165\u82f1\u6587\u5b57\u6bcdo\u8868\u793a\u6253\u5f00\u5de5\u7a0b\u9879\u76ee,c\u8868\u793a\u76f4\u63a5\u7f16\u8bd1debug\u4e0erelease,q\u8868\u793a\u76f4\u63a5\u9000\u51fa\u5f53\u524d\u7a97\u53e3 nmake (\u76ee\u524d\u4ec5\u652f\u6301\u7f16\u8bd1\u6210dll\u5f62\u5f0f) \u00b6 \u6253\u5f00\u7f16\u8bd1\u5de5\u5177\u547d\u4ee4\u63a7\u5236\u53f0\u7a97\u53e3,\u8f93\u5165\"nmake\",\u9ed8\u8ba4\u751f\u6210 x86 release \u7684 soui \u5185\u6838\u4f9d\u8d56\u4e0e\u4e24\u4e2a\u6e32\u67d3\u7ec4\u4ef6(gdi\u5404skia) \u56fe\u7247\u89e3\u7801\u7ec4\u4ef6\u4e3a png \u8fd8\u6709 demo \u8fd0\u884c\u7a0b\u5e8f,CRT\u4e3a\u52a8\u6001\u94fe\u63a5 \u5176\u5b83\u989d\u5916\u7f16\u8bd1\u53c2\u6570\u5982\u4e0b: nmake TYPE=Debug \u8868\u793a\u751f\u6210 x86 debug \u6a21\u5f0f nmake ABI=x64 \u8868\u793a\u751f\u6210 x64 \u7684 release \u6a21\u5f0f,\u5982\u679c\u9700\u8981 debug \u6a21\u5f0f\u5728\u540e\u9762\u589e\u52a0 TYPE=Debug \u5373\u53ef nmake CRT=-MT \u8868\u793a\u9759\u6001\u94fe\u63a5CRT cmake \u00b6 \u4ececmake\u5b98\u7f51\u4e0b\u8f7dcmake\u7684\u6700\u65b0Release\u7248\u672c,\u8fd9\u91cc\u4ee5cmake-3.15.4-win64-x64.zip\u4e3e\u4f8b\u3002 \u5c06cmake-3.15.4-win64-x64.zip\u89e3\u538b\u540e\u8fd0\u884cbin\u76ee\u5f55\u4e0b\u7684cmake-gui.exe\u3002 \u9009\u62e9soui\u6e90\u7801\u76ee\u5f55\u548ccmake\u4e34\u65f6\u6587\u4ef6\u751f\u6210\u76ee\u5f55\uff0c\u70b9\u51fbConfigure\u3002 \u5f39\u51fa\u4e34\u65f6\u6587\u4ef6\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u662f\u5426\u521b\u5efa\uff1f\u9009\u62e9Yes\u3002 \u9009\u62e9\u9700\u8981\u751f\u6210\u7684VS\u7248\u672c(\u5982\u679c\u672a\u5b89\u88c5\u4f1a\u751f\u6210\u5931\u8d25,\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9)\u548c\u9700\u8981\u751f\u6210\u7684\u7f16\u8bd1\u7248\u672c(Win32\\x64)\uff0c\u70b9\u51fbFinish\u3002 \u6839\u636e\u9700\u8981\u9009\u62e9\u751f\u6210\u65b9\u5f0f\uff1a\u5185\u6838\u548c\u7ec4\u4ef6\u6a21\u5757\u7684(\u9759\u6001\u94fe\u63a5\u6216\u52a8\u6001\u94fe\u63a5)\uff1b\u662f\u5426\u4f7f\u7528CRT\uff1bUnicode\u6216\u591a\u5b57\u8282\uff1b\u70b9\u51fbGenerate\u5f00\u59cb\u751f\u6210\u3002 \u751f\u6210\u5b8c\u6bd5,\u663e\u793a\"Generating done\"\uff0c\u6b64\u65f6\u70b9\u51fbOpen Project\u6253\u5f00\u9879\u76ee(\u4e5f\u53ef\u4ee5\u53cc\u51fbcmake\u4e34\u65f6\u6587\u4ef6\u751f\u6210\u76ee\u5f55\u4e2d\u627e\u5230sln\u6587\u4ef6\u6253\u5f00) \u5728VS\u4e2d\u7f16\u8bd1\uff0c\u7f16\u8bd1\u5b8c\u6210\u540e,\u5728soui\u6e90\u7801\u7684bin\u76ee\u5f55\u4e0b\u53ef\u4ee5\u627e\u5230\u751f\u6210\u51fa\u6765\u7684dll(\u6216lib)\u548cexe\u3002","title":"2\u3001SOUI \u7684\u7f16\u8bd1"},{"location":"BuildSoUI/build/#2soui","text":"2.1 \u83b7\u53d6 SOUI \u7684\u6e90\u4ee3\u7801 SOUI \u662f\u5f00\u6e90\u8f6f\u4ef6,\u53ef\u4ee5\u901a\u8fc7 git \u5ba2\u6237\u7aef\u83b7\u53d6\u7a33\u5b9a\u7248\u672c\uff1a https://github.com/setoutsoft/soui \u8fd9\u91cc\u4e3b\u8981\u5305\u542b\u4e24\u4e2a\u76ee\u5f55\uff1atrunk \u53ca third-part\u3002trunk \u76ee\u5f55\u4fdd\u5b58 SOUI \u9879\u76ee\u7684\u5168\u90e8\u4ee3\u7801\uff0c third-part \u4fdd\u5b58 soui \u7cfb\u7edf\u4f7f\u7528\u5230\u7684\u4e0d\u65b9\u4fbf\u653e\u5230 trunk \u7684\u7b2c\u4e09\u65b9\u5e93\uff0c\u76ee\u524d\u53ea\u6709\u4e00\u4e2a WKE(\u4e00 \u4e2a\u7cbe\u7b80\u7684 webkit)\u7684\u6e90\u4ee3\u7801\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\u53ea\u83b7\u53d6 trunk \u7684\u4ee3\u7801\u5c31\u884c\u3002 2.2 \u7f16\u8bd1 SOUI \u754c\u9762\u5e93 SOUI \u9879\u76ee\u91c7\u7528 QT \u7684 qmake \u7ba1\u7406\u9879\u76ee\u6587\u4ef6\uff0cqmake \u5df2\u7ecf\u4ece QT \u4e2d\u5206\u79bb\u51fa\u6765\uff0c\u4e0d\u9700\u8981\u4f60 \u7684\u673a\u5668\u4e0a\u5b89\u88c5 QT\u3002\uff08\u9879\u76ee\u4e2d\u4e5f\u5305\u542b\u4e86\u7f51\u53cb\u63d0\u4f9b\u7684 cmake \u7f16\u8bd1\u811a\u672c\uff09 \u5982\u679c\u4f60\u5728\u4f7f\u7528 vs2015\uff0c\u5efa\u8bae\u76f4\u63a5\u4f7f\u7528 build.bat \u6765\u7f16\u8bd1 SOUI \u5e93\u3002 \u9996\u5148\u8fd0\u884c\u201cvs2015 \u5f00\u53d1\u4eba\u5458\u547d\u4ee4\u63d0\u793a\u201d\uff0c\u5982\u679c\u63d0\u793a\u65e0\u6cd5\u627e\u5230\u8def\u5f84\u4e4b\u7c7b\u7684\u63d0\u793a\uff0c\u8bf7\u7528\u7ba1\u7406 \u5458\u6743\u9650\u8fd0\u884c\uff0c\u8fd9\u79cd\u60c5\u51b5\u5927\u90e8\u5206\u662f\u5728\u8fdc\u7a0b\u684c\u9762\u7f16\u8bd1 SOUI \u5e93\u65f6\u51fa\u73b0\u3002 \u4f7f\u7528\u201ccd /d \u201d\u547d\u4ee4\uff0c\u628a\u5f53\u524d\u8def\u5f84\uff0c\u5207\u6362\u81f3 SOUI \u9879\u76ee\u6587\u4ef6\u5939\uff0c\u8fd0\u884c build.bat \u6279\u5904\u7406\u3002 \u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u914d\u7f6e\u7f16\u8bd1\u9009\u9879\uff1b \u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u4f1a\u8be2\u95ee\u662f\u6253\u5f00 sln \u6587\u4ef6\u3001\u76f4\u63a5\u7f16\u8bd1\u3001\u6216\u8005\u9000\u51fa\u6279\u5904\u7406\u3002 \u53ef\u4ee5\u76f4\u63a5\u9009\u62e9\u76f4\u63a5\u7f16\u8bd1\uff0c\u7701\u5f97\u8fd8\u7528 vs2015 \u6253\u5f00 sln \u6587\u4ef6\u8fdb\u884c\u7f16\u8bd1\u3002 \u4e0d\u77e5\u9053 vs2015 \u7f16\u8bd1\u6bd4\u8f83\u4e25\u683c\uff0c\u8fd8\u662f\u4ec0\u4e48\u539f\u56e0\uff0c\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u51fa\u73b0\u5f88\u591a\u7684 waring\u3002 \u7b49\u5f85\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u4f1a\u63d0\u793a\u6210\u529f 35 \u4e2a\uff0c\u8fd9\u8bf4\u660e\u5df2\u7ecf\u6210\u529f\u7f16\u8bd1 SOUI \u754c\u9762\u5e93\u4e86\uff08\u5982\u4e0b\u56fe\uff09\uff1a ==================\u9644\u3001\u4f5c\u8005\u5fae\u535a\u63d0\u4f9b\u7684\u7f16\u8bd1\u6559\u7a0b================= \u5982\u679c\u4f60\u7684\u673a\u5668\u4e0a\u5b89\u88c5\u4e86 VS2008\uff0c\u53ef\u4ee5\u76f4\u63a5\u6253\u5f00 trunk \u7684\u6839\u76ee\u5f55\u4e0b\u7684 soui.08.sln \u6765\u7f16\u8bd1\uff0c \u8fd9\u4e2a\u9879\u76ee\u4e2d\u5404\u5de5\u7a0b\u7684\u7f16\u8bd1\u4f9d\u8d56\u5df2\u7ecf\u8bbe\u7f6e\u597d\uff0c\u76f4\u63a5 F7 \u5c31\u53ef\u4ee5\u5168\u90e8\u5b8c\u6210\u7f16\u8bd1\u3002 \u5982\u679c\u4f60\u7684\u673a\u5668\u5b89\u88c5\u7684\u662f\u5176\u5b83\u7248\u672c\uff08\u652f\u6301 vs2005-vs2015)\uff0c\u53ef\u4ee5\u91c7\u7528 trunk \u76ee\u5f55\u4e0b\u7684 make( ).bat \u6765\u751f\u6210\u5bf9\u5e94\u7248\u672c\u7684\u9879\u76ee\u6587\u4ef6\uff0c\u9879\u76ee\u6587\u4ef6\u751f\u6210\u6210\u529f\u540e\u4f1a\u5728\u6839\u76ee\u5f55\u751f\u6210\u4e00\u4e2a soui.sln\uff0c\u6253\u5f00\u8be5 sln \u5373\u53ef\u3002VS2010+\u7684\u7248\u672c\u9700\u8981\u5148\u751f\u6210 VS2010 \u7684\u9879\u76ee\u6587\u4ef6\uff0c\u518d\u7528 VS \u6253\u5f00\u5e76\u5347\u7ea7\u3002\u8981\u751f\u6210 vs2005\uff0c\u53ef\u4ee5\u624b\u52a8\u4fee\u6539 make( ).bat \u4e2d\u7684\u53c2\u6570\u3002 \u5982\u679c\u5b89\u88c5\u7684\u662f vs2008 \u6216\u8005 vs2010 \u8fd8\u53ef\u4ee5\u4f7f\u7528 buildAll_x86.bat \u6765\u751f\u6210\u9879\u76ee\u6587\u4ef6\u5e76\u4f7f\u7528 \u547d\u540d\u884c\u5b8c\u6210\u7f16\u8bd1\u3002 \u6253\u5f00 make(dll-win32-vs08).bat \u53ef\u4ee5\u770b\u5230\u91cc\u9762\u53ea\u6709\u4e24\u884c\u4ee3\u7801\uff1a call \"%VS90COMNTOOLS%....\\VC\\vcvarsall.bat\" x86 tools\\qmake -tp vc -r -spec .\\tools\\mkspecs\\win32-msvc2008 \"CONFIG += DLL_SOUI USING_MT CAN_DEBUG\" \u7b2c\u4e00\u884c\u901a\u8fc7 VS \u7684\u73af\u5883\u53d8\u91cf\u52a0\u8f7d VS \u7684 PATH \u4fe1\u606f\u3002 \u7b2c\u4e8c\u884c\u8c03\u7528 qmake \u751f\u6210\u9879\u76ee\u6587\u4ef6\uff1a -spec \u540e\u9762\u7684\u53c2\u6570\u6307\u5b9a\u751f\u6210\u7684\u9879\u76ee\u6587\u4ef6 VS \u7248\u672c (03,05,08,10)\uff0cCONFIG += ***\u7528\u6765\u63a7\u5236\u5982\u4f55\u751f\u6210\u9879\u76ee\u6587\u4ef6\u3002\u9879\u76ee\u6587\u4ef6\u652f\u6301 4 \u4e2a\u9884\u5b9a\u4e49\u53c2 \u6570\uff1a DLL_SOUI:\u4ee3\u8868\u5c06 SOUI \u6a21\u5757\u7f16\u8bd1\u751f\u6210\u4e00\u4e2a DLL\uff0c\u6ca1\u6709\u8be5\u53c2\u6570\u5219\u751f\u6210 LIB\uff1b USING_MT:\u4ee3\u8868\u4f7f\u7528 MT \u65b9\u5f0f\u8fde\u63a5 CRT\uff0c\u5426\u5219\u91c7\u7528 MD \u65b9\u5f0f\uff1b CAN_DEBUG:\u4e3a release \u7248\u672c\u751f\u6210\u8c03\u8bd5\u7b26\u53f7\uff1b USING_CLR:\u9879\u76ee\u63d0\u4f9b\u201c\u516c\u5171\u8bed\u8a00\u8fd0\u884c\u65f6\u201d\u652f\u6301\uff1b \u5982\u679c\u9700\u8981\u5176\u5b83\u914d\u7f6e\uff0c\u53ef\u4ee5\u624b\u52a8\u4fee\u6539 common.pri\u3002 SOUI\u63d0\u4f9b\u4e86\u591a\u79cd\u7f16\u8bd1\u65b9\u5f0f\u5305\u62ecqmake,cmake,nmake\u7b49\u7b49.\u6211\u4eec\u63a8\u8350\u4f7f\u7528qmake\u65b9\u5f0f\u751f\u6210\u7b26\u5408\u81ea\u5df1\u7684Visual Studio \u7248\u672c\u9879\u76ee\u5de5\u7a0b\u6587\u4ef6,\u5f53\u7136,\u5982\u679c\u4f60\u6709\u5174\u8da3\u4e5f\u53ef\u4ee5\u5c1d\u8bd5cmake\u4e0enmake\u4e24\u79cd\u65b9\u5f0f","title":"2\u3001SOUI \u7684\u7f16\u8bd1"},{"location":"BuildSoUI/build/#qmake","text":"\u4f7f\u7528 git \u6458\u53d6\u4ee3\u7801\u540e,\u8fdb\u5165\u4ee3\u7801\u6839\u76ee\u5f55,\u53cc\u51fb\u8fd0\u884c\"build.bat\" 1.\u9009\u62e9\u7f16\u8bd1\u7248\u672c[1=x86;2=x64;3=x86+x64]: \u9009\u62e9\u9700\u8981\u7f16\u8bd1\u7684cpu\u67b6\u6784(eg:1\u5219\u8868\u793a\u751f\u6210win32\u7684\u53ef\u6267\u884c\u6587\u4ef6) 2.\u9009\u62e9\u5f00\u53d1\u73af\u5883[1=2008;2=2010;3=2012;4=2013;5=2015;6=2017;7=2005]: \u9009\u62e9\u5bf9\u5e94\u7684 Visual Studio \u7248\u672c(eg:1\u8868\u793a\u9009\u62e9\u4f7f\u7528 Visual Studio 2008)\u6ce8\u610fSOUI\u81f3\u5c11\u9700\u8981Visual Studio 2008 SP1\u53ca\u4ee5\u4e0a\u7684 Visual Studio \u7248\u672c 3.\u9009\u62e9SOUI\u7f16\u8bd1\u6a21\u5f0f[1=\u5168\u6a21\u5757DLL;2=\u5168\u6a21\u5757LIB;3=\u5185\u6838LIB,\u7ec4\u4ef6DLL(\u4e0d\u80fd\u4f7f\u7528LUA\u811a\u672c\u6a21\u5757)]: \u9009\u62e9\u751f\u6210\u5185\u6838\u7684\u6587\u4ef6\u65b9\u5f0f(eg:1\u8868\u793a\u6240\u751f\u6210\u7684\u5185\u6838\u6587\u4ef6\u53ca\u7ec4\u4ef6\u5747\u4e3adll) 4.\u9009\u62e9\u5b57\u7b26\u96c6[1=UNICODE;2=MBCS]: (\u63a8\u8350\u90091) 5.\u5c06WCHAR\u4f5c\u4e3a\u5185\u5efa\u7c7b\u578b[1=\u662f;2=\u5426]: (\u63a8\u8350\u90091) 6.\u9009\u62e9CRT\u94fe\u63a5\u6a21\u5f0f[1=\u9759\u6001\u94fe\u63a5(MT);2=\u52a8\u6001\u94fe\u63a5(MD)]: (\u6839\u636e\u81ea\u5927\u9879\u76ee\u9700\u6c42\u9009\u62e9) 7.\u662f\u5426\u4e3arelease\u7248\u672c\u751f\u6210\u8c03\u8bd5\u4fe1\u606f[1=\u751f\u6210;2=\u4e0d\u751f\u6210]: (\u6839\u636e\u81ea\u5927\u9879\u76ee\u9700\u6c42\u9009\u62e9) open[o], compile[c] \"soui.sln\" or quit(q) [o,c or q]? \u8f93\u5165\u82f1\u6587\u5b57\u6bcdo\u8868\u793a\u6253\u5f00\u5de5\u7a0b\u9879\u76ee,c\u8868\u793a\u76f4\u63a5\u7f16\u8bd1debug\u4e0erelease,q\u8868\u793a\u76f4\u63a5\u9000\u51fa\u5f53\u524d\u7a97\u53e3","title":"qmake(\u63a8\u8350)"},{"location":"BuildSoUI/build/#nmakedll","text":"\u6253\u5f00\u7f16\u8bd1\u5de5\u5177\u547d\u4ee4\u63a7\u5236\u53f0\u7a97\u53e3,\u8f93\u5165\"nmake\",\u9ed8\u8ba4\u751f\u6210 x86 release \u7684 soui \u5185\u6838\u4f9d\u8d56\u4e0e\u4e24\u4e2a\u6e32\u67d3\u7ec4\u4ef6(gdi\u5404skia) \u56fe\u7247\u89e3\u7801\u7ec4\u4ef6\u4e3a png \u8fd8\u6709 demo \u8fd0\u884c\u7a0b\u5e8f,CRT\u4e3a\u52a8\u6001\u94fe\u63a5 \u5176\u5b83\u989d\u5916\u7f16\u8bd1\u53c2\u6570\u5982\u4e0b: nmake TYPE=Debug \u8868\u793a\u751f\u6210 x86 debug \u6a21\u5f0f nmake ABI=x64 \u8868\u793a\u751f\u6210 x64 \u7684 release \u6a21\u5f0f,\u5982\u679c\u9700\u8981 debug \u6a21\u5f0f\u5728\u540e\u9762\u589e\u52a0 TYPE=Debug \u5373\u53ef nmake CRT=-MT \u8868\u793a\u9759\u6001\u94fe\u63a5CRT","title":"nmake(\u76ee\u524d\u4ec5\u652f\u6301\u7f16\u8bd1\u6210dll\u5f62\u5f0f)"},{"location":"BuildSoUI/build/#cmake","text":"\u4ececmake\u5b98\u7f51\u4e0b\u8f7dcmake\u7684\u6700\u65b0Release\u7248\u672c,\u8fd9\u91cc\u4ee5cmake-3.15.4-win64-x64.zip\u4e3e\u4f8b\u3002 \u5c06cmake-3.15.4-win64-x64.zip\u89e3\u538b\u540e\u8fd0\u884cbin\u76ee\u5f55\u4e0b\u7684cmake-gui.exe\u3002 \u9009\u62e9soui\u6e90\u7801\u76ee\u5f55\u548ccmake\u4e34\u65f6\u6587\u4ef6\u751f\u6210\u76ee\u5f55\uff0c\u70b9\u51fbConfigure\u3002 \u5f39\u51fa\u4e34\u65f6\u6587\u4ef6\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u662f\u5426\u521b\u5efa\uff1f\u9009\u62e9Yes\u3002 \u9009\u62e9\u9700\u8981\u751f\u6210\u7684VS\u7248\u672c(\u5982\u679c\u672a\u5b89\u88c5\u4f1a\u751f\u6210\u5931\u8d25,\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9)\u548c\u9700\u8981\u751f\u6210\u7684\u7f16\u8bd1\u7248\u672c(Win32\\x64)\uff0c\u70b9\u51fbFinish\u3002 \u6839\u636e\u9700\u8981\u9009\u62e9\u751f\u6210\u65b9\u5f0f\uff1a\u5185\u6838\u548c\u7ec4\u4ef6\u6a21\u5757\u7684(\u9759\u6001\u94fe\u63a5\u6216\u52a8\u6001\u94fe\u63a5)\uff1b\u662f\u5426\u4f7f\u7528CRT\uff1bUnicode\u6216\u591a\u5b57\u8282\uff1b\u70b9\u51fbGenerate\u5f00\u59cb\u751f\u6210\u3002 \u751f\u6210\u5b8c\u6bd5,\u663e\u793a\"Generating done\"\uff0c\u6b64\u65f6\u70b9\u51fbOpen Project\u6253\u5f00\u9879\u76ee(\u4e5f\u53ef\u4ee5\u53cc\u51fbcmake\u4e34\u65f6\u6587\u4ef6\u751f\u6210\u76ee\u5f55\u4e2d\u627e\u5230sln\u6587\u4ef6\u6253\u5f00) \u5728VS\u4e2d\u7f16\u8bd1\uff0c\u7f16\u8bd1\u5b8c\u6210\u540e,\u5728soui\u6e90\u7801\u7684bin\u76ee\u5f55\u4e0b\u53ef\u4ee5\u627e\u5230\u751f\u6210\u51fa\u6765\u7684dll(\u6216lib)\u548cexe\u3002","title":"cmake"},{"location":"Control/51/","text":"5.1 SWindow \u7c7b \u00b6 \u7c7b\u540d\uff1aSWindow \u63a7\u4ef6\u540d\uff1awindow \u57fa\u7c7b\uff1aSObject\u3001SMsgHandleState\u3001TObjRefImpl2 \u8bf4\u660e\uff1a\u5927\u591a\u6570\u754c\u9762\u63a7\u4ef6\u672c\u8d28\u4e0a\u90fd\u662f\u7a97\u53e3\uff0c\u8be5\u7c7b\u662f\u5927\u90e8\u5206\u754c\u9762\u63a7\u4ef6\u7684\u57fa\u7c7b\uff1b\u7edd\u5927\u90e8\u5206\u63a7\u4ef6\u90fd \u62e5\u6709\u8be5\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e id \u6570\u5b57 \u7a97\u53e3 ID name \u5b57\u7b26\u4e32 \u7a97\u53e3\u540d\u79f0 skin \u5b57\u7b26\u4e32 \u7a97\u53e3\u7ed8\u5236\u80cc\u666f\u5f15\u7528\u7684 ISkinObj \u5bf9\u8c61\u540d\u79f0 ncskin \u5b57\u7b26\u4e32 \u7a97\u53e3\u7ed8\u5236\u975e\u5ba2\u6237\u533a\u8fb9\u6846\u65f6\u5f15\u7528\u7684 ISkinObj \u5bf9\u8c61\u540d\u79f0 class \u5b57\u7b26\u4e32 \u7a97\u53e3\u7684\u5c5e\u6027\u96c6\u5408(WndStyle)\u7684\u540d\u79f0 data \u7528\u6237\u6570\u636e enable 0 1 visible 0 1 show 0 1 pos \u8d1f\u6570, ,[,],%,@ cache 0 1 display 0 1 \u663e\u793a\uff080--\u9690\u85cf\u4e0d\u5360\u4f4d 1--\u9690\u85cf\u5360\u4f4d\uff08\u9ed8\u8ba4\uff09\uff09 tip \u5b57\u7b26\u4e32 \u63d0\u793a\u6846 msgTransparent 0 1 \u6d88\u606f\u7a7f\u900f\uff080--\u63a5\u6536\u9f20\u6807\u952e\u76d8\u6d88\u606f\uff08\u9ed8\u8ba4\uff09 1--\u4e0d\u63a5\u6536\uff09 sep \u6b63\u6574\u6570 \u7a97\u53e3\u9ed8\u8ba4\u95f4\u8ddd maxWidth \u6570\u5b57 \u7a97\u53e3\u6700\u5927\u5bbd\u5ea6 clipClient 0 1 \u662f\u5426\u5728\u7ed8\u5236\u7a97\u53e3\u65f6\u9650\u5236\u5185\u5bb9\u53ea\u7ed8\u5236\u5728\u5ba2\u6237\u533a \uff080--\u4e0d\u526a\u88c1\uff08\u9ed8\u8ba4\uff09 1--\u526a\u88c1\uff09 focusable 0 1 \u7a97\u53e3\u662f\u5426\u63a5\u53d7\u7126\u70b9\uff080--\u4e0d\u63a5\u53d7 1--\u63a5\u53d7\uff08\u9ed8\u8ba4\uff09\uff09 pos2type leftTop\uff0c center\uff0c rightTop\uff0c leftBottom\uff0c rightBottom \u5f53 pos \u5c5e\u6027\u53ea\u6307\u5b9a\u4e86\u4e24\u4e2a\u503c\u65f6\uff0c\u8fd9\u4e24\u4e2a\u503c\u7684\u610f\u4e49 \u3010\u8be5\u5c5e\u6027\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u5df2\u5f03\u7528\u3011 alpha [0-255] \u7ed8\u5236\u7a97\u53e3\u7684\u900f\u660e\u5ea6 \u51fd\u6570\uff1a","title":"5.1 SWindow \u7c7b"},{"location":"Control/51/#51-swindow","text":"\u7c7b\u540d\uff1aSWindow \u63a7\u4ef6\u540d\uff1awindow \u57fa\u7c7b\uff1aSObject\u3001SMsgHandleState\u3001TObjRefImpl2 \u8bf4\u660e\uff1a\u5927\u591a\u6570\u754c\u9762\u63a7\u4ef6\u672c\u8d28\u4e0a\u90fd\u662f\u7a97\u53e3\uff0c\u8be5\u7c7b\u662f\u5927\u90e8\u5206\u754c\u9762\u63a7\u4ef6\u7684\u57fa\u7c7b\uff1b\u7edd\u5927\u90e8\u5206\u63a7\u4ef6\u90fd \u62e5\u6709\u8be5\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e id \u6570\u5b57 \u7a97\u53e3 ID name \u5b57\u7b26\u4e32 \u7a97\u53e3\u540d\u79f0 skin \u5b57\u7b26\u4e32 \u7a97\u53e3\u7ed8\u5236\u80cc\u666f\u5f15\u7528\u7684 ISkinObj \u5bf9\u8c61\u540d\u79f0 ncskin \u5b57\u7b26\u4e32 \u7a97\u53e3\u7ed8\u5236\u975e\u5ba2\u6237\u533a\u8fb9\u6846\u65f6\u5f15\u7528\u7684 ISkinObj \u5bf9\u8c61\u540d\u79f0 class \u5b57\u7b26\u4e32 \u7a97\u53e3\u7684\u5c5e\u6027\u96c6\u5408(WndStyle)\u7684\u540d\u79f0 data \u7528\u6237\u6570\u636e enable 0 1 visible 0 1 show 0 1 pos \u8d1f\u6570, ,[,],%,@ cache 0 1 display 0 1 \u663e\u793a\uff080--\u9690\u85cf\u4e0d\u5360\u4f4d 1--\u9690\u85cf\u5360\u4f4d\uff08\u9ed8\u8ba4\uff09\uff09 tip \u5b57\u7b26\u4e32 \u63d0\u793a\u6846 msgTransparent 0 1 \u6d88\u606f\u7a7f\u900f\uff080--\u63a5\u6536\u9f20\u6807\u952e\u76d8\u6d88\u606f\uff08\u9ed8\u8ba4\uff09 1--\u4e0d\u63a5\u6536\uff09 sep \u6b63\u6574\u6570 \u7a97\u53e3\u9ed8\u8ba4\u95f4\u8ddd maxWidth \u6570\u5b57 \u7a97\u53e3\u6700\u5927\u5bbd\u5ea6 clipClient 0 1 \u662f\u5426\u5728\u7ed8\u5236\u7a97\u53e3\u65f6\u9650\u5236\u5185\u5bb9\u53ea\u7ed8\u5236\u5728\u5ba2\u6237\u533a \uff080--\u4e0d\u526a\u88c1\uff08\u9ed8\u8ba4\uff09 1--\u526a\u88c1\uff09 focusable 0 1 \u7a97\u53e3\u662f\u5426\u63a5\u53d7\u7126\u70b9\uff080--\u4e0d\u63a5\u53d7 1--\u63a5\u53d7\uff08\u9ed8\u8ba4\uff09\uff09 pos2type leftTop\uff0c center\uff0c rightTop\uff0c leftBottom\uff0c rightBottom \u5f53 pos \u5c5e\u6027\u53ea\u6307\u5b9a\u4e86\u4e24\u4e2a\u503c\u65f6\uff0c\u8fd9\u4e24\u4e2a\u503c\u7684\u610f\u4e49 \u3010\u8be5\u5c5e\u6027\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u5df2\u5f03\u7528\u3011 alpha [0-255] \u7ed8\u5236\u7a97\u53e3\u7684\u900f\u660e\u5ea6 \u51fd\u6570\uff1a","title":"5.1 SWindow \u7c7b"},{"location":"Control/510/","text":"5.10 \u590d\u9009\u6846\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSCheckBox \u63a7\u4ef6\u540d\uff1acheck \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u590d\u9009\u6846\u63a7\u4ef6\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u9ed8\u8ba4\u76ae\u80a4 focusSkin \u5b57\u7b26\u4e32 \u7126\u70b9\u76ae\u80a4 checked 0|1 \u662f\u5426\u9009\u4e2d\uff080--\u4e0d\u9009\u4e2d 1--\u9009\u4e2d\uff09","title":"5.10 \u590d\u9009\u6846\u63a7\u4ef6"},{"location":"Control/510/#510","text":"\u7c7b\u540d\uff1aSCheckBox \u63a7\u4ef6\u540d\uff1acheck \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u590d\u9009\u6846\u63a7\u4ef6\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u9ed8\u8ba4\u76ae\u80a4 focusSkin \u5b57\u7b26\u4e32 \u7126\u70b9\u76ae\u80a4 checked 0|1 \u662f\u5426\u9009\u4e2d\uff080--\u4e0d\u9009\u4e2d 1--\u9009\u4e2d\uff09","title":"5.10 \u590d\u9009\u6846\u63a7\u4ef6"},{"location":"Control/511/","text":"5.11 \u56fe\u6807\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSIconWnd \u63a7\u4ef6\u540d\uff1aicon \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u590d\u9009\u6846\u63a7\u4ef6\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e src \u5b57\u7b26\u4e32 \u6307\u5b9a icon \u56fe\u6807\uff08iconname:size\uff09","title":"5.11 \u56fe\u6807\u63a7\u4ef6"},{"location":"Control/511/#511","text":"\u7c7b\u540d\uff1aSIconWnd \u63a7\u4ef6\u540d\uff1aicon \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u590d\u9009\u6846\u63a7\u4ef6\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e src \u5b57\u7b26\u4e32 \u6307\u5b9a icon \u56fe\u6807\uff08iconname:size\uff09","title":"5.11 \u56fe\u6807\u63a7\u4ef6"},{"location":"Control/512/","text":"5.12 \u5355\u9009\u6846\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSRadioBox \u63a7\u4ef6\u540d\uff1aradio \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u590d\u9009\u6846\u63a7\u4ef6\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u9ed8\u8ba4\u76ae\u80a4 focusSkin \u5b57\u7b26\u4e32 \u7126\u70b9\u76ae\u80a4 checked 0|1 \u662f\u5426\u9009\u4e2d\uff080--\u4e0d\u9009\u4e2d 1--\u9009\u4e2d\uff09","title":"5.12 \u5355\u9009\u6846\u63a7\u4ef6"},{"location":"Control/512/#512","text":"\u7c7b\u540d\uff1aSRadioBox \u63a7\u4ef6\u540d\uff1aradio \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u590d\u9009\u6846\u63a7\u4ef6\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u9ed8\u8ba4\u76ae\u80a4 focusSkin \u5b57\u7b26\u4e32 \u7126\u70b9\u76ae\u80a4 checked 0|1 \u662f\u5426\u9009\u4e2d\uff080--\u4e0d\u9009\u4e2d 1--\u9009\u4e2d\uff09","title":"5.12 \u5355\u9009\u6846\u63a7\u4ef6"},{"location":"Control/513/","text":"5.13 Toggle \u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSToggle \u63a7\u4ef6\u540d\uff1atoggle \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1aToggle \u63a7\u4ef6\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 Toggled","title":"5.13 Toggle \u63a7\u4ef6"},{"location":"Control/513/#513-toggle","text":"\u7c7b\u540d\uff1aSToggle \u63a7\u4ef6\u540d\uff1atoggle \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1aToggle \u63a7\u4ef6\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 Toggled","title":"5.13 Toggle \u63a7\u4ef6"},{"location":"Control/514/","text":"5.14 \u7ec4\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSGroup \u63a7\u4ef6\u540d\uff1agroup \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u7ec4\u63a7\u4ef6\uff0c <group colorLine1= \"#b8d5e2\" colorLine2= \"#999999\" > group text < /> \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e colorLine1 color \u989c\u8272 colorLine2 color \u989c\u8272 round \u6570\u5b57 \u534a\u5f84","title":"5.14 \u7ec4\u63a7\u4ef6"},{"location":"Control/514/#514","text":"\u7c7b\u540d\uff1aSGroup \u63a7\u4ef6\u540d\uff1agroup \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u7ec4\u63a7\u4ef6\uff0c <group colorLine1= \"#b8d5e2\" colorLine2= \"#999999\" > group text < /> \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e colorLine1 color \u989c\u8272 colorLine2 color \u989c\u8272 round \u6570\u5b57 \u534a\u5f84","title":"5.14 \u7ec4\u63a7\u4ef6"},{"location":"Control/515/","text":"5.15 \u53ef\u8f93\u5165 CommboBox \u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSComboBox \u63a7\u4ef6\u540d\uff1acombobox \u57fa\u7c7b\uff1aSComboBase \u3016SWindow\u3001ISDropDownOwner\u3017 \u8bf4\u660e\uff1a\u7ec4\u63a7\u4ef6\uff0c <group colorLine1= \"#b8d5e2\" colorLine2= \"#999999\" > group text < /> \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e colorLine1 color \u989c\u8272 colorLine2 color \u989c\u8272 round \u6570\u5b57 \u534a\u5f84","title":"5.15 \u53ef\u8f93\u5165 CommboBox \u63a7\u4ef6"},{"location":"Control/515/#515-commbobox","text":"\u7c7b\u540d\uff1aSComboBox \u63a7\u4ef6\u540d\uff1acombobox \u57fa\u7c7b\uff1aSComboBase \u3016SWindow\u3001ISDropDownOwner\u3017 \u8bf4\u660e\uff1a\u7ec4\u63a7\u4ef6\uff0c <group colorLine1= \"#b8d5e2\" colorLine2= \"#999999\" > group text < /> \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e colorLine1 color \u989c\u8272 colorLine2 color \u989c\u8272 round \u6570\u5b57 \u534a\u5f84","title":"5.15 \u53ef\u8f93\u5165 CommboBox \u63a7\u4ef6"},{"location":"Control/516/","text":"5.16 \u65e5\u5386\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSCalendar \u63a7\u4ef6\u540d\uff1acalendar \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6b64\u7c7b\u662f\u65e5\u5386\u7684\u6838\u5fc3\u7c7b \u5927\u90e8\u5206\u51fd\u6570\u90fd\u662f\u9759\u6001\u51fd\u6570\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e titleHeight \u6570\u5b57 \u6807\u9898\u9ad8\u5ea6 footerHeight \u6570\u5b57 \u5e95\u90e8\u9ad8\u5ea6 colorWeekend color \u5468\u672b\u989c\u8272 colorTitleBack color \u6807\u9898\u989c\u8272 colorDay color \u65e5\u671f\u989c\u8272 daySkin \u5b57\u7b26\u4e32 \u9ed8\u8ba4\u6309\u94ae\u76ae\u80a4 titleSkin \u5b57\u7b26\u4e32 \u9ed8\u8ba4\u6807\u9898\u76ae\u80a4 title-1 \u5b57\u7b26\u4e32 \u6807\u9898\u5468 1 \u7684\u6587\u5b57 title-2 \u5b57\u7b26\u4e32 \u6807\u9898\u5468 2 \u7684\u6587\u5b57 title-3 \u5b57\u7b26\u4e32 \u6807\u9898\u5468 3 \u7684\u6587\u5b57 title-4 \u5b57\u7b26\u4e32 \u6807\u9898\u5468 4 \u7684\u6587\u5b57 title-5 \u5b57\u7b26\u4e32 \u6807\u9898\u5468 5 \u7684\u6587\u5b57 title-6 \u5b57\u7b26\u4e32 \u6807\u9898\u5468 6 \u7684\u6587\u5b57 title-7 \u5b57\u7b26\u4e32 \u6807\u9898\u5468 7 \u7684\u6587\u5b57","title":"5.16 \u65e5\u5386\u63a7\u4ef6"},{"location":"Control/516/#516","text":"\u7c7b\u540d\uff1aSCalendar \u63a7\u4ef6\u540d\uff1acalendar \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6b64\u7c7b\u662f\u65e5\u5386\u7684\u6838\u5fc3\u7c7b \u5927\u90e8\u5206\u51fd\u6570\u90fd\u662f\u9759\u6001\u51fd\u6570\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e titleHeight \u6570\u5b57 \u6807\u9898\u9ad8\u5ea6 footerHeight \u6570\u5b57 \u5e95\u90e8\u9ad8\u5ea6 colorWeekend color \u5468\u672b\u989c\u8272 colorTitleBack color \u6807\u9898\u989c\u8272 colorDay color \u65e5\u671f\u989c\u8272 daySkin \u5b57\u7b26\u4e32 \u9ed8\u8ba4\u6309\u94ae\u76ae\u80a4 titleSkin \u5b57\u7b26\u4e32 \u9ed8\u8ba4\u6807\u9898\u76ae\u80a4 title-1 \u5b57\u7b26\u4e32 \u6807\u9898\u5468 1 \u7684\u6587\u5b57 title-2 \u5b57\u7b26\u4e32 \u6807\u9898\u5468 2 \u7684\u6587\u5b57 title-3 \u5b57\u7b26\u4e32 \u6807\u9898\u5468 3 \u7684\u6587\u5b57 title-4 \u5b57\u7b26\u4e32 \u6807\u9898\u5468 4 \u7684\u6587\u5b57 title-5 \u5b57\u7b26\u4e32 \u6807\u9898\u5468 5 \u7684\u6587\u5b57 title-6 \u5b57\u7b26\u4e32 \u6807\u9898\u5468 6 \u7684\u6587\u5b57 title-7 \u5b57\u7b26\u4e32 \u6807\u9898\u5468 7 \u7684\u6587\u5b57","title":"5.16 \u65e5\u5386\u63a7\u4ef6"},{"location":"Control/517/","text":"5.17 \u6807\u7b7e\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSCaption \u63a7\u4ef6\u540d\uff1acaption \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6807\u7b7e\u7c7b \u53ea\u9700\u8981\u7ee7\u627f\u6b64\u7c7b\u5373\u53ef \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e \u65e0","title":"5.17 \u6807\u7b7e\u63a7\u4ef6"},{"location":"Control/517/#517","text":"\u7c7b\u540d\uff1aSCaption \u63a7\u4ef6\u540d\uff1acaption \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6807\u7b7e\u7c7b \u53ea\u9700\u8981\u7ee7\u627f\u6b64\u7c7b\u5373\u53ef \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e \u65e0","title":"5.17 \u6807\u7b7e\u63a7\u4ef6"},{"location":"Control/518/","text":"5.18 \u5bcc\u6587\u672c\u7f16\u8f91\u6846\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSRichEdit \u63a7\u4ef6\u540d\uff1arichedit \u57fa\u7c7b\uff1aSPanel\u3016SWindow\u3017 \u8bf4\u660e\uff1a\u4f7f\u7528 Windowless Richedit \u5b9e\u73b0\u7684 edit \u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e style \u6570\u5b57 richedit \u7684 style maxBuf \u6700\u5927\u5bb9\u7eb3\u5b57\u7b26 transparent 0|1 \u6307\u793a edit \u63a7\u4ef6\u662f\u5426\u80cc\u666f\u900f\u660e\uff0c\u9ed8\u8ba4\u900f\u660e \uff080--\u4e0d\u900f\u660e 1--\u900f\u660e\uff09 rich 0|1 \u662f\u5426\u4e3a\u5bcc\u6587\u672c\u63a7\u4ef6\uff0c\u9ed8\u8ba4 richedit \uff080--\u666e\u901a edit 1--richedit\uff09 vertical 0|1 \u662f\u5426\u5141\u8bb8\u5782\u76f4\uff080--\u7981\u6b62 1--\u5141\u8bb8\uff09 wordWrap 0|1 \u82f1\u6587\u5355\u8bcd\u53ef\u4ee5\u6298\u65ad\uff080--\u7981\u6b62 1--\u5141\u8bb8\uff09 allowBeep 0|1 \u9519\u8bef\u65f6\u6709\u63d0\u793a\u97f3\uff080--\u7981\u6b62 1--\u5141\u8bb8\uff09 autoWordSel \u81ea\u52a8\u9009\u62e9\u5355\u8bcd vcenter 0|1 \u5355\u884c\u5782\u76f4\u5c45\u4e2d\uff080--\u5426 1--\u662f\uff09 inset \u6570\u5b57 edit \u7684\u8fb9\u7f18\u5927\u5c0f\uff08inset=\"5,5,5,5\"\uff09 colorText color \u6587\u672c\u989c\u8272","title":"5.18 \u5bcc\u6587\u672c\u7f16\u8f91\u6846\u63a7\u4ef6"},{"location":"Control/518/#518","text":"\u7c7b\u540d\uff1aSRichEdit \u63a7\u4ef6\u540d\uff1arichedit \u57fa\u7c7b\uff1aSPanel\u3016SWindow\u3017 \u8bf4\u660e\uff1a\u4f7f\u7528 Windowless Richedit \u5b9e\u73b0\u7684 edit \u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e style \u6570\u5b57 richedit \u7684 style maxBuf \u6700\u5927\u5bb9\u7eb3\u5b57\u7b26 transparent 0|1 \u6307\u793a edit \u63a7\u4ef6\u662f\u5426\u80cc\u666f\u900f\u660e\uff0c\u9ed8\u8ba4\u900f\u660e \uff080--\u4e0d\u900f\u660e 1--\u900f\u660e\uff09 rich 0|1 \u662f\u5426\u4e3a\u5bcc\u6587\u672c\u63a7\u4ef6\uff0c\u9ed8\u8ba4 richedit \uff080--\u666e\u901a edit 1--richedit\uff09 vertical 0|1 \u662f\u5426\u5141\u8bb8\u5782\u76f4\uff080--\u7981\u6b62 1--\u5141\u8bb8\uff09 wordWrap 0|1 \u82f1\u6587\u5355\u8bcd\u53ef\u4ee5\u6298\u65ad\uff080--\u7981\u6b62 1--\u5141\u8bb8\uff09 allowBeep 0|1 \u9519\u8bef\u65f6\u6709\u63d0\u793a\u97f3\uff080--\u7981\u6b62 1--\u5141\u8bb8\uff09 autoWordSel \u81ea\u52a8\u9009\u62e9\u5355\u8bcd vcenter 0|1 \u5355\u884c\u5782\u76f4\u5c45\u4e2d\uff080--\u5426 1--\u662f\uff09 inset \u6570\u5b57 edit \u7684\u8fb9\u7f18\u5927\u5c0f\uff08inset=\"5,5,5,5\"\uff09 colorText color \u6587\u672c\u989c\u8272","title":"5.18 \u5bcc\u6587\u672c\u7f16\u8f91\u6846\u63a7\u4ef6"},{"location":"Control/519/","text":"5.19 \u7b80\u5355 edit \u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSEdit \u63a7\u4ef6\u540d\uff1aedit \u57fa\u7c7b\uff1aSRichEdit \u8bf4\u660e\uff1a","title":"5.19 \u7b80\u5355 edit \u63a7\u4ef6"},{"location":"Control/519/#519-edit","text":"\u7c7b\u540d\uff1aSEdit \u63a7\u4ef6\u540d\uff1aedit \u57fa\u7c7b\uff1aSRichEdit \u8bf4\u660e\uff1a","title":"5.19 \u7b80\u5355 edit \u63a7\u4ef6"},{"location":"Control/52/","text":"5.2 SwndStyle \u7c7b \u00b6 \u7c7b\u540d\uff1aSwndStyle \u63a7\u4ef6\u540d\uff1astyle \u57fa\u7c7b\uff1aSObject \u8bf4\u660e\uff1a\u5927\u591a\u6570\u754c\u9762\u63a7\u4ef6\u672c\u8d28\u4e0a\u90fd\u662f\u7a97\u53e3\uff0c\u8be5\u7c7b\u662f\u5927\u90e8\u5206\u754c\u9762\u63a7\u4ef6\u7684\u57fa\u7c7b\uff1b\u7edd\u5927\u90e8\u5206\u63a7\u4ef6\u90fd \u62e5\u6709\u8be5\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e textMode \u6570\u5b57 \u6587\u5b57\u7ed8\u5236\u7684\u683c\u5f0f align \u5b57\u7b26\u4e32 \u6c34\u5e73\u663e\u793a\u65b9\u5f0f\uff08left\uff0ccenter\uff0cright\uff09 valign \u5b57\u7b26\u4e32 \u5782\u76f4\u663e\u793a\u65b9\u5f0f\uff08top\uff0cmiddle\uff0cbottom\uff09 colorBkgnd color \u80cc\u666f\u989c\u8272 colorBorder color \u8fb9\u6846\u989c\u8272 font \u5b57\u7b26\u4e32 \u9ed8\u8ba4\u5b57\u4f53 fontHover \u5b57\u7b26\u4e32 \u60ac\u505c\u65f6\u5b57\u4f53 fontPush \u5b57\u7b26\u4e32 \u6309\u4e0b\u65f6\u5b57\u4f53 fontDisable \u5b57\u7b26\u4e32 \u5931\u6548\u65f6\u5b57\u4f53 colorText color \u9ed8\u8ba4\u5b57\u4f53\u989c\u8272 colorTextHover color \u60ac\u505c\u65f6\u5b57\u4f53\u989c\u8272 colorTextPush color \u6309\u4e0b\u65f6\u5b57\u4f53\u989c\u8272 colorTextDisable color \u5931\u6548\u65f6\u5b57\u4f53\u989c\u8272 margin-x \u6570\u5b57 \u975e\u5ba2\u6237\u533a left \u53ca right \u5bbd\u5ea6 margin-y \u6570\u5b57 \u975e\u5ba2\u6237\u533a top \u53ca bottom \u5bbd\u5ea6 margin \u6570\u5b57 \u975e\u5ba2\u6237\u533a\u5bbd\u5ea6 cursor \u5b57\u7b26\u4e32 \u5149\u6807\uff08\u6307\u5b9a\u5149\u6807\u8d44\u6e90\u540d\u79f0\uff09 dotted 0|1 \u5728\u6587\u4ef6\u7ed8\u5236\u957f\u5ea6\u8d85\u51fa\u5ba2\u6237\u533a\u65f6\u662f\u5426\u4f7f\u7528\"\u2026\" \uff080--\u4e0d\u4f7f\u7528\uff08\u9ed8\u8ba4\uff09 1--\u4f7f\u7528\uff09 \u51fd\u6570\uff1a \u793a\u4f8b\uff1a <text pos= \"|0,[5\" font= \"face:\u5fae\u8f6f\u96c5\u9ed1,adding:-3\" colorText= \"#000000\" > \u6587\u672c\u2026 </text>","title":"5.2 SwndStyle \u7c7b"},{"location":"Control/52/#52-swndstyle","text":"\u7c7b\u540d\uff1aSwndStyle \u63a7\u4ef6\u540d\uff1astyle \u57fa\u7c7b\uff1aSObject \u8bf4\u660e\uff1a\u5927\u591a\u6570\u754c\u9762\u63a7\u4ef6\u672c\u8d28\u4e0a\u90fd\u662f\u7a97\u53e3\uff0c\u8be5\u7c7b\u662f\u5927\u90e8\u5206\u754c\u9762\u63a7\u4ef6\u7684\u57fa\u7c7b\uff1b\u7edd\u5927\u90e8\u5206\u63a7\u4ef6\u90fd \u62e5\u6709\u8be5\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e textMode \u6570\u5b57 \u6587\u5b57\u7ed8\u5236\u7684\u683c\u5f0f align \u5b57\u7b26\u4e32 \u6c34\u5e73\u663e\u793a\u65b9\u5f0f\uff08left\uff0ccenter\uff0cright\uff09 valign \u5b57\u7b26\u4e32 \u5782\u76f4\u663e\u793a\u65b9\u5f0f\uff08top\uff0cmiddle\uff0cbottom\uff09 colorBkgnd color \u80cc\u666f\u989c\u8272 colorBorder color \u8fb9\u6846\u989c\u8272 font \u5b57\u7b26\u4e32 \u9ed8\u8ba4\u5b57\u4f53 fontHover \u5b57\u7b26\u4e32 \u60ac\u505c\u65f6\u5b57\u4f53 fontPush \u5b57\u7b26\u4e32 \u6309\u4e0b\u65f6\u5b57\u4f53 fontDisable \u5b57\u7b26\u4e32 \u5931\u6548\u65f6\u5b57\u4f53 colorText color \u9ed8\u8ba4\u5b57\u4f53\u989c\u8272 colorTextHover color \u60ac\u505c\u65f6\u5b57\u4f53\u989c\u8272 colorTextPush color \u6309\u4e0b\u65f6\u5b57\u4f53\u989c\u8272 colorTextDisable color \u5931\u6548\u65f6\u5b57\u4f53\u989c\u8272 margin-x \u6570\u5b57 \u975e\u5ba2\u6237\u533a left \u53ca right \u5bbd\u5ea6 margin-y \u6570\u5b57 \u975e\u5ba2\u6237\u533a top \u53ca bottom \u5bbd\u5ea6 margin \u6570\u5b57 \u975e\u5ba2\u6237\u533a\u5bbd\u5ea6 cursor \u5b57\u7b26\u4e32 \u5149\u6807\uff08\u6307\u5b9a\u5149\u6807\u8d44\u6e90\u540d\u79f0\uff09 dotted 0|1 \u5728\u6587\u4ef6\u7ed8\u5236\u957f\u5ea6\u8d85\u51fa\u5ba2\u6237\u533a\u65f6\u662f\u5426\u4f7f\u7528\"\u2026\" \uff080--\u4e0d\u4f7f\u7528\uff08\u9ed8\u8ba4\uff09 1--\u4f7f\u7528\uff09 \u51fd\u6570\uff1a \u793a\u4f8b\uff1a <text pos= \"|0,[5\" font= \"face:\u5fae\u8f6f\u96c5\u9ed1,adding:-3\" colorText= \"#000000\" > \u6587\u672c\u2026 </text>","title":"5.2 SwndStyle \u7c7b"},{"location":"Control/520/","text":"5.20 \u8868\u5934\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSHeaderCtrl \u63a7\u4ef6\u540d\uff1aheader \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u8868\u5934\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e itemSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 sortSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 fixWidth 0|1 \u662f\u5426\u56fa\u5b9a\u5bbd\u5ea6\uff080--\u5426 1--\u662f\uff09 itemSwapEnable 0|1 \u662f\u5426\u5141\u8bb8\u8c03\u6574\u4f4d\u7f6e\uff080--\u7981\u6b62 1--\u5141\u8bb8\uff09 sortHeader 0|1 \u662f\u5426\u652f\u6301\u6392\u5e8f\uff080--\u5426 1--\u662f\uff09","title":"5.20 \u8868\u5934\u63a7\u4ef6"},{"location":"Control/520/#520","text":"\u7c7b\u540d\uff1aSHeaderCtrl \u63a7\u4ef6\u540d\uff1aheader \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u8868\u5934\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e itemSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 sortSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 fixWidth 0|1 \u662f\u5426\u56fa\u5b9a\u5bbd\u5ea6\uff080--\u5426 1--\u662f\uff09 itemSwapEnable 0|1 \u662f\u5426\u5141\u8bb8\u8c03\u6574\u4f4d\u7f6e\uff080--\u7981\u6b62 1--\u5141\u8bb8\uff09 sortHeader 0|1 \u662f\u5426\u652f\u6301\u6392\u5e8f\uff080--\u5426 1--\u662f\uff09","title":"5.20 \u8868\u5934\u63a7\u4ef6"},{"location":"Control/521/","text":"5.21 \u70ed\u952e\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSHotKeyCtrl \u63a7\u4ef6\u540d\uff1ahotkey \u57fa\u7c7b\uff1aSWindow\u3001CAccelerator \u8bf4\u660e\uff1a\u70ed\u952e\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e invalidComb \u65e0\u6548\u7684\u7ec4\u5408\u952e defCombKey \u5bf9\u65e0\u6548\u7ec4\u5408\u952e\u7684\u66ff\u6362\u65b9\u6848,\u9ed8\u8ba4\u65b9\u6848 combKey \u7ec4\u5408\u952e hotkey \u70ed\u952e","title":"5.21 \u70ed\u952e\u63a7\u4ef6"},{"location":"Control/521/#521","text":"\u7c7b\u540d\uff1aSHotKeyCtrl \u63a7\u4ef6\u540d\uff1ahotkey \u57fa\u7c7b\uff1aSWindow\u3001CAccelerator \u8bf4\u660e\uff1a\u70ed\u952e\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e invalidComb \u65e0\u6548\u7684\u7ec4\u5408\u952e defCombKey \u5bf9\u65e0\u6548\u7ec4\u5408\u952e\u7684\u66ff\u6362\u65b9\u6848,\u9ed8\u8ba4\u65b9\u6848 combKey \u7ec4\u5408\u952e hotkey \u70ed\u952e","title":"5.21 \u70ed\u952e\u63a7\u4ef6"},{"location":"Control/522/","text":"5.22 \u5217\u8868\u6846\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSListBox \u63a7\u4ef6\u540d\uff1alistbox \u57fa\u7c7b\uff1aSScrollView\u3016SPanel\u3017 \u8bf4\u660e\uff1a\u70ed\u952e\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e scrollSpeed \u6570\u5b57 \u6eda\u52a8\u901f\u7387 itemHeight \u6570\u5b57 \u8868\u9879\u9ad8\u5ea6 itemSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 iconSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 colorItemBkgnd color \u8868\u9879\u80cc\u666f\u8272 colorItemBkgnd2 color \u8868\u9879\u80cc\u666f\u8272 colorItemSelBkgnd color \u9009\u4e2d\u8868\u9879\u80cc\u666f\u8272 colorText color \u6587\u672c\u989c\u8272 colorSelText color \u9009\u4e2d\u6587\u672c\u989c\u8272 icon-x \u6570\u5b57 \u56fe\u6807 x \u5750\u6807 icon-y \u6570\u5b57 \u56fe\u6807 y \u5750\u6807 text-x \u6570\u5b57 \u6587\u672c x \u5750\u6807 text-y \u6570\u5b57 \u6587\u672c x \u5750\u6807 hotTrack 0|1 \u9f20\u6807\u79fb\u52a8\u65f6\u9ad8\u4eae\u663e\u793a\u4e0b\u9762\u7684\u884c\uff080--\u4e0d\u652f\u6301 1--\u652f\u6301\uff09","title":"5.22 \u5217\u8868\u6846\u63a7\u4ef6"},{"location":"Control/522/#522","text":"\u7c7b\u540d\uff1aSListBox \u63a7\u4ef6\u540d\uff1alistbox \u57fa\u7c7b\uff1aSScrollView\u3016SPanel\u3017 \u8bf4\u660e\uff1a\u70ed\u952e\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e scrollSpeed \u6570\u5b57 \u6eda\u52a8\u901f\u7387 itemHeight \u6570\u5b57 \u8868\u9879\u9ad8\u5ea6 itemSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 iconSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 colorItemBkgnd color \u8868\u9879\u80cc\u666f\u8272 colorItemBkgnd2 color \u8868\u9879\u80cc\u666f\u8272 colorItemSelBkgnd color \u9009\u4e2d\u8868\u9879\u80cc\u666f\u8272 colorText color \u6587\u672c\u989c\u8272 colorSelText color \u9009\u4e2d\u6587\u672c\u989c\u8272 icon-x \u6570\u5b57 \u56fe\u6807 x \u5750\u6807 icon-y \u6570\u5b57 \u56fe\u6807 y \u5750\u6807 text-x \u6570\u5b57 \u6587\u672c x \u5750\u6807 text-y \u6570\u5b57 \u6587\u672c x \u5750\u6807 hotTrack 0|1 \u9f20\u6807\u79fb\u52a8\u65f6\u9ad8\u4eae\u663e\u793a\u4e0b\u9762\u7684\u884c\uff080--\u4e0d\u652f\u6301 1--\u652f\u6301\uff09","title":"5.22 \u5217\u8868\u6846\u63a7\u4ef6"},{"location":"Control/523/","text":"5.23 \u5217\u8868\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSListCtrl \u63a7\u4ef6\u540d\uff1alistctrl \u57fa\u7c7b\uff1aSPanel \u8bf4\u660e\uff1a\u5217\u8868\u63a7\u4ef6\uff0c\u662f\u4ece SPanel \u6d3e\u751f\u7684\uff0c\u6240\u4ee5\u57fa\u7c7b\u63a7\u4ef6\u5177\u6709\u7684\u5c5e\u6027\u548c\u51fd\u6570\u4e5f\u53ef\u4ee5\u4f7f\u7528\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e headerHeight \u6570\u5b57 \u8868\u5934\u9ad8\u5ea6 itemHeight \u6570\u5b57 \u8868\u9879\u9ad8\u5ea6 itemSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 iconSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 colorItemBkgnd color \u8868\u9879\u80cc\u666f\u8272 colorItemBkgnd2 color \u8868\u9879\u80cc\u666f\u8272 colorItemSelBkgnd color \u9009\u4e2d\u8868\u9879\u80cc\u666f\u8272 colorText color \u6587\u672c\u989c\u8272 colorSelText color \u9009\u4e2d\u6587\u672c\u989c\u8272 icon-x \u6570\u5b57 \u56fe\u6807 x \u5750\u6807 icon-y \u6570\u5b57 \u56fe\u6807 y \u5750\u6807 text-x \u6570\u5b57 \u6587\u672c x \u5750\u6807 text-y \u6570\u5b57 \u6587\u672c y \u5750\u6807 hotTrack 0|1 \u9f20\u6807\u79fb\u52a8\u65f6\u9ad8\u4eae\u663e\u793a\u4e0b\u9762\u7684\u884c\uff080--\u4e0d\u652f\u6301 1--\u652f\u6301\uff09","title":"5.23 \u5217\u8868\u63a7\u4ef6"},{"location":"Control/523/#523","text":"\u7c7b\u540d\uff1aSListCtrl \u63a7\u4ef6\u540d\uff1alistctrl \u57fa\u7c7b\uff1aSPanel \u8bf4\u660e\uff1a\u5217\u8868\u63a7\u4ef6\uff0c\u662f\u4ece SPanel \u6d3e\u751f\u7684\uff0c\u6240\u4ee5\u57fa\u7c7b\u63a7\u4ef6\u5177\u6709\u7684\u5c5e\u6027\u548c\u51fd\u6570\u4e5f\u53ef\u4ee5\u4f7f\u7528\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e headerHeight \u6570\u5b57 \u8868\u5934\u9ad8\u5ea6 itemHeight \u6570\u5b57 \u8868\u9879\u9ad8\u5ea6 itemSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 iconSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 colorItemBkgnd color \u8868\u9879\u80cc\u666f\u8272 colorItemBkgnd2 color \u8868\u9879\u80cc\u666f\u8272 colorItemSelBkgnd color \u9009\u4e2d\u8868\u9879\u80cc\u666f\u8272 colorText color \u6587\u672c\u989c\u8272 colorSelText color \u9009\u4e2d\u6587\u672c\u989c\u8272 icon-x \u6570\u5b57 \u56fe\u6807 x \u5750\u6807 icon-y \u6570\u5b57 \u56fe\u6807 y \u5750\u6807 text-x \u6570\u5b57 \u6587\u672c x \u5750\u6807 text-y \u6570\u5b57 \u6587\u672c y \u5750\u6807 hotTrack 0|1 \u9f20\u6807\u79fb\u52a8\u65f6\u9ad8\u4eae\u663e\u793a\u4e0b\u9762\u7684\u884c\uff080--\u4e0d\u652f\u6301 1--\u652f\u6301\uff09","title":"5.23 \u5217\u8868\u63a7\u4ef6"},{"location":"Control/524/","text":"5.24 \u6eda\u52a8\u6761\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSScrollBar \u63a7\u4ef6\u540d\uff1ascrollbar \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 arrowSize \u6570\u5b57 \u7bad\u5934\u5927\u5c0f min \u6570\u5b57 \u6700\u5c0f\u503c max \u6570\u5b57 \u6700\u5927\u503c value \u6570\u5b57 \u5f53\u524d\u503c page \u6570\u5b57 \u7ffb\u9875\u5927\u5c0f vertical 0|1 \u662f\u5426\u5782\u76f4\uff080-- \u5426 1--\u662f\uff09 SSkinGif \u63a7\u4ef6 \u7c7b\u540d\uff1aSSkinGif \u63a7\u4ef6\u540d\uff1agif \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 arrowSize \u6570\u5b57 \u7bad\u5934\u5927\u5c0f min \u6570\u5b57 \u6700\u5c0f\u503c max \u6570\u5b57 \u6700\u5927\u503c value \u6570\u5b57 \u5f53\u524d\u503c page \u6570\u5b57 \u7ffb\u9875\u5927\u5c0f vertical 0|1 \u662f\u5426\u5782\u76f4\uff080-- \u5426 1--\u662f\uff09 SSkinGradation \u63a7\u4ef6 \u7c7b\u540d\uff1aSSkinGradation \u63a7\u4ef6\u540d\uff1agradation \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 arrowSize \u6570\u5b57 \u7bad\u5934\u5927\u5c0f min \u6570\u5b57 \u6700\u5c0f\u503c max \u6570\u5b57 \u6700\u5927\u503c value \u6570\u5b57 \u5f53\u524d\u503c page \u6570\u5b57 \u7ffb\u9875\u5927\u5c0f vertical 0|1 \u662f\u5426\u5782\u76f4\uff080-- \u5426 1--\u662f\uff09 SSkinImgList \u63a7\u4ef6 \u7c7b\u540d\uff1aSSkinImgList \u63a7\u4ef6\u540d\uff1aimglist \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 arrowSize \u6570\u5b57 \u7bad\u5934\u5927\u5c0f min \u6570\u5b57 \u6700\u5c0f\u503c max \u6570\u5b57 \u6700\u5927\u503c value \u6570\u5b57 \u5f53\u524d\u503c page \u6570\u5b57 \u7ffb\u9875\u5927\u5c0f vertical 0|1 \u662f\u5426\u5782\u76f4\uff080-- \u5426 1--\u662f\uff09 SSkinScrollbar \u63a7\u4ef6 \u7c7b\u540d\uff1aSSkinScrollbar \u63a7\u4ef6\u540d\uff1ascrollbar \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 arrowSize \u6570\u5b57 \u7bad\u5934\u5927\u5c0f min \u6570\u5b57 \u6700\u5c0f\u503c max \u6570\u5b57 \u6700\u5927\u503c value \u6570\u5b57 \u5f53\u524d\u503c page \u6570\u5b57 \u7ffb\u9875\u5927\u5c0f vertical 0|1 \u662f\u5426\u5782\u76f4\uff080-- \u5426 1--\u662f\uff09 SSkinImgFrame \u63a7\u4ef6 \u7c7b\u540d\uff1aSSkinImgFrame \u63a7\u4ef6\u540d\uff1aimgframe \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 arrowSize \u6570\u5b57 \u7bad\u5934\u5927\u5c0f min \u6570\u5b57 \u6700\u5c0f\u503c max \u6570\u5b57 \u6700\u5927\u503c value \u6570\u5b57 \u5f53\u524d\u503c page \u6570\u5b57 \u7ffb\u9875\u5927\u5c0f vertical 0|1 \u662f\u5426\u5782\u76f4\uff080-- \u5426 1--\u662f\uff09 SSkinMenuBorder \u63a7\u4ef6 \u7c7b\u540d\uff1aSSkinMenuBorder \u63a7\u4ef6\u540d\uff1aborder \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 arrowSize \u6570\u5b57 \u7bad\u5934\u5927\u5c0f min \u6570\u5b57 \u6700\u5c0f\u503c max \u6570\u5b57 \u6700\u5927\u503c value \u6570\u5b57 \u5f53\u524d\u503c page \u6570\u5b57 \u7ffb\u9875\u5927\u5c0f vertical 0|1 \u662f\u5426\u5782\u76f4\uff080-- \u5426 1--\u662f\uff09","title":"5.24 \u6eda\u52a8\u6761\u63a7\u4ef6"},{"location":"Control/524/#524","text":"\u7c7b\u540d\uff1aSScrollBar \u63a7\u4ef6\u540d\uff1ascrollbar \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 arrowSize \u6570\u5b57 \u7bad\u5934\u5927\u5c0f min \u6570\u5b57 \u6700\u5c0f\u503c max \u6570\u5b57 \u6700\u5927\u503c value \u6570\u5b57 \u5f53\u524d\u503c page \u6570\u5b57 \u7ffb\u9875\u5927\u5c0f vertical 0|1 \u662f\u5426\u5782\u76f4\uff080-- \u5426 1--\u662f\uff09 SSkinGif \u63a7\u4ef6 \u7c7b\u540d\uff1aSSkinGif \u63a7\u4ef6\u540d\uff1agif \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 arrowSize \u6570\u5b57 \u7bad\u5934\u5927\u5c0f min \u6570\u5b57 \u6700\u5c0f\u503c max \u6570\u5b57 \u6700\u5927\u503c value \u6570\u5b57 \u5f53\u524d\u503c page \u6570\u5b57 \u7ffb\u9875\u5927\u5c0f vertical 0|1 \u662f\u5426\u5782\u76f4\uff080-- \u5426 1--\u662f\uff09 SSkinGradation \u63a7\u4ef6 \u7c7b\u540d\uff1aSSkinGradation \u63a7\u4ef6\u540d\uff1agradation \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 arrowSize \u6570\u5b57 \u7bad\u5934\u5927\u5c0f min \u6570\u5b57 \u6700\u5c0f\u503c max \u6570\u5b57 \u6700\u5927\u503c value \u6570\u5b57 \u5f53\u524d\u503c page \u6570\u5b57 \u7ffb\u9875\u5927\u5c0f vertical 0|1 \u662f\u5426\u5782\u76f4\uff080-- \u5426 1--\u662f\uff09 SSkinImgList \u63a7\u4ef6 \u7c7b\u540d\uff1aSSkinImgList \u63a7\u4ef6\u540d\uff1aimglist \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 arrowSize \u6570\u5b57 \u7bad\u5934\u5927\u5c0f min \u6570\u5b57 \u6700\u5c0f\u503c max \u6570\u5b57 \u6700\u5927\u503c value \u6570\u5b57 \u5f53\u524d\u503c page \u6570\u5b57 \u7ffb\u9875\u5927\u5c0f vertical 0|1 \u662f\u5426\u5782\u76f4\uff080-- \u5426 1--\u662f\uff09 SSkinScrollbar \u63a7\u4ef6 \u7c7b\u540d\uff1aSSkinScrollbar \u63a7\u4ef6\u540d\uff1ascrollbar \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 arrowSize \u6570\u5b57 \u7bad\u5934\u5927\u5c0f min \u6570\u5b57 \u6700\u5c0f\u503c max \u6570\u5b57 \u6700\u5927\u503c value \u6570\u5b57 \u5f53\u524d\u503c page \u6570\u5b57 \u7ffb\u9875\u5927\u5c0f vertical 0|1 \u662f\u5426\u5782\u76f4\uff080-- \u5426 1--\u662f\uff09 SSkinImgFrame \u63a7\u4ef6 \u7c7b\u540d\uff1aSSkinImgFrame \u63a7\u4ef6\u540d\uff1aimgframe \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 arrowSize \u6570\u5b57 \u7bad\u5934\u5927\u5c0f min \u6570\u5b57 \u6700\u5c0f\u503c max \u6570\u5b57 \u6700\u5927\u503c value \u6570\u5b57 \u5f53\u524d\u503c page \u6570\u5b57 \u7ffb\u9875\u5927\u5c0f vertical 0|1 \u662f\u5426\u5782\u76f4\uff080-- \u5426 1--\u662f\uff09 SSkinMenuBorder \u63a7\u4ef6 \u7c7b\u540d\uff1aSSkinMenuBorder \u63a7\u4ef6\u540d\uff1aborder \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u76ae\u80a4 arrowSize \u6570\u5b57 \u7bad\u5934\u5927\u5c0f min \u6570\u5b57 \u6700\u5c0f\u503c max \u6570\u5b57 \u6700\u5927\u503c value \u6570\u5b57 \u5f53\u524d\u503c page \u6570\u5b57 \u7ffb\u9875\u5927\u5c0f vertical 0|1 \u662f\u5426\u5782\u76f4\uff080-- \u5426 1--\u662f\uff09","title":"5.24 \u6eda\u52a8\u6761\u63a7\u4ef6"},{"location":"Control/525/","text":"5.25 \u6ed1\u5757\u5de5\u5177\u6761\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSSliderBar \u63a7\u4ef6\u540d\uff1asliderbar \u57fa\u7c7b\uff1aSProgress \u8bf4\u660e\uff1a\u6ed1\u5757\u5de5\u5177\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e thumbSkin \u62d6\u52a8\u6309\u94ae\u7684\u76ae\u80a4","title":"5.25 \u6ed1\u5757\u5de5\u5177\u6761\u63a7\u4ef6"},{"location":"Control/525/#525","text":"\u7c7b\u540d\uff1aSSliderBar \u63a7\u4ef6\u540d\uff1asliderbar \u57fa\u7c7b\uff1aSProgress \u8bf4\u660e\uff1a\u6ed1\u5757\u5de5\u5177\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e thumbSkin \u62d6\u52a8\u6309\u94ae\u7684\u76ae\u80a4","title":"5.25 \u6ed1\u5757\u5de5\u5177\u6761\u63a7\u4ef6"},{"location":"Control/526/","text":"5.26 \u5206\u5272\u7a97\u53e3\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSSplitPane \u63a7\u4ef6\u540d\uff1apane \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u5206\u5272\u7a97\u53e3\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e idealSize \u6570\u5b57 \u671f\u671b\u5927\u5c0f minSize \u6570\u5b57 \u6700\u5c0f\u5927\u5c0f priority \u6570\u5b57 \u4f18\u5148\u7ea7\uff08\u503c\u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff09","title":"5.26 \u5206\u5272\u7a97\u53e3\u63a7\u4ef6"},{"location":"Control/526/#526","text":"\u7c7b\u540d\uff1aSSplitPane \u63a7\u4ef6\u540d\uff1apane \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u5206\u5272\u7a97\u53e3\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e idealSize \u6570\u5b57 \u671f\u671b\u5927\u5c0f minSize \u6570\u5b57 \u6700\u5c0f\u5927\u5c0f priority \u6570\u5b57 \u4f18\u5148\u7ea7\uff08\u503c\u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff09","title":"5.26 \u5206\u5272\u7a97\u53e3\u63a7\u4ef6"},{"location":"Control/527/","text":"5.27 \u5206\u5272\u7a97\u53e3\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSSplitWnd \u63a7\u4ef6\u540d\uff1asplitwnd \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u5206\u5272\u7a97\u53e3\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e sepSize \u6570\u5b57 \u5206\u9694\u6761\u5bbd\u5ea6/\u9ad8\u5ea6 adjustable 0|1 \u662f\u5426\u53ef\u4ee5\u62d6\u52a8\uff080-\u4e0d\u53ef\u62d6\u52a8\uff0c1-\u53ef\u4ee5\u62d6\u52a8\uff09 colmode 0|1 \u5206\u680f\u6a21\u5f0f\uff080-\u6a2a\u5411\u5206\u680f\uff0c1-\u7eb5\u5411\u5206\u680f\uff09 skinSep \u5b57\u7b26\u4e32 \u5206\u9694\u6761\u7ed8\u5236\u76ae\u80a4\uff08\u76ae\u80a4 name\uff09","title":"5.27 \u5206\u5272\u7a97\u53e3\u63a7\u4ef6"},{"location":"Control/527/#527","text":"\u7c7b\u540d\uff1aSSplitWnd \u63a7\u4ef6\u540d\uff1asplitwnd \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u5206\u5272\u7a97\u53e3\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e sepSize \u6570\u5b57 \u5206\u9694\u6761\u5bbd\u5ea6/\u9ad8\u5ea6 adjustable 0|1 \u662f\u5426\u53ef\u4ee5\u62d6\u52a8\uff080-\u4e0d\u53ef\u62d6\u52a8\uff0c1-\u53ef\u4ee5\u62d6\u52a8\uff09 colmode 0|1 \u5206\u680f\u6a21\u5f0f\uff080-\u6a2a\u5411\u5206\u680f\uff0c1-\u7eb5\u5411\u5206\u680f\uff09 skinSep \u5b57\u7b26\u4e32 \u5206\u9694\u6761\u7ed8\u5236\u76ae\u80a4\uff08\u76ae\u80a4 name\uff09","title":"5.27 \u5206\u5272\u7a97\u53e3\u63a7\u4ef6"},{"location":"Control/528/","text":"5.28 Tab \u6807\u7b7e\u9875\u9762\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSTabPage \u63a7\u4ef6\u540d\uff1apage \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e title \u5b57\u7b26\u4e32 \u6807\u9898\uff08\u53ea\u80fd\u5728 STabCtrl \u4e2d\u4f7f\u7528\uff09","title":"5.28 Tab \u6807\u7b7e\u9875\u9762\u63a7\u4ef6"},{"location":"Control/528/#528-tab","text":"\u7c7b\u540d\uff1aSTabPage \u63a7\u4ef6\u540d\uff1apage \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e title \u5b57\u7b26\u4e32 \u6807\u9898\uff08\u53ea\u80fd\u5728 STabCtrl \u4e2d\u4f7f\u7528\uff09","title":"5.28 Tab \u6807\u7b7e\u9875\u9762\u63a7\u4ef6"},{"location":"Control/529/","text":"5.29 Tab \u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSTabCtrl \u63a7\u4ef6\u540d\uff1atabctrl \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e curSel \u6570\u5b57 \u9009\u4e2d\u7d22\u5f15 tabWidth \u6570\u5b57 tab \u5bbd\u5ea6 tabHeight \u6570\u5b57 tab \u9ad8\u5ea6 tabPos \u6570\u5b57 tab \u5f00\u59cb\u504f\u79fb framePos \u5750\u6807 \u5750\u6807 tabInterSize \u6570\u5b57 tab \u6807\u7b7e\u95f4\u9699 tabInterSkin \u5b57\u7b26\u4e32 \u5206\u5272\u7ebf\u76ae\u80a4 tabSkin \u5b57\u7b26\u4e32 tab \u76ae\u80a4 iconSkin \u5b57\u7b26\u4e32 icon \u76ae\u80a4 frameSkin \u5b57\u7b26\u4e32 \u6846\u67b6\u76ae\u80a4 icon-x \u6570\u5b57 \u56fe\u6807 x \u5750\u6807 icon-y \u6570\u5b57 \u56fe\u6807 y \u5750\u6807 text-x \u6570\u5b57 \u6587\u672c x \u5750\u6807 text-y \u6570\u5b57 \u6587\u672c y \u5750\u6807 tabAlign top left \u663e\u793a\u65b9\u5f0f animateSteps int \u52a8\u753b\u5207\u6362\u9875\u9762\u65f6\u52a8\u753b\u6b21\u6570","title":"5.29 Tab \u63a7\u4ef6"},{"location":"Control/529/#529-tab","text":"\u7c7b\u540d\uff1aSTabCtrl \u63a7\u4ef6\u540d\uff1atabctrl \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u6eda\u52a8\u6761\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e curSel \u6570\u5b57 \u9009\u4e2d\u7d22\u5f15 tabWidth \u6570\u5b57 tab \u5bbd\u5ea6 tabHeight \u6570\u5b57 tab \u9ad8\u5ea6 tabPos \u6570\u5b57 tab \u5f00\u59cb\u504f\u79fb framePos \u5750\u6807 \u5750\u6807 tabInterSize \u6570\u5b57 tab \u6807\u7b7e\u95f4\u9699 tabInterSkin \u5b57\u7b26\u4e32 \u5206\u5272\u7ebf\u76ae\u80a4 tabSkin \u5b57\u7b26\u4e32 tab \u76ae\u80a4 iconSkin \u5b57\u7b26\u4e32 icon \u76ae\u80a4 frameSkin \u5b57\u7b26\u4e32 \u6846\u67b6\u76ae\u80a4 icon-x \u6570\u5b57 \u56fe\u6807 x \u5750\u6807 icon-y \u6570\u5b57 \u56fe\u6807 y \u5750\u6807 text-x \u6570\u5b57 \u6587\u672c x \u5750\u6807 text-y \u6570\u5b57 \u6587\u672c y \u5750\u6807 tabAlign top left \u663e\u793a\u65b9\u5f0f animateSteps int \u52a8\u753b\u5207\u6362\u9875\u9762\u65f6\u52a8\u753b\u6b21\u6570","title":"5.29 Tab \u63a7\u4ef6"},{"location":"Control/53/","text":"5.3 SHostWndAttr \u7c7b \u00b6 \u7c7b\u540d\uff1aSHostWndAttr \u63a7\u4ef6\u540d\uff1ahostwndattr \u57fa\u7c7b\uff1aSObject \u8bf4\u660e\uff1a\u5927\u591a\u6570\u754c\u9762\u63a7\u4ef6\u672c\u8d28\u4e0a\u90fd\u662f\u7a97\u53e3\uff0c\u8be5\u7c7b\u662f\u5927\u90e8\u5206\u754c\u9762\u63a7\u4ef6\u7684\u57fa\u7c7b\uff1b\u7edd\u5927\u90e8\u5206\u63a7\u4ef6\u90fd \u62e5\u6709\u8be5\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e name \u540d\u79f0 title \u6807\u9898 size \u7a97\u53e3\u5927\u5c0f width \u5bbd\u5ea6 height \u9ad8\u5ea6 margin \u4f4d\u7f6e minsize \u6700\u5c0f\u5927\u5c0f wndStyle \u6837\u5f0f wndStyleEx \u6269\u5c55\u6837\u5f0f resizable 0|1 host \u53ef\u53d8\u5927\u5c0f\uff080--\u4e0d\u53ef\u53d8 1--\u53ef\u53d8\u5927\u5c0f\uff09 translucent host \u534a\u900f\u660e appWnd host \u5728\u4efb\u52a1\u680f\u663e\u793a\u56fe\u6807 toolWindow 0|1 host \u7684\u6269\u5c55\u6837\u5f0f\u662f\u5426\u4e3a WS_EX_TOOLWINDOW \uff080--\u65e0 1--\u6709\uff09 smallIcon iconname:size \u5c0f\u56fe\u6807 bigIcon iconname:size \u5927\u56fe\u6807 \u51fd\u6570\uff1a","title":"5.3 SHostWndAttr \u7c7b"},{"location":"Control/53/#53-shostwndattr","text":"\u7c7b\u540d\uff1aSHostWndAttr \u63a7\u4ef6\u540d\uff1ahostwndattr \u57fa\u7c7b\uff1aSObject \u8bf4\u660e\uff1a\u5927\u591a\u6570\u754c\u9762\u63a7\u4ef6\u672c\u8d28\u4e0a\u90fd\u662f\u7a97\u53e3\uff0c\u8be5\u7c7b\u662f\u5927\u90e8\u5206\u754c\u9762\u63a7\u4ef6\u7684\u57fa\u7c7b\uff1b\u7edd\u5927\u90e8\u5206\u63a7\u4ef6\u90fd \u62e5\u6709\u8be5\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e name \u540d\u79f0 title \u6807\u9898 size \u7a97\u53e3\u5927\u5c0f width \u5bbd\u5ea6 height \u9ad8\u5ea6 margin \u4f4d\u7f6e minsize \u6700\u5c0f\u5927\u5c0f wndStyle \u6837\u5f0f wndStyleEx \u6269\u5c55\u6837\u5f0f resizable 0|1 host \u53ef\u53d8\u5927\u5c0f\uff080--\u4e0d\u53ef\u53d8 1--\u53ef\u53d8\u5927\u5c0f\uff09 translucent host \u534a\u900f\u660e appWnd host \u5728\u4efb\u52a1\u680f\u663e\u793a\u56fe\u6807 toolWindow 0|1 host \u7684\u6269\u5c55\u6837\u5f0f\u662f\u5426\u4e3a WS_EX_TOOLWINDOW \uff080--\u65e0 1--\u6709\uff09 smallIcon iconname:size \u5c0f\u56fe\u6807 bigIcon iconname:size \u5927\u56fe\u6807 \u51fd\u6570\uff1a","title":"5.3 SHostWndAttr \u7c7b"},{"location":"Control/530/","text":"5.30 \u6811\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSTreeCtrl \u63a7\u4ef6\u540d\uff1atreectrl \u57fa\u7c7b\uff1a SScrollView \u3001 CSTree<LPTVITEM> \u8bf4\u660e\uff1a\u6811\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e indent \u6570\u5b57 \u7f29\u8fdb\u5b57\u7b26\u6570 itemHeight \u6570\u5b57 \u8868\u9879\u9ad8\u5ea6 itemMargin \u4f4d\u7f6e\uff08margin \u76f8\u5bf9\u4f4d\u7f6e\uff0c\u6bd4\u5982\u8bf4\u4e0a,\u4e0b\uff0c\u5de6\uff0c\u53f3\uff09 checkBox 0|1 \u662f\u5426\u6709\u590d\u9009\u6846\uff080--\u6ca1\u6709 1--\u6709\uff09 rightClickSel 0|1 \u53f3\u51fb\u9009\u4e2d\uff080--\u4e0d\u652f\u6301 1--\u652f\u6301\uff09 itemBkgndSkin color \u8868\u9879\u80cc\u666f\u8272 itemSelSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 toggleSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 iconSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 checkSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 colorItemBkgnd color \u8868\u9879\u80cc\u666f\u8272 colorItemSelBkgnd color \u8868\u9879\u80cc\u666f\u8272 colorrItemText color \u8868\u9879\u80cc\u666f\u8272 colorItemSelText color \u8868\u9879\u80cc\u666f\u8272","title":"5.30 \u6811\u63a7\u4ef6"},{"location":"Control/530/#530","text":"\u7c7b\u540d\uff1aSTreeCtrl \u63a7\u4ef6\u540d\uff1atreectrl \u57fa\u7c7b\uff1a SScrollView \u3001 CSTree<LPTVITEM> \u8bf4\u660e\uff1a\u6811\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e indent \u6570\u5b57 \u7f29\u8fdb\u5b57\u7b26\u6570 itemHeight \u6570\u5b57 \u8868\u9879\u9ad8\u5ea6 itemMargin \u4f4d\u7f6e\uff08margin \u76f8\u5bf9\u4f4d\u7f6e\uff0c\u6bd4\u5982\u8bf4\u4e0a,\u4e0b\uff0c\u5de6\uff0c\u53f3\uff09 checkBox 0|1 \u662f\u5426\u6709\u590d\u9009\u6846\uff080--\u6ca1\u6709 1--\u6709\uff09 rightClickSel 0|1 \u53f3\u51fb\u9009\u4e2d\uff080--\u4e0d\u652f\u6301 1--\u652f\u6301\uff09 itemBkgndSkin color \u8868\u9879\u80cc\u666f\u8272 itemSelSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 toggleSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 iconSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 checkSkin \u5b57\u7b26\u4e32 \u76ae\u80a4 colorItemBkgnd color \u8868\u9879\u80cc\u666f\u8272 colorItemSelBkgnd color \u8868\u9879\u80cc\u666f\u8272 colorrItemText color \u8868\u9879\u80cc\u666f\u8272 colorItemSelText color \u8868\u9879\u80cc\u666f\u8272","title":"5.30 \u6811\u63a7\u4ef6"},{"location":"Control/531/","text":"5.31 \u6309\u94ae\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSSkinButton \u63a7\u4ef6\u540d\uff1abutton \u57fa\u7c7b\uff1aSSkinObjBase \u8bf4\u660e\uff1a\u6309\u94ae\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e colorBorder color \u8fb9\u6846\u989c\u8272 colorUp color \u6b63\u5e38\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0a\u6cbf\u8272 colorDown color \u6b63\u5e38\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0b\u6cbf\u8272 colorUpHover color \u6d6e\u52a8\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0a\u6cbf\u8272 colorDownHover color \u6d6e\u52a8\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0b\u6cbf\u8272 colorUpPush color \u4e0b\u538b\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0a\u6cbf\u8272 colorDownPush color \u4e0b\u538b\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0b\u6cbf\u8272 colorUpDisable color \u7981\u7528\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0a\u6cbf\u8272 colorDownDisable color \u7981\u7528\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0b\u6cbf\u8272","title":"5.31 \u6309\u94ae\u63a7\u4ef6"},{"location":"Control/531/#531","text":"\u7c7b\u540d\uff1aSSkinButton \u63a7\u4ef6\u540d\uff1abutton \u57fa\u7c7b\uff1aSSkinObjBase \u8bf4\u660e\uff1a\u6309\u94ae\u63a7\u4ef6 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e colorBorder color \u8fb9\u6846\u989c\u8272 colorUp color \u6b63\u5e38\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0a\u6cbf\u8272 colorDown color \u6b63\u5e38\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0b\u6cbf\u8272 colorUpHover color \u6d6e\u52a8\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0a\u6cbf\u8272 colorDownHover color \u6d6e\u52a8\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0b\u6cbf\u8272 colorUpPush color \u4e0b\u538b\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0a\u6cbf\u8272 colorDownPush color \u4e0b\u538b\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0b\u6cbf\u8272 colorUpDisable color \u7981\u7528\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0a\u6cbf\u8272 colorDownDisable color \u7981\u7528\u72b6\u6001\u7684\u6e10\u53d8\u8272\u4e0b\u6cbf\u8272","title":"5.31 \u6309\u94ae\u63a7\u4ef6"},{"location":"Control/54/","text":"5.4 \u9759\u6001\u6587\u672c\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSStatic \u63a7\u4ef6\u540d\uff1atext \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u9759\u6001\u6587\u672c\u63a7\u4ef6\u53ef\u652f\u6301\u591a\u884c\uff0c\u6709\u591a\u884c\u5c5e\u6027\u65f6\uff0c\\n \u53ef\u4ee5\u5f3a\u5236\u6362\u884c\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e multiLines 0|1 \u591a\u884c\u663e\u793a\uff080--\u5426 1--\u662f\uff09 interHeight \u6570\u5b57 \u591a\u884c\u663e\u793a\u65f6\u884c\u95f4\u8ddd","title":"5.4 \u9759\u6001\u6587\u672c\u63a7\u4ef6"},{"location":"Control/54/#54","text":"\u7c7b\u540d\uff1aSStatic \u63a7\u4ef6\u540d\uff1atext \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u9759\u6001\u6587\u672c\u63a7\u4ef6\u53ef\u652f\u6301\u591a\u884c\uff0c\u6709\u591a\u884c\u5c5e\u6027\u65f6\uff0c\\n \u53ef\u4ee5\u5f3a\u5236\u6362\u884c\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e multiLines 0|1 \u591a\u884c\u663e\u793a\uff080--\u5426 1--\u662f\uff09 interHeight \u6570\u5b57 \u591a\u884c\u663e\u793a\u65f6\u884c\u95f4\u8ddd","title":"5.4 \u9759\u6001\u6587\u672c\u63a7\u4ef6"},{"location":"Control/55/","text":"5.5 \u8d85\u94fe\u63a5\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSLink \u63a7\u4ef6\u540d\uff1alink \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u2026 \u2026\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e href \u5b57\u7b26\u4e32 \u8d85\u94fe\u63a5","title":"5.5 \u8d85\u94fe\u63a5\u63a7\u4ef6"},{"location":"Control/55/#55","text":"\u7c7b\u540d\uff1aSLink \u63a7\u4ef6\u540d\uff1alink \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u2026 \u2026\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e href \u5b57\u7b26\u4e32 \u8d85\u94fe\u63a5","title":"5.5 \u8d85\u94fe\u63a5\u63a7\u4ef6"},{"location":"Control/56/","text":"5.6 \u6309\u94ae/\u56fe\u7247\u6309\u94ae\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSButton\u3001SImageButton \u63a7\u4ef6\u540d\uff1abutton\u3001imgbtn \u57fa\u7c7b\uff1aSWindow\u3001IAcceleratorTarget\u3001ITimelineHandler \u8bf4\u660e\uff1a\u663e\u793a\u6309\u94ae\uff0c\u662f\u4ece SWindow \u6d3e\u751f\u7684\uff0c\u6240\u4ee5\u57fa\u7c7b\u63a7\u4ef6\u5177\u6709\u7684\u5c5e\u6027\u548c\u51fd\u6570\u4e5f\u53ef\u4ee5\u4f7f\u7528\u3002 \u6309\u94ae\u7684\u80cc\u666f\u56fe\u7247\u662f\u7531 4 \u5f20\u5207\u56fe\u62fc\u63a5\u6210\u7684\u5927\u56fe\u7247\uff0c\u5206\u522b\u662f\u666e\u901a\u72b6\u6001\u3001\u9f20\u6807\u79fb\u52a8\u72b6\u6001\u3001\u9f20\u6807\u6309 \u4e0b\u72b6\u6001\u3001\u7981\u7528\u72b6\u6001\u7684\u56fe\u7247\uff0c\u80cc\u666f\u56fe\u7247\u8bbe\u7f6e\u53ef\u4ee5\u901a\u8fc7 skin \u5c5e\u6027\u8bbe\u7f6e\u3002 \u6309\u94ae\u63a7\u4ef6\u6709\u4e24\u79cd\u63a7\u4ef6\u540d\uff0cbutton \u548c imgbtn\uff0c\u552f\u4e00\u7684\u5dee\u522b\u662f imgbtn \u9ed8\u8ba4\u4f1a\u65e0\u6cd5\u83b7\u53d6\u7126 \u70b9\uff0c\u5373\u7528 Tab \u952e\u65e0\u6cd5\u9009\u4e2d imgbtn \u6309\u94ae\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e accel \u52a0\u901f\u952e\u683c\u5f0f \u952e\u76d8\u52a0\u901f\u952e animate 0|1 \u52a8\u753b\u6548\u679c\uff080--\u5173\u95ed 1--\u542f\u7528\uff09 \u51fd\u6570\uff1a \u793a\u4f8b\uff1a","title":"5.6 \u6309\u94ae/\u56fe\u7247\u6309\u94ae\u63a7\u4ef6"},{"location":"Control/56/#56","text":"\u7c7b\u540d\uff1aSButton\u3001SImageButton \u63a7\u4ef6\u540d\uff1abutton\u3001imgbtn \u57fa\u7c7b\uff1aSWindow\u3001IAcceleratorTarget\u3001ITimelineHandler \u8bf4\u660e\uff1a\u663e\u793a\u6309\u94ae\uff0c\u662f\u4ece SWindow \u6d3e\u751f\u7684\uff0c\u6240\u4ee5\u57fa\u7c7b\u63a7\u4ef6\u5177\u6709\u7684\u5c5e\u6027\u548c\u51fd\u6570\u4e5f\u53ef\u4ee5\u4f7f\u7528\u3002 \u6309\u94ae\u7684\u80cc\u666f\u56fe\u7247\u662f\u7531 4 \u5f20\u5207\u56fe\u62fc\u63a5\u6210\u7684\u5927\u56fe\u7247\uff0c\u5206\u522b\u662f\u666e\u901a\u72b6\u6001\u3001\u9f20\u6807\u79fb\u52a8\u72b6\u6001\u3001\u9f20\u6807\u6309 \u4e0b\u72b6\u6001\u3001\u7981\u7528\u72b6\u6001\u7684\u56fe\u7247\uff0c\u80cc\u666f\u56fe\u7247\u8bbe\u7f6e\u53ef\u4ee5\u901a\u8fc7 skin \u5c5e\u6027\u8bbe\u7f6e\u3002 \u6309\u94ae\u63a7\u4ef6\u6709\u4e24\u79cd\u63a7\u4ef6\u540d\uff0cbutton \u548c imgbtn\uff0c\u552f\u4e00\u7684\u5dee\u522b\u662f imgbtn \u9ed8\u8ba4\u4f1a\u65e0\u6cd5\u83b7\u53d6\u7126 \u70b9\uff0c\u5373\u7528 Tab \u952e\u65e0\u6cd5\u9009\u4e2d imgbtn \u6309\u94ae\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e accel \u52a0\u901f\u952e\u683c\u5f0f \u952e\u76d8\u52a0\u901f\u952e animate 0|1 \u52a8\u753b\u6548\u679c\uff080--\u5173\u95ed 1--\u542f\u7528\uff09 \u51fd\u6570\uff1a \u793a\u4f8b\uff1a","title":"5.6 \u6309\u94ae/\u56fe\u7247\u6309\u94ae\u63a7\u4ef6"},{"location":"Control/57/","text":"5.7 \u56fe\u7247\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSImageWnd \u63a7\u4ef6\u540d\uff1aimg \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1aImage Control \u56fe\u7247\u63a7\u4ef6\u7c7b\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 skin \u540d\u79f0 iconIndex \u6570\u5b57 \u7ed8\u5236 skin \u5bf9\u8c61\u7684\u5b50\u56fe\u7d22\u5f15","title":"5.7 \u56fe\u7247\u63a7\u4ef6"},{"location":"Control/57/#57","text":"\u7c7b\u540d\uff1aSImageWnd \u63a7\u4ef6\u540d\uff1aimg \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1aImage Control \u56fe\u7247\u63a7\u4ef6\u7c7b\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 skin \u540d\u79f0 iconIndex \u6570\u5b57 \u7ed8\u5236 skin \u5bf9\u8c61\u7684\u5b50\u56fe\u7d22\u5f15","title":"5.7 \u56fe\u7247\u63a7\u4ef6"},{"location":"Control/58/","text":"5.8 \u52a8\u753b\u56fe\u7247\u7a97\u53e3\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSAnimateImgWnd \u63a7\u4ef6\u540d\uff1aanimateimg \u57fa\u7c7b\uff1aSWindow\u3001ITimelineHandler \u8bf4\u660e\uff1a\u56fe\u7247\u63a7\u4ef6\u7c7b\uff0c\u6b64\u7a97\u53e3\u652f\u6301\u52a8\u753b\u6548\u679c\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u7ed8\u5236\u7a97\u53e3\u7684 Skin\uff08\u57fa\u7c7b\u7684 Skin \u5c06\u5931\u6548\uff09 speed \u6570\u5b57 \u901f\u5ea6 autoStart 0|1 \u662f\u5426\u81ea\u52a8\u8fd0\u884c\uff080--\u5173\u95ed 1--\u542f\u7528\uff09","title":"5.8 \u52a8\u753b\u56fe\u7247\u7a97\u53e3\u63a7\u4ef6"},{"location":"Control/58/#58","text":"\u7c7b\u540d\uff1aSAnimateImgWnd \u63a7\u4ef6\u540d\uff1aanimateimg \u57fa\u7c7b\uff1aSWindow\u3001ITimelineHandler \u8bf4\u660e\uff1a\u56fe\u7247\u63a7\u4ef6\u7c7b\uff0c\u6b64\u7a97\u53e3\u652f\u6301\u52a8\u753b\u6548\u679c\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e skin \u5b57\u7b26\u4e32 \u7ed8\u5236\u7a97\u53e3\u7684 Skin\uff08\u57fa\u7c7b\u7684 Skin \u5c06\u5931\u6548\uff09 speed \u6570\u5b57 \u901f\u5ea6 autoStart 0|1 \u662f\u5426\u81ea\u52a8\u8fd0\u884c\uff080--\u5173\u95ed 1--\u542f\u7528\uff09","title":"5.8 \u52a8\u753b\u56fe\u7247\u7a97\u53e3\u63a7\u4ef6"},{"location":"Control/59/","text":"5.9 \u7ebf\u6761\u63a7\u4ef6 \u00b6 \u7c7b\u540d\uff1aSLine \u63a7\u4ef6\u540d\uff1ahr \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u56fe\u7247\u63a7\u4ef6\u7c7b\uff0c\u6b64\u7a97\u53e3\u652f\u6301\u52a8\u753b\u6548\u679c\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e size \u6570\u5b57 \u5927\u5c0f mode \u5b57\u7b26\u4e32 \u65b9\u5411\uff08vertical,horizontal,tilt\uff09 lineStyle \u5b57\u7b26\u4e32 \u6837\u5f0f\uff08solid,dash,dot,dashdot,dashdotdot\uff09","title":"5.9 \u7ebf\u6761\u63a7\u4ef6"},{"location":"Control/59/#59","text":"\u7c7b\u540d\uff1aSLine \u63a7\u4ef6\u540d\uff1ahr \u57fa\u7c7b\uff1aSWindow \u8bf4\u660e\uff1a\u56fe\u7247\u63a7\u4ef6\u7c7b\uff0c\u6b64\u7a97\u53e3\u652f\u6301\u52a8\u753b\u6548\u679c\u3002 \u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u7c7b\u578b \u8bf4\u660e size \u6570\u5b57 \u5927\u5c0f mode \u5b57\u7b26\u4e32 \u65b9\u5411\uff08vertical,horizontal,tilt\uff09 lineStyle \u5b57\u7b26\u4e32 \u6837\u5f0f\uff08solid,dash,dot,dashdot,dashdotdot\uff09","title":"5.9 \u7ebf\u6761\u63a7\u4ef6"},{"location":"Control/Summary/","text":"5\u3001\u63a7\u4ef6\u8bf4\u660e\uff08SOUI\uff09 \u00b6 \u6839\u636e\u201c\u5c5e\u6027\u5217\u8868.xls\u201d\u6587\u6863\u6574\u7406\uff0c\u5e76\u5254\u9664\u4e86\u4e0e\u4ee3\u7801\u4e0d\u7b26\u7684\u7a7a\u95f4\u548c\u5c5e\u6027\uff1b \u4e2a\u4eba\u7cbe\u529b\u6709\u9650\uff0c\u6b22\u8fce\u5927\u5bb6\u6279\u8bc4\u6307\u6b63\u3002","title":"5\u3001\u63a7\u4ef6\u8bf4\u660e\uff08SOUI\uff09"},{"location":"Control/Summary/#5soui","text":"\u6839\u636e\u201c\u5c5e\u6027\u5217\u8868.xls\u201d\u6587\u6863\u6574\u7406\uff0c\u5e76\u5254\u9664\u4e86\u4e0e\u4ee3\u7801\u4e0d\u7b26\u7684\u7a7a\u95f4\u548c\u5c5e\u6027\uff1b \u4e2a\u4eba\u7cbe\u529b\u6709\u9650\uff0c\u6b22\u8fce\u5927\u5bb6\u6279\u8bc4\u6307\u6b63\u3002","title":"5\u3001\u63a7\u4ef6\u8bf4\u660e\uff08SOUI\uff09"},{"location":"Create/31/","text":"3\u3001\u5f00\u59cb\u4f7f\u7528 SOUI \u00b6 3.1 \u521b\u5efa SOUI \u9879\u76ee\uff08\u624b\u5de5\u521b\u5efa\uff09 3.1.1 \u9879\u76ee\u73af\u5883\u914d\u7f6e SOUI \u9879\u76ee\u672c\u8d28\u662f\u4e00\u4e2a\u57fa\u4e8e Win32 \u7a97\u53e3\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u56e0\u6b64\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u4ece Win32 \u7a97\u53e3\u5e94 \u7528\u7a0b\u5e8f\u5411\u5bfc\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684 Win32 \u9879\u76ee\u3002 \u5e76\u5728\u7b2c 3 \u9875\u9009\u62e9\u201cWindow \u5e94\u7528\u7a0b\u5e8f\" \u9009\u62e9\u201c\u5b8c\u6210\u201d\u540e\u751f\u6210\u4e00\u4e2a Win32 \u5e94\u7528\u7a0b\u5e8f\u9aa8\u67b6\u3002 \u9879\u76ee\u7684\u6587\u4ef6\u7ed3\u6784\u5982\u4e0b\u56fe\uff1a \u8981\u4f7f\u7528 SOUI \u5f00\u53d1\u7a0b\u5e8f\uff0c\u9996\u5148\u5f53\u7136\u662f\u8981\u627e\u5230\u4ece SVN \u83b7\u53d6\u7684 SOUI \u9879\u76ee\u4ee3\u7801\uff0c\u7f16\u8bd1\u540e\u628a include \u548c lib \u62f7\u8d1d\u5230\u9879\u76ee\u6587\u4ef6\u5939\u3002\u5047\u5b9a\u628a\u5934\u6587\u4ef6\u548c\u5e93\u90fd\u62f7\u8d1d\u81f3\u9879\u76ee extra_lib \u6587\u4ef6\u5939\u4e0b\u3002 \u6211\u4eec\u9700\u8981\u5728 VS \u7684 include \u76ee\u5f55\u4e2d\u589e\u52a0\u4e24\u4e2a\u76ee\u5f55\uff1a \"..\\extra_lib\\include\\soui\"\uff1b\"..\\extra_lib\\include\\utilities\" \u5982\u56fe\uff1a \u6ce8\uff1aSOUI ver2.3.1.1 \u8fd8\u9700\u8981\u589e\u52a0\u4e00\u4e2a\u5305\u542b\u76ee\u5f55\uff1a..\\extra_lib\\include\\config \u9996\u5148\u8bbe\u7f6e\u8bbe\u7f6e\u9644\u52a0\u5e93\u76ee\u5f55\u4e3a\u201c../extra_lib/lib\u201d\uff0c\u518d\u9644\u52a0\u4f9d\u8d56\u9879\u6dfb\u52a0\u4e24\u4e2a\u5e93\u6587\u4ef6\uff1a souid.lib,utilitiesd.lib(\u4ee5 debug \u7248\u672c\u4e3a\u4f8b\uff09\u3002 \u8bbe\u7f6e\u597d\u9879\u76ee\u540e\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8fd8\u9700\u8981\u628a\u7f16\u8bd1\u9009\u9879\u4e2d\u7684\u201c\u4ee3\u7801\u751f\u6210\u201d\u4ece MDd \u4fee\u6539\u4e3a MTd\uff0c\u5e76 \u628a\u201c\u5c06 wchar_t \u89c6\u4e3a\u5185\u7f6e\u7c7b\u578b\u201d\u4fee\u6539\u4e3a\u201c\u5426\u201d\u3002\uff08\u56e0\u4e3a\u8fd9\u662f SOUI \u7684\u9ed8\u8ba4\u7f16\u8bd1\u914d\u7f6e\uff09 \u5230\u8fd9\u91cc\u73af\u5883\u914d\u7f6e\u57fa\u672c\u5b8c\u6210 3.1.2 \u9879\u76ee\u8d44\u6e90\u51c6\u5907 \u5230\u8fd9\u91cc\u51c6\u5907\u5de5\u4f5c\u8fd8\u6ca1\u6709\u5b8c\uff0c\u6211\u4eec\u9700\u8981\u4e3a SOUI \u51c6\u5907\u4e00\u5957\u7a0b\u5e8f\u8d44\u6e90\uff0c\u5e76\u628a\u5b83\u653e\u5230\u9879\u76ee\u76ee\u5f55 \u4e0b\u3002 \u6700\u57fa\u672c\u7684\u8d44\u6e90\u81f3\u5c11\u5e94\u8be5\u5305\u62ec\uff1a uires.idx\uff1a\u5b9a\u4e49\u8d44\u6e90\u7d22\u5f15 init.xml\uff1a\u5b9a\u4e49\u5168\u5c40 UI \u7684\u5c5e\u6027\uff0c\u5305\u542b\u5b57\u4f53\uff0c\u5b57\u7b26\u4e32\u8868\uff0cskin\uff0cstyle\uff0cobjattr\uff0c\u53c2\u89c1\u524d\u7bc7\u4ecb \u7ecd\u3002 dlg_main.xml:\u4e3b\u7a97\u53e3\u800c\u5df2 XML\u3002 init.xml \u548c dlg_main.xml \u7684\u6587\u4ef6\u540d\u4e0d\u9650\uff0c\u4f46\u662f uires.idx \u7684\u6587\u4ef6\u540d\u662f\u56fa\u5b9a\u7684\u3002 uires.idx\uff1a <resource> <UIDEF> <file name=\"XML_INIT\" path=\"xml\\init.xml\" /> </UIDEF> <LAYOUT> <file name=\"XML_MAINWND\" path=\"xml\\dlg_main.xml\" /> </LAYOUT> </resource> init.xml: <?xml version=\"1.0\" encoding=\"utf-8\"?> <UIDEF> <font face= \"\u5b8b\u4f53\" size= \"15\" /> <string> <title value= \"\" /> <ver value= \"1.0\" /> </string> <skin> </skin> <style> <class name= \"normalbtn\" font= \"\" colorText= \"#385e8b\" colorTextDisable= \"#91a7c0\" textMode= \"25\" cursor= \"hand\" margin-x= \"0\" /> </style> <objattr> </objattr> </UIDEF> dlg_main.xml: <SOUI name= \"mainWindow\" title= \"%title% ver:%ver%\" width= \"600\" height= \"400\" appWnd= \"1\" margin= \"20,5,5,5\" resizable= \"1\" translucent= \"1\" > <root skin= \"_skin.sys.wnd.bkgnd\" > <caption pos= \"0,0,-0,30\" > <text pos= \"11,9\" > %title% ver:%ver% </text> <imgbtn name= \"btn_close\" skin= \"_skin.sys.btn.close\" pos= \"-45,0\" tip= \"close\" animate= \"1\" /> <imgbtn name= \"btn_max\" skin= \"_skin.sys.btn.maximize\" pos= \"-83,0\" animate= \"1\" /> <imgbtn name= \"btn_restore\" skin= \"_skin.sys.btn.restore\" pos= \"-83,0\" show= \"0\" animate= \"1\" /> <imgbtn name= \"btn_min\" skin= \"_skin.sys.btn.minimize\" pos= \"-121,0\" animate= \"1\" /> </caption> <window pos= \"5,30,-5,-5\" > <text pos= \"|0,|0\" pos2type= \"center\" colorText= \"#ff0000\" > Hellow World! UI? Just so so! </text> <button class = \"normalbtn\" pos= \"|-50,[20,@100,@30\" name= \"btn_msgbox\" > show msg box </button> </window> </root> </SOUI> \u5982\u679c\u5bf9 UI \u5e03\u5c40\u4e0d\u660e\u767d\u53ef\u4ee5\u53c2\u8003\u7ae0\u8282 4.1.2\uff08\u5373\u201c\u7b2c\u4e94\u7bc7\u201d<\u9700\u8981\u66f4\u65b0>\uff09\u3002 3.1.3 \u5f00\u59cb\u7f16\u7801\u3010TODO\uff1a\u4e0d\u9002\u7528 SOUI ver2.3.1.1\uff0c\u9700\u66f4\u65b0\u3011 \u8981\u5f00\u59cb\u7f16\u5199\u4ee3\u7801\u8fd8\u9700\u8981\u4fee\u6539\u4e00\u4e0b stdafx.h \u5982\u4e0b\uff1a // stdafx.h : \u6807\u51c6\u7cfb\u7edf\u5305\u542b\u6587\u4ef6\u7684\u5305\u542b\u6587\u4ef6\uff0c // \u6216\u662f\u7ecf\u5e38\u4f7f\u7528\u4f46\u4e0d\u5e38\u66f4\u6539\u7684 // \u7279\u5b9a\u4e8e\u9879\u76ee\u7684\u5305\u542b\u6587\u4ef6 // #pragma once #include \"targetver.h\" #define _CRT_SECURE_NO_WARNINGS #define DLL_SOUI //SOUI \u662f\u4ee5 DLL \u63d0\u4f9b\u65f6\u9700\u8981\u5b9a\u4e49\u8fd9\u4e2a\u5b8f #include <souistd.h> #include <core/SHostDialog.h> #include <control/SMessageBox.h> #include <control/souictrls.h> using namespace SOUI ; \u529f\u80fd\u5c31\u662f\u5f15\u7528\u51e0\u4e2a SOUI \u5934\u6587\u4ef6\u3002 \u6253\u5f00 helloworld.cpp\uff0c\u5220\u9664\u6587\u4ef6\u4e2d\u9664\u7a7a main \u51fd\u6570\u4ee5\u5916\u7684\u5168\u90e8\u4ee3\u7801\uff0c\u5269\u4e0b\u7684\u4ee3\u7801\u5982\u4e0b // hellowworld.cpp : \u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u7684\u5165\u53e3\u70b9\u3002 // #include \"stdafx.h\" #include \"hellowworld.h\" int APIENTRY _tWinMain ( HINSTANCE hInstance , HINSTANCE hPrevInstance , LPTSTR lpCmdLine , int nCmdShow ) { return 0 ; } \u8fd9\u662f\u4e00\u4e2a\u53ef\u4ee5\u7f16\u8bd1\u7684\u7a7a\u9879\u76ee\u3002\u4e0b\u9762\uff0c\u6211\u4eec\u5f00\u59cb\u586b\u5145 Main \u7a0b\u5e8f\u6846\u67b6\uff1a // helloworld.cpp : main source file // #include \"stdafx.h\" #include <com-loader.hpp> #ifdef _DEBUG #define COM_IMGDECODER _T(\"imgdecoder-wicd.dll\") #define COM_RENDER_GDI _T(\"render-gdid.dll\") #define SYS_NAMED_RESOURCE _T(\"soui-sys-resourced.dll\") #else #define COM_IMGDECODER _T(\"imgdecoder-wic.dll\") #define COM_RENDER_GDI _T(\"render-gdi.dll\") #define SYS_NAMED_RESOURCE _T(\"soui-sys-resource.dll\") #endif int WINAPI _tWinMain ( HINSTANCE hInstance , HINSTANCE /*hPrevInstance*/ , LPTSTR /*lpstrCmdLine*/ , int /*nCmdShow*/ ) { HRESULT hRes = OleInitialize ( NULL ); SASSERT ( SUCCEEDED ( hRes )); int nRet = 0 ; SComLoader imgDecLoader ; SComLoader renderLoader ; SComLoader transLoader ; //\u5c06\u7a0b\u5e8f\u7684\u8fd0\u884c\u8def\u5f84\u4fee\u6539\u5230\u9879\u76ee\u6240\u5728\u76ee\u5f55\u6240\u5728\u7684\u76ee\u5f55 TCHAR szCurrentDir [ MAX_PATH ] = { 0 }; GetModuleFileName ( NULL , szCurrentDir , sizeof ( szCurrentDir ) ); LPTSTR lpInsertPos = _tcsrchr ( szCurrentDir , _T ( '\\\\' ) ); _tcscpy ( lpInsertPos + 1 , _T ( \"..\" )); SetCurrentDirectory ( szCurrentDir ); { CAutoRefPtr < SOUI :: IImgDecoderFactory > pImgDecoderFactory ; CAutoRefPtr < SOUI :: IRenderFactory > pRenderFactory ; imgDecLoader . CreateInstance ( COM_IMGDECODER ,( IObjRef ** ) & pImgDecoderFactory ); renderLoader . CreateInstance ( COM_RENDER_GDI ,( IObjRef ** ) & pRenderFactory ); pRenderFactory -> SetImgDecoderFactory ( pImgDecoderFactory ); SApplication * theApp = new SApplication ( pRenderFactory , hInstance ); HMODULE hSysResource = LoadLibrary ( SYS_NAMED_RESOURCE ); if ( hSysResource ) { CAutoRefPtr < IResProvider > sysSesProvider ; CreateResProvider ( RES_PE ,( IObjRef ** ) & sysSesProvider ); sysSesProvider -> Init (( WPARAM ) hSysResource , 0 ); theApp -> LoadSystemNamedResource ( sysSesProvider ); } CAutoRefPtr < IResProvider > pResProvider ; CreateResProvider ( RES_FILE ,( IObjRef ** ) & pResProvider ); if ( ! pResProvider -> Init (( LPARAM ) _T ( \"uires\" ), 0 )) { SASSERT ( 0 ); return 1 ; } theApp -> AddResProvider ( pResProvider ); //2.x \u7248\u672c\u5df2\u7ecf\u4e0d\u9700\u8981\u4e0b\u9762\u8fd9\u884c\u3002 //theApp->Init(_T(\"XML_INIT\")); { //\u5728\u8fd9\u91cc\u52a0\u5165\u4e3b\u7a97\u53e3\u8fd0\u884c\u4ee3\u7801 } delete theApp ; } OleUninitialize (); return nRet ; } \u5c06 helloworld.cpp \u4fee\u6539\u5982\u4e0a\u3002 \u8fd9\u91cc\u4e3b\u8981\u529f\u80fd\u662f\u914d\u7f6e\u51e0\u4e2a SOUI \u9700\u8981\u7684\u7ec4\u4ef6\u3002 \u63a5\u4e0b\u6765\uff0c\u4e3a\u4e3b\u7a97\u53e3\u5e03\u5c40\u751f\u6210\u4e00\u4e2a C++\u7c7b \u548c MFC\uff0cWTL \u7b49\u4e00\u6837\uff0cSOUI \u53ef\u4ee5\u6709\u4e24\u79cd\u65b9\u5f0f\u663e\u793a\u7a97\u53e3\uff1a\u6a21\u6001\u4e0e\u975e\u6a21\u6001\u3002 \u8fd9\u91cc\u6211\u4eec\u91c7\u7528\u975e\u6a21\u6001\u7a97\u53e3\u6765\u6f14\u793a\u3002 \u56e0\u6b64\u6211\u4eec\u9700\u8981\u4ece SHostWnd \u6d3e\u751f\u51fa\u4e00\u4e2a C++\u5bf9\u8c61\uff1aCMainWnd // MainWnd.h : interface of the CMainWnd class // //////////////////////////////////////////////////////////////////////////// / #pragma once class CMainWnd : public SHostWnd { public : CMainWnd () : SHostWnd ( _T ( \"LAYOUT:XML_MAINWND\" )) //\u8fd9\u91cc\u5b9a\u4e49\u4e3b\u754c\u9762\u9700\u8981\u4f7f\u7528\u7684\u5e03\u5c40\u6587\u4ef6 { m_bLayoutInited = FALSE ; } void OnClose () { PostMessage ( WM_QUIT ); } void OnMaximize () { SendMessage ( WM_SYSCOMMAND , SC_MAXIMIZE ); } void OnRestore () { SendMessage ( WM_SYSCOMMAND , SC_RESTORE ); } void OnMinimize () { SendMessage ( WM_SYSCOMMAND , SC_MINIMIZE ); } void OnSize ( UINT nType , CSize size ) { SetMsgHandled ( FALSE ); if ( ! m_bLayoutInited ) return ; if ( nType == SIZE_MAXIMIZED ) { FindChildByName ( L \"btn_restore\" ) -> SetVisible ( TRUE ); FindChildByName ( L \"btn_max\" ) -> SetVisible ( FALSE ); } else if ( nType == SIZE_RESTORED ) { FindChildByName ( L \"btn_restore\" ) -> SetVisible ( FALSE ); FindChildByName ( L \"btn_max\" ) -> SetVisible ( TRUE ); } } void OnBtnMsgBox () { SMessageBox ( NULL , _T ( \"this is a message box \"),_T(\" haha \"),MB_OK|MB_ICONEXCLAMATION); SMessageBox ( NULL , _T ( \"this message box includes two buttons \"),_T(\" haha \"),MB_YESNO|MB_ICONQUESTION); SMessageBox ( NULL , _T ( \"this message box includes three buttons \"),NULL,MB_ABORTRETRYIGNORE); } BOOL OnInitDialog ( HWND hWnd , LPARAM lParam ) { m_bLayoutInited = TRUE ; return 0 ; } protected : //\u6309\u94ae\u4e8b\u4ef6\u5904\u7406\u6620\u5c04\u8868 EVENT_MAP_BEGIN () EVENT_NAME_COMMAND ( L \"btn_close\" , OnClose ) EVENT_NAME_COMMAND ( L \"btn_min\" , OnMinimize ) EVENT_NAME_COMMAND ( L \"btn_max\" , OnMaximize ) EVENT_NAME_COMMAND ( L \"btn_restore\" , OnRestore ) EVENT_NAME_COMMAND ( L \"btn_msgbox\" , OnBtnMsgBox ) EVENT_MAP_END () //\u7a97\u53e3\u6d88\u606f\u5904\u7406\u6620\u5c04\u8868 BEGIN_MSG_MAP_EX ( CMainWnd ) MSG_WM_INITDIALOG ( OnInitDialog ) MSG_WM_CLOSE ( OnClose ) MSG_WM_SIZE ( OnSize ) CHAIN_MSG_MAP ( SHostWnd ) //\u6ce8\u610f\u5c06\u6ca1\u6709\u5904\u7406\u7684\u6d88\u606f\u4ea4\u7ed9\u57fa\u7c7b\u5904\u7406 REFLECT_NOTIFICATIONS_EX () END_MSG_MAP () private : BOOL m_bLayoutInited ; }; \u4e3a\u4e86\u4ecb\u7ecd\u65b9\u4fbf\uff0c\u8fd9\u4e2a\u7a97\u53e3\u7c7b\u6240\u6709\u4ee3\u7801\u90fd\u5728\u8fd9\u4e2a mainwnd.h \u6587\u4ef6\u91cc\u3002 \u518d\u8fdb\u4e00\u6b65\u586b\u5145 main \u51fd\u6570 { //\u5728\u8fd9\u91cc\u52a0\u5165\u4e3b\u7a97\u53e3\u8fd0\u884c\u4ee3\u7801 CMainWnd wndMain ; wndMain . Create ( GetActiveWindow (), 0 , 0 , 800 , 600 ); wndMain . SendMessage ( WM_INITDIALOG ); wndMain . CenterWindow ( wndMain . m_hWnd ); wndMain . ShowWindow ( SW_SHOWNORMAL ); nRet = theApp -> Run ( wndMain . m_hWnd ); //\u7a0b\u5e8f\u7ed3\u675f } \u5f53\u7136 main \u524d\u9762\u8fd8\u8981\u6709\u4e00\u884c\uff1a#include \"mainwnd.h\" \u5927\u529f\u9020\u6210\uff01\u7f16\u8bd1\u9879\u76ee\uff0c\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\uff1a","title":"3\u3001\u5f00\u59cb\u4f7f\u7528 SOUI"},{"location":"Create/31/#3-soui","text":"3.1 \u521b\u5efa SOUI \u9879\u76ee\uff08\u624b\u5de5\u521b\u5efa\uff09 3.1.1 \u9879\u76ee\u73af\u5883\u914d\u7f6e SOUI \u9879\u76ee\u672c\u8d28\u662f\u4e00\u4e2a\u57fa\u4e8e Win32 \u7a97\u53e3\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u56e0\u6b64\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u4ece Win32 \u7a97\u53e3\u5e94 \u7528\u7a0b\u5e8f\u5411\u5bfc\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684 Win32 \u9879\u76ee\u3002 \u5e76\u5728\u7b2c 3 \u9875\u9009\u62e9\u201cWindow \u5e94\u7528\u7a0b\u5e8f\" \u9009\u62e9\u201c\u5b8c\u6210\u201d\u540e\u751f\u6210\u4e00\u4e2a Win32 \u5e94\u7528\u7a0b\u5e8f\u9aa8\u67b6\u3002 \u9879\u76ee\u7684\u6587\u4ef6\u7ed3\u6784\u5982\u4e0b\u56fe\uff1a \u8981\u4f7f\u7528 SOUI \u5f00\u53d1\u7a0b\u5e8f\uff0c\u9996\u5148\u5f53\u7136\u662f\u8981\u627e\u5230\u4ece SVN \u83b7\u53d6\u7684 SOUI \u9879\u76ee\u4ee3\u7801\uff0c\u7f16\u8bd1\u540e\u628a include \u548c lib \u62f7\u8d1d\u5230\u9879\u76ee\u6587\u4ef6\u5939\u3002\u5047\u5b9a\u628a\u5934\u6587\u4ef6\u548c\u5e93\u90fd\u62f7\u8d1d\u81f3\u9879\u76ee extra_lib \u6587\u4ef6\u5939\u4e0b\u3002 \u6211\u4eec\u9700\u8981\u5728 VS \u7684 include \u76ee\u5f55\u4e2d\u589e\u52a0\u4e24\u4e2a\u76ee\u5f55\uff1a \"..\\extra_lib\\include\\soui\"\uff1b\"..\\extra_lib\\include\\utilities\" \u5982\u56fe\uff1a \u6ce8\uff1aSOUI ver2.3.1.1 \u8fd8\u9700\u8981\u589e\u52a0\u4e00\u4e2a\u5305\u542b\u76ee\u5f55\uff1a..\\extra_lib\\include\\config \u9996\u5148\u8bbe\u7f6e\u8bbe\u7f6e\u9644\u52a0\u5e93\u76ee\u5f55\u4e3a\u201c../extra_lib/lib\u201d\uff0c\u518d\u9644\u52a0\u4f9d\u8d56\u9879\u6dfb\u52a0\u4e24\u4e2a\u5e93\u6587\u4ef6\uff1a souid.lib,utilitiesd.lib(\u4ee5 debug \u7248\u672c\u4e3a\u4f8b\uff09\u3002 \u8bbe\u7f6e\u597d\u9879\u76ee\u540e\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8fd8\u9700\u8981\u628a\u7f16\u8bd1\u9009\u9879\u4e2d\u7684\u201c\u4ee3\u7801\u751f\u6210\u201d\u4ece MDd \u4fee\u6539\u4e3a MTd\uff0c\u5e76 \u628a\u201c\u5c06 wchar_t \u89c6\u4e3a\u5185\u7f6e\u7c7b\u578b\u201d\u4fee\u6539\u4e3a\u201c\u5426\u201d\u3002\uff08\u56e0\u4e3a\u8fd9\u662f SOUI \u7684\u9ed8\u8ba4\u7f16\u8bd1\u914d\u7f6e\uff09 \u5230\u8fd9\u91cc\u73af\u5883\u914d\u7f6e\u57fa\u672c\u5b8c\u6210 3.1.2 \u9879\u76ee\u8d44\u6e90\u51c6\u5907 \u5230\u8fd9\u91cc\u51c6\u5907\u5de5\u4f5c\u8fd8\u6ca1\u6709\u5b8c\uff0c\u6211\u4eec\u9700\u8981\u4e3a SOUI \u51c6\u5907\u4e00\u5957\u7a0b\u5e8f\u8d44\u6e90\uff0c\u5e76\u628a\u5b83\u653e\u5230\u9879\u76ee\u76ee\u5f55 \u4e0b\u3002 \u6700\u57fa\u672c\u7684\u8d44\u6e90\u81f3\u5c11\u5e94\u8be5\u5305\u62ec\uff1a uires.idx\uff1a\u5b9a\u4e49\u8d44\u6e90\u7d22\u5f15 init.xml\uff1a\u5b9a\u4e49\u5168\u5c40 UI \u7684\u5c5e\u6027\uff0c\u5305\u542b\u5b57\u4f53\uff0c\u5b57\u7b26\u4e32\u8868\uff0cskin\uff0cstyle\uff0cobjattr\uff0c\u53c2\u89c1\u524d\u7bc7\u4ecb \u7ecd\u3002 dlg_main.xml:\u4e3b\u7a97\u53e3\u800c\u5df2 XML\u3002 init.xml \u548c dlg_main.xml \u7684\u6587\u4ef6\u540d\u4e0d\u9650\uff0c\u4f46\u662f uires.idx \u7684\u6587\u4ef6\u540d\u662f\u56fa\u5b9a\u7684\u3002 uires.idx\uff1a <resource> <UIDEF> <file name=\"XML_INIT\" path=\"xml\\init.xml\" /> </UIDEF> <LAYOUT> <file name=\"XML_MAINWND\" path=\"xml\\dlg_main.xml\" /> </LAYOUT> </resource> init.xml: <?xml version=\"1.0\" encoding=\"utf-8\"?> <UIDEF> <font face= \"\u5b8b\u4f53\" size= \"15\" /> <string> <title value= \"\" /> <ver value= \"1.0\" /> </string> <skin> </skin> <style> <class name= \"normalbtn\" font= \"\" colorText= \"#385e8b\" colorTextDisable= \"#91a7c0\" textMode= \"25\" cursor= \"hand\" margin-x= \"0\" /> </style> <objattr> </objattr> </UIDEF> dlg_main.xml: <SOUI name= \"mainWindow\" title= \"%title% ver:%ver%\" width= \"600\" height= \"400\" appWnd= \"1\" margin= \"20,5,5,5\" resizable= \"1\" translucent= \"1\" > <root skin= \"_skin.sys.wnd.bkgnd\" > <caption pos= \"0,0,-0,30\" > <text pos= \"11,9\" > %title% ver:%ver% </text> <imgbtn name= \"btn_close\" skin= \"_skin.sys.btn.close\" pos= \"-45,0\" tip= \"close\" animate= \"1\" /> <imgbtn name= \"btn_max\" skin= \"_skin.sys.btn.maximize\" pos= \"-83,0\" animate= \"1\" /> <imgbtn name= \"btn_restore\" skin= \"_skin.sys.btn.restore\" pos= \"-83,0\" show= \"0\" animate= \"1\" /> <imgbtn name= \"btn_min\" skin= \"_skin.sys.btn.minimize\" pos= \"-121,0\" animate= \"1\" /> </caption> <window pos= \"5,30,-5,-5\" > <text pos= \"|0,|0\" pos2type= \"center\" colorText= \"#ff0000\" > Hellow World! UI? Just so so! </text> <button class = \"normalbtn\" pos= \"|-50,[20,@100,@30\" name= \"btn_msgbox\" > show msg box </button> </window> </root> </SOUI> \u5982\u679c\u5bf9 UI \u5e03\u5c40\u4e0d\u660e\u767d\u53ef\u4ee5\u53c2\u8003\u7ae0\u8282 4.1.2\uff08\u5373\u201c\u7b2c\u4e94\u7bc7\u201d<\u9700\u8981\u66f4\u65b0>\uff09\u3002 3.1.3 \u5f00\u59cb\u7f16\u7801\u3010TODO\uff1a\u4e0d\u9002\u7528 SOUI ver2.3.1.1\uff0c\u9700\u66f4\u65b0\u3011 \u8981\u5f00\u59cb\u7f16\u5199\u4ee3\u7801\u8fd8\u9700\u8981\u4fee\u6539\u4e00\u4e0b stdafx.h \u5982\u4e0b\uff1a // stdafx.h : \u6807\u51c6\u7cfb\u7edf\u5305\u542b\u6587\u4ef6\u7684\u5305\u542b\u6587\u4ef6\uff0c // \u6216\u662f\u7ecf\u5e38\u4f7f\u7528\u4f46\u4e0d\u5e38\u66f4\u6539\u7684 // \u7279\u5b9a\u4e8e\u9879\u76ee\u7684\u5305\u542b\u6587\u4ef6 // #pragma once #include \"targetver.h\" #define _CRT_SECURE_NO_WARNINGS #define DLL_SOUI //SOUI \u662f\u4ee5 DLL \u63d0\u4f9b\u65f6\u9700\u8981\u5b9a\u4e49\u8fd9\u4e2a\u5b8f #include <souistd.h> #include <core/SHostDialog.h> #include <control/SMessageBox.h> #include <control/souictrls.h> using namespace SOUI ; \u529f\u80fd\u5c31\u662f\u5f15\u7528\u51e0\u4e2a SOUI \u5934\u6587\u4ef6\u3002 \u6253\u5f00 helloworld.cpp\uff0c\u5220\u9664\u6587\u4ef6\u4e2d\u9664\u7a7a main \u51fd\u6570\u4ee5\u5916\u7684\u5168\u90e8\u4ee3\u7801\uff0c\u5269\u4e0b\u7684\u4ee3\u7801\u5982\u4e0b // hellowworld.cpp : \u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u7684\u5165\u53e3\u70b9\u3002 // #include \"stdafx.h\" #include \"hellowworld.h\" int APIENTRY _tWinMain ( HINSTANCE hInstance , HINSTANCE hPrevInstance , LPTSTR lpCmdLine , int nCmdShow ) { return 0 ; } \u8fd9\u662f\u4e00\u4e2a\u53ef\u4ee5\u7f16\u8bd1\u7684\u7a7a\u9879\u76ee\u3002\u4e0b\u9762\uff0c\u6211\u4eec\u5f00\u59cb\u586b\u5145 Main \u7a0b\u5e8f\u6846\u67b6\uff1a // helloworld.cpp : main source file // #include \"stdafx.h\" #include <com-loader.hpp> #ifdef _DEBUG #define COM_IMGDECODER _T(\"imgdecoder-wicd.dll\") #define COM_RENDER_GDI _T(\"render-gdid.dll\") #define SYS_NAMED_RESOURCE _T(\"soui-sys-resourced.dll\") #else #define COM_IMGDECODER _T(\"imgdecoder-wic.dll\") #define COM_RENDER_GDI _T(\"render-gdi.dll\") #define SYS_NAMED_RESOURCE _T(\"soui-sys-resource.dll\") #endif int WINAPI _tWinMain ( HINSTANCE hInstance , HINSTANCE /*hPrevInstance*/ , LPTSTR /*lpstrCmdLine*/ , int /*nCmdShow*/ ) { HRESULT hRes = OleInitialize ( NULL ); SASSERT ( SUCCEEDED ( hRes )); int nRet = 0 ; SComLoader imgDecLoader ; SComLoader renderLoader ; SComLoader transLoader ; //\u5c06\u7a0b\u5e8f\u7684\u8fd0\u884c\u8def\u5f84\u4fee\u6539\u5230\u9879\u76ee\u6240\u5728\u76ee\u5f55\u6240\u5728\u7684\u76ee\u5f55 TCHAR szCurrentDir [ MAX_PATH ] = { 0 }; GetModuleFileName ( NULL , szCurrentDir , sizeof ( szCurrentDir ) ); LPTSTR lpInsertPos = _tcsrchr ( szCurrentDir , _T ( '\\\\' ) ); _tcscpy ( lpInsertPos + 1 , _T ( \"..\" )); SetCurrentDirectory ( szCurrentDir ); { CAutoRefPtr < SOUI :: IImgDecoderFactory > pImgDecoderFactory ; CAutoRefPtr < SOUI :: IRenderFactory > pRenderFactory ; imgDecLoader . CreateInstance ( COM_IMGDECODER ,( IObjRef ** ) & pImgDecoderFactory ); renderLoader . CreateInstance ( COM_RENDER_GDI ,( IObjRef ** ) & pRenderFactory ); pRenderFactory -> SetImgDecoderFactory ( pImgDecoderFactory ); SApplication * theApp = new SApplication ( pRenderFactory , hInstance ); HMODULE hSysResource = LoadLibrary ( SYS_NAMED_RESOURCE ); if ( hSysResource ) { CAutoRefPtr < IResProvider > sysSesProvider ; CreateResProvider ( RES_PE ,( IObjRef ** ) & sysSesProvider ); sysSesProvider -> Init (( WPARAM ) hSysResource , 0 ); theApp -> LoadSystemNamedResource ( sysSesProvider ); } CAutoRefPtr < IResProvider > pResProvider ; CreateResProvider ( RES_FILE ,( IObjRef ** ) & pResProvider ); if ( ! pResProvider -> Init (( LPARAM ) _T ( \"uires\" ), 0 )) { SASSERT ( 0 ); return 1 ; } theApp -> AddResProvider ( pResProvider ); //2.x \u7248\u672c\u5df2\u7ecf\u4e0d\u9700\u8981\u4e0b\u9762\u8fd9\u884c\u3002 //theApp->Init(_T(\"XML_INIT\")); { //\u5728\u8fd9\u91cc\u52a0\u5165\u4e3b\u7a97\u53e3\u8fd0\u884c\u4ee3\u7801 } delete theApp ; } OleUninitialize (); return nRet ; } \u5c06 helloworld.cpp \u4fee\u6539\u5982\u4e0a\u3002 \u8fd9\u91cc\u4e3b\u8981\u529f\u80fd\u662f\u914d\u7f6e\u51e0\u4e2a SOUI \u9700\u8981\u7684\u7ec4\u4ef6\u3002 \u63a5\u4e0b\u6765\uff0c\u4e3a\u4e3b\u7a97\u53e3\u5e03\u5c40\u751f\u6210\u4e00\u4e2a C++\u7c7b \u548c MFC\uff0cWTL \u7b49\u4e00\u6837\uff0cSOUI \u53ef\u4ee5\u6709\u4e24\u79cd\u65b9\u5f0f\u663e\u793a\u7a97\u53e3\uff1a\u6a21\u6001\u4e0e\u975e\u6a21\u6001\u3002 \u8fd9\u91cc\u6211\u4eec\u91c7\u7528\u975e\u6a21\u6001\u7a97\u53e3\u6765\u6f14\u793a\u3002 \u56e0\u6b64\u6211\u4eec\u9700\u8981\u4ece SHostWnd \u6d3e\u751f\u51fa\u4e00\u4e2a C++\u5bf9\u8c61\uff1aCMainWnd // MainWnd.h : interface of the CMainWnd class // //////////////////////////////////////////////////////////////////////////// / #pragma once class CMainWnd : public SHostWnd { public : CMainWnd () : SHostWnd ( _T ( \"LAYOUT:XML_MAINWND\" )) //\u8fd9\u91cc\u5b9a\u4e49\u4e3b\u754c\u9762\u9700\u8981\u4f7f\u7528\u7684\u5e03\u5c40\u6587\u4ef6 { m_bLayoutInited = FALSE ; } void OnClose () { PostMessage ( WM_QUIT ); } void OnMaximize () { SendMessage ( WM_SYSCOMMAND , SC_MAXIMIZE ); } void OnRestore () { SendMessage ( WM_SYSCOMMAND , SC_RESTORE ); } void OnMinimize () { SendMessage ( WM_SYSCOMMAND , SC_MINIMIZE ); } void OnSize ( UINT nType , CSize size ) { SetMsgHandled ( FALSE ); if ( ! m_bLayoutInited ) return ; if ( nType == SIZE_MAXIMIZED ) { FindChildByName ( L \"btn_restore\" ) -> SetVisible ( TRUE ); FindChildByName ( L \"btn_max\" ) -> SetVisible ( FALSE ); } else if ( nType == SIZE_RESTORED ) { FindChildByName ( L \"btn_restore\" ) -> SetVisible ( FALSE ); FindChildByName ( L \"btn_max\" ) -> SetVisible ( TRUE ); } } void OnBtnMsgBox () { SMessageBox ( NULL , _T ( \"this is a message box \"),_T(\" haha \"),MB_OK|MB_ICONEXCLAMATION); SMessageBox ( NULL , _T ( \"this message box includes two buttons \"),_T(\" haha \"),MB_YESNO|MB_ICONQUESTION); SMessageBox ( NULL , _T ( \"this message box includes three buttons \"),NULL,MB_ABORTRETRYIGNORE); } BOOL OnInitDialog ( HWND hWnd , LPARAM lParam ) { m_bLayoutInited = TRUE ; return 0 ; } protected : //\u6309\u94ae\u4e8b\u4ef6\u5904\u7406\u6620\u5c04\u8868 EVENT_MAP_BEGIN () EVENT_NAME_COMMAND ( L \"btn_close\" , OnClose ) EVENT_NAME_COMMAND ( L \"btn_min\" , OnMinimize ) EVENT_NAME_COMMAND ( L \"btn_max\" , OnMaximize ) EVENT_NAME_COMMAND ( L \"btn_restore\" , OnRestore ) EVENT_NAME_COMMAND ( L \"btn_msgbox\" , OnBtnMsgBox ) EVENT_MAP_END () //\u7a97\u53e3\u6d88\u606f\u5904\u7406\u6620\u5c04\u8868 BEGIN_MSG_MAP_EX ( CMainWnd ) MSG_WM_INITDIALOG ( OnInitDialog ) MSG_WM_CLOSE ( OnClose ) MSG_WM_SIZE ( OnSize ) CHAIN_MSG_MAP ( SHostWnd ) //\u6ce8\u610f\u5c06\u6ca1\u6709\u5904\u7406\u7684\u6d88\u606f\u4ea4\u7ed9\u57fa\u7c7b\u5904\u7406 REFLECT_NOTIFICATIONS_EX () END_MSG_MAP () private : BOOL m_bLayoutInited ; }; \u4e3a\u4e86\u4ecb\u7ecd\u65b9\u4fbf\uff0c\u8fd9\u4e2a\u7a97\u53e3\u7c7b\u6240\u6709\u4ee3\u7801\u90fd\u5728\u8fd9\u4e2a mainwnd.h \u6587\u4ef6\u91cc\u3002 \u518d\u8fdb\u4e00\u6b65\u586b\u5145 main \u51fd\u6570 { //\u5728\u8fd9\u91cc\u52a0\u5165\u4e3b\u7a97\u53e3\u8fd0\u884c\u4ee3\u7801 CMainWnd wndMain ; wndMain . Create ( GetActiveWindow (), 0 , 0 , 800 , 600 ); wndMain . SendMessage ( WM_INITDIALOG ); wndMain . CenterWindow ( wndMain . m_hWnd ); wndMain . ShowWindow ( SW_SHOWNORMAL ); nRet = theApp -> Run ( wndMain . m_hWnd ); //\u7a0b\u5e8f\u7ed3\u675f } \u5f53\u7136 main \u524d\u9762\u8fd8\u8981\u6709\u4e00\u884c\uff1a#include \"mainwnd.h\" \u5927\u529f\u9020\u6210\uff01\u7f16\u8bd1\u9879\u76ee\uff0c\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\uff1a","title":"3\u3001\u5f00\u59cb\u4f7f\u7528 SOUI"},{"location":"Create/32/","text":"3\u3001\u5f00\u59cb\u4f7f\u7528 SOUI \u00b6 3.2 \u221a\u521b\u5efa SOUI \u9879\u76ee\uff08\u901a\u8fc7\u5411\u5bfc\u521b\u5efa\uff09 \u5f00\u53d1\u4e00\u4e2a\u4f7f\u7528 SOUI \u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5982\u679c\u4ece Win32 \u9879\u76ee\u7c7b\u578b\u5f00\u59cb\uff0c\u5373\u4fbf\u662f\u5bf9 SOUI \u8fd9\u6837\u4e86\u5982 \u6307\u638c\uff0c\u4e5f\u81f3\u5c11\u8981 10 \u5206\u949f\u4ee5\u4e0a\u624d\u80fd\u914d\u7f6e\u51fa\u4e00\u4e2a\u4f7f\u7528 SOUI \u7684\u5f00\u53d1\u73af\u5883\u3002 \u4e3a\u4e86\u5e2e\u52a9\u7a0b\u5e8f\u5458\u4ece\u7b80\u5355\u7684\u91cd\u590d\u52b3\u52a8\u89e3\u8131\u51fa\u6765\uff0c\u4e5f\u5e2e\u52a9\u521d\u5b66\u90fd\u5feb\u901f\u5f00\u59cb\uff0c\u6211\u7279\u522b\u4e3a SOUI \u5236 \u4f5c\u4e86\u4e00\u4e2a\u9002\u7528\u4e8e VS \u5404\u7248\u672c\u7684\u5e94\u7528\u7a0b\u5e8f\u5411\u5bfc\u3002 \u4f7f\u7528\u5411\u5bfc\u53ef\u4ee5\u901a\u8fc7\u7b80\u5355\u7684\u9009\u62e9\u4e24\u4e2a\u9009\u9879\u5c31\u81ea\u52a8\u5b8c\u5168\u9879\u76ee\u914d\u7f6e\uff0c\u7f16\u8bd1\u5373\u53ef\u770b\u5230 UI \u5e03\u5c40\u7ed3\u679c\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528\u90a3\u4e2a\u7248\u672c\u7684 SOUI\uff0c\u9700\u8981\u5b89\u88c5\u5bf9\u5e94\u7248\u672c\u7684\u5411\u5bfc\u3002 3.2.1 SOUI \u5411\u5bfc\u7684\u5b89\u88c5 \u5728 SOUI \u9879\u76ee\u4e0b\u6709\u4e00\u4e2a wizard \u76ee\u5f55\uff0c\u8fd0\u884c\u76ee\u5f55\u4e0b\u7684 wizard.setup.exe \u4f1a\u663e\u793a\u4e0b\u9762\u754c\u9762\uff1a \u5982\u679c\u7cfb\u7edf\u5b89\u88c5\u4e86\u591a\u4e2a\u7248\u672c\u7684 visual studio\uff0c\u8fd9\u91cc\u5c06\u663e\u793a\u591a\u4e2a vs\uff1b\u9009\u62e9\u4e00\u4e2a\u7cfb\u7edf\u4e2d\u5b89\u88c5\u7684 VS \u7248\u672c\uff0c\u70b9\u51fb\u5b89\u88c5\u5c31\u4f1a\u5411\u8be5\u7248\u672c\u4e2d\u5b89\u88c5 SOUI \u5411\u5bfc\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5173\u95ed\u5df2\u6253\u5f00\u7684 vs\uff0c\u518d\u8fdb\u884c\u5b89\u88c5 SOUI \u5411\u5bfc\uff0c\u907f\u514d\u51fa\u73b0\u4e0d\u5fc5\u8981\u7684\u6545\u969c\u3002 \u5b89\u88c5\u6210\u529f\u540e\u663e\u793a: \u6ce8\uff1a\u7cfb\u7edf\u4e0d\u540c vs \u7248\u672c\uff0cwizard \u4f1a\u663e\u793a\u4e0d\u540c\u7684 vs \u7248\u672c\uff1b \u539f\u6765 DuiEngine \u7684\u5411\u5bfc\u5b89\u88c5\u7a0b\u5e8f\u8fd0\u884c\u540e\u8bbe\u7f6e\u7684\u73af\u5883\u53d8\u91cf\u7ecf\u5e38\u8981\u91cd\u542f\u7cfb\u7edf\u624d\u751f\u6548\uff0c SOUI \u5411\u5bfc\u5df2\u7ecf\u7ecf\u8fc7\u4f18\u5316\uff0c\u4e0d\u9700\u8981\u91cd\u542f\u7cfb\u7edf\u3002\u4f46\u5df2\u6253\u5f00 VS \u80af\u5b9a\u662f\u65e0\u65b0\u589e\u52a0\u7684\u73af\u5883\u53d8\u91cf\u7684\u3002 3.2.2 \u4f7f\u7528\u5411\u5bfc\u521b\u5efa SOUI \u9879\u76ee \u6253\u5f00 VS \u7684\u65b0\u5efa\u9879\u76ee\u7a97\u53e3\uff0c\u4f1a\u5728\u201cVirtual C++\u201d\u4e0b\u627e\u5230 SOUI \u5e94\u7528\u7a0b\u5e8f\u5411\u5bfc \u8f93\u5165\u9879\u76ee\u540d\u79f0\u540e\u70b9\u51fb\u786e\u5b9a\u6253\u5f00 SOUI \u5411\u5bfc\u9875\uff08\u53ea\u6709\u4e00\u9875\uff09 \u6ce8\uff1a\u8d44\u6e90\u662f\u5426\u7f16\u8bd1\u8fdb EXE \u6587\u4ef6\uff0c\u53ef\u6839\u636e\u9700\u8981\u6765\u9009\u62e9\uff01 \u70b9\u51fb\u5b8c\u6210\u5373\u53ef\u5f00\u59cb\u4eab\u53d7\u6700\u7b80\u5355\u9ad8\u6548\u7684\u754c\u9762\u7f16\u7a0b\u4e86\u3002","title":"3\u3001\u5f00\u59cb\u4f7f\u7528 SOUI"},{"location":"Create/32/#3-soui","text":"3.2 \u221a\u521b\u5efa SOUI \u9879\u76ee\uff08\u901a\u8fc7\u5411\u5bfc\u521b\u5efa\uff09 \u5f00\u53d1\u4e00\u4e2a\u4f7f\u7528 SOUI \u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5982\u679c\u4ece Win32 \u9879\u76ee\u7c7b\u578b\u5f00\u59cb\uff0c\u5373\u4fbf\u662f\u5bf9 SOUI \u8fd9\u6837\u4e86\u5982 \u6307\u638c\uff0c\u4e5f\u81f3\u5c11\u8981 10 \u5206\u949f\u4ee5\u4e0a\u624d\u80fd\u914d\u7f6e\u51fa\u4e00\u4e2a\u4f7f\u7528 SOUI \u7684\u5f00\u53d1\u73af\u5883\u3002 \u4e3a\u4e86\u5e2e\u52a9\u7a0b\u5e8f\u5458\u4ece\u7b80\u5355\u7684\u91cd\u590d\u52b3\u52a8\u89e3\u8131\u51fa\u6765\uff0c\u4e5f\u5e2e\u52a9\u521d\u5b66\u90fd\u5feb\u901f\u5f00\u59cb\uff0c\u6211\u7279\u522b\u4e3a SOUI \u5236 \u4f5c\u4e86\u4e00\u4e2a\u9002\u7528\u4e8e VS \u5404\u7248\u672c\u7684\u5e94\u7528\u7a0b\u5e8f\u5411\u5bfc\u3002 \u4f7f\u7528\u5411\u5bfc\u53ef\u4ee5\u901a\u8fc7\u7b80\u5355\u7684\u9009\u62e9\u4e24\u4e2a\u9009\u9879\u5c31\u81ea\u52a8\u5b8c\u5168\u9879\u76ee\u914d\u7f6e\uff0c\u7f16\u8bd1\u5373\u53ef\u770b\u5230 UI \u5e03\u5c40\u7ed3\u679c\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528\u90a3\u4e2a\u7248\u672c\u7684 SOUI\uff0c\u9700\u8981\u5b89\u88c5\u5bf9\u5e94\u7248\u672c\u7684\u5411\u5bfc\u3002 3.2.1 SOUI \u5411\u5bfc\u7684\u5b89\u88c5 \u5728 SOUI \u9879\u76ee\u4e0b\u6709\u4e00\u4e2a wizard \u76ee\u5f55\uff0c\u8fd0\u884c\u76ee\u5f55\u4e0b\u7684 wizard.setup.exe \u4f1a\u663e\u793a\u4e0b\u9762\u754c\u9762\uff1a \u5982\u679c\u7cfb\u7edf\u5b89\u88c5\u4e86\u591a\u4e2a\u7248\u672c\u7684 visual studio\uff0c\u8fd9\u91cc\u5c06\u663e\u793a\u591a\u4e2a vs\uff1b\u9009\u62e9\u4e00\u4e2a\u7cfb\u7edf\u4e2d\u5b89\u88c5\u7684 VS \u7248\u672c\uff0c\u70b9\u51fb\u5b89\u88c5\u5c31\u4f1a\u5411\u8be5\u7248\u672c\u4e2d\u5b89\u88c5 SOUI \u5411\u5bfc\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5173\u95ed\u5df2\u6253\u5f00\u7684 vs\uff0c\u518d\u8fdb\u884c\u5b89\u88c5 SOUI \u5411\u5bfc\uff0c\u907f\u514d\u51fa\u73b0\u4e0d\u5fc5\u8981\u7684\u6545\u969c\u3002 \u5b89\u88c5\u6210\u529f\u540e\u663e\u793a: \u6ce8\uff1a\u7cfb\u7edf\u4e0d\u540c vs \u7248\u672c\uff0cwizard \u4f1a\u663e\u793a\u4e0d\u540c\u7684 vs \u7248\u672c\uff1b \u539f\u6765 DuiEngine \u7684\u5411\u5bfc\u5b89\u88c5\u7a0b\u5e8f\u8fd0\u884c\u540e\u8bbe\u7f6e\u7684\u73af\u5883\u53d8\u91cf\u7ecf\u5e38\u8981\u91cd\u542f\u7cfb\u7edf\u624d\u751f\u6548\uff0c SOUI \u5411\u5bfc\u5df2\u7ecf\u7ecf\u8fc7\u4f18\u5316\uff0c\u4e0d\u9700\u8981\u91cd\u542f\u7cfb\u7edf\u3002\u4f46\u5df2\u6253\u5f00 VS \u80af\u5b9a\u662f\u65e0\u65b0\u589e\u52a0\u7684\u73af\u5883\u53d8\u91cf\u7684\u3002 3.2.2 \u4f7f\u7528\u5411\u5bfc\u521b\u5efa SOUI \u9879\u76ee \u6253\u5f00 VS \u7684\u65b0\u5efa\u9879\u76ee\u7a97\u53e3\uff0c\u4f1a\u5728\u201cVirtual C++\u201d\u4e0b\u627e\u5230 SOUI \u5e94\u7528\u7a0b\u5e8f\u5411\u5bfc \u8f93\u5165\u9879\u76ee\u540d\u79f0\u540e\u70b9\u51fb\u786e\u5b9a\u6253\u5f00 SOUI \u5411\u5bfc\u9875\uff08\u53ea\u6709\u4e00\u9875\uff09 \u6ce8\uff1a\u8d44\u6e90\u662f\u5426\u7f16\u8bd1\u8fdb EXE \u6587\u4ef6\uff0c\u53ef\u6839\u636e\u9700\u8981\u6765\u9009\u62e9\uff01 \u70b9\u51fb\u5b8c\u6210\u5373\u53ef\u5f00\u59cb\u4eab\u53d7\u6700\u7b80\u5355\u9ad8\u6548\u7684\u754c\u9762\u7f16\u7a0b\u4e86\u3002","title":"3\u3001\u5f00\u59cb\u4f7f\u7528 SOUI"},{"location":"Create/33/","text":"3\u3001\u5f00\u59cb\u4f7f\u7528 SOUI \u00b6 3.3 \u7f16\u8f91\u5668 SOUI Editor \u4f7f\u7528\u6559\u7a0b \u611f\u8c22\u7f51\u53cb\"\u6307\u5c16\"\u4e3a SOUI \u5f00\u53d1\u7684 UiEditor, \u76ee\u524d\u8be5 UI \u7f16\u8f91\u5668\u5df2\u7ecf\u57fa\u672c\u53ef\u7528, \u6e90\u4ee3\u7801\u5728 soui svn demos\\uieditor\u3002 \u4e0b\u9762\u662f\"\u6307\u5c16\"\u63d0\u4f9b\u7684 GIF \u52a8\u753b\u6559\u7a0b. \u5927\u5bb6\u5feb\u6765\u819c\u62dc\"\u6307\u5c16\", :)","title":"3\u3001\u5f00\u59cb\u4f7f\u7528 SOUI"},{"location":"Create/33/#3-soui","text":"3.3 \u7f16\u8f91\u5668 SOUI Editor \u4f7f\u7528\u6559\u7a0b \u611f\u8c22\u7f51\u53cb\"\u6307\u5c16\"\u4e3a SOUI \u5f00\u53d1\u7684 UiEditor, \u76ee\u524d\u8be5 UI \u7f16\u8f91\u5668\u5df2\u7ecf\u57fa\u672c\u53ef\u7528, \u6e90\u4ee3\u7801\u5728 soui svn demos\\uieditor\u3002 \u4e0b\u9762\u662f\"\u6307\u5c16\"\u63d0\u4f9b\u7684 GIF \u52a8\u753b\u6559\u7a0b. \u5927\u5bb6\u5feb\u6765\u819c\u62dc\"\u6307\u5c16\", :)","title":"3\u3001\u5f00\u59cb\u4f7f\u7528 SOUI"},{"location":"Create/34/","text":"3\u3001\u5f00\u59cb\u4f7f\u7528 SOUI \u00b6 3.4 \u4f7f\u7528 uiresImporter \u751f\u6210 uires.idx \u53ca skin.xml \u5728 SOUI \u4e2d\uff0c\u4f7f\u7528 uires.idx \u8fd9\u4e2a\u6587\u4ef6\u6765\u8bb0\u5f55\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u8d44\u6e90\u6587\u4ef6\u3002 \u6b64\u5916\u7ed8\u5236\u5bf9\u8c61(ISkinObj)\u5219\u4e00\u822c\u653e\u5728 skin.xml \u4e2d\u63cf\u8ff0\u3002 \u8981\u5411\u4e00\u4e2a\u754c\u9762\u4e2d\u589e\u52a0\u4e00\u4e2a\u65b0\u7684\u56fe\u7247\uff0c\u5728\u6ca1\u6709 uiresImporter \u4e4b\u524d\uff0c\u9996\u5148\u6211\u4eec\u9700\u8981\u628a\u65b0\u7684\u56fe \u7247\u8d44\u6e90\u589e\u590d\u5236\u5230 uires \u4e0b\u7684\u67d0\u4e2a\u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u5728 uires.idx \u4e2d\u52a0\u4e00\u6761\u6587\u4ef6\u8bb0\u5f55\uff0c\u7136\u540e\u5728 skin.xml \u4e2d\u4f7f\u7528\u4e00\u4e2a\u9002\u5f53\u7684 skin \u7c7b\u578b(\u4e00\u822c\u662f imglist,imgframe)\u6765\u63cf\u8ff0\u56fe\u7247\u7684\u663e\u793a\u65b9\u5f0f\uff0c \u518d\u5728 UI \u4e2d\u5f15\u7528\u8be5 skin \u6765\u7ed8\u5236\u3002 \u7531\u4e8e SOUI \u76ee\u524d\u6ca1\u6709\u63d0\u4f9b UI \u7f16\u8f91\u5668\uff0c\u6240\u6709\u7684 XML \u90fd\u9700\u8981\u624b\u5199\uff0c\u56fe\u7247\u5f88\u591a\u7684\u65f6\u95f4\u6587\u4ef6\u5bfc\u5165 \u662f\u4e00\u4e2a\u5f88\u9ebb\u70e6\u53c8\u5bb9\u6613\u51fa\u9519\u7684\u5de5\u4f5c. \u6839\u636e\u524d\u6bb5\u65f6\u95f4\u4e00\u4e2a\u7f51\u53cb\u5236\u4f5c\u7684\u5185\u90e8\u4f7f\u7528\u7684 SOUI \u8f85\u52a9\u5de5\u5177\u7684\u601d\u60f3\uff0c\u6211\u5f00\u53d1\u4e86 uiresimporter \u8fd9\u4e2a\u5de5\u5177\u3002uiresimporter.exe \u4f4d\u4e8e SOUI \u7684 tools \u76ee\u5f55\u4e0b\uff0c\u5bf9\u5e94\u6e90\u4ee3\u7801\u5728 tools\\src\\uiresimporter \u91cc\u3002 uiresimporter \u7684\u76ee\u6807\u5c31\u662f\u8bd5\u56fe\u89e3\u51b3\u624b\u52a8\u589e\u52a0\u8d44\u6e90\u7684\u9ebb\u70e6\u3002 \u548c uiresBuilder \u4e00\u6837\uff0cuiresimporter \u4e5f\u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5b83\u652f\u6301 5 \u4e2a\u53c2\u6570\uff0c\u89c1\u4e0b\u9762\u793a \u4f8b\u4ee3\u7801\uff08demos\\mclistview_demo\\uiresimporter.bat)\uff1a rem \u4f7f\u7528 uiresImporter \u6765\u81ea\u52a8\u5bfc\u5165\u8d44\u6e90\u5230 uires.idx \u53ca values\\skin.xml. rem -p \u4e2d\u6307\u5b9a uires \u76ee\u5f55\u3002 rem -s \u4e2d\u6307\u5b9a\u9700\u8981\u5728 uires.idx \u4e2d\u81ea\u52a8\u66f4\u65b0\u7684\u6587\u4ef6\u5939\u3002\u5b58\u5728\u591a\u4e2a\u76ee\u5f55\u65f6\u5e94\u8be5\u4f7f\u7528\"a|b|c\"\u8fd9\u6837\u7684\u5f62\u5f0f \u5206\u5272\uff0c\u5e76\u4f7f\u7528\u5f15\u53f7\u3002 rem -i \u53c2\u6570\u4e2d\u6307\u5b9a\u7684\u56fe\u7247\u652f\u6301\u81ea\u52a8\u751f\u6210 skin\uff0c\u81ea\u52a8\u751f\u6210 skin \u53ea\u652f\u6301 imglist,imgframe \u4e24\u79cd\uff0c\u4e0d \u652f\u6301\u7684\u56fe\u7247\u653e\u5230\u5176\u5b83\u76ee\u5f55\uff0c\u5982\u793a\u4f8b\u4e2d\u7684\u6eda\u52a8\u6761\u76ae\u80a4\u3002 rem -b yes \u81ea\u52a8\u5907\u4efd\u539f\u6709 XML\u3002no \u4e0d\u5907\u4efd\u3002 rem -c yes \u76ae\u80a4\u9ed8\u8ba4\u652f\u6301\u7740\u8272\u5904\u7406\uff0cno \u9ed8\u8ba4\u7981\u6b62\u7740\u8272\u3002 %SOUIPATH% \\tools\\uiresImporter.exe -p uires -s \"layout|icon|imgx\" -i image - b yes -c no \u4e3a\u4e86\u81ea\u52a8\u5bfc\u5165\u56fe\u7247\uff0c\u6211\u4eec\u9700\u8981\u4e3a\u56fe\u7247\u7684\u6587\u4ef6\u540d\u505a\u70b9\u4fee\u6539\uff1auiresimporter \u901a\u8fc7\u6587\u4ef6\u540d\u540e\u7684 \u4ee5[]\u5305\u542b\u7684\u5185\u5bb9\u6765\u8bc6\u522b\u56fe\u7247\u663e\u793a\u683c\u5f0f\u3002 \u53ef\u4ee5\u6709 3 \u79cd\u683c\u5f0f\uff1a 1\u3001\u5bf9\u4e8e imglist\uff0c\u53ea\u9700\u8981\u5728[]\u4e2d\u6307\u5b9a\u4e00\u4e2a\u5b50\u56fe\u6570\u91cf\u5373\u53ef\uff0c\u5982 btn_login[3].png\uff0c\u8fd9\u6837 uiresimporter \u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u540d\u5b57\u4e3a btn_login \u7684 imglist \u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u6709 3 \u79cd\u72b6\u6001\u3002 \uff08\u5f53\u4e0d\u6307\u5b9a[x]\u65f6\uff0c\u4e5f\u751f\u6210\u4e00\u4e2a imglist \u5bf9\u8c61\uff0c\u72b6\u6001\u6570\u91cf\u4e3a 1\u3002 2\u3001\u5bf9\u4e8e imgframe\uff0c\u6709\u4e00\u79cd\u5b8c\u6210\u7684\u65b9\u5f0f\u548c\u4e00\u79cd\u7f29\u7565\u5f62\u5f0f\uff1a 2.1 \u5b8c\u5168\u5f62\u5f0f\uff1abg_login[1{2,40,2,10}].png\u3002\u8fd9\u4ee3\u8868\u56fe\u7247\u53ea\u6709\u4e00\u4e2a\u72b6\u6001\uff0c\u5b83\u7684\u4e5d\u5bab\u5207 \u5206\u4e3a left:2,top:40,right:2,bottom:10\u3002 2.2 \u7f29\u7565\u5f62\u5f0f\uff1abg_login[1{2,5}].png\u3002\u5f53\u4e5d\u5bab\u7684\u4e0a\u4e0b\u53ca\u5de6\u53f3\u5927\u5c0f\u76f8\u540c\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u7f29 \u7565\u5f62\u5f0f\u6765\u547d\u540d\u3002 2016-5-2 \u53f7\u7248\u672c\u65b0\u589e\u52a0\u4ee5\u4e0b\u53ef\u9009\u53c2\u6570\uff1a {ec=0/1} \u662f\u5426\u652f\u6301\u76ae\u80a4\u7740\u8272(enableColorize) {fit=0/1} \u81ea\u9002\u5e94\u7ed8\u56fe\u6807\u5fd7 {tile=0/1} \u5e73\u94fa\u6807\u5fd7 {filter=0/\u00bd/3} \u63d2\u503c\u6ee4\u955c\u7c7b\u578b, 0=null, 1=low, 2= midium, 3=high {vert=0/1} \u5b50\u56fe\u5782\u76f4\u6392\u5217\u6807\u5fd7\u3002 \u5728 imgframe \u4e2d\uff0c\u4e0a\u8ff0\u65b0\u6807\u5fd7\u5fc5\u987b\u5728 margin \u6807\u5fd7\u4e4b\u540e\uff0c\u5426\u5219 margin \u6807\u5fd7\u5c06\u4e0d\u80fd\u8bc6\u522b\u3002 \u6ce8\uff1a\u5982\u679c\u662f\u9700\u8981\u5c06\u8d44\u6e90\u7f16\u8bd1\u5230 EXE\uff0c\u5bfc\u5165\u6587\u4ef6\u540e\u8bb0\u5f97\u4f7f\u7528 uiresbuilder \u6765\u91cd\u65b0\u751f\u6210.rc2 \u6587 \u4ef6\u3002","title":"3\u3001\u5f00\u59cb\u4f7f\u7528 SOUI"},{"location":"Create/34/#3-soui","text":"3.4 \u4f7f\u7528 uiresImporter \u751f\u6210 uires.idx \u53ca skin.xml \u5728 SOUI \u4e2d\uff0c\u4f7f\u7528 uires.idx \u8fd9\u4e2a\u6587\u4ef6\u6765\u8bb0\u5f55\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u8d44\u6e90\u6587\u4ef6\u3002 \u6b64\u5916\u7ed8\u5236\u5bf9\u8c61(ISkinObj)\u5219\u4e00\u822c\u653e\u5728 skin.xml \u4e2d\u63cf\u8ff0\u3002 \u8981\u5411\u4e00\u4e2a\u754c\u9762\u4e2d\u589e\u52a0\u4e00\u4e2a\u65b0\u7684\u56fe\u7247\uff0c\u5728\u6ca1\u6709 uiresImporter \u4e4b\u524d\uff0c\u9996\u5148\u6211\u4eec\u9700\u8981\u628a\u65b0\u7684\u56fe \u7247\u8d44\u6e90\u589e\u590d\u5236\u5230 uires \u4e0b\u7684\u67d0\u4e2a\u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u5728 uires.idx \u4e2d\u52a0\u4e00\u6761\u6587\u4ef6\u8bb0\u5f55\uff0c\u7136\u540e\u5728 skin.xml \u4e2d\u4f7f\u7528\u4e00\u4e2a\u9002\u5f53\u7684 skin \u7c7b\u578b(\u4e00\u822c\u662f imglist,imgframe)\u6765\u63cf\u8ff0\u56fe\u7247\u7684\u663e\u793a\u65b9\u5f0f\uff0c \u518d\u5728 UI \u4e2d\u5f15\u7528\u8be5 skin \u6765\u7ed8\u5236\u3002 \u7531\u4e8e SOUI \u76ee\u524d\u6ca1\u6709\u63d0\u4f9b UI \u7f16\u8f91\u5668\uff0c\u6240\u6709\u7684 XML \u90fd\u9700\u8981\u624b\u5199\uff0c\u56fe\u7247\u5f88\u591a\u7684\u65f6\u95f4\u6587\u4ef6\u5bfc\u5165 \u662f\u4e00\u4e2a\u5f88\u9ebb\u70e6\u53c8\u5bb9\u6613\u51fa\u9519\u7684\u5de5\u4f5c. \u6839\u636e\u524d\u6bb5\u65f6\u95f4\u4e00\u4e2a\u7f51\u53cb\u5236\u4f5c\u7684\u5185\u90e8\u4f7f\u7528\u7684 SOUI \u8f85\u52a9\u5de5\u5177\u7684\u601d\u60f3\uff0c\u6211\u5f00\u53d1\u4e86 uiresimporter \u8fd9\u4e2a\u5de5\u5177\u3002uiresimporter.exe \u4f4d\u4e8e SOUI \u7684 tools \u76ee\u5f55\u4e0b\uff0c\u5bf9\u5e94\u6e90\u4ee3\u7801\u5728 tools\\src\\uiresimporter \u91cc\u3002 uiresimporter \u7684\u76ee\u6807\u5c31\u662f\u8bd5\u56fe\u89e3\u51b3\u624b\u52a8\u589e\u52a0\u8d44\u6e90\u7684\u9ebb\u70e6\u3002 \u548c uiresBuilder \u4e00\u6837\uff0cuiresimporter \u4e5f\u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5b83\u652f\u6301 5 \u4e2a\u53c2\u6570\uff0c\u89c1\u4e0b\u9762\u793a \u4f8b\u4ee3\u7801\uff08demos\\mclistview_demo\\uiresimporter.bat)\uff1a rem \u4f7f\u7528 uiresImporter \u6765\u81ea\u52a8\u5bfc\u5165\u8d44\u6e90\u5230 uires.idx \u53ca values\\skin.xml. rem -p \u4e2d\u6307\u5b9a uires \u76ee\u5f55\u3002 rem -s \u4e2d\u6307\u5b9a\u9700\u8981\u5728 uires.idx \u4e2d\u81ea\u52a8\u66f4\u65b0\u7684\u6587\u4ef6\u5939\u3002\u5b58\u5728\u591a\u4e2a\u76ee\u5f55\u65f6\u5e94\u8be5\u4f7f\u7528\"a|b|c\"\u8fd9\u6837\u7684\u5f62\u5f0f \u5206\u5272\uff0c\u5e76\u4f7f\u7528\u5f15\u53f7\u3002 rem -i \u53c2\u6570\u4e2d\u6307\u5b9a\u7684\u56fe\u7247\u652f\u6301\u81ea\u52a8\u751f\u6210 skin\uff0c\u81ea\u52a8\u751f\u6210 skin \u53ea\u652f\u6301 imglist,imgframe \u4e24\u79cd\uff0c\u4e0d \u652f\u6301\u7684\u56fe\u7247\u653e\u5230\u5176\u5b83\u76ee\u5f55\uff0c\u5982\u793a\u4f8b\u4e2d\u7684\u6eda\u52a8\u6761\u76ae\u80a4\u3002 rem -b yes \u81ea\u52a8\u5907\u4efd\u539f\u6709 XML\u3002no \u4e0d\u5907\u4efd\u3002 rem -c yes \u76ae\u80a4\u9ed8\u8ba4\u652f\u6301\u7740\u8272\u5904\u7406\uff0cno \u9ed8\u8ba4\u7981\u6b62\u7740\u8272\u3002 %SOUIPATH% \\tools\\uiresImporter.exe -p uires -s \"layout|icon|imgx\" -i image - b yes -c no \u4e3a\u4e86\u81ea\u52a8\u5bfc\u5165\u56fe\u7247\uff0c\u6211\u4eec\u9700\u8981\u4e3a\u56fe\u7247\u7684\u6587\u4ef6\u540d\u505a\u70b9\u4fee\u6539\uff1auiresimporter \u901a\u8fc7\u6587\u4ef6\u540d\u540e\u7684 \u4ee5[]\u5305\u542b\u7684\u5185\u5bb9\u6765\u8bc6\u522b\u56fe\u7247\u663e\u793a\u683c\u5f0f\u3002 \u53ef\u4ee5\u6709 3 \u79cd\u683c\u5f0f\uff1a 1\u3001\u5bf9\u4e8e imglist\uff0c\u53ea\u9700\u8981\u5728[]\u4e2d\u6307\u5b9a\u4e00\u4e2a\u5b50\u56fe\u6570\u91cf\u5373\u53ef\uff0c\u5982 btn_login[3].png\uff0c\u8fd9\u6837 uiresimporter \u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u540d\u5b57\u4e3a btn_login \u7684 imglist \u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u6709 3 \u79cd\u72b6\u6001\u3002 \uff08\u5f53\u4e0d\u6307\u5b9a[x]\u65f6\uff0c\u4e5f\u751f\u6210\u4e00\u4e2a imglist \u5bf9\u8c61\uff0c\u72b6\u6001\u6570\u91cf\u4e3a 1\u3002 2\u3001\u5bf9\u4e8e imgframe\uff0c\u6709\u4e00\u79cd\u5b8c\u6210\u7684\u65b9\u5f0f\u548c\u4e00\u79cd\u7f29\u7565\u5f62\u5f0f\uff1a 2.1 \u5b8c\u5168\u5f62\u5f0f\uff1abg_login[1{2,40,2,10}].png\u3002\u8fd9\u4ee3\u8868\u56fe\u7247\u53ea\u6709\u4e00\u4e2a\u72b6\u6001\uff0c\u5b83\u7684\u4e5d\u5bab\u5207 \u5206\u4e3a left:2,top:40,right:2,bottom:10\u3002 2.2 \u7f29\u7565\u5f62\u5f0f\uff1abg_login[1{2,5}].png\u3002\u5f53\u4e5d\u5bab\u7684\u4e0a\u4e0b\u53ca\u5de6\u53f3\u5927\u5c0f\u76f8\u540c\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u7f29 \u7565\u5f62\u5f0f\u6765\u547d\u540d\u3002 2016-5-2 \u53f7\u7248\u672c\u65b0\u589e\u52a0\u4ee5\u4e0b\u53ef\u9009\u53c2\u6570\uff1a {ec=0/1} \u662f\u5426\u652f\u6301\u76ae\u80a4\u7740\u8272(enableColorize) {fit=0/1} \u81ea\u9002\u5e94\u7ed8\u56fe\u6807\u5fd7 {tile=0/1} \u5e73\u94fa\u6807\u5fd7 {filter=0/\u00bd/3} \u63d2\u503c\u6ee4\u955c\u7c7b\u578b, 0=null, 1=low, 2= midium, 3=high {vert=0/1} \u5b50\u56fe\u5782\u76f4\u6392\u5217\u6807\u5fd7\u3002 \u5728 imgframe \u4e2d\uff0c\u4e0a\u8ff0\u65b0\u6807\u5fd7\u5fc5\u987b\u5728 margin \u6807\u5fd7\u4e4b\u540e\uff0c\u5426\u5219 margin \u6807\u5fd7\u5c06\u4e0d\u80fd\u8bc6\u522b\u3002 \u6ce8\uff1a\u5982\u679c\u662f\u9700\u8981\u5c06\u8d44\u6e90\u7f16\u8bd1\u5230 EXE\uff0c\u5bfc\u5165\u6587\u4ef6\u540e\u8bb0\u5f97\u4f7f\u7528 uiresbuilder \u6765\u91cd\u65b0\u751f\u6210.rc2 \u6587 \u4ef6\u3002","title":"3\u3001\u5f00\u59cb\u4f7f\u7528 SOUI"},{"location":"Development/0/","text":"4\u3001SOUI \u5f00\u53d1\u8bf4\u660e \u00b6 \u73b0\u4ee3\u7684\u8f6f\u4ef6\u53ea\u8981\u6709 UI\uff0c\u57fa\u672c\u4e0a\u5c11\u4e0d\u4e86\u8d44\u6e90\u3002 \u8d44\u6e90\u662f\u4ec0\u4e48\uff1f\u8d44\u6e90\u5c31\u662f\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u63d0\u4f9b\u56fa\u5b9a\u7684\u6570\u636e\u6e90\u7684\u6587\u4ef6\u3002 \u5728 MFC \u5f53\u9053\u7684\u65f6\u4ee3\uff0c\u8d44\u6e90\u4e00\u822c\u5c31\u662f\u4f4d\u56fe(Bitmap)\uff0c\u56fe\u6807(Icon)\uff0c\u5149\u6807(Cursor)\uff0c\u5bf9\u8bdd\u6846\u6a21 \u677f(Dialog)\u7b49\u8d44\u6e90\u3002 \u5728 SOUI \u4e2d\uff0c\u8d44\u6e90\u4e3b\u8981\u53d8\u6210\u4e86 XML \u5e03\u5c40\u548c PNG \u56fe\u7247\u6587\u4ef6\u3002","title":"4\u3001SOUI \u5f00\u53d1\u8bf4\u660e"},{"location":"Development/0/#4soui","text":"\u73b0\u4ee3\u7684\u8f6f\u4ef6\u53ea\u8981\u6709 UI\uff0c\u57fa\u672c\u4e0a\u5c11\u4e0d\u4e86\u8d44\u6e90\u3002 \u8d44\u6e90\u662f\u4ec0\u4e48\uff1f\u8d44\u6e90\u5c31\u662f\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u63d0\u4f9b\u56fa\u5b9a\u7684\u6570\u636e\u6e90\u7684\u6587\u4ef6\u3002 \u5728 MFC \u5f53\u9053\u7684\u65f6\u4ee3\uff0c\u8d44\u6e90\u4e00\u822c\u5c31\u662f\u4f4d\u56fe(Bitmap)\uff0c\u56fe\u6807(Icon)\uff0c\u5149\u6807(Cursor)\uff0c\u5bf9\u8bdd\u6846\u6a21 \u677f(Dialog)\u7b49\u8d44\u6e90\u3002 \u5728 SOUI \u4e2d\uff0c\u8d44\u6e90\u4e3b\u8981\u53d8\u6210\u4e86 XML \u5e03\u5c40\u548c PNG \u56fe\u7247\u6587\u4ef6\u3002","title":"4\u3001SOUI \u5f00\u53d1\u8bf4\u660e"},{"location":"Development/1/","text":"4.1 xml \u8d44\u6e90\u6587\u4ef6\u5b9a\u4e49 \u00b6 \u57fa\u4e8e SOUI \u754c\u9762\u5e93\u7684\u7a0b\u5e8f\uff0c\u5b58\u5728\u4e00\u4e2a UI \u8d44\u6e90\u7d22\u5f15\u6587\u4ef6(uires.idx)\uff0c\u6b64\u6587\u4ef6\u662f\u4e00\u4e2a\u6807\u51c6 xml \u6587\u4ef6\uff0c\u5176\u9ed8\u8ba4\u4f4d\u7f6e\u662f uires \u6587\u4ef6\u6240\u5728\u8def\u5f84\u4e0b\u7684 uires\\uires.idx\u3002\u5982\u679c\u4f7f\u7528\u4e86 PE \u8d44\u6e90\u6216\u8005 zip \u538b\u7f29\u6587\u4ef6\uff0c\u6765\u4fdd\u5b58\u6240\u6709\u8d44\u6e90\u6587\u4ef6\uff0c\u5219\u6b64\u6587\u4ef6\u7684\u4f4d\u7f6e\u4e0d\u4f1a\u6539\u53d8\u3002 \u6b64\u6587\u4ef6\u4e2d\u53ef\u4ee5\u5b9a\u4e49\u7a0b\u5e8f\u7684\u5168\u5c40\u914d\u7f6e\u3001XML \u6587\u4ef6\u3001\u5b57\u4f53\u3001\u56fe\u7247\u3001\u6587\u5b57\u7b49\u8d44\u6e90\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a <?xml version=\"1.0\" encoding=\"utf-8\"?> <resource> <UIDEF> <file name= \"xml_init\" path= \"xml\\init.xml\" /> </UIDEF> <ICON> <file name= \"LOGO\" path= \"image\\img_logo.ico\" /> </ICON> <CURSOR> <file name= \"ANI_ARROW\" path= \"image\\021.ani\" /> <file name= \"CUR_TST\" path= \"image\\camera_capture.cur\" /> </CURSOR> <LAYOUT> <file name= \"maindlg\" path= \"xml\\dlg_main.xml\" /> <file name= \"menu_test\" path= \"xml\\menu_test.xml\" /> <file name= \"page_layout\" path= \"xml\\page_layout.xml\" /> <file name= \"page_treebox\" path= \"xml\\page_treebox.xml\" /> <file name= \"page_treectrl\" path= \"xml\\page_treectrl.xml\" /> <file name= \"page_misc\" path= \"xml\\page_misc.xml\" /> <file name= \"page_webkit\" path= \"xml\\page_webkit.xml\" /> <file name= \"page_about\" path= \"xml\\page_about.xml\" /> </LAYOUT> <IMGX> <file name= \"png_page_icons\" path= \"image\\page_icons.png\" /> <file name= \"png_small_icons\" path= \"image\\small_icons.png\" /> <file name= \"webbtn_back\" path= \"image\\webbtn_back.png\" /> <file name= \"webbtn_forward\" path= \"image\\webbtn_forward.png\" /> <file name= \"webbtn_refresh\" path= \"image\\webbtn_refresh.png\" /> <file name= \"png_treeicon\" path= \"image\\TreeIcon.png\" /> <file name= \"png_menu_border\" path= \"image\\menuborder.png\" /> <file name= \"png_vscroll\" path= \"image\\vscrollbar.png\" /> <file name= \"png_tab_left\" path= \"image\\tab_left.png\" /> <file name= \"png_tab_left_splitter\" path= \"image\\tab_left_splitter.png\" /> <file name= \"png_tab_main\" path= \"image\\tab_main.png\" /> <file name= \"btn_menu\" path= \"image\\btn_menu.png\" /> </IMGX> <GIF> <file name= \"gif_horse\" path= \"image\\horse.gif\" /> <file name= \"gif_penguin\" path= \"image\\penguin.gif\" /> </GIF> <rtf> <file name= \"rtf_test\" path= \"rtf\\RTF \u6d4b\u8bd5.rtf\" /> </rtf> <script> <file name= \"lua_test\" path= \"lua\\test.lua\" /> </script> <translator> <file name= \"lang_cn\" path= \"translation files\\lang_cn.xml\" /> </translator> </resource> uires.idx \u6587\u4ef6\u662f SOUI \u8d44\u6e90\u7684\u5165\u53e3\uff0c\u5b9a\u4e49\u4e86\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u7684\u5404\u79cd\u8d44\u6e90\uff0c\u4ee5\"resource\"\u4e3a\u6839\u8282 \u70b9\u3002\u5728 soui-demo \u7684 uires.idx \u4e2d\uff0c\u5b9a\u4e49\u4e86 UIDEF\uff0cICON\uff0cCURSOR\uff0cLAYOUT\uff0c IMGX\uff0cGIF\uff0crtf\uff0cscript\uff0ctranslator \u8fd9\u4e9b\u8d44\u6e90\u7c7b\u578b\u3002 \u5176\u5b9e\u4f60\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u4efb\u610f\u7684\u8d44\u6e90\u7c7b\u578b\uff0c\u53ea\u8981\u7c7b\u578b\u957f\u5ea6\u4e0d\u8d85\u8fc7 30 \u4e2a\u5b57\u7b26\u3002 \u6bcf\u4e00\u4e2a\u8d44\u6e90\u7c7b\u578b\u4e0b\u90fd\u662f\u4e00\u4e9b file \u5143\u7d20\uff0c\u6bcf\u4e2a file \u5305\u542b\u4e24\u4e2a\u5c5e\u6027\uff1aname \u53ca path\u3002 name \u662f UI \u5e03\u5c40\u7684 XML \u6587\u4ef6\u5f15\u7528\u8be5\u8d44\u6e90\u7684\u6807\u8bc6\uff0c\u800c path \u5219\u662f\u8be5\u8d44\u6e90\u771f\u5b9e\u7684\u6587\u4ef6\u5b58\u50a8\u8def \u5f84\u3002 \u9664\u4e86 UIDEF \u4e2d\u5b9a\u4e49\u7684 xml_init \u53ca layout \u4e2d\u5b9a\u4e49\u7684\u5e03\u5c40 XML \u5916\uff0c\u5176\u5b83\u8d44\u6e90\u90fd\u6bd4\u8f83\u7b80\u5355\uff0c \u5c31\u662f\u63d0\u4f9b\u4e00\u79cd\u4ece name \u6620\u5c04\u6587\u4ef6\u7684\u65b9\u5f0f\u3002 \u5173\u4e8e XML \u5b9a\u4e49\u7684\u5927\u6982\u987a\u5e8f\u662f\uff1a 1\uff1a\u8d44\u6e90\u5f15\u5165 uires.idx (\u8fd9\u91cc\u5b9a\u4e49\u754c\u9762\u8981\u4f7f\u7528\u7684\u4e00\u4e9b\u8d44\u6e90) \u683c\u5f0f: <\u8d44\u6e90\u7c7b\u578b> Name = \u8d44\u6e90\u81ea\u5b9a\u4e49\u540d\u79f0\uff0c path=\u8d44\u6e90\u8def\u5f84 2\uff1a\u5b9a\u4e49\u5168\u5c40\u53d8\u91cf init.xml (\u8fd9\u91cc\u5b9a\u4e49\u5168\u5c40\u53d8\u91cf\u5e76\u7528\u8d44\u6e90\u521d\u59cb\u5316\u8fd9\u4e9b\u5168\u5c40\u53d8\u91cf) \u683c\u5f0f\uff1a <\u53d8\u91cf\u7c7b\u578b> Name=\u53d8\u91cf\u540d\u79f0\uff0c src=\u8d44\u6e90\u7c7b\u578b\uff1a\u8d44\u6e90\u522b\u540d\uff0c \u63a7\u4ef6\u5c5e\u6027... 3: \u4f7f\u7528\u5168\u5c40\u53d8\u91cf dlg_main.xml(\u8fd9\u91cc\u5f00\u59cb\u5f15\u7528\u4e0a\u9762\u7684\u53d8\u91cf) 4.1.1 init.xml \u8d44\u6e90\u6587\u4ef6 UIDEF \u8d44\u6e90\uff08\u5e03\u5c40 XML \u518d\u5355\u72ec\u5f00\u7bc7\u4ecb\u7ecd\uff09 \u5176\u4e2d uidef \u4e2d\u5b9a\u4e49\u7684 init.xml \u7528\u6765\u5b9a\u4e49 SOUI \u4e2d\u4f7f\u7528\u7684\u5168\u5c40 UI \u5b9a\u4e49\u3002 \u8fd9\u4e2a\u6587\u4ef6\u4e00\u822c\u5e94\u8be5\u5728 main \u51fd\u6570\u4e2d\u88ab SApplication \u5bf9\u8c61\u4f7f\u7528\uff0c\u5982\uff1a //... //\u5b9a\u4e49\u4e00\u4e2a\u552f\u4e00\u7684 SApplication \u5bf9\u8c61\uff0cSApplication \u7ba1\u7406\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u8d44\u6e90 SApplication * theApp = new SApplication ( pRenderFactory , hInstance ); //... //\u52a0\u8f7d\u5168\u5c40\u8d44\u6e90\u63cf\u8ff0 XML theApp -> Init ( _T ( \"xml_init\" )); \u8fd9\u91cc\u76f4\u63a5\u4f7f\u7528 uidef \u4e2d\u5b9a\u4e49\u7684 name \u5c5e\u6027\u6765\u521d\u59cb\u5316\u7cfb\u7edf\u3002SApplication::Init \u9ed8\u8ba4\u4ece uidef \u6bb5\u4e2d\u53bb\u67e5\u627e xml_init \u8d44\u6e90\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u5728\u5176\u5b83\u8d44\u6e90\u7c7b\u578b\u5982 xml \u4e2d\uff0c\u4f46\u662f\u9700\u8981\u5728 init \u4e2d \u663e\u793a\u6307\u5b9a\u8d44\u6e90\u7c7b\u578b\u3002 \u4e0b\u9762\u6211\u4eec\u6253\u5f00 xml\\init.xml \u770b\u4e00\u4e0b\u91cc\u9762\u7684\u5185\u5bb9\uff1a <?xml version=\"1.0\" encoding=\"utf-8\"?> <UIDEF> <font face= \"\u5fae\u8f6f\u96c5\u9ed1\" size= \"18\" /> <string> <ver value= \"1.0\" /> </string> <skin> <imglist name= \"skin_page_icons\" src= \"imgx:png_page_icons\" states= \"9\" /> <imglist name= \"skin_small_icons\" src= \"imgx:png_small_icons\" states= \"12\" /> <imglist name= \"skin_tree_icon\" src= \"imgx:png_treeicon\" states= \"3\" /> <imglist name= \"skin_menuicon\" src= \"imgx:png_small_icons\" states= \"12\" /> <border name= \"skin_menuborder\" src= \"imgx:png_menu_border\" left= \"2\" top= \"2\" border= \"2,2,2,2\" key= \"FF00FF\" alpha= \"100\" /> <imglist name= \"skin_webbtn_back\" src= \"imgx:webbtn_back\" states= \"4\" /> <imglist name= \"skin_webbtn_forward\" src= \"imgx:webbtn_forward\" states= \"4\" /> <imglist name= \"skin_webbtn_refresh\" src= \"imgx:webbtn_refresh\" states= \"4\" /> <imglist name= \"skin_tab_left\" src= \"imgx:png_tab_left\" states= \"3\" /> <imglist name= \"skin_tab_left_splitter\" src= \"imgx:png_tab_left_splitter\" /> <imglist name= \"skin_tab_main\" src= \"imgx:png_tab_main\" states= \"3\" /> <imglist name= \"skin_btn_menu\" src= \"imgx:btn_menu\" states= \"3\" /> <gif name= \"gif_horse\" src= \"gif:gif_horse\" /> <gif name= \"gif_penguin\" src= \"gif:gif_penguin\" /> </skin> <style> <class name= \"cls_dlg_frame\" skin= \"_skin.sys.wnd.bkgnd\" font= \"\" colorText= \"#000000\" margin-x= \"0\" /> <class name= \"cls_btn_link\" cursor= \"hand\" colorHover= \"#0A84D2\" /> <!--\u5b9a\u4e49\u6587\u5b57\u6309\u94ae\u7684\u6837\u5f0f--> <class name= \"cls_btn_weblink\" cursor= \"hand\" colorText= \"#1e78d5\" colorHover= \"#1e78d5\" font= \"italic:1\" fontHover= \"underline:1,italic:1\" /> <class name= \"cls_txt_red\" font= \"face:\u5b8b\u4f53,bold:1\" colorText= \"#FF0000\" /> <!--\u5b9a\u4e49\u767d\u8272\u7c97\u4f53\u5b8b\u4f53--> <class name= \"cls_txt_black\" font= \"face:\u5b8b\u4f53,bold:1\" colorText= \"#000000\" /> <!--\u5b9a\u4e49\u9ed1\u8272\u7c97\u4f53\u5b8b\u4f53--> <class name= \"cls_txt_white\" font= \"face:\u5b8b\u4f53,bold:1\" colorText= \"#FFFFFF\" /> <!--\u5b9a\u4e49\u767d\u8272\u7c97\u4f53\u5b8b\u4f53--> <class name= \"normalbtn\" font= \"\" colorText= \"#385e8b\" colorTextDisable= \"#91a7c0\" textMode= \"25\" cursor= \"hand\" margin-x= \"0\" /> <class name= \"toptext\" textMode= \"20\" /> <class name= \"vcentertext\" textMode= \"24\" /> <class name= \"rightvcentertext\" textMode= \"26\" /> <class name= \"centertext\" textMode= \"25\" /> <class name= \"righttext\" textMode= \"22\" /> <class name= \"linkimage\" cursor= \"hand\" /> <class name= \"cls_edit\" ncSkin= \"_skin.sys.border\" margin-x= \"2\" marginy= \"2\" /> </style> <objattr> <button class= \"normalbtn\" /> <imgbtn class= \"linkimage\" /> <tabctrl colorText= \"000000\" align= \"top\" tabWidth= \"70\" tabHeight= \"38\" tabSpacing= \"0\" tabPos= \"10\" dotted= \"1\" /> <edit transParent= \"1\" margin-x= \"2\" margin-y= \"2\" /> <treectrl colorItemBkgnd= \"#FFFFFF\" colorItemSelBkgnd= \"#000088\" colorItemText= \"#000000\" colorItemSelText= \"#FFFFFF\" indent= \"17\" itemMargin= \"4\" /> </objattr> </UIDEF> \u8fd9\u4e2a xml_init \u5fc5\u987b\u662f\u4ee5 UIDEF \u4e3a\u552f\u4e00\u6839\u8282\u70b9\u3002 \u5728 UIDEF \u4e0b\uff0c\u53ef\u4ee5\u5b9a\u4e49 font\uff0cstring\uff0cskins\uff0cstyle\uff0cobjattr \u4e94\u4e2a\u5b50\u8282\u70b9\u3002 \u5176\u4e2d\uff0cfont \u5b9a\u4e49 SOUI \u4e2d\u4f7f\u7528\u7684\u9ed8\u8ba4\u5b57\u4f53\uff0c\u53ea\u6709 face \u548c size \u4e24\u4e2a\u5c5e\u6027\u3002 string \u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u8868\uff0c\u5b9a\u4e49\u4e00\u4e2a\"name-\u5b57\u7b26\u4e32\"\u6620\u5c04\uff0c\u5728\u5e03\u5c40\u7684 XML \u6587\u4ef6\u4e2d\u53ef\u4ee5\u901a\u8fc7 \u5f15\u7528\u5b57\u7b26\u4e32\u7684 name \u6765\u83b7\u5f97\u5b57\u7b26\u4e32\u3002 skins \u5b9a\u4e49 SOUI \u4e2d\u4f7f\u7528\u7684\u5168\u5c40\u7a97\u53e3\u5143\u7d20\u7ed8\u5236\u5bf9\u8c61\uff0c\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u90fd\u5bf9\u5e94\u4e00\u4e2a SOUI::ISkinObj \u7684\u6d3e\u751f\u7c7b\u3002 SOUI \u7cfb\u7edf\u9ed8\u8ba4\u5b9e\u73b0\u4e86 SSkinImgList(imglist), SSkinImgFrame(imgframe), SSkinButton(button), SSkinGradation(gradation), SSkinScrollbar(scrollbar), SSkinMenuBorder(border)\u8fd9\u516d\u79cd\u7ed8\u56fe\u7c7b\u578b\u3002SSkinImgList \u4e3a SOUI \u4e2d\u7684 C++\u7c7b\u540d\uff0c imglist \u4e3a\u5728 skins \u8282\u70b9\u4e2d\u7684\u5143\u7d20\u7c7b\u578b\u540d\u3002 \u4e0b\u9762\u5206\u522b\u4ecb\u7ecd\u8fd9\u51e0\u79cd\u7ed8\u56fe\u7c7b\u578b\uff1a 1\u3001imglist imglist \u662f\u4e00\u4e2a\u56fe\u7247\u5e8f\u5217\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5305\u542b\u4e00\u7ec4\u5c0f\u56fe\u7247\uff0c\u5e38\u89c1\u7684\u5982\u6309\u94ae\u9700\u8981\u4f7f\u7528\u7684 4 \u79cd\u72b6\u6001 \u56fe\u3002 imglist \u5305\u542b 4 \u4e2a\u5c5e\u6027\uff1a SOUI_ATTRS_BEGIN () ATTR_CUSTOM ( L \"src\" , OnAttrImage ) //skinObj \u5f15\u7528\u7684\u56fe\u7247\u6587\u4ef6\u5b9a\u4e49\u5728 uires.idx \u4e2d\u7684 name \u5c5e\u6027\u3002 ATTR_INT ( L \"tile\" , m_bTile , TRUE ) //\u7ed8\u5236\u662f\u5426\u5e73\u94fa,0--\u4f4d\u4f38\uff08\u9ed8\u8ba4\uff09\uff0c\u5176\u5b83--\u5e73\u94fa ATTR_INT ( L \"vertical\" , m_bVertical , TRUE ) //\u5b50\u56fe\u662f\u5426\u5782\u76f4\u6392\u5217\uff0c0--\u6c34\u5e73\u6392\u5217(\u9ed8\u8ba4), \u5176\u5b83--\u5782\u76f4\u6392\u5217 ATTR_INT ( L \"states\" , m_nStates , TRUE ) //\u5b50\u56fe\u6570\u91cf,\u9ed8\u8ba4\u4e3a 1 SOUI_ATTRS_END () \u5047\u5b9a\u4e0a\u56fe\u7684\u56fe\u7247\u5728 uires.idx \u4e2d\u7684\u5b9a\u4e49\u4e3a\uff1a <imgx> <file name= 'btn_next' file= 'image\\btn.next.png' /> </imgx> \u8981\u5728 soui \u4e2d\u5f15\u7528\u8fd9\u4e2a\u56fe\u7247\uff0c\u9700\u8981\u5728 init.xml \u7684 skins \u7ed3\u8282\u4e2d\u505a\u5982\u4e0b\u58f0\u660e\uff1a <skins> <imglist name= \u201cskin_btn_next\" src= \"imgx:btn_next\" states= \"4\" tile= \"0\" vertical= \"0\" /> </skins> \u5728\u4e0a\u9762\u7684 skin \u5b9a\u4e49\u4e2d\uff0c name \u5c5e\u6027\u544a\u8bc9\u7cfb\u7edf\u5982\u4f55\u5f15\u7528\u5b9a\u4e49\u7684 imglist src \u5c5e\u6027\u5b9a\u4e49\u8be5 skin \u9700\u8981\u4f7f\u7528\u54ea\u4e00\u4e2a\u56fe\u7247\u8d44\u6e90\uff0c\u8d44\u6e90\u5f15\u7528\u683c\u5f0f\u4e3a type:name\uff0c\u5982\u4e0a\u9762\u4f7f\u7528 \u7684 imgx:btn_next\uff0c\u5bf9\u4e8e\u56fe\u7247\u8d44\u6e90\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\u4e5f\u53ef\u4ee5\u4e0d\u6307\u5b9a type,\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5728\u5e38\u7528\u7684 \u56fe\u7247\u7c7b\u578b\u4e0b\u67e5\u627e\uff0c\u4f46\u4e0d\u5efa\u8bae\u8fd9\u6837\u4f7f\u7528\u3002 states \u5b9a\u4e49\u56fe\u4e2d\u5305\u542b\u591a\u5c11\u4e2a\u5b50\u56fe\u3002 title \u5b9a\u4e49\u56fe\u7247\u5728\u653e\u5927\u663e\u793a\u65f6\u65f6\u5e73\u94fa\u8fd8\u662f\u62c9\u4f38\uff0c\u9ed8\u8ba4\u4e3a\u62c9\u4f38\u3002 vertical \u5c5e\u6027\u5b9a\u4e49\u56fe\u4e2d\u7684\u5b50\u56fe\u7684\u6392\u5217\u65b9\u5f0f\u3002 \u5728\u672c\u4f8b\u5b50\u4e2d tile \u548c vertical \u5c5e\u6027\u90fd\u53ef\u4ee5\u4e0d\u6307\u5b9a\u3002 2\u3001imgframe imgframe \u662f\u4e00\u4e2a\u63d0\u4f9b\u4e5d\u5bab\u683c\u663e\u793a\u7684\u7ed8\u56fe\u5bf9\u8c61\uff0cSSkinImgFrame \u6d3e\u751f\u81ea SSkinImgList\uff0c \u56e0\u6b64 imgframe \u4e5f\u62e5\u6709 imglist \u7684\u5168\u90e8\u5c5e\u6027\u3002 \u6b64\u5916\uff0cimgframe \u63d0\u4f9b\u4e86\u51e0\u4e2a\u65b0\u7684\u5c5e\u6027\uff1a SOUI_ATTRS_BEGIN () ATTR_INT ( L \"left\" , m_rcMargin . left , TRUE ) //\u4e5d\u5bab\u683c\u5de6\u8fb9\u8ddd ATTR_INT ( L \"top\" , m_rcMargin . top , TRUE ) //\u4e5d\u5bab\u683c\u4e0a\u8fb9\u8ddd ATTR_INT ( L \"right\" , m_rcMargin . right , TRUE ) //\u4e5d\u5bab\u683c\u53f3\u8fb9\u8ddd ATTR_INT ( L \"bottom\" , m_rcMargin . bottom , TRUE ) //\u4e5d\u5bab\u683c\u4e0b\u8fb9\u8ddd ATTR_INT ( L \"margin-x\" , m_rcMargin . left = m_rcMargin . right , TRUE ) //\u4e5d\u5bab\u683c\u5de6\u53f3\u8fb9\u8ddd ATTR_INT ( L \"margin-y\" , m_rcMargin . top = m_rcMargin . bottom , TRUE ) //\u4e5d\u5bab\u683c\u4e0a\u4e0b\u8fb9\u8ddd SOUI_ATTRS_END () imgframe \u7684\u683c\u5f0f\u5982\u4e0a\u56fe\uff0c\u5728 imgframe \u4e2d\u901a\u8fc7 left, top, right, bottom \u6765\u5b9a\u4e49\u4e5d\u5bab\u683c\u3002 3\u3001button button \u7ed8\u56fe\u5bf9\u8c61\u662f\u7ed8\u5236\u6309\u94ae\u65f6\u4f7f\u7528\u7684\uff0c\u5b83\u4f7f\u7528\u6e10\u53d8\u5b9e\u73b0\u7ed8\u5236\u6309\u94ae\u7684 4 \u79cd\u72b6\u6001\u3002 \u5305\u542b\u4ee5\u4e0b\u5c5e\u6027\uff1a SOUI_ATTRS_BEGIN () ATTR_COLOR ( L \"colorBorder\" , m_crBorder , TRUE ) //\u8fb9\u6846\u989c\u8272 ATTR_COLOR ( L \"colorUp\" , m_crUp [ ST_NORMAL ], TRUE ) //\u6b63\u5e38\u72b6\u6001\u6e10\u53d8 \u8d77\u59cb\u989c\u8272 ATTR_COLOR ( L \"colorDown\" , m_crDown [ ST_NORMAL ], TRUE ) //\u6b63\u5e38\u72b6\u6001\u6e10 \u53d8\u7ec8\u6b62\u989c\u8272 ATTR_COLOR ( L \"colorUpHover\" , m_crUp [ ST_HOVER ], TRUE ) //\u6d6e\u52a8\u72b6\u6001\u6e10 \u53d8\u8d77\u59cb\u989c\u8272 ATTR_COLOR ( L \"colorDownHover\" , m_crDown [ ST_HOVER ], TRUE ) //\u6d6e\u52a8\u72b6\u6001\u6e10 \u53d8\u7ec8\u6b62\u989c\u8272 ATTR_COLOR ( L \"colorUpPush\" , m_crUp [ ST_PUSHDOWN ], TRUE ) //\u4e0b\u538b\u72b6\u6001\u6e10 \u53d8\u8d77\u59cb\u989c\u8272 ATTR_COLOR ( L \"colorDownPush\" , m_crDown [ ST_PUSHDOWN ], TRUE ) //\u4e0b\u538b\u72b6\u6001\u6e10 \u53d8\u7ec8\u6b62\u989c\u8272 ATTR_COLOR ( L \"colorUpDisable\" , m_crUp [ ST_DISABLE ], TRUE ) //\u7981\u7528\u72b6\u6001\u6e10 \u53d8\u8d77\u59cb\u989c\u8272 ATTR_COLOR ( L \"colorDownDisable\" , m_crDown [ ST_DISABLE ], TRUE ) //\u7981\u7528\u72b6\u6001 \u6e10\u53d8\u7ec8\u6b62\u989c\u8272 SOUI_ATTRS_END () 4\u3001gradation \u6e10\u53d8\u7ed8\u56fe\u5bf9\u8c61\uff0c\u63d0\u4f9b 3 \u4e2a\u5c5e\u6027\uff1a SOUI_ATTRS_BEGIN () ATTR_COLOR ( L \"colorFrom\" , m_crFrom , TRUE ) //\u6e10\u53d8\u8d77\u59cb\u989c\u8272 ATTR_COLOR ( L \"colorTo\" , m_crTo , TRUE ) //\u6e10\u53d8\u7ec8\u6b62\u989c\u8272 ATTR_INT ( L \"vertical\" , m_bVert , TRUE ) //\u6e10\u53d8\u65b9\u5411,0--\u6c34\u5e73(\u9ed8\u8ba4), 1-- \u5782\u76f4 SOUI_ATTRS_END () ``` 5 \u3001 scrollbar \u6eda\u52a8\u6761\u76ae\u80a4\uff0c\u867d\u7136\u5b83\u6d3e\u751f\u81ea imglist \uff0c\u5b9e\u9645\u4e0a imglist \u4e2d\u5b9e\u73b0\u7684\u5c5e\u6027\u5728 scrollbar \u4e2d\u6ca1\u6709\u610f \u4e49\uff0c\u53ea\u662f\u4e3a\u4e86\u7701\u70b9\u4ee3\u7801\u3002 ``` cpp SOUI_ATTRS_BEGIN () ATTR_INT ( L \"margin\" , m_nMargin , FALSE ) //\u8fb9\u7f18\u4e0d\u62c9\u4f38\u5927\u5c0f ATTR_INT ( L \"hasGripper\" , m_bHasGripper , FALSE ) //\u6ed1\u5757\u4e0a\u662f\u5426\u6709\u5e2e\u624b(gripper) ATTR_INT ( L \"hasInactive\" , m_bHasInactive , FALSE ) //\u662f\u5426\u6709\u7981\u7528\u6001 SOUI_ATTRS_END () \u4e00\u822c\u7684 scrollbar \u76ae\u80a4\u8d44\u6e90\u5982\u4e0b\uff1a \u5982\u679c\u6ca1\u6709\u5e2e\u624b\u4e5f\u6ca1\u6709\u7981\u7528\u72b6\u6001\uff0c\u56fe\u7247\u5e94\u8be5\u662f 8*3 \u7684\u6b63\u65b9\u5f62\u7f51\u683c\u3002 \u6709\u5e2e\u624b\u5219 X \u589e\u52a0\u4e00\u4e2a\u7f51\u683c\uff0c\u6709\u7981\u7528\u72b6\u6001\u5219 Y \u589e\u52a0\u4e00\u4e2a\u7f51\u683c\u3002 6\u3001border \u7ed9 menu \u7528\u7684\uff0c\u4ee5\u540e\u518d\u4ecb\u7ecd\u3002 style \u5728 style \u8282\u70b9\u4e2d\uff0c\u5b9a\u4e49 UI \u5e03\u5c40\u4e2d SOUI \u7a97\u53e3\u5bf9\u8c61\u7684\u5c5e\u6027\u96c6\u5408\uff0c\u5b83\u4eec\u662f SWindow \u5bf9\u8c61\u7684\u5c5e \u6027\uff0c\u6240\u6709 SWindow \u5bf9\u8c61\u90fd\u53ef\u4ee5\u901a\u8fc7 class \u5c5e\u6027\u6765\u5f15\u7528 style \u8282\u70b9\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u96c6\u5408\u3002 objattr \u63a7\u4ef6\u7684\u9ed8\u8ba4\u5c5e\u6027\u3002 SOUI \u53ef\u4ee5\u4e3a\u6bcf\u4e00\u7c7b UI \u63a7\u4ef6\u901a\u8fc7 objattr \u6765\u63d0\u4f9b\u4e00\u79cd\u9ed8\u8ba4\u5c5e\u6027\u96c6\u5408\uff0c\u4ee5\u51cf\u5c11\u5728 XML \u5e03\u5c40 \u4e2d\u7684\u91cd\u590d\u5b9a\u4e49\u3002 4.1.2 \u5e03\u5c40(layout)\u8d44\u6e90\u6587\u4ef6 \u7a97\u53e3\u5e03\u5c40\u7684\u6982\u5ff5 \u6bcf\u4e00\u4e2a UI \u90fd\u662f\u7531\u5927\u91cf\u7684\u754c\u9762\u5143\u7d20\u6784\u6210\u7684\uff0c\u5728 Windows \u7f16\u7a0b\uff0c\u8fd9\u4e9b\u754c\u9762\u5143\u7d20\u7684\u6700\u5c0f\u5355\u4f4d\u901a \u5e38\u79f0\u4e4b\u4e3a\u63a7\u4ef6\u3002 \u5e03\u5c40\u5c31\u662f\u8fd9\u4e9b\u63a7\u4ef6\u5728\u4e3b\u754c\u9762\u4e0a\u7684\u5927\u5c0f\u53ca\u76f8\u5bf9\u4f4d\u7f6e\u3002 \u4f20\u7edf\u7684\u5e03\u5c40\u4e00\u822c\u4f7f\u7528\u4e00\u4e2a 4 \u4e2a\u7edd\u5bf9\u5750\u6807\u6765\u5b9a\u4e49\u4e00\u4e2a\u63a7\u4ef6\u5728\u4e3b\u7a97\u53e3\u7684\u4f4d\u7f6e\u3002\u5bf9\u4e8e\u7a97\u53e3\u662f\u56fa\u5b9a \u5927\u5c0f\u7684\u754c\u9762\u6765\u8bf4\uff0c\u8fd9\u79cd\u65b9\u5f0f\u662f\u6700\u7b80\u5355\u6709\u6548\u7684. \u7136\u800c\u95ee\u9898\u5728\u4e8e\u5728 Windows \u7cfb\u7edf\u4e0a\u7f16\u7a0b\uff0c\u57fa\u672c\u4e0a\u5f88\u5c11\u6709\u7a0b\u5e8f\u7684\u7a97\u53e3\u662f\u56fa\u5b9a\u5927\u5c0f\u7684\uff0c\u7528\u6237\u5e0c \u671b\u5b83\u7684\u7a97\u53e3\u80fd\u591f\u968f\u65f6\u8c03\u6574\u5927\u5c0f\u3002\u8c03\u6574\u5927\u5c0f\u540e\u754c\u9762\u91cc\u7684\u63a7\u4ef6\u8fd8\u80fd\u591f\u6309\u7167\u4e00\u5b9a\u7684\u89c4\u5219\u8fdb\u884c\u91cd \u6392\u3002 \u6211\u81ea\u5df1\u6700\u8ba8\u538c\u7684\u5c31\u662f\u5728 WM_SIZE \u91cc\u91cd\u6392\u63a7\u4ef6\u4f4d\u7f6e\u3002 \u968f\u7740\u4f7f\u7528 XML \u6765\u63cf\u8ff0\u63a7\u4ef6\u5e03\u5c40\u65b9\u5f0f\u7684\u51fa\u73b0\uff0c\u8fd9\u79cd\u7a97\u53e3\u5e03\u5c40\u8fc7\u7a0b\u4e2d\u7684\u7a97\u53e3\u91cd\u6392\u624d\u5f97\u5230\u4e86\u6839 \u672c\u7684\u89e3\u51b3\u3002 \u4e24\u79cd XML \u5e03\u5c40\u7c7b\u578b \u76ee\u524d\u6d41\u884c\u7684 UI \u5e93\u57fa\u672c\u90fd\u662f\u91c7\u7528 XML \u6765\u63cf\u8ff0\u7a97\u53e3\u5e03\u5c40\uff0c\u5982 Android, WPF, QQ \u7b49\u3002 \u4f7f\u7528 XML \u5e03\u5c40\u6574\u4f53\u4e0a\u53ef\u4ee5\u5212\u5206\u4e3a\u4e24\u79cd\u7c7b\u578b\uff1a\u951a\u70b9\u5e03\u5c40\u548c\u6d41\u5f0f\u5e03\u5c40\u3002 \u6240\u8c13\u6d41\u5f0f\u5e03\u5c40\u5c31\u662f\u4e00\u4e2a\u63a7\u4ef6\u53ea\u63cf\u8ff0\u63a7\u4ef6\u7684\u5927\u5c0f\uff0c\u800c\u4e0d\u5173\u5fc3\u4f4d\u7f6e\uff0c\u5b83\u7684\u6700\u7ec8\u663e\u793a\u4f4d\u7f6e\u7531\u5e03\u5c40 \u5668\u8ba1\u7b97\u51fa\u6765\uff0c\u5982 Android \u53ca DuiLib \u91cc\u5b9e\u73b0\u7684 VerticalLayout \u53ca HorizontalLayout \u7b49\u3002 \u951a\u70b9\u5e03\u5c40\u548c\u6d41\u5f0f\u5e03\u5c40\u4e0d\u540c\u5728\u4e8e\uff0c\u5b83\u5177\u4f53\u7684\u5b9a\u4e49\u4e00\u4e2a\u63a7\u4ef6\u7684 4 \u4e2a\u70b9\u7684\u5750\u6807\u4f4d\u7f6e\uff0c\u4f46\u8fd9\u4e9b\u4f4d\u7f6e \u901a\u5e38\u4e0d\u662f\u7edd\u5bf9\u4f4d\u7f6e\uff0c\u800c\u662f\u4e00\u4e2a\u76f8\u5bf9\u4e8e\u7236\u7a97\u53e3\u4e0d\u540c\u951a\u70b9\u7684\u4f4d\u7f6e\uff0c\u5f53\u7236\u7a97\u53e3\u5927\u5c0f\u6539\u53d8\u65f6\uff0c\u5b50\u7a97 \u53e3\u4e5f\u4f1a\u6839\u636e\u951a\u70b9\u7684\u4f4d\u7f6e\u53d8\u5316\u81ea\u52a8\u8c03\u6574\u3002\u5e03\u5c40\u7684\u4eba\u4f7f\u7528\u951a\u70b9\u5e03\u5c40\u65f6\u5f88\u6e05\u695a\u4e00\u4e2a\u63a7\u4ef6\u6700\u7ec8\u4f1a\u663e \u793a\u5728\u54ea\uff0c\u4e0d\u9700\u8981\u5f88\u5f3a\u7684\u60f3\u8c61\u80fd\u529b\u3002 \u4e24\u79cd\u5e03\u5c40\u90fd\u6709\u5b83\u4eec\u7684\u4f18\u70b9\uff0c\u5b8c\u5584\u7684 UI \u5e03\u5c40\u5668\u901a\u5e38\u4f1a\u540c\u65f6\u63d0\u4f9b\u4e24\u79cd\u5e03\u5c40\u80fd\u529b\u3002 \u8003\u8651\u5230\u951a\u70b9\u5e03\u5c40\u66f4\u76f4\u89c2\uff0c\u800c\u4e14\u529f\u80fd\u4e0a\u5b8c\u5168\u53ef\u4ee5\u89e3\u51b3\u5e03\u5c40\u9700\u6c42\uff0c\u4e3a\u4e86\u7b80\u5316\u8bbe\u8ba1\uff0c\u5728 SOUI \u4e2d \u53ea\u63d0\u4f9b\u951a\u70b9\u5e03\u5c40\u3002 SOUI \u5e03\u5c40\u8303\u4f8b\u53ca\u89e3\u6790 \u4e0b\u9762 XML \u4e3a soui-demo \u7684\u4e3b\u754c\u9762\u5e03\u5c40\u6587\u4ef6\u3002 <SOUI name= \"dlg_main\" title= \"SOUI-DEMO version:%ver%\" bigIcon= \"LOGO:32\" smallIcon= \"LOGO:16\" width= \"600\" height= \"400\" appWnd= \"1\" margin= \"5,5,5,5\" resizable= \"1\" translucent= \"1\" > <skin> <!--\u5c40\u90e8 skin \u5bf9\u8c61--> <gif name= \"gif_horse\" src= \"gif:gif_horse\" /> <gif name= \"gif_penguin\" src= \"gif:gif_penguin\" /> </skin> <style> <!--\u5c40\u90e8 style \u5bf9\u8c61--> <class name= \"cls_edit\" ncSkin= \"_skin.sys.border\" margin-x= \"2\" marginy= \"2\" /> </style> <root class= \"cls_dlg_frame\" cache= \"1\" > <caption pos= \"0,0,-0,30\" show= \"1\" font= \"adding:8\" > <icon pos= \"10,8\" src= \"LOGO:16\" /> <text class= \"cls_txt_red\" > SOUI-DEMO version:%ver% </text> <imgbtn id= \"1\" skin= \"_skin.sys.btn.close\" pos= \"-45,0\" tip= \"close\" animate= \"1\" /> <imgbtn id= \"2\" skin= \"_skin.sys.btn.maximize\" pos= \"-83,0\" animate= \"1\" /> <imgbtn id= \"3\" skin= \"_skin.sys.btn.restore\" pos= \"-83,0\" show= \"0\" animate= \"1\" /> <imgbtn id= \"5\" skin= \"_skin.sys.btn.minimize\" pos= \"-121,0\" animate= \"1\" /> <imgbtn name= \"btn_menu\" skin= \"skin_btn_menu\" pos= \"-151,2\" animate= \"1\" /> </caption> <tabctrl name= \"tab_main\" pos= \"5,30,-5,-5\" show= \"1\" curSel= \"0\" focusable= \"0\" animateSteps= \"10\" tabHeight= \"75\" tabSkin= \"skin_tab_main\" texty= \"50\" iconSkin= \"skin_page_icons\" icon-x= \"10\" > <page title= \"listctrl123\" > <listctrl name= \"lc_test\" pos= \"10,0,-10,-10\" itemHeight= \"20\" headerHeight= \"30\" cache= \"1\" cursor= \"CUR_TST\" > <header align= \"left\" itemSwapEnable= \"1\" fixWidth= \"0\" sortHeader= \"1\" > <items> <item width= \"150\" > name </item> <item width= \"150\" > gender </item> <item width= \"150\" > age </item> <item width= \"150\" > score </item> </items> </header> </listctrl> </page> <page title= \"webkit\" > <include src= \"layout:page_webkit\" /> </page> <page title= \"flash\" > <flash pos= \"0,0,-0,-0\" name= \"ctrl_flash\" url= \"http://swf.sc.chinaz.com//Files//DownLoad//flash2//201401//flash2524.sw f\" delay= \"1\" /> </page> <page title= \"gif\" > <gifplayer pos= \"10,10\" skin= \"gif_horse\" name= \"giftest\" cursor= \"ANI_ARROW\" /> <button width= \"250\" height= \"30\" name= \"btnSelectGif\" > load gif file </button> <gifplayer pos= \"10,150\" skin= \"gif_penguin\" /> <icon pos= \"10,300\" src= \"LOGO:64\" /> </page> <page title= \"layout\" > <include src= \"layout:page_layout\" /> </page> <page title= \"treebox\" > <include src= \"layout:page_treebox\" /> </page> <page title = \"misc.\" > <include src= \"layout:page_misc\" /> </page> <page title= \"treectrl\" > <include src= \"layout:page_treectrl\" /> </page> <page title= \"about\" > <include src= \"layout:page_about\" /> </page> </tabctrl> </root> </SOUI> \u53ef\u4ee5\u770b\u5230\u5728\u8fd9\u4e2a XML \u4e2d\uff0c\u6709\u4e00\u4e2a\u6839\u8282\u70b9\uff1aSOUI\u3002\u5728\u6839\u8282\u70b9\u4e2d\uff0c\u5b9a\u4e49\u4e86\u4e3b\u754c\u9762\u7684\u771f\u7a97\u53e3\u7684 \u5404\u79cd\u5c5e\u6027\uff08\u5c5e\u6027\u7684\u542b\u4e49\u89c1\u540e\u7eed\u7bc7\uff09\u3002 \u5728\u6839\u8282\u70b9\u4e0b\u6709 3 \u4e2a\u8282\u70b9\uff0c\u5206\u522b\u662f skin, style \u53ca root\u3002 skin, \u548c style \u548c\u524d\u4e00\u7bc7\u8bb2\u7684 init.xml \u7684\u529f\u80fd\u4e00\u6837\u3002\u4e0d\u540c\u5728\u4e8e\u5728\u5e03\u5c40\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684 skin \u53ca style \u53ea\u5728\u5f53\u524d\u7a97\u53e3\u7684\u751f\u547d\u5468\u671f\u671f\u95f4\u6709\u6548\uff0c\u7c7b\u4f3c\u4e8e C++\u51fd\u6570\u4e2d\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u7a97\u53e3\u5173\u95ed\u540e\u8fd9 \u4e9b\u5bf9\u8c61\u4f1a\u81ea\u52a8\u6790\u6784\u3002\u6211\u79f0\u4e4b\u4e3a\u5c40\u90e8 skin \u53ca\u5c40\u90e8 style\u3002 \u7a97\u53e3\u4e2d\u63a7\u4ef6\u7684\u5e03\u5c40\u4fe1\u606f\u5b9a\u4e49\u5728 root \u8282\u70b9\u4e2d\u3002 root \u8282\u70b9\u672c\u8eab\u4e5f\u662f\u4e00\u4e2a SWindow \u7a97\u53e3\u5bf9\u8c61\uff0c\u4f46\u662f\u5728\u8fd9\u91cc\u5fc5\u987b\u662f\"root\"\u624d\u80fd\u8bc6\u522b\uff0c\u5728\u8fd9\u4e2a \u8282\u70b9\u4e2d\u53ef\u4ee5\u6709 SWindow \u7684\u5404\u79cd\u5c5e\u6027\uff0c\u4f46\u662f\u548c\u5e03\u5c40\u4f4d\u7f6e\u76f8\u5173\u7684\u5c5e\u6027\u81ea\u52a8\u65e0\u6548\uff0c\u56e0\u4e3a\u8be5\u7a97\u53e3 \u603b\u662f\u5145\u6ee1\u6574\u4e2a\u5bbf\u4e3b\u7a97\u53e3\u3002 \u5728 root \u8282\u70b9\u4e0b\u53ef\u4ee5\u6309\u7167\u4e0d\u540c\u7684\u5e03\u5c40\u5c42\u6b21\u91c7\u7528\u951a\u70b9\u5e03\u5c40\u65b9\u5f0f\u5e03\u5c40\u5404\u79cd\u7cfb\u7edf\u5185\u7f6e\u63a7\u4ef6\u53ca\u7528\u6237\u81ea \u5b9a\u4e49\u63a7\u4ef6\u3002 \u5728 demo \u4e2d\uff0c\u6211\u9996\u5148\u5728\u6700\u4e0a\u9762\u5e03\u5c40\u4e00\u4e2a caption \u63a7\u4ef6\uff0ccaption \u63a7\u4ef6\u91cc\u53c8\u6709\u5404\u79cd\u6807\u9898\uff0c\u6309 \u94ae\u7b49\u5b50\u63a7\u4ef6\u3002 \u7136\u540e\u5728\u4e0b\u9762\u5e03\u5c40\u4e00\u4e2a tabctrl \u4ee5\u53ca\u5b83\u7684\u5b50\u63a7\u4ef6\u3002 \u5728\u8fd9\u4e2a\u5e03\u5c40 XML \u4e2d\u6709\u5927\u91cf\u7684\u63a7\u4ef6\u5c5e\u6027\u5b9a\u4e49\u3002\u4e0d\u540c\u7684\u63a7\u4ef6\u6709\u4e0d\u540c\u7684\u5c5e\u6027\uff0c\u8fd9\u91cc\u4e0d\u8be6\u7ec6\u5c55 \u5f00\uff0c\u8fd9\u91cc\u4e3b\u8981\u5173\u6ce8\u4e00\u4e0b page \u8282\u70b9\u4e0b\u7684 include \u8282\u70b9\u3002 include \u53ea\u6709\u4e00\u4e2a\u5c5e\u6027\uff1asrc\uff0csrc \u5b9a\u4e49\u5982\u4f55\u53bb\u5f15\u7528\u5728\u53e6\u4e00\u4e2a XML \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u5e03\u5c40 XML\uff0c\u5982\u201clayout:page_layout\u201d\u4ee3\u8868\u8fd9\u91cc\u8981\u5f15\u7528\u5728 layout \u8d44\u6e90\u7c7b\u578b\u4e2d\u5b9a\u4e49\u7684 name \u4e3a page_layout \u7684 XML \u6587\u4ef6\uff08\u5173\u4e8e\u8d44\u6e90\u7684\u5b9a\u4e49\u53c2\u8003\u7b2c\u56db\u7bc7\uff09\u3002 \u4e0b\u9762\u662f layout:page_layout \u6307\u5411\u7684 XML \u6587\u4ef6\u7684\u5185\u5bb9\uff1a <include> <text pos= \"100,10\" pos2type= \"center\" > center align1 </text> <text pos= \"100,30\" pos2type= \"center\" > center align align </text> <text pos= \"250,50\" pos2type= \"rightTop\" > align right top </text> <text pos= \"250,70\" pos2type= \"rightTop\" > align right top 2 </text> <check pos= \"250,90\" pos2type= \"rightTop\" > check right top </check> <check pos= \"250,110\" pos2type= \"rightTop\" font= \"adding:-5\" > check right top1235 </check> <text pos= \"250,130\" class= \"cls_txt_red\" > text left top </text> <button pos= \"10,150,@150,@30\" > button 1 using @ </button> <button pos= \"10,200\" width= \"150\" height= \"30\" > button 1 using width </button> <button name= \"btn_hidetst\" pos= \"300,150,@100,@30\" display= \"0\" tip= \"click me to hide me and see how the next image will move\" > hide test </button> <img skin= \"skin_page_icons\" iconIndex= \"1\" pos= \"[5,150,-10,-10\" /> </include> \u53ef\u4ee5\u770b\u5230\u5728\u8fd9\u4e2a\u6587\u4ef6\u4e2d\uff0c\u6709\u4e00\u4e2a\u4ee5\"include\"\u7684\u6839\u8282\u70b9\uff0c\u5728 include \u8282\u70b9\u4e0b\u624d\u662f\u5e03\u5c40 XML\u3002 \u8fd9\u91cc\u7684 include \u4ee3\u8868\u8be5\u6587\u4ef6\u53ea\u80fd\u662f\u88ab\u5176\u5b83\u7684\u6709 include \u5143\u7d20\u7684\u5e03\u5c40\u6587\u4ef6\u5f15\u7528\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728 include \u7684 XML \u6587\u4ef6\u4e2d\u4e0d\u80fd\u5b9a\u4e49\u5c40\u90e8 skin \u53ca\u5c40\u90e8 style\u3002 SOUI \u7684\u951a\u70b9\u5e03\u5c40 SOUI \u5e03\u5c40\u5168\u90e8\u91c7\u7528\u76f8\u5bf9\u5750\u6807\uff0c\u7531 pos,offset(pos2type), size, width,height \u8fd9\u51e0\u4e2a\u4e2a\u7a97 \u53e3\u5c5e\u6027\u914d\u5408\u6307\u5b9a\u3002 size, width, height \u5c5e\u6027 size, width, height \u6bd4\u8f83\u7b80\u5355\uff0c\u662f\u7528\u6765\u6307\u5b9a\u7a97\u53e3\u7684\u5927\u5c0f\u7684\uff0c\u53ea\u6709\u5728 pos \u5c5e\u6027\u6307\u5b9a\u7684\u503c\u4e2a\u6570 \u4e0d\u4e3a 4 \u65f6\u751f\u6548\u3002 size \u662f 2014 \u5e74\u5e95\u589e\u52a0\u7684\u5e03\u5c40\u5c5e\u6027\uff0csize=\"width,height\"\u3002 width, height \u53ef\u4ee5\u6709 3 \u79cd\u503c\uff1afull,-1,\u975e\u8d1f\u6574\u6570\u3002 \u4e3a full \u65f6\uff0c\u4ee3\u8868\u9ad8\u5ea6\u6216\u8005\u5bbd\u5ea6\u548c\u7236\u7a97\u53e3\u7684\u5ba2\u6237\u533a\u5927\u5c0f\u76f8\u7b49\u3002 -1 \u4ee3\u8868\u6839\u636e\u7a97\u53e3\u5185\u5bb9\u81ea\u52a8\u8ba1\u7b97\u7a97\u53e3\u5927\u5c0f\u3002 \u975e\u8d1f\u6574\u6570\u76f4\u63a5\u6307\u5b9a\u7a97\u53e3\u5927\u5c0f\u3002 \u5728\u56fe\u7247\u63a7\u4ef6\u4e2d\uff0c\u63a7\u4ef6\u662f\u6307\u5b9a\u7684\u76ae\u80a4\u9ed8\u8ba4\u5927\u5c0f\u3002 \u5728\u6587\u672c\u63a7\u4ef6\u4e2d\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a maxWidth \u5c5e\u6027\uff0c\u63a7\u4ef6\u662f\u6587\u672c\u5185\u5bb9\u7684\u5927\u5c0f\uff0c\u4f46\u5bbd\u5ea6\u4e0d\u8d85\u8fc7 maxWidth\u3002 pos \u5c5e\u6027 pos \u5c5e\u6027\u53ef\u4ee5\u6307\u5b9a 4 \u4e2a\u503c\uff0c\u4e5f\u53ef\u4ee5\u6307\u5b9a 2 \u4e2a\u503c\u3002\u6307\u5b9a 4 \u4e2a\u503c\u65f6\uff0c\u5206\u522b\u4ee3\u8868\u63a7\u4ef6\u7684 left,top,right,bottom,\u6307\u5b9a\u4e24\u4e2a\u503c\u65f6\u4ee3\u8868\u63a7\u4ef6\u7684 x,y\uff0c\u5177\u4f53\u4f4d\u7f6e\u8fd8\u4f9d\u8d56\u4e8e\u53e6\u5916 3 \u4e2a\u53c2\u6570\u3002 \u6307\u5b9a 4 \u4e2a\u503c\u65f6\uff0cpos \u76ee\u524d\u652f\u6301 7 \u79cd\u6807\u5fd7\uff1a|,%,[,],{,},@ \u201c|\u201d\u4ee3\u8868\u53c2\u8003\u7236\u7a97\u53e3\u7684\u4e2d\u5fc3\uff1b\u5982|-10 \u4ee3\u8868\u5728\u7236\u7a97\u53e3\u7684\u4e2d\u5fc3\u5411\u5de6/\u4e0a\u504f\u79fb 10 \u8c61\u7d20\u3002 \u201c%\u201d\u4ee3\u8868\u5728\u7236\u7a97\u53e3\u7684\u767e\u5206\u6bd4\uff0c\u53ef\u4ee5\u662f\u5c0f\u6570\uff0c\u8d1f\u6570\u3002\u5982\uff1a%40 \u4ee3\u8868\u5728\u7236\u7a97\u53e3\u7684 40%\u4f4d \u7f6e\uff0c%-40 \u5219\u7b49\u4ef7\u4e8e(1-40%)\u3002 \u201c[\u201d\u76f8\u5bf9\u4e8e\u524d\u4e00\u5144\u5f1f\u7a97\u53e3\u3002\u7528\u4e8e X \u65f6\uff0c\u53c2\u8003\u524d\u4e00\u5144\u5f1f\u7a97\u53e3\u7684 right\uff0c\u7528\u4e8e Y \u65f6\u53c2\u8003\u524d\u4e00\u5144 \u5f1f\u7a97\u53e3\u7684 bottom \u201c]\u201d\u76f8\u5bf9\u4e8e\u540e\u4e00\u5144\u5f1f\u7a97\u53e3\u3002\u7528\u4e8e X \u65f6\uff0c\u53c2\u8003\u540e\u4e00\u5144\u5f1f\u7684 left,\u7528\u4e8e Y \u65f6\u53c2\u8003\u540e\u4e00\u5144\u5f1f\u7684 top \u201c{\u201d\u76f8\u5bf9\u4e8e\u524d\u4e00\u5144\u5f1f\u7a97\u53e3\u3002\u7528\u4e8e X \u65f6\uff0c\u53c2\u8003\u524d\u4e00\u5144\u5f1f\u7a97\u53e3\u7684 left\uff0c\u7528\u4e8e Y \u65f6\u53c2\u8003\u524d\u4e00\u5144\u5f1f \u7a97\u53e3\u7684 top \u201c}\u201d\u76f8\u5bf9\u4e8e\u540e\u4e00\u5144\u5f1f\u7a97\u53e3\u3002\u7528\u4e8e X \u65f6\uff0c\u53c2\u8003\u540e\u4e00\u5144\u5f1f\u7684 right,\u7528\u4e8e Y \u65f6\u53c2\u8003\u540e\u4e00\u5144\u5f1f\u7684 bottom \u201c@\u201d\u6807\u5fd7\u7528\u6765\u6307\u5b9a\u7a97\u53e3\u7684\u5927\u5c0f\uff0c\u53ea\u80fd\u51fa\u73b0\u5728 pos \u5c5e\u6027\u7684\u7b2c 3\uff0c4 \u4e2a\u503c\u4e2d\uff0c\u7528\u6765\u6807\u8bc6\u7a97\u53e3 \u7684\u5bbd\u5ea6\u3002\u5f53\u540e\u9762\u7684\u503c\u4e3a\u8d1f\u65f6\uff0c\u4ee3\u8868\u81ea\u52a8\u8ba1\u7b97\u7a97\u53e3\u7684\u5bbd\u5ea6\u6216\u8005\u9ad8\u5ea6\uff082015.3.3 \u65b0\u589e\u52a0\u89e3 \u91ca\uff09\u3002 \u6ce8\uff1a\u201c|\u201c, \"[\" ,\"]\", \"{\", \"}\" \u4e2d\u6307\u5b9a\u7684\u503c\u90fd\u53ef\u4ee5\u4e3a\u6b63\u6216\u8005\u8d1f\uff0c\u6b63\u65f6\u5411\u53f3\u6216\u8005\u4e0b\u504f\u79fb\uff0c\u8d1f\u5219\u5411 \u5de6\u6216\u8005\u4e0a\u504f\u79fb\u3002 \u5f53\u6ca1\u6709\u4e0a\u8ff0\u6807\u5fd7\u65f6\uff0c\u8d1f\u53f7\u4ee3\u8868\u53c2\u8003\u7236\u7a97\u53e3\u7684\u53f3\u8fb9\u6216\u8005\u4e0b\u8fb9\u7f29\u8fdb\u7edd\u5bf9\u503c\u4f4d\u7f6e\u3002\u5982\uff1a pos=\"0,0,-0,-0\"\u4ee3\u8868\u5360\u6ee1\u7236\u7a97\u53e3\u3002\u800c pos=\"10,10,-10,-10\"\u5219\u4ee3\u8868\u5728\u7236\u7a97\u53e3\u7684\u57fa\u7840\u4e0a\u5411\u5185 \u5168\u90e8\u7f29\u8fdb 10 \u70b9\u3002 @:\u6307\u5b9a\u7a97\u53e3\u7684 size\u3002\u53ea\u80fd\u7528\u4e8e x2,y2\uff0c\u7528\u4e8e x2 \u65f6\uff0c\u6307\u5b9a\u7a97\u53e3\u7684 width\uff0c\u7528\u4e8e y2 \u65f6\u6307\u5b9a\u7a97 \u53e3\u7684 height\u3002\u6ce8\uff1a\u53ea\u80fd\u4e3a\u6b63\u503c\uff0c\u8d1f\u53f7\u4f1a\u81ea\u52a8\u5ffd\u7565\u3002 \u5176\u4e2d\u201c{\u201d\u548c\u201c}\u201d\u662f SOUI \u5728 DUIENGINE \u7684\u57fa\u7840\u4e0a\u65b0\u589e\u52a0\u7684\u5e03\u5c40\u6807\u5fd7\uff08SOUI \u662f\u5728 DUIENGINE \u7684\u57fa\u7840\u4e0a\u5168\u9762\u91cd\u6784\u800c\u6765\uff09\u3002 \u6ce8\u610f!!!\u7531\u4e8e\u7cfb\u7edf\u8fd0\u884c\u5411\u524d\u53ca\u5411\u540e\u5f15\u7528\uff0c\u7406\u8bba\u4e0a\u6709\u53ef\u80fd\u51fa\u6765\u5faa\u73af\u5f15\u7528\uff0c\u5bfc\u81f4\u754c\u9762\u5e03\u5c40\u5931\u8d25\uff0c \u56e0\u6b64\u5728\u4f7f\u7528\"[\"\uff0c\"{\"\uff0c\u201c}\u201d \u548c\"]\"\u8fd9\u51e0\u4e2a\u6807\u5fd7\u65f6\u9700\u8981\u7279\u522b\u6ce8\u610f\u3002 \u5f53 pos \u53ea\u6307\u5b9a\u4e86 x1,y1 \u65f6\uff0c\u901a\u5e38\u9700\u8981\u548c offset(\u6216\u8005 pos2type),size(\u6216\u8005 width,height)\u914d \u5408\u4f7f\u7528\u3002 offset \u53ca pos2type \u5c5e\u6027 offset \u5c5e\u6027\u5305\u542b\u4e24\u4e2a\u503c\uff0c\u7528\u6765\u4ee3\u8868\u7a97\u53e3\u5728\u901a\u8fc7\u5176\u5b83\u5e03\u5c40\u5c5e\u6027\u5b8c\u6210\u540e\u7684\u504f\u79fb\u91cf\uff1a\u5982 offset=\"-1,-1\"\uff0c\u8be5 offset \u8868\u660e\u7a97\u53e3\u5411\u5de6\u65b9\u53ca\u4e0a\u65b9\u5404\u5e73\u8861\u4e00\u4e2a\u7a97\u53e3\u5927\u5c0f\u7684\u5355\u4f4d\u3002 offset \u53ca pos2type \u5c5e\u6027\u5177\u4f53\u8bf7\u53c2\u8003\u300a\u7b2c\u5341\u516d\u7bc7\uff1aSWindow \u7684\u5e03\u5c40\u5c5e\u6027 pos2type \u53ca offset\u300b \u5728 SOUI \u7684\u5e03\u5c40\u7cfb\u7edf\u4e2d\uff0c\u4f7f\u7528\u4e00\u4e2a pos \u5c5e\u6027\u57fa\u672c\u53ef\u4ee5\u5b8c\u6574 90\uff05\u4ee5\u4e0a\u7684\u5e03\u5c40\u529f\u80fd\uff0c\u5efa\u8bae\u7528 \u6237\u5728 demo \u4e2d\u4fee\u6539\u5404\u79cd\u5e03\u5c40\u5c5e\u6027\u6765\u89c2\u5bdf\u63a7\u4ef6\u4f4d\u7f6e\u7684\u53d8\u5316\u4ee5\u52a0\u6df1\u5bf9 SOUI \u5e03\u5c40\u7cfb\u7edf\u7684\u7406\u89e3\u3002 4.1.3 \u5e03\u5c40\u5c5e\u6027 pos2type \u53ca offset \u5f53\u7a97\u53e3\u5927\u5c0f\u9700\u8981\u6839\u636e\u5185\u5bb9\u6765\u786e\u5b9a\u65f6\uff0c\u4f7f\u7528 XML \u5e03\u5c40\u53ef\u80fd\u9700\u8981\u505a\u4e00\u4e9b\u7279\u6b8a\u7684\u5904\u7406\u3002 \u4f8b\u5982\uff1a\u4e0d\u7ba1\u7a97\u53e3\u591a\u5927\uff0c\u6211\u9700\u8981\u5c06\u8be5\u7a97\u53e3\u76f8\u5bf9\u4e8e\u7236\u7a97\u53e3\u5c45\u4e2d\u5728 XML \u4e2d\u5e94\u8be5\u600e\u4e48\u5904\u7406\uff1f \u5982\u679c\u7a97\u53e3\u5927\u5c0f\u662f\u56fa\u5b9a\u7684\uff08\u5982, 100 *100)\uff0c\u8fd9\u6837 pos \u5c5e\u6027\u53ef\u4ee5\u5b9a\u4e49\u4e3a\"|-50,|-50,|-50,|-50\"\u5373 \u53ef\u3002 \u5f53\u7a97\u53e3\u5927\u5c0f\u4e0d\u786e\u5b9a\u65f6\uff0cSOUI \u4e2d\u63d0\u4f9b\u4e86 pos2type \u53ca offset \u6765\u534f\u540c\u5904\u7406\u3002 \u5176\u4e2d pos2type \u662f offset \u7684\u5b50\u96c6\u3002 \u4e0b\u9762\u5148\u91cd\u70b9\u4ecb\u7ecd offset \u5c5e\u6027 offset \u5c5e\u6027\u662f SOUI \u5728\u901a\u8fc7 pos \u5c5e\u6027\u5b8c\u6210\u5750\u6807\u5b9a\u4f4d\u540e\u518d\u5c06\u5750\u6807\u8fdb\u884c\u504f\u79fb\u7684\u5c5e\u6027\u3002\u548c pos \u4e2d \u4e00\u822c\u4f7f\u7528\u8c61\u7d20\u4e3a\u5355\u4f4d\u4e0d\u540c\uff0coffset \u662f\u4ee5\u63a7\u4ef6\u6700\u540e\u7684\u5927\u5c0f\u4e3a\u5355\u4f4d\u8fdb\u884c\u5e73\u79fb\u3002 \u6211\u4eec\u53ef\u4ee5\u5728 XML \u4e2d\u6216\u8005\u4ee3\u7801\u4e2d\u4f7f\u7528 offset = \"-0.5,-0.5\"\u8fd9\u6837\u7684\u5f62\u5f0f\u6765\u63cf\u8ff0\u7a97\u53e3\u7684\u5750\u6807\u5e73 \u79fb\u5c5e\u6027\u3002 \u5c5e\u6027\u4e2d\u5305\u542b\u4e24\u4e2a\u503c\uff0c\u5206\u522b\u5bf9\u5e94 X\uff0cY \u65b9\u5411\u7684\u5e73\u79fb\u76f8\u5bf9\u4e8e\u7a97\u53e3\u5927\u5c0f\u7684\u500d\u6570\uff0c\u4e00\u822c\u4e3a[-1,0]\u7684\u5c0f \u6570(float)\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u8d85\u8fc7\u8fd9\u4e2a\u8303\u56f4\u3002 \u6211\u4eec\u5148\u770b\u4e00\u4e0b\u4ee3\u7801\u4e2d\u5982\u4f55\u5b9e\u73b0\uff1a class SOUI_EXP SwndLayout { public : //... float fOffsetX , fOffsetY ; /**< \u7a97\u53e3\u5750\u6807\u504f\u79fb\u91cf, x += fOffsetX * //... }; ``` ```cpp int SwndLayout::CalcPosition(LPRECT lpRcContainer,CRect &rcWindow ) { int nRet=0; //... if(nRet==0) {//\u6ca1\u6709\u5750\u6807\u7b49\u5f85\u8ba1\u7b97\u4e86 rcWindow.NormalizeRect(); //\u5904\u7406\u7a97\u53e3\u7684\u504f\u79fb(offset)\u5c5e\u6027 CSize sz = rcWindow.Size(); CPoint ptOffset; ptOffset.x = (LONG)(sz.cx * fOffsetX); ptOffset.y = (LONG)(sz.cy * fOffsetY); rcWindow.OffsetRect(ptOffset); } return nRet; } SwndLayout::CalcPosition \u662f SOUI \u7528\u6765\u901a\u8fc7 pos \u53ca offset \u5c5e\u6027\u8ba1\u7b97\u7a97\u53e3\u5750\u6807\u7684\u5173\u952e\u51fd \u6570\uff0c\u4e3a\u4e86\u7a81\u51fa\u91cd\u70b9\uff0c\u5177\u4f53\u7684\u5750\u6807\u8ba1\u7b97\u7701\u7565\u4e86\uff0c\u53ea\u5217\u51fa\u5e73\u79fb\u5904\u7406\u90e8\u5206\u7684\u4ee3\u7801\u3002 \u53ef\u4ee5\u770b\u51fa\uff0c\u5728\u5e73\u79fb\u5904\u7406\u524d\uff0c\u9996\u5148\u83b7\u5f97\u7a97\u53e3\u7684 Size,\u518d\u5c06 Size \u5206\u522b\u4e58\u4ee5 fOffsetX,fOffsetY \u8fd9 \u4e24\u4e2a\u5e73\u79fb\u7cfb\u6570\u83b7\u5f97\u5728 x,y \u4e24\u4e2a\u65b9\u5411\u4e0a\u7684\u5e73\u79fb\u91cf\u3002 \u6700\u540e\u624d\u662f\u5c06\u77e9\u5f62\u505a\u5e73\u79fb\u5904\u7406\u3002 \u4e0b\u9762\u6211\u4eec\u518d\u6765\u770b\u770b pos2type \u5c5e\u6027\uff1a pos2type \u53ef\u4ee5\u5b9a\u4e49 9 \u4e2a\u53c2\u8003\u70b9\uff1acenter, lefttop, leftmid, leftbottom,midtop,midbottom,righttop,rightmid,rightbottom\u3002 \u4e0b\u8868\u663e\u793a\u5bf9\u5e94\u539f pos2type \u5c5e\u6027\u7684 offset \u5c5e\u6027\uff1a pos2type offset center -0.5,-0.5 lefttop 0,0 leftmid 0,-0.5 leftbottom 0,-1 midtop -0.5,0 midbottom -0.5,-1 righttop -1,0 rightmid -1,-0.5 rightbottom -1,-1 \u4ece\u4e0a\u8868\u53ef\u4ee5\u770b\u51fa\uff0c\u539f\u6765\u7684 pos2type \u5c5e\u6027\u53ea\u80fd\u662f 0.5 \u7684\u500d\u6570\uff0c\u65b0\u7684 offset \u5c5e\u6027\u6ca1\u6709\u8be5\u9650 \u5236\u3002 \u4f7f\u7528 pos2type \u53ef\u80fd\u66f4\u4e3a\u76f4\u89c2\uff0c\u4f46\u662f offset \u5c5e\u6027\u5219\u66f4\u7075\u6d3b\u3002\u5982\u679c\u4e24\u4e2a\u5c5e\u6027\u540c\u65f6\u4f7f\u7528\uff0c\u53ea\u6709 \u6700\u540e\u4e00\u4e2a\u5c5e\u6027\u6709\u6548\u3002 \u6ce8\u610f\uff1aoffset \u5c5e\u6027\u662f 2014.11.20 \u624d\u65b0\u589e\u52a0\u7684\u5c5e\u6027\uff0cpos2type \u5c5e\u6027\u7684\u547d\u540d\u662f\u4e3a\u4e86\u517c\u5bb9 2014.11.20 \u524d\u7684\u7248\u672c\u3002 SOUI \u5e03\u5c40\u4e4b\u76f8\u5bf9\u4e8e\u7279\u5b9a\u5144\u5f1f\u7a97\u53e3 SOUI \u4e2d\u901a\u8fc7 pos \u7684\u6807\u5fd7\u5982\uff1a[, {, }, ]\uff0c\u8fd9 4 \u4e2a\u6807\u5fd7\u53ef\u4ee5\u76f8\u5bf9\u4e8e\u524d\u4e00\u4e2a\u53ca\u540e\u4e00\u4e2a\u5144\u5f1f\u7a97\u53e3\uff0c \u4f46\u662f\u6709\u65f6\u5019\u5e0c\u671b\u76f8\u5bf9\u4e8e\u4e0d\u662f\u524d\u540e\u7a97\u53e3\u7684\u5144\u5f1f\u7a97\u53e3\uff0c\u6bd4\u5982\u4e00\u4e2a\u901a\u8fc7\u4e00\u4e2a\u4e2d\u5fc3\u7a97\u53e3\u540c\u65f6\u5b9a\u4e49\u5b83 \u7684\u4e0a\u4e0b\u5de6\u53f3 4 \u4e2a\u7a97\u53e3\uff0c\u8fd9\u4e2a\u65f6\u5019\u5e94\u8be5\u5982\u4f55\u5904\u7406\uff1f \u5176\u5b9e SOUI \u662f\u652f\u6301\u76f8\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u5144\u5f1f\u7a97\u53e3\u7684\uff0c\u4f46\u662f\u5b9a\u4e49\u65b9\u6cd5\u6709\u70b9\u590d\u6742\uff0c\u6240\u4ee5\u5728\u4e4b\u524d\u7684\u535a \u5ba2\u6587\u7ae0\u4e2d\u90fd\u6ca1\u6709\u4ecb\u7ecd\u3002 \u5b9a\u4e49\u7684\u65b9\u6cd5\u662f\u8fd9\u6837\u7684\uff1a \u9996\u5148\u88ab\u53c2\u8003\u7a97\u53e3\uff08\u5047\u5b9a\u4e3a\u7a97\u53e3 A\uff09\u5fc5\u987b\u8981\u6307\u5b9a\u7a97\u53e3\u7684 ID \u5c5e\u6027\uff0c\u6709\u4e86 ID\uff08\u5047\u5b9a id=100)\uff0c \u5176\u5b83\u7a97\u53e3\u624d\u80fd\u5f15\u7528\u5b83\uff08\u8fd9\u91cc\u6307\u5b9a name \u5c5e\u6027\u662f\u4e0d\u884c\u7684\uff0c\u7cfb\u7edf\u53ea\u4f1a\u901a\u8fc7 ID \u53bb\u67e5\u8be2\u8fd9\u4e2a\u5144\u5f1f \u7a97\u53e3\uff09\u3002 \u7136\u540e\u4e00\u4e2a\u7a97\u53e3\uff08\u5047\u5b9a\u4e3a\u7a97\u53e3 B\uff09\u8981\u76f8\u5bf9\u4e8e\u7a97\u53e3 A \u5e03\u5c40\uff0c\u53ea\u9700\u8981\u5728 pos \u4e2d\u6307\u5b9a\u4e3a\u5982\uff1a pos=\"sib.left@100:-20,sib.bottom@100:30,@100,@100\"\uff0c\u5750\u6807\u5b9a\u4e49\u4e2d\u7684 sib.left,sib.bottom \u7528\u6765\u6307\u5b9a\u8fd9\u4e24\u4e2a\u5750\u6807\u662f\u76f8\u5bf9\u4e8e\u88ab\u5f15\u7528\u7a97\u53e3\u7684 left,bottom \u7684\u503c\uff0c\u5750\u6807 \u4e2d\u7684 100:20,100:30 \u521a\u4ee3\u8868\u76f8\u5bf9\u4e8e ID \u4e3a 100 \u7684\u5144\u5f1f\u7a97\u53e3\u7684 left \u5411\u5de6\u504f\u79fb 20 \u50cf\u7d20\u53ca bottom \u5411\u4e0b\u504f\u79fb 30 \u50cf\u7d20\u3002\u8fd9\u91cc\u7684\u8d1f\u6570\u662f\u4ee3\u8868\u504f\u79fb\u65b9\u5411\uff0c\u548c\u6ca1\u6709 sib.xxx \u65f6\u7684\u8d1f\u503c\u610f\u4e49\u4e0d \u540c\u3002 \u4e0b\u9762\u770b\u4e0b demo \u4e2d\u7684\u793a\u4f8b XML(demo/uires/xml/page_layout.xml)\uff1a xml <window skin=\"skin_page_icons\" pos=\"[5,150,-10,-10\" id=\"1236\"> <text pos=\"|0,|0\" offset=\"-0.5,-0.5\" font=\"adding:20\" colorText=\"#ff000066\">alpha test</text> <text pos=\"5,5\" id=\"100\" visible=\"0\">ref text</text> <button pos=\"sib.left@100:10,sib.bottom@100:10,@100,@25\" name=\"btn_hidetst\" tip=\"click me to hide me and see how the next image will move\">ref id:100</button> </window> PS\uff1a\u8fd9\u4e2a\u5b9a\u4e49\u65b9\u6cd5\u6709\u70b9\u5c71\u5be8\uff0c\u5c06\u5c31\u7740\u7528\u5427\uff0c\u5173\u952e\u662f\u80fd\u89e3\u51b3\u95ee\u9898 :) 4.1.4 \u5728 SOUI \u4e2d\u4f7f\u7528\u7ebf\u6027\u5e03\u5c40 SOUI 2.5.1.1 \u5f00\u59cb\u652f\u6301\u7ebf\u6027\u5e03\u5c40(LinearLayout). \u8981\u5728 SOUI \u5e03\u5c40\u4e2d\u4f7f\u7528\u7ebf\u6027\u5e03\u5c40, \u9700\u8981\u5728\u5e03\u5c40\u5bb9\u5668\u7a97\u53e3\u91cc\u6307\u5b9a\u5e03\u5c40\u7c7b\u578b\u4e3a vbox | hbox, (vbox \u4e3a\u5782\u76f4\u7ebf\u6027\u5e03\u5c40, hbox \u4e3a\u6c34\u5e73\u7ebf\u6027\u5e03\u5c40). \u5728\u6307\u5b9a\u5e03\u5c40\u7c7b\u578b\u540e\u8fd8\u53ef\u4ee5\u4e3a\u5bb9\u5668\u7a97\u53e3\u6307\u5b9a gravity \u5c5e\u6027, \u7528\u6765\u6307\u5b9a\u5b50\u7a97\u53e3\u7684\u9ed8\u8ba4\u6392\u5217\u6a21\u5f0f. vbox \u7684 gravity \u6709:left(\u9ed8\u8ba4), center, right, hbox \u6709: top(\u9ed8\u8ba4), center, bottom. \u5728\u7ebf\u6027\u5e03\u5c40\u4e2d\u7684\u5b50\u7a97\u53e3 pos \u5c5e\u6027\u6ca1\u6709\u610f\u4e49, \u4e00\u822c\u76f4\u63a5\u6307\u5b9a size=\"width,height\", width/height \u503c: -1 \u4ee3\u8868 wrap_content, -2 \u4ee3\u8868 match_parent \u53ef\u4ee5\u4f7f\u7528 layout_gravity \u53ef\u4ee5\u66f4\u6539\u5f53\u524d\u7a97\u53e3\u7684\u6392\u5217\u6a21\u5f0f. \u4f7f\u7528 extend=\"left,top,right,bottom\", extend_left, extend_top, extend_right, extend_bottom \u6765\u6307\u5b9a\u95f4\u8ddd. (\u76f8\u5f53\u4e8e android \u7684 margin) \u5b50\u7a97\u53e3\u652f\u6301\u4f7f\u7528 weight \u5c5e\u6027. \u770b\u4e0b\u9762 demo \u4e2d\u7684\u4f8b\u5b50: ```xml vbox + gravity + wrapContent vbox + gravity + weight button test hbox demo button1 button2 button3 button4 ```","title":"4.1 xml \u8d44\u6e90\u6587\u4ef6\u5b9a\u4e49"},{"location":"Development/1/#41-xml","text":"\u57fa\u4e8e SOUI \u754c\u9762\u5e93\u7684\u7a0b\u5e8f\uff0c\u5b58\u5728\u4e00\u4e2a UI \u8d44\u6e90\u7d22\u5f15\u6587\u4ef6(uires.idx)\uff0c\u6b64\u6587\u4ef6\u662f\u4e00\u4e2a\u6807\u51c6 xml \u6587\u4ef6\uff0c\u5176\u9ed8\u8ba4\u4f4d\u7f6e\u662f uires \u6587\u4ef6\u6240\u5728\u8def\u5f84\u4e0b\u7684 uires\\uires.idx\u3002\u5982\u679c\u4f7f\u7528\u4e86 PE \u8d44\u6e90\u6216\u8005 zip \u538b\u7f29\u6587\u4ef6\uff0c\u6765\u4fdd\u5b58\u6240\u6709\u8d44\u6e90\u6587\u4ef6\uff0c\u5219\u6b64\u6587\u4ef6\u7684\u4f4d\u7f6e\u4e0d\u4f1a\u6539\u53d8\u3002 \u6b64\u6587\u4ef6\u4e2d\u53ef\u4ee5\u5b9a\u4e49\u7a0b\u5e8f\u7684\u5168\u5c40\u914d\u7f6e\u3001XML \u6587\u4ef6\u3001\u5b57\u4f53\u3001\u56fe\u7247\u3001\u6587\u5b57\u7b49\u8d44\u6e90\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a <?xml version=\"1.0\" encoding=\"utf-8\"?> <resource> <UIDEF> <file name= \"xml_init\" path= \"xml\\init.xml\" /> </UIDEF> <ICON> <file name= \"LOGO\" path= \"image\\img_logo.ico\" /> </ICON> <CURSOR> <file name= \"ANI_ARROW\" path= \"image\\021.ani\" /> <file name= \"CUR_TST\" path= \"image\\camera_capture.cur\" /> </CURSOR> <LAYOUT> <file name= \"maindlg\" path= \"xml\\dlg_main.xml\" /> <file name= \"menu_test\" path= \"xml\\menu_test.xml\" /> <file name= \"page_layout\" path= \"xml\\page_layout.xml\" /> <file name= \"page_treebox\" path= \"xml\\page_treebox.xml\" /> <file name= \"page_treectrl\" path= \"xml\\page_treectrl.xml\" /> <file name= \"page_misc\" path= \"xml\\page_misc.xml\" /> <file name= \"page_webkit\" path= \"xml\\page_webkit.xml\" /> <file name= \"page_about\" path= \"xml\\page_about.xml\" /> </LAYOUT> <IMGX> <file name= \"png_page_icons\" path= \"image\\page_icons.png\" /> <file name= \"png_small_icons\" path= \"image\\small_icons.png\" /> <file name= \"webbtn_back\" path= \"image\\webbtn_back.png\" /> <file name= \"webbtn_forward\" path= \"image\\webbtn_forward.png\" /> <file name= \"webbtn_refresh\" path= \"image\\webbtn_refresh.png\" /> <file name= \"png_treeicon\" path= \"image\\TreeIcon.png\" /> <file name= \"png_menu_border\" path= \"image\\menuborder.png\" /> <file name= \"png_vscroll\" path= \"image\\vscrollbar.png\" /> <file name= \"png_tab_left\" path= \"image\\tab_left.png\" /> <file name= \"png_tab_left_splitter\" path= \"image\\tab_left_splitter.png\" /> <file name= \"png_tab_main\" path= \"image\\tab_main.png\" /> <file name= \"btn_menu\" path= \"image\\btn_menu.png\" /> </IMGX> <GIF> <file name= \"gif_horse\" path= \"image\\horse.gif\" /> <file name= \"gif_penguin\" path= \"image\\penguin.gif\" /> </GIF> <rtf> <file name= \"rtf_test\" path= \"rtf\\RTF \u6d4b\u8bd5.rtf\" /> </rtf> <script> <file name= \"lua_test\" path= \"lua\\test.lua\" /> </script> <translator> <file name= \"lang_cn\" path= \"translation files\\lang_cn.xml\" /> </translator> </resource> uires.idx \u6587\u4ef6\u662f SOUI \u8d44\u6e90\u7684\u5165\u53e3\uff0c\u5b9a\u4e49\u4e86\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u7684\u5404\u79cd\u8d44\u6e90\uff0c\u4ee5\"resource\"\u4e3a\u6839\u8282 \u70b9\u3002\u5728 soui-demo \u7684 uires.idx \u4e2d\uff0c\u5b9a\u4e49\u4e86 UIDEF\uff0cICON\uff0cCURSOR\uff0cLAYOUT\uff0c IMGX\uff0cGIF\uff0crtf\uff0cscript\uff0ctranslator \u8fd9\u4e9b\u8d44\u6e90\u7c7b\u578b\u3002 \u5176\u5b9e\u4f60\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u4efb\u610f\u7684\u8d44\u6e90\u7c7b\u578b\uff0c\u53ea\u8981\u7c7b\u578b\u957f\u5ea6\u4e0d\u8d85\u8fc7 30 \u4e2a\u5b57\u7b26\u3002 \u6bcf\u4e00\u4e2a\u8d44\u6e90\u7c7b\u578b\u4e0b\u90fd\u662f\u4e00\u4e9b file \u5143\u7d20\uff0c\u6bcf\u4e2a file \u5305\u542b\u4e24\u4e2a\u5c5e\u6027\uff1aname \u53ca path\u3002 name \u662f UI \u5e03\u5c40\u7684 XML \u6587\u4ef6\u5f15\u7528\u8be5\u8d44\u6e90\u7684\u6807\u8bc6\uff0c\u800c path \u5219\u662f\u8be5\u8d44\u6e90\u771f\u5b9e\u7684\u6587\u4ef6\u5b58\u50a8\u8def \u5f84\u3002 \u9664\u4e86 UIDEF \u4e2d\u5b9a\u4e49\u7684 xml_init \u53ca layout \u4e2d\u5b9a\u4e49\u7684\u5e03\u5c40 XML \u5916\uff0c\u5176\u5b83\u8d44\u6e90\u90fd\u6bd4\u8f83\u7b80\u5355\uff0c \u5c31\u662f\u63d0\u4f9b\u4e00\u79cd\u4ece name \u6620\u5c04\u6587\u4ef6\u7684\u65b9\u5f0f\u3002 \u5173\u4e8e XML \u5b9a\u4e49\u7684\u5927\u6982\u987a\u5e8f\u662f\uff1a 1\uff1a\u8d44\u6e90\u5f15\u5165 uires.idx (\u8fd9\u91cc\u5b9a\u4e49\u754c\u9762\u8981\u4f7f\u7528\u7684\u4e00\u4e9b\u8d44\u6e90) \u683c\u5f0f: <\u8d44\u6e90\u7c7b\u578b> Name = \u8d44\u6e90\u81ea\u5b9a\u4e49\u540d\u79f0\uff0c path=\u8d44\u6e90\u8def\u5f84 2\uff1a\u5b9a\u4e49\u5168\u5c40\u53d8\u91cf init.xml (\u8fd9\u91cc\u5b9a\u4e49\u5168\u5c40\u53d8\u91cf\u5e76\u7528\u8d44\u6e90\u521d\u59cb\u5316\u8fd9\u4e9b\u5168\u5c40\u53d8\u91cf) \u683c\u5f0f\uff1a <\u53d8\u91cf\u7c7b\u578b> Name=\u53d8\u91cf\u540d\u79f0\uff0c src=\u8d44\u6e90\u7c7b\u578b\uff1a\u8d44\u6e90\u522b\u540d\uff0c \u63a7\u4ef6\u5c5e\u6027... 3: \u4f7f\u7528\u5168\u5c40\u53d8\u91cf dlg_main.xml(\u8fd9\u91cc\u5f00\u59cb\u5f15\u7528\u4e0a\u9762\u7684\u53d8\u91cf) 4.1.1 init.xml \u8d44\u6e90\u6587\u4ef6 UIDEF \u8d44\u6e90\uff08\u5e03\u5c40 XML \u518d\u5355\u72ec\u5f00\u7bc7\u4ecb\u7ecd\uff09 \u5176\u4e2d uidef \u4e2d\u5b9a\u4e49\u7684 init.xml \u7528\u6765\u5b9a\u4e49 SOUI \u4e2d\u4f7f\u7528\u7684\u5168\u5c40 UI \u5b9a\u4e49\u3002 \u8fd9\u4e2a\u6587\u4ef6\u4e00\u822c\u5e94\u8be5\u5728 main \u51fd\u6570\u4e2d\u88ab SApplication \u5bf9\u8c61\u4f7f\u7528\uff0c\u5982\uff1a //... //\u5b9a\u4e49\u4e00\u4e2a\u552f\u4e00\u7684 SApplication \u5bf9\u8c61\uff0cSApplication \u7ba1\u7406\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u8d44\u6e90 SApplication * theApp = new SApplication ( pRenderFactory , hInstance ); //... //\u52a0\u8f7d\u5168\u5c40\u8d44\u6e90\u63cf\u8ff0 XML theApp -> Init ( _T ( \"xml_init\" )); \u8fd9\u91cc\u76f4\u63a5\u4f7f\u7528 uidef \u4e2d\u5b9a\u4e49\u7684 name \u5c5e\u6027\u6765\u521d\u59cb\u5316\u7cfb\u7edf\u3002SApplication::Init \u9ed8\u8ba4\u4ece uidef \u6bb5\u4e2d\u53bb\u67e5\u627e xml_init \u8d44\u6e90\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u5728\u5176\u5b83\u8d44\u6e90\u7c7b\u578b\u5982 xml \u4e2d\uff0c\u4f46\u662f\u9700\u8981\u5728 init \u4e2d \u663e\u793a\u6307\u5b9a\u8d44\u6e90\u7c7b\u578b\u3002 \u4e0b\u9762\u6211\u4eec\u6253\u5f00 xml\\init.xml \u770b\u4e00\u4e0b\u91cc\u9762\u7684\u5185\u5bb9\uff1a <?xml version=\"1.0\" encoding=\"utf-8\"?> <UIDEF> <font face= \"\u5fae\u8f6f\u96c5\u9ed1\" size= \"18\" /> <string> <ver value= \"1.0\" /> </string> <skin> <imglist name= \"skin_page_icons\" src= \"imgx:png_page_icons\" states= \"9\" /> <imglist name= \"skin_small_icons\" src= \"imgx:png_small_icons\" states= \"12\" /> <imglist name= \"skin_tree_icon\" src= \"imgx:png_treeicon\" states= \"3\" /> <imglist name= \"skin_menuicon\" src= \"imgx:png_small_icons\" states= \"12\" /> <border name= \"skin_menuborder\" src= \"imgx:png_menu_border\" left= \"2\" top= \"2\" border= \"2,2,2,2\" key= \"FF00FF\" alpha= \"100\" /> <imglist name= \"skin_webbtn_back\" src= \"imgx:webbtn_back\" states= \"4\" /> <imglist name= \"skin_webbtn_forward\" src= \"imgx:webbtn_forward\" states= \"4\" /> <imglist name= \"skin_webbtn_refresh\" src= \"imgx:webbtn_refresh\" states= \"4\" /> <imglist name= \"skin_tab_left\" src= \"imgx:png_tab_left\" states= \"3\" /> <imglist name= \"skin_tab_left_splitter\" src= \"imgx:png_tab_left_splitter\" /> <imglist name= \"skin_tab_main\" src= \"imgx:png_tab_main\" states= \"3\" /> <imglist name= \"skin_btn_menu\" src= \"imgx:btn_menu\" states= \"3\" /> <gif name= \"gif_horse\" src= \"gif:gif_horse\" /> <gif name= \"gif_penguin\" src= \"gif:gif_penguin\" /> </skin> <style> <class name= \"cls_dlg_frame\" skin= \"_skin.sys.wnd.bkgnd\" font= \"\" colorText= \"#000000\" margin-x= \"0\" /> <class name= \"cls_btn_link\" cursor= \"hand\" colorHover= \"#0A84D2\" /> <!--\u5b9a\u4e49\u6587\u5b57\u6309\u94ae\u7684\u6837\u5f0f--> <class name= \"cls_btn_weblink\" cursor= \"hand\" colorText= \"#1e78d5\" colorHover= \"#1e78d5\" font= \"italic:1\" fontHover= \"underline:1,italic:1\" /> <class name= \"cls_txt_red\" font= \"face:\u5b8b\u4f53,bold:1\" colorText= \"#FF0000\" /> <!--\u5b9a\u4e49\u767d\u8272\u7c97\u4f53\u5b8b\u4f53--> <class name= \"cls_txt_black\" font= \"face:\u5b8b\u4f53,bold:1\" colorText= \"#000000\" /> <!--\u5b9a\u4e49\u9ed1\u8272\u7c97\u4f53\u5b8b\u4f53--> <class name= \"cls_txt_white\" font= \"face:\u5b8b\u4f53,bold:1\" colorText= \"#FFFFFF\" /> <!--\u5b9a\u4e49\u767d\u8272\u7c97\u4f53\u5b8b\u4f53--> <class name= \"normalbtn\" font= \"\" colorText= \"#385e8b\" colorTextDisable= \"#91a7c0\" textMode= \"25\" cursor= \"hand\" margin-x= \"0\" /> <class name= \"toptext\" textMode= \"20\" /> <class name= \"vcentertext\" textMode= \"24\" /> <class name= \"rightvcentertext\" textMode= \"26\" /> <class name= \"centertext\" textMode= \"25\" /> <class name= \"righttext\" textMode= \"22\" /> <class name= \"linkimage\" cursor= \"hand\" /> <class name= \"cls_edit\" ncSkin= \"_skin.sys.border\" margin-x= \"2\" marginy= \"2\" /> </style> <objattr> <button class= \"normalbtn\" /> <imgbtn class= \"linkimage\" /> <tabctrl colorText= \"000000\" align= \"top\" tabWidth= \"70\" tabHeight= \"38\" tabSpacing= \"0\" tabPos= \"10\" dotted= \"1\" /> <edit transParent= \"1\" margin-x= \"2\" margin-y= \"2\" /> <treectrl colorItemBkgnd= \"#FFFFFF\" colorItemSelBkgnd= \"#000088\" colorItemText= \"#000000\" colorItemSelText= \"#FFFFFF\" indent= \"17\" itemMargin= \"4\" /> </objattr> </UIDEF> \u8fd9\u4e2a xml_init \u5fc5\u987b\u662f\u4ee5 UIDEF \u4e3a\u552f\u4e00\u6839\u8282\u70b9\u3002 \u5728 UIDEF \u4e0b\uff0c\u53ef\u4ee5\u5b9a\u4e49 font\uff0cstring\uff0cskins\uff0cstyle\uff0cobjattr \u4e94\u4e2a\u5b50\u8282\u70b9\u3002 \u5176\u4e2d\uff0cfont \u5b9a\u4e49 SOUI \u4e2d\u4f7f\u7528\u7684\u9ed8\u8ba4\u5b57\u4f53\uff0c\u53ea\u6709 face \u548c size \u4e24\u4e2a\u5c5e\u6027\u3002 string \u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u8868\uff0c\u5b9a\u4e49\u4e00\u4e2a\"name-\u5b57\u7b26\u4e32\"\u6620\u5c04\uff0c\u5728\u5e03\u5c40\u7684 XML \u6587\u4ef6\u4e2d\u53ef\u4ee5\u901a\u8fc7 \u5f15\u7528\u5b57\u7b26\u4e32\u7684 name \u6765\u83b7\u5f97\u5b57\u7b26\u4e32\u3002 skins \u5b9a\u4e49 SOUI \u4e2d\u4f7f\u7528\u7684\u5168\u5c40\u7a97\u53e3\u5143\u7d20\u7ed8\u5236\u5bf9\u8c61\uff0c\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u90fd\u5bf9\u5e94\u4e00\u4e2a SOUI::ISkinObj \u7684\u6d3e\u751f\u7c7b\u3002 SOUI \u7cfb\u7edf\u9ed8\u8ba4\u5b9e\u73b0\u4e86 SSkinImgList(imglist), SSkinImgFrame(imgframe), SSkinButton(button), SSkinGradation(gradation), SSkinScrollbar(scrollbar), SSkinMenuBorder(border)\u8fd9\u516d\u79cd\u7ed8\u56fe\u7c7b\u578b\u3002SSkinImgList \u4e3a SOUI \u4e2d\u7684 C++\u7c7b\u540d\uff0c imglist \u4e3a\u5728 skins \u8282\u70b9\u4e2d\u7684\u5143\u7d20\u7c7b\u578b\u540d\u3002 \u4e0b\u9762\u5206\u522b\u4ecb\u7ecd\u8fd9\u51e0\u79cd\u7ed8\u56fe\u7c7b\u578b\uff1a 1\u3001imglist imglist \u662f\u4e00\u4e2a\u56fe\u7247\u5e8f\u5217\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5305\u542b\u4e00\u7ec4\u5c0f\u56fe\u7247\uff0c\u5e38\u89c1\u7684\u5982\u6309\u94ae\u9700\u8981\u4f7f\u7528\u7684 4 \u79cd\u72b6\u6001 \u56fe\u3002 imglist \u5305\u542b 4 \u4e2a\u5c5e\u6027\uff1a SOUI_ATTRS_BEGIN () ATTR_CUSTOM ( L \"src\" , OnAttrImage ) //skinObj \u5f15\u7528\u7684\u56fe\u7247\u6587\u4ef6\u5b9a\u4e49\u5728 uires.idx \u4e2d\u7684 name \u5c5e\u6027\u3002 ATTR_INT ( L \"tile\" , m_bTile , TRUE ) //\u7ed8\u5236\u662f\u5426\u5e73\u94fa,0--\u4f4d\u4f38\uff08\u9ed8\u8ba4\uff09\uff0c\u5176\u5b83--\u5e73\u94fa ATTR_INT ( L \"vertical\" , m_bVertical , TRUE ) //\u5b50\u56fe\u662f\u5426\u5782\u76f4\u6392\u5217\uff0c0--\u6c34\u5e73\u6392\u5217(\u9ed8\u8ba4), \u5176\u5b83--\u5782\u76f4\u6392\u5217 ATTR_INT ( L \"states\" , m_nStates , TRUE ) //\u5b50\u56fe\u6570\u91cf,\u9ed8\u8ba4\u4e3a 1 SOUI_ATTRS_END () \u5047\u5b9a\u4e0a\u56fe\u7684\u56fe\u7247\u5728 uires.idx \u4e2d\u7684\u5b9a\u4e49\u4e3a\uff1a <imgx> <file name= 'btn_next' file= 'image\\btn.next.png' /> </imgx> \u8981\u5728 soui \u4e2d\u5f15\u7528\u8fd9\u4e2a\u56fe\u7247\uff0c\u9700\u8981\u5728 init.xml \u7684 skins \u7ed3\u8282\u4e2d\u505a\u5982\u4e0b\u58f0\u660e\uff1a <skins> <imglist name= \u201cskin_btn_next\" src= \"imgx:btn_next\" states= \"4\" tile= \"0\" vertical= \"0\" /> </skins> \u5728\u4e0a\u9762\u7684 skin \u5b9a\u4e49\u4e2d\uff0c name \u5c5e\u6027\u544a\u8bc9\u7cfb\u7edf\u5982\u4f55\u5f15\u7528\u5b9a\u4e49\u7684 imglist src \u5c5e\u6027\u5b9a\u4e49\u8be5 skin \u9700\u8981\u4f7f\u7528\u54ea\u4e00\u4e2a\u56fe\u7247\u8d44\u6e90\uff0c\u8d44\u6e90\u5f15\u7528\u683c\u5f0f\u4e3a type:name\uff0c\u5982\u4e0a\u9762\u4f7f\u7528 \u7684 imgx:btn_next\uff0c\u5bf9\u4e8e\u56fe\u7247\u8d44\u6e90\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\u4e5f\u53ef\u4ee5\u4e0d\u6307\u5b9a type,\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5728\u5e38\u7528\u7684 \u56fe\u7247\u7c7b\u578b\u4e0b\u67e5\u627e\uff0c\u4f46\u4e0d\u5efa\u8bae\u8fd9\u6837\u4f7f\u7528\u3002 states \u5b9a\u4e49\u56fe\u4e2d\u5305\u542b\u591a\u5c11\u4e2a\u5b50\u56fe\u3002 title \u5b9a\u4e49\u56fe\u7247\u5728\u653e\u5927\u663e\u793a\u65f6\u65f6\u5e73\u94fa\u8fd8\u662f\u62c9\u4f38\uff0c\u9ed8\u8ba4\u4e3a\u62c9\u4f38\u3002 vertical \u5c5e\u6027\u5b9a\u4e49\u56fe\u4e2d\u7684\u5b50\u56fe\u7684\u6392\u5217\u65b9\u5f0f\u3002 \u5728\u672c\u4f8b\u5b50\u4e2d tile \u548c vertical \u5c5e\u6027\u90fd\u53ef\u4ee5\u4e0d\u6307\u5b9a\u3002 2\u3001imgframe imgframe \u662f\u4e00\u4e2a\u63d0\u4f9b\u4e5d\u5bab\u683c\u663e\u793a\u7684\u7ed8\u56fe\u5bf9\u8c61\uff0cSSkinImgFrame \u6d3e\u751f\u81ea SSkinImgList\uff0c \u56e0\u6b64 imgframe \u4e5f\u62e5\u6709 imglist \u7684\u5168\u90e8\u5c5e\u6027\u3002 \u6b64\u5916\uff0cimgframe \u63d0\u4f9b\u4e86\u51e0\u4e2a\u65b0\u7684\u5c5e\u6027\uff1a SOUI_ATTRS_BEGIN () ATTR_INT ( L \"left\" , m_rcMargin . left , TRUE ) //\u4e5d\u5bab\u683c\u5de6\u8fb9\u8ddd ATTR_INT ( L \"top\" , m_rcMargin . top , TRUE ) //\u4e5d\u5bab\u683c\u4e0a\u8fb9\u8ddd ATTR_INT ( L \"right\" , m_rcMargin . right , TRUE ) //\u4e5d\u5bab\u683c\u53f3\u8fb9\u8ddd ATTR_INT ( L \"bottom\" , m_rcMargin . bottom , TRUE ) //\u4e5d\u5bab\u683c\u4e0b\u8fb9\u8ddd ATTR_INT ( L \"margin-x\" , m_rcMargin . left = m_rcMargin . right , TRUE ) //\u4e5d\u5bab\u683c\u5de6\u53f3\u8fb9\u8ddd ATTR_INT ( L \"margin-y\" , m_rcMargin . top = m_rcMargin . bottom , TRUE ) //\u4e5d\u5bab\u683c\u4e0a\u4e0b\u8fb9\u8ddd SOUI_ATTRS_END () imgframe \u7684\u683c\u5f0f\u5982\u4e0a\u56fe\uff0c\u5728 imgframe \u4e2d\u901a\u8fc7 left, top, right, bottom \u6765\u5b9a\u4e49\u4e5d\u5bab\u683c\u3002 3\u3001button button \u7ed8\u56fe\u5bf9\u8c61\u662f\u7ed8\u5236\u6309\u94ae\u65f6\u4f7f\u7528\u7684\uff0c\u5b83\u4f7f\u7528\u6e10\u53d8\u5b9e\u73b0\u7ed8\u5236\u6309\u94ae\u7684 4 \u79cd\u72b6\u6001\u3002 \u5305\u542b\u4ee5\u4e0b\u5c5e\u6027\uff1a SOUI_ATTRS_BEGIN () ATTR_COLOR ( L \"colorBorder\" , m_crBorder , TRUE ) //\u8fb9\u6846\u989c\u8272 ATTR_COLOR ( L \"colorUp\" , m_crUp [ ST_NORMAL ], TRUE ) //\u6b63\u5e38\u72b6\u6001\u6e10\u53d8 \u8d77\u59cb\u989c\u8272 ATTR_COLOR ( L \"colorDown\" , m_crDown [ ST_NORMAL ], TRUE ) //\u6b63\u5e38\u72b6\u6001\u6e10 \u53d8\u7ec8\u6b62\u989c\u8272 ATTR_COLOR ( L \"colorUpHover\" , m_crUp [ ST_HOVER ], TRUE ) //\u6d6e\u52a8\u72b6\u6001\u6e10 \u53d8\u8d77\u59cb\u989c\u8272 ATTR_COLOR ( L \"colorDownHover\" , m_crDown [ ST_HOVER ], TRUE ) //\u6d6e\u52a8\u72b6\u6001\u6e10 \u53d8\u7ec8\u6b62\u989c\u8272 ATTR_COLOR ( L \"colorUpPush\" , m_crUp [ ST_PUSHDOWN ], TRUE ) //\u4e0b\u538b\u72b6\u6001\u6e10 \u53d8\u8d77\u59cb\u989c\u8272 ATTR_COLOR ( L \"colorDownPush\" , m_crDown [ ST_PUSHDOWN ], TRUE ) //\u4e0b\u538b\u72b6\u6001\u6e10 \u53d8\u7ec8\u6b62\u989c\u8272 ATTR_COLOR ( L \"colorUpDisable\" , m_crUp [ ST_DISABLE ], TRUE ) //\u7981\u7528\u72b6\u6001\u6e10 \u53d8\u8d77\u59cb\u989c\u8272 ATTR_COLOR ( L \"colorDownDisable\" , m_crDown [ ST_DISABLE ], TRUE ) //\u7981\u7528\u72b6\u6001 \u6e10\u53d8\u7ec8\u6b62\u989c\u8272 SOUI_ATTRS_END () 4\u3001gradation \u6e10\u53d8\u7ed8\u56fe\u5bf9\u8c61\uff0c\u63d0\u4f9b 3 \u4e2a\u5c5e\u6027\uff1a SOUI_ATTRS_BEGIN () ATTR_COLOR ( L \"colorFrom\" , m_crFrom , TRUE ) //\u6e10\u53d8\u8d77\u59cb\u989c\u8272 ATTR_COLOR ( L \"colorTo\" , m_crTo , TRUE ) //\u6e10\u53d8\u7ec8\u6b62\u989c\u8272 ATTR_INT ( L \"vertical\" , m_bVert , TRUE ) //\u6e10\u53d8\u65b9\u5411,0--\u6c34\u5e73(\u9ed8\u8ba4), 1-- \u5782\u76f4 SOUI_ATTRS_END () ``` 5 \u3001 scrollbar \u6eda\u52a8\u6761\u76ae\u80a4\uff0c\u867d\u7136\u5b83\u6d3e\u751f\u81ea imglist \uff0c\u5b9e\u9645\u4e0a imglist \u4e2d\u5b9e\u73b0\u7684\u5c5e\u6027\u5728 scrollbar \u4e2d\u6ca1\u6709\u610f \u4e49\uff0c\u53ea\u662f\u4e3a\u4e86\u7701\u70b9\u4ee3\u7801\u3002 ``` cpp SOUI_ATTRS_BEGIN () ATTR_INT ( L \"margin\" , m_nMargin , FALSE ) //\u8fb9\u7f18\u4e0d\u62c9\u4f38\u5927\u5c0f ATTR_INT ( L \"hasGripper\" , m_bHasGripper , FALSE ) //\u6ed1\u5757\u4e0a\u662f\u5426\u6709\u5e2e\u624b(gripper) ATTR_INT ( L \"hasInactive\" , m_bHasInactive , FALSE ) //\u662f\u5426\u6709\u7981\u7528\u6001 SOUI_ATTRS_END () \u4e00\u822c\u7684 scrollbar \u76ae\u80a4\u8d44\u6e90\u5982\u4e0b\uff1a \u5982\u679c\u6ca1\u6709\u5e2e\u624b\u4e5f\u6ca1\u6709\u7981\u7528\u72b6\u6001\uff0c\u56fe\u7247\u5e94\u8be5\u662f 8*3 \u7684\u6b63\u65b9\u5f62\u7f51\u683c\u3002 \u6709\u5e2e\u624b\u5219 X \u589e\u52a0\u4e00\u4e2a\u7f51\u683c\uff0c\u6709\u7981\u7528\u72b6\u6001\u5219 Y \u589e\u52a0\u4e00\u4e2a\u7f51\u683c\u3002 6\u3001border \u7ed9 menu \u7528\u7684\uff0c\u4ee5\u540e\u518d\u4ecb\u7ecd\u3002 style \u5728 style \u8282\u70b9\u4e2d\uff0c\u5b9a\u4e49 UI \u5e03\u5c40\u4e2d SOUI \u7a97\u53e3\u5bf9\u8c61\u7684\u5c5e\u6027\u96c6\u5408\uff0c\u5b83\u4eec\u662f SWindow \u5bf9\u8c61\u7684\u5c5e \u6027\uff0c\u6240\u6709 SWindow \u5bf9\u8c61\u90fd\u53ef\u4ee5\u901a\u8fc7 class \u5c5e\u6027\u6765\u5f15\u7528 style \u8282\u70b9\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u96c6\u5408\u3002 objattr \u63a7\u4ef6\u7684\u9ed8\u8ba4\u5c5e\u6027\u3002 SOUI \u53ef\u4ee5\u4e3a\u6bcf\u4e00\u7c7b UI \u63a7\u4ef6\u901a\u8fc7 objattr \u6765\u63d0\u4f9b\u4e00\u79cd\u9ed8\u8ba4\u5c5e\u6027\u96c6\u5408\uff0c\u4ee5\u51cf\u5c11\u5728 XML \u5e03\u5c40 \u4e2d\u7684\u91cd\u590d\u5b9a\u4e49\u3002 4.1.2 \u5e03\u5c40(layout)\u8d44\u6e90\u6587\u4ef6 \u7a97\u53e3\u5e03\u5c40\u7684\u6982\u5ff5 \u6bcf\u4e00\u4e2a UI \u90fd\u662f\u7531\u5927\u91cf\u7684\u754c\u9762\u5143\u7d20\u6784\u6210\u7684\uff0c\u5728 Windows \u7f16\u7a0b\uff0c\u8fd9\u4e9b\u754c\u9762\u5143\u7d20\u7684\u6700\u5c0f\u5355\u4f4d\u901a \u5e38\u79f0\u4e4b\u4e3a\u63a7\u4ef6\u3002 \u5e03\u5c40\u5c31\u662f\u8fd9\u4e9b\u63a7\u4ef6\u5728\u4e3b\u754c\u9762\u4e0a\u7684\u5927\u5c0f\u53ca\u76f8\u5bf9\u4f4d\u7f6e\u3002 \u4f20\u7edf\u7684\u5e03\u5c40\u4e00\u822c\u4f7f\u7528\u4e00\u4e2a 4 \u4e2a\u7edd\u5bf9\u5750\u6807\u6765\u5b9a\u4e49\u4e00\u4e2a\u63a7\u4ef6\u5728\u4e3b\u7a97\u53e3\u7684\u4f4d\u7f6e\u3002\u5bf9\u4e8e\u7a97\u53e3\u662f\u56fa\u5b9a \u5927\u5c0f\u7684\u754c\u9762\u6765\u8bf4\uff0c\u8fd9\u79cd\u65b9\u5f0f\u662f\u6700\u7b80\u5355\u6709\u6548\u7684. \u7136\u800c\u95ee\u9898\u5728\u4e8e\u5728 Windows \u7cfb\u7edf\u4e0a\u7f16\u7a0b\uff0c\u57fa\u672c\u4e0a\u5f88\u5c11\u6709\u7a0b\u5e8f\u7684\u7a97\u53e3\u662f\u56fa\u5b9a\u5927\u5c0f\u7684\uff0c\u7528\u6237\u5e0c \u671b\u5b83\u7684\u7a97\u53e3\u80fd\u591f\u968f\u65f6\u8c03\u6574\u5927\u5c0f\u3002\u8c03\u6574\u5927\u5c0f\u540e\u754c\u9762\u91cc\u7684\u63a7\u4ef6\u8fd8\u80fd\u591f\u6309\u7167\u4e00\u5b9a\u7684\u89c4\u5219\u8fdb\u884c\u91cd \u6392\u3002 \u6211\u81ea\u5df1\u6700\u8ba8\u538c\u7684\u5c31\u662f\u5728 WM_SIZE \u91cc\u91cd\u6392\u63a7\u4ef6\u4f4d\u7f6e\u3002 \u968f\u7740\u4f7f\u7528 XML \u6765\u63cf\u8ff0\u63a7\u4ef6\u5e03\u5c40\u65b9\u5f0f\u7684\u51fa\u73b0\uff0c\u8fd9\u79cd\u7a97\u53e3\u5e03\u5c40\u8fc7\u7a0b\u4e2d\u7684\u7a97\u53e3\u91cd\u6392\u624d\u5f97\u5230\u4e86\u6839 \u672c\u7684\u89e3\u51b3\u3002 \u4e24\u79cd XML \u5e03\u5c40\u7c7b\u578b \u76ee\u524d\u6d41\u884c\u7684 UI \u5e93\u57fa\u672c\u90fd\u662f\u91c7\u7528 XML \u6765\u63cf\u8ff0\u7a97\u53e3\u5e03\u5c40\uff0c\u5982 Android, WPF, QQ \u7b49\u3002 \u4f7f\u7528 XML \u5e03\u5c40\u6574\u4f53\u4e0a\u53ef\u4ee5\u5212\u5206\u4e3a\u4e24\u79cd\u7c7b\u578b\uff1a\u951a\u70b9\u5e03\u5c40\u548c\u6d41\u5f0f\u5e03\u5c40\u3002 \u6240\u8c13\u6d41\u5f0f\u5e03\u5c40\u5c31\u662f\u4e00\u4e2a\u63a7\u4ef6\u53ea\u63cf\u8ff0\u63a7\u4ef6\u7684\u5927\u5c0f\uff0c\u800c\u4e0d\u5173\u5fc3\u4f4d\u7f6e\uff0c\u5b83\u7684\u6700\u7ec8\u663e\u793a\u4f4d\u7f6e\u7531\u5e03\u5c40 \u5668\u8ba1\u7b97\u51fa\u6765\uff0c\u5982 Android \u53ca DuiLib \u91cc\u5b9e\u73b0\u7684 VerticalLayout \u53ca HorizontalLayout \u7b49\u3002 \u951a\u70b9\u5e03\u5c40\u548c\u6d41\u5f0f\u5e03\u5c40\u4e0d\u540c\u5728\u4e8e\uff0c\u5b83\u5177\u4f53\u7684\u5b9a\u4e49\u4e00\u4e2a\u63a7\u4ef6\u7684 4 \u4e2a\u70b9\u7684\u5750\u6807\u4f4d\u7f6e\uff0c\u4f46\u8fd9\u4e9b\u4f4d\u7f6e \u901a\u5e38\u4e0d\u662f\u7edd\u5bf9\u4f4d\u7f6e\uff0c\u800c\u662f\u4e00\u4e2a\u76f8\u5bf9\u4e8e\u7236\u7a97\u53e3\u4e0d\u540c\u951a\u70b9\u7684\u4f4d\u7f6e\uff0c\u5f53\u7236\u7a97\u53e3\u5927\u5c0f\u6539\u53d8\u65f6\uff0c\u5b50\u7a97 \u53e3\u4e5f\u4f1a\u6839\u636e\u951a\u70b9\u7684\u4f4d\u7f6e\u53d8\u5316\u81ea\u52a8\u8c03\u6574\u3002\u5e03\u5c40\u7684\u4eba\u4f7f\u7528\u951a\u70b9\u5e03\u5c40\u65f6\u5f88\u6e05\u695a\u4e00\u4e2a\u63a7\u4ef6\u6700\u7ec8\u4f1a\u663e \u793a\u5728\u54ea\uff0c\u4e0d\u9700\u8981\u5f88\u5f3a\u7684\u60f3\u8c61\u80fd\u529b\u3002 \u4e24\u79cd\u5e03\u5c40\u90fd\u6709\u5b83\u4eec\u7684\u4f18\u70b9\uff0c\u5b8c\u5584\u7684 UI \u5e03\u5c40\u5668\u901a\u5e38\u4f1a\u540c\u65f6\u63d0\u4f9b\u4e24\u79cd\u5e03\u5c40\u80fd\u529b\u3002 \u8003\u8651\u5230\u951a\u70b9\u5e03\u5c40\u66f4\u76f4\u89c2\uff0c\u800c\u4e14\u529f\u80fd\u4e0a\u5b8c\u5168\u53ef\u4ee5\u89e3\u51b3\u5e03\u5c40\u9700\u6c42\uff0c\u4e3a\u4e86\u7b80\u5316\u8bbe\u8ba1\uff0c\u5728 SOUI \u4e2d \u53ea\u63d0\u4f9b\u951a\u70b9\u5e03\u5c40\u3002 SOUI \u5e03\u5c40\u8303\u4f8b\u53ca\u89e3\u6790 \u4e0b\u9762 XML \u4e3a soui-demo \u7684\u4e3b\u754c\u9762\u5e03\u5c40\u6587\u4ef6\u3002 <SOUI name= \"dlg_main\" title= \"SOUI-DEMO version:%ver%\" bigIcon= \"LOGO:32\" smallIcon= \"LOGO:16\" width= \"600\" height= \"400\" appWnd= \"1\" margin= \"5,5,5,5\" resizable= \"1\" translucent= \"1\" > <skin> <!--\u5c40\u90e8 skin \u5bf9\u8c61--> <gif name= \"gif_horse\" src= \"gif:gif_horse\" /> <gif name= \"gif_penguin\" src= \"gif:gif_penguin\" /> </skin> <style> <!--\u5c40\u90e8 style \u5bf9\u8c61--> <class name= \"cls_edit\" ncSkin= \"_skin.sys.border\" margin-x= \"2\" marginy= \"2\" /> </style> <root class= \"cls_dlg_frame\" cache= \"1\" > <caption pos= \"0,0,-0,30\" show= \"1\" font= \"adding:8\" > <icon pos= \"10,8\" src= \"LOGO:16\" /> <text class= \"cls_txt_red\" > SOUI-DEMO version:%ver% </text> <imgbtn id= \"1\" skin= \"_skin.sys.btn.close\" pos= \"-45,0\" tip= \"close\" animate= \"1\" /> <imgbtn id= \"2\" skin= \"_skin.sys.btn.maximize\" pos= \"-83,0\" animate= \"1\" /> <imgbtn id= \"3\" skin= \"_skin.sys.btn.restore\" pos= \"-83,0\" show= \"0\" animate= \"1\" /> <imgbtn id= \"5\" skin= \"_skin.sys.btn.minimize\" pos= \"-121,0\" animate= \"1\" /> <imgbtn name= \"btn_menu\" skin= \"skin_btn_menu\" pos= \"-151,2\" animate= \"1\" /> </caption> <tabctrl name= \"tab_main\" pos= \"5,30,-5,-5\" show= \"1\" curSel= \"0\" focusable= \"0\" animateSteps= \"10\" tabHeight= \"75\" tabSkin= \"skin_tab_main\" texty= \"50\" iconSkin= \"skin_page_icons\" icon-x= \"10\" > <page title= \"listctrl123\" > <listctrl name= \"lc_test\" pos= \"10,0,-10,-10\" itemHeight= \"20\" headerHeight= \"30\" cache= \"1\" cursor= \"CUR_TST\" > <header align= \"left\" itemSwapEnable= \"1\" fixWidth= \"0\" sortHeader= \"1\" > <items> <item width= \"150\" > name </item> <item width= \"150\" > gender </item> <item width= \"150\" > age </item> <item width= \"150\" > score </item> </items> </header> </listctrl> </page> <page title= \"webkit\" > <include src= \"layout:page_webkit\" /> </page> <page title= \"flash\" > <flash pos= \"0,0,-0,-0\" name= \"ctrl_flash\" url= \"http://swf.sc.chinaz.com//Files//DownLoad//flash2//201401//flash2524.sw f\" delay= \"1\" /> </page> <page title= \"gif\" > <gifplayer pos= \"10,10\" skin= \"gif_horse\" name= \"giftest\" cursor= \"ANI_ARROW\" /> <button width= \"250\" height= \"30\" name= \"btnSelectGif\" > load gif file </button> <gifplayer pos= \"10,150\" skin= \"gif_penguin\" /> <icon pos= \"10,300\" src= \"LOGO:64\" /> </page> <page title= \"layout\" > <include src= \"layout:page_layout\" /> </page> <page title= \"treebox\" > <include src= \"layout:page_treebox\" /> </page> <page title = \"misc.\" > <include src= \"layout:page_misc\" /> </page> <page title= \"treectrl\" > <include src= \"layout:page_treectrl\" /> </page> <page title= \"about\" > <include src= \"layout:page_about\" /> </page> </tabctrl> </root> </SOUI> \u53ef\u4ee5\u770b\u5230\u5728\u8fd9\u4e2a XML \u4e2d\uff0c\u6709\u4e00\u4e2a\u6839\u8282\u70b9\uff1aSOUI\u3002\u5728\u6839\u8282\u70b9\u4e2d\uff0c\u5b9a\u4e49\u4e86\u4e3b\u754c\u9762\u7684\u771f\u7a97\u53e3\u7684 \u5404\u79cd\u5c5e\u6027\uff08\u5c5e\u6027\u7684\u542b\u4e49\u89c1\u540e\u7eed\u7bc7\uff09\u3002 \u5728\u6839\u8282\u70b9\u4e0b\u6709 3 \u4e2a\u8282\u70b9\uff0c\u5206\u522b\u662f skin, style \u53ca root\u3002 skin, \u548c style \u548c\u524d\u4e00\u7bc7\u8bb2\u7684 init.xml \u7684\u529f\u80fd\u4e00\u6837\u3002\u4e0d\u540c\u5728\u4e8e\u5728\u5e03\u5c40\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684 skin \u53ca style \u53ea\u5728\u5f53\u524d\u7a97\u53e3\u7684\u751f\u547d\u5468\u671f\u671f\u95f4\u6709\u6548\uff0c\u7c7b\u4f3c\u4e8e C++\u51fd\u6570\u4e2d\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u7a97\u53e3\u5173\u95ed\u540e\u8fd9 \u4e9b\u5bf9\u8c61\u4f1a\u81ea\u52a8\u6790\u6784\u3002\u6211\u79f0\u4e4b\u4e3a\u5c40\u90e8 skin \u53ca\u5c40\u90e8 style\u3002 \u7a97\u53e3\u4e2d\u63a7\u4ef6\u7684\u5e03\u5c40\u4fe1\u606f\u5b9a\u4e49\u5728 root \u8282\u70b9\u4e2d\u3002 root \u8282\u70b9\u672c\u8eab\u4e5f\u662f\u4e00\u4e2a SWindow \u7a97\u53e3\u5bf9\u8c61\uff0c\u4f46\u662f\u5728\u8fd9\u91cc\u5fc5\u987b\u662f\"root\"\u624d\u80fd\u8bc6\u522b\uff0c\u5728\u8fd9\u4e2a \u8282\u70b9\u4e2d\u53ef\u4ee5\u6709 SWindow \u7684\u5404\u79cd\u5c5e\u6027\uff0c\u4f46\u662f\u548c\u5e03\u5c40\u4f4d\u7f6e\u76f8\u5173\u7684\u5c5e\u6027\u81ea\u52a8\u65e0\u6548\uff0c\u56e0\u4e3a\u8be5\u7a97\u53e3 \u603b\u662f\u5145\u6ee1\u6574\u4e2a\u5bbf\u4e3b\u7a97\u53e3\u3002 \u5728 root \u8282\u70b9\u4e0b\u53ef\u4ee5\u6309\u7167\u4e0d\u540c\u7684\u5e03\u5c40\u5c42\u6b21\u91c7\u7528\u951a\u70b9\u5e03\u5c40\u65b9\u5f0f\u5e03\u5c40\u5404\u79cd\u7cfb\u7edf\u5185\u7f6e\u63a7\u4ef6\u53ca\u7528\u6237\u81ea \u5b9a\u4e49\u63a7\u4ef6\u3002 \u5728 demo \u4e2d\uff0c\u6211\u9996\u5148\u5728\u6700\u4e0a\u9762\u5e03\u5c40\u4e00\u4e2a caption \u63a7\u4ef6\uff0ccaption \u63a7\u4ef6\u91cc\u53c8\u6709\u5404\u79cd\u6807\u9898\uff0c\u6309 \u94ae\u7b49\u5b50\u63a7\u4ef6\u3002 \u7136\u540e\u5728\u4e0b\u9762\u5e03\u5c40\u4e00\u4e2a tabctrl \u4ee5\u53ca\u5b83\u7684\u5b50\u63a7\u4ef6\u3002 \u5728\u8fd9\u4e2a\u5e03\u5c40 XML \u4e2d\u6709\u5927\u91cf\u7684\u63a7\u4ef6\u5c5e\u6027\u5b9a\u4e49\u3002\u4e0d\u540c\u7684\u63a7\u4ef6\u6709\u4e0d\u540c\u7684\u5c5e\u6027\uff0c\u8fd9\u91cc\u4e0d\u8be6\u7ec6\u5c55 \u5f00\uff0c\u8fd9\u91cc\u4e3b\u8981\u5173\u6ce8\u4e00\u4e0b page \u8282\u70b9\u4e0b\u7684 include \u8282\u70b9\u3002 include \u53ea\u6709\u4e00\u4e2a\u5c5e\u6027\uff1asrc\uff0csrc \u5b9a\u4e49\u5982\u4f55\u53bb\u5f15\u7528\u5728\u53e6\u4e00\u4e2a XML \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u5e03\u5c40 XML\uff0c\u5982\u201clayout:page_layout\u201d\u4ee3\u8868\u8fd9\u91cc\u8981\u5f15\u7528\u5728 layout \u8d44\u6e90\u7c7b\u578b\u4e2d\u5b9a\u4e49\u7684 name \u4e3a page_layout \u7684 XML \u6587\u4ef6\uff08\u5173\u4e8e\u8d44\u6e90\u7684\u5b9a\u4e49\u53c2\u8003\u7b2c\u56db\u7bc7\uff09\u3002 \u4e0b\u9762\u662f layout:page_layout \u6307\u5411\u7684 XML \u6587\u4ef6\u7684\u5185\u5bb9\uff1a <include> <text pos= \"100,10\" pos2type= \"center\" > center align1 </text> <text pos= \"100,30\" pos2type= \"center\" > center align align </text> <text pos= \"250,50\" pos2type= \"rightTop\" > align right top </text> <text pos= \"250,70\" pos2type= \"rightTop\" > align right top 2 </text> <check pos= \"250,90\" pos2type= \"rightTop\" > check right top </check> <check pos= \"250,110\" pos2type= \"rightTop\" font= \"adding:-5\" > check right top1235 </check> <text pos= \"250,130\" class= \"cls_txt_red\" > text left top </text> <button pos= \"10,150,@150,@30\" > button 1 using @ </button> <button pos= \"10,200\" width= \"150\" height= \"30\" > button 1 using width </button> <button name= \"btn_hidetst\" pos= \"300,150,@100,@30\" display= \"0\" tip= \"click me to hide me and see how the next image will move\" > hide test </button> <img skin= \"skin_page_icons\" iconIndex= \"1\" pos= \"[5,150,-10,-10\" /> </include> \u53ef\u4ee5\u770b\u5230\u5728\u8fd9\u4e2a\u6587\u4ef6\u4e2d\uff0c\u6709\u4e00\u4e2a\u4ee5\"include\"\u7684\u6839\u8282\u70b9\uff0c\u5728 include \u8282\u70b9\u4e0b\u624d\u662f\u5e03\u5c40 XML\u3002 \u8fd9\u91cc\u7684 include \u4ee3\u8868\u8be5\u6587\u4ef6\u53ea\u80fd\u662f\u88ab\u5176\u5b83\u7684\u6709 include \u5143\u7d20\u7684\u5e03\u5c40\u6587\u4ef6\u5f15\u7528\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728 include \u7684 XML \u6587\u4ef6\u4e2d\u4e0d\u80fd\u5b9a\u4e49\u5c40\u90e8 skin \u53ca\u5c40\u90e8 style\u3002 SOUI \u7684\u951a\u70b9\u5e03\u5c40 SOUI \u5e03\u5c40\u5168\u90e8\u91c7\u7528\u76f8\u5bf9\u5750\u6807\uff0c\u7531 pos,offset(pos2type), size, width,height \u8fd9\u51e0\u4e2a\u4e2a\u7a97 \u53e3\u5c5e\u6027\u914d\u5408\u6307\u5b9a\u3002 size, width, height \u5c5e\u6027 size, width, height \u6bd4\u8f83\u7b80\u5355\uff0c\u662f\u7528\u6765\u6307\u5b9a\u7a97\u53e3\u7684\u5927\u5c0f\u7684\uff0c\u53ea\u6709\u5728 pos \u5c5e\u6027\u6307\u5b9a\u7684\u503c\u4e2a\u6570 \u4e0d\u4e3a 4 \u65f6\u751f\u6548\u3002 size \u662f 2014 \u5e74\u5e95\u589e\u52a0\u7684\u5e03\u5c40\u5c5e\u6027\uff0csize=\"width,height\"\u3002 width, height \u53ef\u4ee5\u6709 3 \u79cd\u503c\uff1afull,-1,\u975e\u8d1f\u6574\u6570\u3002 \u4e3a full \u65f6\uff0c\u4ee3\u8868\u9ad8\u5ea6\u6216\u8005\u5bbd\u5ea6\u548c\u7236\u7a97\u53e3\u7684\u5ba2\u6237\u533a\u5927\u5c0f\u76f8\u7b49\u3002 -1 \u4ee3\u8868\u6839\u636e\u7a97\u53e3\u5185\u5bb9\u81ea\u52a8\u8ba1\u7b97\u7a97\u53e3\u5927\u5c0f\u3002 \u975e\u8d1f\u6574\u6570\u76f4\u63a5\u6307\u5b9a\u7a97\u53e3\u5927\u5c0f\u3002 \u5728\u56fe\u7247\u63a7\u4ef6\u4e2d\uff0c\u63a7\u4ef6\u662f\u6307\u5b9a\u7684\u76ae\u80a4\u9ed8\u8ba4\u5927\u5c0f\u3002 \u5728\u6587\u672c\u63a7\u4ef6\u4e2d\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a maxWidth \u5c5e\u6027\uff0c\u63a7\u4ef6\u662f\u6587\u672c\u5185\u5bb9\u7684\u5927\u5c0f\uff0c\u4f46\u5bbd\u5ea6\u4e0d\u8d85\u8fc7 maxWidth\u3002 pos \u5c5e\u6027 pos \u5c5e\u6027\u53ef\u4ee5\u6307\u5b9a 4 \u4e2a\u503c\uff0c\u4e5f\u53ef\u4ee5\u6307\u5b9a 2 \u4e2a\u503c\u3002\u6307\u5b9a 4 \u4e2a\u503c\u65f6\uff0c\u5206\u522b\u4ee3\u8868\u63a7\u4ef6\u7684 left,top,right,bottom,\u6307\u5b9a\u4e24\u4e2a\u503c\u65f6\u4ee3\u8868\u63a7\u4ef6\u7684 x,y\uff0c\u5177\u4f53\u4f4d\u7f6e\u8fd8\u4f9d\u8d56\u4e8e\u53e6\u5916 3 \u4e2a\u53c2\u6570\u3002 \u6307\u5b9a 4 \u4e2a\u503c\u65f6\uff0cpos \u76ee\u524d\u652f\u6301 7 \u79cd\u6807\u5fd7\uff1a|,%,[,],{,},@ \u201c|\u201d\u4ee3\u8868\u53c2\u8003\u7236\u7a97\u53e3\u7684\u4e2d\u5fc3\uff1b\u5982|-10 \u4ee3\u8868\u5728\u7236\u7a97\u53e3\u7684\u4e2d\u5fc3\u5411\u5de6/\u4e0a\u504f\u79fb 10 \u8c61\u7d20\u3002 \u201c%\u201d\u4ee3\u8868\u5728\u7236\u7a97\u53e3\u7684\u767e\u5206\u6bd4\uff0c\u53ef\u4ee5\u662f\u5c0f\u6570\uff0c\u8d1f\u6570\u3002\u5982\uff1a%40 \u4ee3\u8868\u5728\u7236\u7a97\u53e3\u7684 40%\u4f4d \u7f6e\uff0c%-40 \u5219\u7b49\u4ef7\u4e8e(1-40%)\u3002 \u201c[\u201d\u76f8\u5bf9\u4e8e\u524d\u4e00\u5144\u5f1f\u7a97\u53e3\u3002\u7528\u4e8e X \u65f6\uff0c\u53c2\u8003\u524d\u4e00\u5144\u5f1f\u7a97\u53e3\u7684 right\uff0c\u7528\u4e8e Y \u65f6\u53c2\u8003\u524d\u4e00\u5144 \u5f1f\u7a97\u53e3\u7684 bottom \u201c]\u201d\u76f8\u5bf9\u4e8e\u540e\u4e00\u5144\u5f1f\u7a97\u53e3\u3002\u7528\u4e8e X \u65f6\uff0c\u53c2\u8003\u540e\u4e00\u5144\u5f1f\u7684 left,\u7528\u4e8e Y \u65f6\u53c2\u8003\u540e\u4e00\u5144\u5f1f\u7684 top \u201c{\u201d\u76f8\u5bf9\u4e8e\u524d\u4e00\u5144\u5f1f\u7a97\u53e3\u3002\u7528\u4e8e X \u65f6\uff0c\u53c2\u8003\u524d\u4e00\u5144\u5f1f\u7a97\u53e3\u7684 left\uff0c\u7528\u4e8e Y \u65f6\u53c2\u8003\u524d\u4e00\u5144\u5f1f \u7a97\u53e3\u7684 top \u201c}\u201d\u76f8\u5bf9\u4e8e\u540e\u4e00\u5144\u5f1f\u7a97\u53e3\u3002\u7528\u4e8e X \u65f6\uff0c\u53c2\u8003\u540e\u4e00\u5144\u5f1f\u7684 right,\u7528\u4e8e Y \u65f6\u53c2\u8003\u540e\u4e00\u5144\u5f1f\u7684 bottom \u201c@\u201d\u6807\u5fd7\u7528\u6765\u6307\u5b9a\u7a97\u53e3\u7684\u5927\u5c0f\uff0c\u53ea\u80fd\u51fa\u73b0\u5728 pos \u5c5e\u6027\u7684\u7b2c 3\uff0c4 \u4e2a\u503c\u4e2d\uff0c\u7528\u6765\u6807\u8bc6\u7a97\u53e3 \u7684\u5bbd\u5ea6\u3002\u5f53\u540e\u9762\u7684\u503c\u4e3a\u8d1f\u65f6\uff0c\u4ee3\u8868\u81ea\u52a8\u8ba1\u7b97\u7a97\u53e3\u7684\u5bbd\u5ea6\u6216\u8005\u9ad8\u5ea6\uff082015.3.3 \u65b0\u589e\u52a0\u89e3 \u91ca\uff09\u3002 \u6ce8\uff1a\u201c|\u201c, \"[\" ,\"]\", \"{\", \"}\" \u4e2d\u6307\u5b9a\u7684\u503c\u90fd\u53ef\u4ee5\u4e3a\u6b63\u6216\u8005\u8d1f\uff0c\u6b63\u65f6\u5411\u53f3\u6216\u8005\u4e0b\u504f\u79fb\uff0c\u8d1f\u5219\u5411 \u5de6\u6216\u8005\u4e0a\u504f\u79fb\u3002 \u5f53\u6ca1\u6709\u4e0a\u8ff0\u6807\u5fd7\u65f6\uff0c\u8d1f\u53f7\u4ee3\u8868\u53c2\u8003\u7236\u7a97\u53e3\u7684\u53f3\u8fb9\u6216\u8005\u4e0b\u8fb9\u7f29\u8fdb\u7edd\u5bf9\u503c\u4f4d\u7f6e\u3002\u5982\uff1a pos=\"0,0,-0,-0\"\u4ee3\u8868\u5360\u6ee1\u7236\u7a97\u53e3\u3002\u800c pos=\"10,10,-10,-10\"\u5219\u4ee3\u8868\u5728\u7236\u7a97\u53e3\u7684\u57fa\u7840\u4e0a\u5411\u5185 \u5168\u90e8\u7f29\u8fdb 10 \u70b9\u3002 @:\u6307\u5b9a\u7a97\u53e3\u7684 size\u3002\u53ea\u80fd\u7528\u4e8e x2,y2\uff0c\u7528\u4e8e x2 \u65f6\uff0c\u6307\u5b9a\u7a97\u53e3\u7684 width\uff0c\u7528\u4e8e y2 \u65f6\u6307\u5b9a\u7a97 \u53e3\u7684 height\u3002\u6ce8\uff1a\u53ea\u80fd\u4e3a\u6b63\u503c\uff0c\u8d1f\u53f7\u4f1a\u81ea\u52a8\u5ffd\u7565\u3002 \u5176\u4e2d\u201c{\u201d\u548c\u201c}\u201d\u662f SOUI \u5728 DUIENGINE \u7684\u57fa\u7840\u4e0a\u65b0\u589e\u52a0\u7684\u5e03\u5c40\u6807\u5fd7\uff08SOUI \u662f\u5728 DUIENGINE \u7684\u57fa\u7840\u4e0a\u5168\u9762\u91cd\u6784\u800c\u6765\uff09\u3002 \u6ce8\u610f!!!\u7531\u4e8e\u7cfb\u7edf\u8fd0\u884c\u5411\u524d\u53ca\u5411\u540e\u5f15\u7528\uff0c\u7406\u8bba\u4e0a\u6709\u53ef\u80fd\u51fa\u6765\u5faa\u73af\u5f15\u7528\uff0c\u5bfc\u81f4\u754c\u9762\u5e03\u5c40\u5931\u8d25\uff0c \u56e0\u6b64\u5728\u4f7f\u7528\"[\"\uff0c\"{\"\uff0c\u201c}\u201d \u548c\"]\"\u8fd9\u51e0\u4e2a\u6807\u5fd7\u65f6\u9700\u8981\u7279\u522b\u6ce8\u610f\u3002 \u5f53 pos \u53ea\u6307\u5b9a\u4e86 x1,y1 \u65f6\uff0c\u901a\u5e38\u9700\u8981\u548c offset(\u6216\u8005 pos2type),size(\u6216\u8005 width,height)\u914d \u5408\u4f7f\u7528\u3002 offset \u53ca pos2type \u5c5e\u6027 offset \u5c5e\u6027\u5305\u542b\u4e24\u4e2a\u503c\uff0c\u7528\u6765\u4ee3\u8868\u7a97\u53e3\u5728\u901a\u8fc7\u5176\u5b83\u5e03\u5c40\u5c5e\u6027\u5b8c\u6210\u540e\u7684\u504f\u79fb\u91cf\uff1a\u5982 offset=\"-1,-1\"\uff0c\u8be5 offset \u8868\u660e\u7a97\u53e3\u5411\u5de6\u65b9\u53ca\u4e0a\u65b9\u5404\u5e73\u8861\u4e00\u4e2a\u7a97\u53e3\u5927\u5c0f\u7684\u5355\u4f4d\u3002 offset \u53ca pos2type \u5c5e\u6027\u5177\u4f53\u8bf7\u53c2\u8003\u300a\u7b2c\u5341\u516d\u7bc7\uff1aSWindow \u7684\u5e03\u5c40\u5c5e\u6027 pos2type \u53ca offset\u300b \u5728 SOUI \u7684\u5e03\u5c40\u7cfb\u7edf\u4e2d\uff0c\u4f7f\u7528\u4e00\u4e2a pos \u5c5e\u6027\u57fa\u672c\u53ef\u4ee5\u5b8c\u6574 90\uff05\u4ee5\u4e0a\u7684\u5e03\u5c40\u529f\u80fd\uff0c\u5efa\u8bae\u7528 \u6237\u5728 demo \u4e2d\u4fee\u6539\u5404\u79cd\u5e03\u5c40\u5c5e\u6027\u6765\u89c2\u5bdf\u63a7\u4ef6\u4f4d\u7f6e\u7684\u53d8\u5316\u4ee5\u52a0\u6df1\u5bf9 SOUI \u5e03\u5c40\u7cfb\u7edf\u7684\u7406\u89e3\u3002 4.1.3 \u5e03\u5c40\u5c5e\u6027 pos2type \u53ca offset \u5f53\u7a97\u53e3\u5927\u5c0f\u9700\u8981\u6839\u636e\u5185\u5bb9\u6765\u786e\u5b9a\u65f6\uff0c\u4f7f\u7528 XML \u5e03\u5c40\u53ef\u80fd\u9700\u8981\u505a\u4e00\u4e9b\u7279\u6b8a\u7684\u5904\u7406\u3002 \u4f8b\u5982\uff1a\u4e0d\u7ba1\u7a97\u53e3\u591a\u5927\uff0c\u6211\u9700\u8981\u5c06\u8be5\u7a97\u53e3\u76f8\u5bf9\u4e8e\u7236\u7a97\u53e3\u5c45\u4e2d\u5728 XML \u4e2d\u5e94\u8be5\u600e\u4e48\u5904\u7406\uff1f \u5982\u679c\u7a97\u53e3\u5927\u5c0f\u662f\u56fa\u5b9a\u7684\uff08\u5982, 100 *100)\uff0c\u8fd9\u6837 pos \u5c5e\u6027\u53ef\u4ee5\u5b9a\u4e49\u4e3a\"|-50,|-50,|-50,|-50\"\u5373 \u53ef\u3002 \u5f53\u7a97\u53e3\u5927\u5c0f\u4e0d\u786e\u5b9a\u65f6\uff0cSOUI \u4e2d\u63d0\u4f9b\u4e86 pos2type \u53ca offset \u6765\u534f\u540c\u5904\u7406\u3002 \u5176\u4e2d pos2type \u662f offset \u7684\u5b50\u96c6\u3002 \u4e0b\u9762\u5148\u91cd\u70b9\u4ecb\u7ecd offset \u5c5e\u6027 offset \u5c5e\u6027\u662f SOUI \u5728\u901a\u8fc7 pos \u5c5e\u6027\u5b8c\u6210\u5750\u6807\u5b9a\u4f4d\u540e\u518d\u5c06\u5750\u6807\u8fdb\u884c\u504f\u79fb\u7684\u5c5e\u6027\u3002\u548c pos \u4e2d \u4e00\u822c\u4f7f\u7528\u8c61\u7d20\u4e3a\u5355\u4f4d\u4e0d\u540c\uff0coffset \u662f\u4ee5\u63a7\u4ef6\u6700\u540e\u7684\u5927\u5c0f\u4e3a\u5355\u4f4d\u8fdb\u884c\u5e73\u79fb\u3002 \u6211\u4eec\u53ef\u4ee5\u5728 XML \u4e2d\u6216\u8005\u4ee3\u7801\u4e2d\u4f7f\u7528 offset = \"-0.5,-0.5\"\u8fd9\u6837\u7684\u5f62\u5f0f\u6765\u63cf\u8ff0\u7a97\u53e3\u7684\u5750\u6807\u5e73 \u79fb\u5c5e\u6027\u3002 \u5c5e\u6027\u4e2d\u5305\u542b\u4e24\u4e2a\u503c\uff0c\u5206\u522b\u5bf9\u5e94 X\uff0cY \u65b9\u5411\u7684\u5e73\u79fb\u76f8\u5bf9\u4e8e\u7a97\u53e3\u5927\u5c0f\u7684\u500d\u6570\uff0c\u4e00\u822c\u4e3a[-1,0]\u7684\u5c0f \u6570(float)\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u8d85\u8fc7\u8fd9\u4e2a\u8303\u56f4\u3002 \u6211\u4eec\u5148\u770b\u4e00\u4e0b\u4ee3\u7801\u4e2d\u5982\u4f55\u5b9e\u73b0\uff1a class SOUI_EXP SwndLayout { public : //... float fOffsetX , fOffsetY ; /**< \u7a97\u53e3\u5750\u6807\u504f\u79fb\u91cf, x += fOffsetX * //... }; ``` ```cpp int SwndLayout::CalcPosition(LPRECT lpRcContainer,CRect &rcWindow ) { int nRet=0; //... if(nRet==0) {//\u6ca1\u6709\u5750\u6807\u7b49\u5f85\u8ba1\u7b97\u4e86 rcWindow.NormalizeRect(); //\u5904\u7406\u7a97\u53e3\u7684\u504f\u79fb(offset)\u5c5e\u6027 CSize sz = rcWindow.Size(); CPoint ptOffset; ptOffset.x = (LONG)(sz.cx * fOffsetX); ptOffset.y = (LONG)(sz.cy * fOffsetY); rcWindow.OffsetRect(ptOffset); } return nRet; } SwndLayout::CalcPosition \u662f SOUI \u7528\u6765\u901a\u8fc7 pos \u53ca offset \u5c5e\u6027\u8ba1\u7b97\u7a97\u53e3\u5750\u6807\u7684\u5173\u952e\u51fd \u6570\uff0c\u4e3a\u4e86\u7a81\u51fa\u91cd\u70b9\uff0c\u5177\u4f53\u7684\u5750\u6807\u8ba1\u7b97\u7701\u7565\u4e86\uff0c\u53ea\u5217\u51fa\u5e73\u79fb\u5904\u7406\u90e8\u5206\u7684\u4ee3\u7801\u3002 \u53ef\u4ee5\u770b\u51fa\uff0c\u5728\u5e73\u79fb\u5904\u7406\u524d\uff0c\u9996\u5148\u83b7\u5f97\u7a97\u53e3\u7684 Size,\u518d\u5c06 Size \u5206\u522b\u4e58\u4ee5 fOffsetX,fOffsetY \u8fd9 \u4e24\u4e2a\u5e73\u79fb\u7cfb\u6570\u83b7\u5f97\u5728 x,y \u4e24\u4e2a\u65b9\u5411\u4e0a\u7684\u5e73\u79fb\u91cf\u3002 \u6700\u540e\u624d\u662f\u5c06\u77e9\u5f62\u505a\u5e73\u79fb\u5904\u7406\u3002 \u4e0b\u9762\u6211\u4eec\u518d\u6765\u770b\u770b pos2type \u5c5e\u6027\uff1a pos2type \u53ef\u4ee5\u5b9a\u4e49 9 \u4e2a\u53c2\u8003\u70b9\uff1acenter, lefttop, leftmid, leftbottom,midtop,midbottom,righttop,rightmid,rightbottom\u3002 \u4e0b\u8868\u663e\u793a\u5bf9\u5e94\u539f pos2type \u5c5e\u6027\u7684 offset \u5c5e\u6027\uff1a pos2type offset center -0.5,-0.5 lefttop 0,0 leftmid 0,-0.5 leftbottom 0,-1 midtop -0.5,0 midbottom -0.5,-1 righttop -1,0 rightmid -1,-0.5 rightbottom -1,-1 \u4ece\u4e0a\u8868\u53ef\u4ee5\u770b\u51fa\uff0c\u539f\u6765\u7684 pos2type \u5c5e\u6027\u53ea\u80fd\u662f 0.5 \u7684\u500d\u6570\uff0c\u65b0\u7684 offset \u5c5e\u6027\u6ca1\u6709\u8be5\u9650 \u5236\u3002 \u4f7f\u7528 pos2type \u53ef\u80fd\u66f4\u4e3a\u76f4\u89c2\uff0c\u4f46\u662f offset \u5c5e\u6027\u5219\u66f4\u7075\u6d3b\u3002\u5982\u679c\u4e24\u4e2a\u5c5e\u6027\u540c\u65f6\u4f7f\u7528\uff0c\u53ea\u6709 \u6700\u540e\u4e00\u4e2a\u5c5e\u6027\u6709\u6548\u3002 \u6ce8\u610f\uff1aoffset \u5c5e\u6027\u662f 2014.11.20 \u624d\u65b0\u589e\u52a0\u7684\u5c5e\u6027\uff0cpos2type \u5c5e\u6027\u7684\u547d\u540d\u662f\u4e3a\u4e86\u517c\u5bb9 2014.11.20 \u524d\u7684\u7248\u672c\u3002 SOUI \u5e03\u5c40\u4e4b\u76f8\u5bf9\u4e8e\u7279\u5b9a\u5144\u5f1f\u7a97\u53e3 SOUI \u4e2d\u901a\u8fc7 pos \u7684\u6807\u5fd7\u5982\uff1a[, {, }, ]\uff0c\u8fd9 4 \u4e2a\u6807\u5fd7\u53ef\u4ee5\u76f8\u5bf9\u4e8e\u524d\u4e00\u4e2a\u53ca\u540e\u4e00\u4e2a\u5144\u5f1f\u7a97\u53e3\uff0c \u4f46\u662f\u6709\u65f6\u5019\u5e0c\u671b\u76f8\u5bf9\u4e8e\u4e0d\u662f\u524d\u540e\u7a97\u53e3\u7684\u5144\u5f1f\u7a97\u53e3\uff0c\u6bd4\u5982\u4e00\u4e2a\u901a\u8fc7\u4e00\u4e2a\u4e2d\u5fc3\u7a97\u53e3\u540c\u65f6\u5b9a\u4e49\u5b83 \u7684\u4e0a\u4e0b\u5de6\u53f3 4 \u4e2a\u7a97\u53e3\uff0c\u8fd9\u4e2a\u65f6\u5019\u5e94\u8be5\u5982\u4f55\u5904\u7406\uff1f \u5176\u5b9e SOUI \u662f\u652f\u6301\u76f8\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u5144\u5f1f\u7a97\u53e3\u7684\uff0c\u4f46\u662f\u5b9a\u4e49\u65b9\u6cd5\u6709\u70b9\u590d\u6742\uff0c\u6240\u4ee5\u5728\u4e4b\u524d\u7684\u535a \u5ba2\u6587\u7ae0\u4e2d\u90fd\u6ca1\u6709\u4ecb\u7ecd\u3002 \u5b9a\u4e49\u7684\u65b9\u6cd5\u662f\u8fd9\u6837\u7684\uff1a \u9996\u5148\u88ab\u53c2\u8003\u7a97\u53e3\uff08\u5047\u5b9a\u4e3a\u7a97\u53e3 A\uff09\u5fc5\u987b\u8981\u6307\u5b9a\u7a97\u53e3\u7684 ID \u5c5e\u6027\uff0c\u6709\u4e86 ID\uff08\u5047\u5b9a id=100)\uff0c \u5176\u5b83\u7a97\u53e3\u624d\u80fd\u5f15\u7528\u5b83\uff08\u8fd9\u91cc\u6307\u5b9a name \u5c5e\u6027\u662f\u4e0d\u884c\u7684\uff0c\u7cfb\u7edf\u53ea\u4f1a\u901a\u8fc7 ID \u53bb\u67e5\u8be2\u8fd9\u4e2a\u5144\u5f1f \u7a97\u53e3\uff09\u3002 \u7136\u540e\u4e00\u4e2a\u7a97\u53e3\uff08\u5047\u5b9a\u4e3a\u7a97\u53e3 B\uff09\u8981\u76f8\u5bf9\u4e8e\u7a97\u53e3 A \u5e03\u5c40\uff0c\u53ea\u9700\u8981\u5728 pos \u4e2d\u6307\u5b9a\u4e3a\u5982\uff1a pos=\"sib.left@100:-20,sib.bottom@100:30,@100,@100\"\uff0c\u5750\u6807\u5b9a\u4e49\u4e2d\u7684 sib.left,sib.bottom \u7528\u6765\u6307\u5b9a\u8fd9\u4e24\u4e2a\u5750\u6807\u662f\u76f8\u5bf9\u4e8e\u88ab\u5f15\u7528\u7a97\u53e3\u7684 left,bottom \u7684\u503c\uff0c\u5750\u6807 \u4e2d\u7684 100:20,100:30 \u521a\u4ee3\u8868\u76f8\u5bf9\u4e8e ID \u4e3a 100 \u7684\u5144\u5f1f\u7a97\u53e3\u7684 left \u5411\u5de6\u504f\u79fb 20 \u50cf\u7d20\u53ca bottom \u5411\u4e0b\u504f\u79fb 30 \u50cf\u7d20\u3002\u8fd9\u91cc\u7684\u8d1f\u6570\u662f\u4ee3\u8868\u504f\u79fb\u65b9\u5411\uff0c\u548c\u6ca1\u6709 sib.xxx \u65f6\u7684\u8d1f\u503c\u610f\u4e49\u4e0d \u540c\u3002 \u4e0b\u9762\u770b\u4e0b demo \u4e2d\u7684\u793a\u4f8b XML(demo/uires/xml/page_layout.xml)\uff1a xml <window skin=\"skin_page_icons\" pos=\"[5,150,-10,-10\" id=\"1236\"> <text pos=\"|0,|0\" offset=\"-0.5,-0.5\" font=\"adding:20\" colorText=\"#ff000066\">alpha test</text> <text pos=\"5,5\" id=\"100\" visible=\"0\">ref text</text> <button pos=\"sib.left@100:10,sib.bottom@100:10,@100,@25\" name=\"btn_hidetst\" tip=\"click me to hide me and see how the next image will move\">ref id:100</button> </window> PS\uff1a\u8fd9\u4e2a\u5b9a\u4e49\u65b9\u6cd5\u6709\u70b9\u5c71\u5be8\uff0c\u5c06\u5c31\u7740\u7528\u5427\uff0c\u5173\u952e\u662f\u80fd\u89e3\u51b3\u95ee\u9898 :) 4.1.4 \u5728 SOUI \u4e2d\u4f7f\u7528\u7ebf\u6027\u5e03\u5c40 SOUI 2.5.1.1 \u5f00\u59cb\u652f\u6301\u7ebf\u6027\u5e03\u5c40(LinearLayout). \u8981\u5728 SOUI \u5e03\u5c40\u4e2d\u4f7f\u7528\u7ebf\u6027\u5e03\u5c40, \u9700\u8981\u5728\u5e03\u5c40\u5bb9\u5668\u7a97\u53e3\u91cc\u6307\u5b9a\u5e03\u5c40\u7c7b\u578b\u4e3a vbox | hbox, (vbox \u4e3a\u5782\u76f4\u7ebf\u6027\u5e03\u5c40, hbox \u4e3a\u6c34\u5e73\u7ebf\u6027\u5e03\u5c40). \u5728\u6307\u5b9a\u5e03\u5c40\u7c7b\u578b\u540e\u8fd8\u53ef\u4ee5\u4e3a\u5bb9\u5668\u7a97\u53e3\u6307\u5b9a gravity \u5c5e\u6027, \u7528\u6765\u6307\u5b9a\u5b50\u7a97\u53e3\u7684\u9ed8\u8ba4\u6392\u5217\u6a21\u5f0f. vbox \u7684 gravity \u6709:left(\u9ed8\u8ba4), center, right, hbox \u6709: top(\u9ed8\u8ba4), center, bottom. \u5728\u7ebf\u6027\u5e03\u5c40\u4e2d\u7684\u5b50\u7a97\u53e3 pos \u5c5e\u6027\u6ca1\u6709\u610f\u4e49, \u4e00\u822c\u76f4\u63a5\u6307\u5b9a size=\"width,height\", width/height \u503c: -1 \u4ee3\u8868 wrap_content, -2 \u4ee3\u8868 match_parent \u53ef\u4ee5\u4f7f\u7528 layout_gravity \u53ef\u4ee5\u66f4\u6539\u5f53\u524d\u7a97\u53e3\u7684\u6392\u5217\u6a21\u5f0f. \u4f7f\u7528 extend=\"left,top,right,bottom\", extend_left, extend_top, extend_right, extend_bottom \u6765\u6307\u5b9a\u95f4\u8ddd. (\u76f8\u5f53\u4e8e android \u7684 margin) \u5b50\u7a97\u53e3\u652f\u6301\u4f7f\u7528 weight \u5c5e\u6027. \u770b\u4e0b\u9762 demo \u4e2d\u7684\u4f8b\u5b50: ```xml vbox + gravity + wrapContent vbox + gravity + weight button test hbox demo button1 button2 button3 button4 ```","title":"4.1 xml \u8d44\u6e90\u6587\u4ef6\u5b9a\u4e49"},{"location":"Development/10/","text":"4.10 \u81ea\u5b9a\u4e49\u63a7\u4ef6 \u00b6 4.10.1 \u5f00\u53d1\u81ea\u5b9a\u4e49\u63a7\u4ef6 \u00b6 \u5728 SOUI \u4e2d\u5df2\u7ecf\u63d0\u4f9b\u4e86\u5927\u90e8\u5206\u5e38\u7528\u7684\u63a7\u4ef6\uff0c\u4f46\u662f\u5185\u7f6e\u63a7\u4ef6\u4e0d\u53ef\u80fd\u6ee1\u8db3\u7528\u6237\u7684\u6240\u6709\u8981\u6c42\uff0c\u56e0 \u6b64\u4e00\u4e2a\u771f\u5b9e\u7684\u5e94\u7528\u5c11\u4e0d\u5f97\u8fd8\u8981\u505a\u4e00\u4e9b\u81ea\u5b9a\u4e49\u63a7\u4ef6\u3002 \u5b66\u4e60\u4e00\u4e2a\u65b0\u4e1c\u897f\uff0c\u6700\u7b80\u5355\u7684\u529e\u6cd5\u5c31\u662f\u4f9d\u846b\u82a6\u753b\u74e2\u3002\u4e8b\u5b9e\u4e0a\u5728 SOUI \u7cfb\u7edf\u4e2d\u5185\u7f6e\u63a7\u4ef6\u548c\u81ea\u5b9a \u4e49\u63a7\u4ef6\u7684\u5f00\u53d1\u6d41\u7a0b\u662f\u5b8c\u5168\u4e00\u6837\u7684\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u6253\u5f00 SOUI \u7684\u6e90\u4ee3\u7801\uff0c\u968f\u4fbf\u627e\u4e00\u4e2a\u63a7\u4ef6\u770b\u4e00 \u4e0b\u5c31\u5927\u4f53\u5dee\u4e0d\u591a\u4e86\u3002 \u4e0b\u9762\u6211\u4ee5 controls.extend \u76ee\u5f55\u4e0b\u7684\u7684 SRadioBox2 \u63a7\u4ef6\u4e3a\u4f8b\u5bf9\u63a7\u4ef6\u5f00\u53d1\u8fc7\u7a0b\u9700\u8981\u6ce8\u610f\u7684 \u5730\u65b9\u505a\u4e00\u70b9\u8bf4\u660e\u3002 \u8981\u5f00\u53d1\u4e00\u4e2a\u63a7\u4ef6\uff0c\u9996\u5148\u8981\u786e\u5b9a\u7684\u662f\u5e94\u8be5\u4ece\u54ea\u4e2a\u63a7\u4ef6\u6765\u7ee7\u627f\u3002\u9009\u62e9\u4e00\u4e2a\u5408\u9002\u7684\u57fa\u7c7b\u662f\u6b63\u786e\u5f00 \u53d1\u81ea\u5b9a\u4e49\u63a7\u4ef6\u7684\u524d\u63d0\u3002 \u4e4b\u6240\u4ee5\u8981\u5f00\u53d1\u4e00\u4e2a SRadioBox2 \u63a7\u4ef6\uff0c\u6211\u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898\u5f88\u7b80\u5355\uff1aSRadioBox \u63a7\u4ef6\u603b\u662f\u5728 \u5de6\u8fb9\u663e\u793a\u4e00\u4e2a\u5706\u5708\uff0c\u8fd9\u4e2a\u5706\u5708\u6709\u65f6\u5019\u4e0d\u662f\u6211\u60f3\u8981\u7684\u3002 \u56e0\u6b64\u6211\u9700\u8981\u505a\u7684\u5c31\u662f\u7ee7\u627f SRadioBox \u63a7\u4ef6\u7684\u884c\u4e3a\uff0c\u91cd\u5199 WM_PAINT \u7684\u5904\u7406\u3002 \u56e0\u6b64\u5c31\u6709\u4e86\u4e0b\u9762\u7684\u4ee3\u7801\uff1a class SRadioBox2 : public SRadioBox { public : SRadioBox2 ( void ); ~ SRadioBox2 ( void ); } \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6240\u6709 SOUI \u63a7\u4ef6\u90fd\u662f\u5728 namespace SOUI \u4e2d\uff0c\u56e0\u6b64\u81ea\u5b9a\u4e49\u63a7\u4ef6\u4e5f\u6700\u597d\u662f \u653e\u5728 SOUI \u8fd9\u4e2a namespace \u91cc\u3002 \u6709\u4e86\u4e0a\u9762\u7684\u9aa8\u67b6\uff0c\u4e0b\u9762\u6765\u9010\u6b65\u6dfb\u52a0\u5185\u5bb9\u3002 \u9996\u5148\u6211\u4eec\u9700\u8981\u7ed9\u81ea\u5b9a\u4e49\u63a7\u4ef6\u5b9a\u4e49\u4e00\u4e2a\u5728 XML \u4e2d\u53ef\u4ee5\u8bc6\u522b\u7684\u6807\u7b7e\u3002 \u53ea\u9700\u8981\u5728\u7c7b\u7684\u6700\u5f00\u59cb\u589e\u52a0\u4e00\u884c\uff1a class SRadioBox2 : public SRadioBox { SOUI_CLASS_NAME ( SRadioBox2 , L \"radio2\" ) public : SRadioBox2 ( void ); ~ SRadioBox2 ( void ); } ``` SOUI_CLASS_NAME \u544a\u8bc9 XML \u89e3\u6790\u5668\uff0c\u78b0\u5230 radio2 \u65f6\u81ea\u52a8\u521b\u5efa SRadioBox2 \u5bf9\u8c61\u3002 \u5b9e\u9645\u4e0a\u8fd9\u4e00\u884c\u66f4\u91cd\u8981\u7684\u4f5c\u7528\u662f\u7528\u6765\u505a\u5bf9\u8c61\u7c7b\u578b\u8fd0\u884c\u65f6\u8bc6\u522b\uff08 RTTI \uff09 , \u6709\u4e86\u8fd9\u4e2a\u673a\u5236\uff0c\u5728\u7f16\u8bd1 \u5668\u5173\u95ed C ++ \u7684 RTTI \u65f6\u4ecd\u7136\u53ef\u4ee5\u5b89\u5168\u7684\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\u3002 \u7136\u540e\u6211\u4eec\u9700\u8981\u5904\u7406\u63a7\u4ef6\u7684 WM_PAINT \u6d88\u606f\u3002 \u4e3a\u4e86\u5904\u7406\u8fd9\u4e2a\u6d88\u606f\uff0c\u6211\u4eec\u9700\u8981\u52a0\u5165\u6d88\u606f\u6620\u5c04\u8868\u53ca\u6d88\u606f\u5904\u7406\u51fd\u6570\uff1a ``` cpp class SRadioBox2 : public SRadioBox { SOUI_CLASS_NAME ( SRadioBox2 , L \"radio2\" ) public : SRadioBox2 ( void ); ~ SRadioBox2 ( void ); protected : void OnPaint ( IRenderTarget * pRT ); SOUI_MSG_MAP_BEGIN () MSG_WM_PAINT_EX ( OnPaint ) SOUI_MSG_MAP_END () }; SOUI \u63a7\u4ef6\u7684\u6d88\u606f\u5904\u7406\u673a\u5236\u662f\u548c WTL \u4e2d\u6284\u8fc7\u6765\u7684\uff0c\u548c MFC \u4e5f\u5f88\u76f8\u4f3c\u3002\u53ea\u662f\u5bf9\u4e8e\u90e8\u5206\u6d88 \u606f\uff0c\u7531\u4e8e\u5bf9\u4e8e\u6d88\u606f\u7684\u53c2\u6570\u7684\u89e3\u91ca\u4e0d\u4e00\u6837\uff0c\u6d88\u606f\u6620\u5c04\u7684\u5b8f\u4f1a\u6709\u4e00\u70b9\u53d8\u5316\u3002 \u5982\u8fd9\u91cc\u7684 WM_PAINT \u6d88\u606f\uff0c\u5728 SOUI \u91cc wparam \u4f20\u9012\u7684\u662f\u4e00\u4e2a IRenderTarget \u6307\u9488\uff0c\u800c \u4f20\u7edf\u7684 Win32 \u4f20\u9012\u7684\u662f\u4e00\u4e2a HDC\u3002\u56e0\u6b64\u6211\u4eec\u9700\u8981\u4f7f\u7528 MSG_WM_PAINT_EX \u4ee3\u66ff WTL \u4e2d\u4f7f\u7528\u7684 MSG_WM_PAINT\u3002 \u5927\u5bb6\u53ef\u80fd\u4f1a\u95ee\u6709\u54ea\u4e9b\u6d88\u606f\u6620\u5c04\u5b8f SOUI \u548c WLT \u4e0d\u4e00\u6837\uff1f \u5b9e\u9645\u4e0a\u5bf9\u4e8e\u4e00\u4e2a\u6709\u7ecf\u9a8c\u7684\u7a0b\u5e8f\u5458\uff0c\u4ed6\u5e94\u8be5\u53ef\u4ee5\u627e\u5230 MSG_WM_PAINT_EX \u7684\u5b8f\u5b9a\u4e49\uff0c\u5e76\u4e14 \u5728\u5b9a\u4e49\u9644\u8fd1\u5c31\u53ef\u4ee5\u627e\u5230\u6240\u6709\u7684 SOUI \u548c WLT \u4e0d\u540c\u7684\u6620\u5c04\u5b8f\u3002 \u4e0b\u9762\u662f\u5230\u76ee\u524d\u4e3a\u6b62 SOUI \u4e2d\u6240\u6709\u548c WTL \u4e0d\u540c\u7684\u5b8f\uff1a // BOOL OnEraseBkgnd(IRenderTarget * pRT) #define MSG_WM_ERASEBKGND_EX(func) \\ if (uMsg == WM_ERASEBKGND) \\ { \\ SetMsgHandled(TRUE); \\ lResult = (LRESULT)func((IRenderTarget *)wParam); \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnPaint(IRenderTarget * pRT) #define MSG_WM_PAINT_EX(func) \\ if (uMsg == WM_PAINT) \\ { \\ SetMsgHandled(TRUE); \\ func((IRenderTarget *)wParam); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnNcPaint(IRenderTarget * pRT) #define MSG_WM_NCPAINT_EX(func) \\ if (uMsg == WM_NCPAINT) \\ { \\ SetMsgHandled(TRUE); \\ func((IRenderTarget *)wParam); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnSetFont(IFont *pFont, BOOL bRedraw) #define MSG_WM_SETFONT_EX(func) \\ if (uMsg == WM_SETFONT) \\ { \\ SetMsgHandled(TRUE); \\ func((IFont*)wParam, (BOOL)LOWORD(lParam)); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnSetFocus() #define MSG_WM_SETFOCUS_EX(func) \\ if (uMsg == WM_SETFOCUS) \\ { \\ SetMsgHandled(TRUE); \\ func(); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnKillFocus() #define MSG_WM_KILLFOCUS_EX(func) \\ if (uMsg == WM_KILLFOCUS) \\ { \\ SetMsgHandled(TRUE); \\ func(); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnNcMouseHover(int nFlag,CPoint pt) #define MSG_WM_NCMOUSEHOVER(func) \\ if(uMsg==WM_NCMOUSEHOVER)\\ {\\ SetMsgHandled(TRUE); \\ func(wParam,CPoint(GET_X_LPARAM(lParam),GET_Y_LPARAM(lParam))); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnNcMouseLeave() #define MSG_WM_NCMOUSELEAVE(func) \\ if(uMsg==WM_NCMOUSELEAVE)\\ {\\ SetMsgHandled(TRUE); \\ func(); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnTimer(char cTimerID) #define MSG_WM_TIMER_EX(func) \\ if (uMsg == WM_TIMER) \\ { \\ SetMsgHandled(TRUE); \\ func((char)wParam); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } #define WM_TIMER2 (WM_USER+5432) //\u5b9a\u4e49\u4e00\u4e2a\u4e0e HWND \u5b9a\u65f6\u5668\u517c\u5bb9\u7684 SOUI \u5b9a\u65f6\u5668 #define MSG_WM_TIMER2(func) \\ if (uMsg == WM_TIMER2) \\ { \\ SetMsgHandled(TRUE); \\ func(wParam); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } \u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u81ea\u5b9a\u4e49\u63a7\u4ef6\u8fd8\u9700\u8981\u5904\u7406\u4e00\u4e9b\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027\uff0c\u8fd9\u65f6\u6211\u9700\u8981\u8fd8\u9700\u8981\u589e\u52a0\u4e00\u4e2a\u5c5e\u6027 \u6620\u5c04\u8868\uff08\u5982 SGifPlayer \uff09\uff1a ``` cpp SOUI_ATTRS_BEGIN () ATTR_CUSTOM ( L \"skin\" , OnAttrSkin ) //\u4e3a\u63a7\u4ef6\u63d0\u4f9b\u4e00\u4e2a skin \u5c5e\u6027\uff0c\u7528\u6765\u63a5\u6536 SSkinObj \u5bf9\u8c61\u7684 name SOUI_ATTRS_END () ``` \u5b8c\u6210\u4e0a\u9762\u51e0\u6b65\uff0c\u4e00\u4e2a\u81ea\u5b9a\u4e49\u63a7\u4ef6\u57fa\u672c\u4e0a\u5c31\u5b8c\u6210\u4e86\u3002 \u53ef\u80fd\u8fd8\u9700\u8981\u5b9e\u73b0\u51e0\u4e2a\u4fee\u6539\u57fa\u7c7b\u884c\u4e3a\u7684\u865a\u51fd\u6570\u3002 ## 4.10.2 \u7ed8\u56fe\u5bf9\u8c61\uff08ISkinObj\uff09\u7684\u6269\u5c55 \u5c3d\u7ba1 SOUI \u5df2\u7ecf\u5185\u7f6e\u4e86\u5927\u90e8\u5206\u5e38\u7528\u7684\u63a7\u4ef6\uff0c\u5f88\u663e\u7136\u5185\u7f6e\u63a7\u4ef6\u5f88\u96be\u6ee1\u8db3\u5404\u79cd\u5e94\u7528\u7684\u5f62\u5f0f\u5404\u5f02 \u7684\u9700\u6c42\u3002 \u56e0\u6b64\u53ea\u6709\u63d0\u4f9b\u8db3\u591f\u7684\u6269\u5c55\u6027\u624d\u80fd\u6ee1\u8db3\u771f\u5b9e\u5e94\u7528\u573a\u666f\u3002 \u9664\u4e86\u5c06\u7cfb\u7edf\u5c3d\u53ef\u80fd\u7684\u7ec4\u4ef6\u5316\u5916\uff0c SOUI \u5728\u63a7\u4ef6\u81ea\u7ed8 ( SWindow ) \u53ca\u7ed8\u56fe\u5bf9\u8c61 ( ISkinObj ) \u4e24\u4e2a \u65b9\u9762\u63d0\u4f9b\u7528\u6237\u6269\u5c55\u3002 \u25c6 \u7ed8\u56fe\u5bf9\u8c61 ( ISkinObj ) \u7684\u6269\u5c55 \u7cfb\u7edf\u5185\u7f6e\u4e86\u5982 SSkinImgList , SSkinImgFrame , SSkinScrollbar \u7b49\u7ed8\u56fe\u5bf9\u8c61\uff0c\u5728\u7a97\u53e3\u4e2d\u901a \u8fc7\u5f15\u7528\u8fd9\u4e9b\u7ed8\u56fe\u5bf9\u8c61\u53ef\u4ee5\u7ed8\u5236\u51fa\u4e0d\u540c\u7684\u9884\u5b9a\u4e49\u56fe\u5f62\u56fe\u8c61\uff08\u5982\u6309\u94ae\uff0c\u6eda\u52a8\u6761\uff0c\u4e5d\u5bab\u683c\u7b49\uff09\u3002 \u5b9e\u9645\u4e0a\u7528\u6237\u53ef\u4ee5\u5b9e\u73b0\u4efb\u610f\u7684\u7ed8\u56fe\u5bf9\u8c61\u5e76\u628a\u5b83\u4eec\u6ce8\u518c\u5230\u7cfb\u7edf\u91cc\uff0c\u4ee5\u4fbf\u5728 XML \u53ca\u4ee3\u7801\u4e2d\u4f7f \u7528\u3002 \u4e0b\u9762\u5148\u770b\u4e00\u4e0b\u5b9e\u73b0\u4e00\u4e2a ISkinObj \u9700\u8981\u5b9e\u73b0\u54ea\u4e9b\u63a5\u53e3\uff1a ``` cpp /** * @struct ISkinObj * @brief Skin \u5bf9\u8c61 * * Describe */ class SOUI_EXP ISkinObj : public SObject , public TObjRefImpl2 < IObjRef , ISkinObj > { public : ISkinObj () { } virtual ~ ISkinObj () { } /** * Draw * @brief \u5c06 this \u7ed8\u5236\u5230 RenderTarget \u4e0a\u53bb * @param IRenderTarget * pRT -- \u7ed8\u5236\u7528\u7684 RenderTarget * @param LPCRECT rcDraw -- \u7ed8\u5236\u4f4d\u7f6e * @param DWORD dwState -- \u7ed8\u5236\u72b6\u6001 * @param BYTE byAlpha -- \u900f\u660e\u5ea6 * @return void * Describe */ virtual void Draw ( IRenderTarget * pRT , LPCRECT rcDraw , DWORD dwState , BYTE byAlpha = 0xFF ) = 0 ; /** * GetSkinSize * @brief \u83b7\u5f97 Skin \u7684\u9ed8\u8ba4\u5927\u5c0f * @return SIZE -- Skin \u7684\u9ed8\u8ba4\u5927\u5c0f * Describe \u6d3e\u751f\u7c7b\u5e94\u8be5\u6839\u636e skin \u7684\u7279\u70b9\u5b9e\u73b0\u8be5\u63a5\u53e3 */ virtual SIZE GetSkinSize () { SIZE ret = { 0 , 0 }; return ret ; } /** * IgnoreState * @brief \u67e5\u8be2 skin \u662f\u5426\u6709\u72b6\u6001\u4fe1\u606f * @return BOOL -- true \u6709\u72b6\u6001\u4fe1\u606f * Describe */ virtual BOOL IgnoreState () { return TRUE ; } /** * GetStates * @brief \u83b7\u5f97 skin \u5bf9\u8c61\u5305\u542b\u7684\u72b6\u6001\u6570\u91cf * @return int -- \u72b6\u6001\u6570\u91cf * Describe \u9ed8\u8ba4\u4e3a 1 */ virtual int GetStates () { return 1 ; } }; ISkinObj \u662f\u4e00\u4e2a\u6d3e\u751f\u81ea SObject \u53ca TObjRefImpl2 \u7684\u7c7b\uff0c\u63d0\u4f9b\u4e86\u51e0 \u4e2a\u72b6\u6001\u67e5\u8be2\u76f8\u5173\u7684\u63a5\u53e3\uff0c\u4e5f\u63d0\u4f9b\u4e86\u4e00\u4e2a Draw \u63a5\u53e3\u6765\u5728 IRenderTarget \u4e0a\u7ed8\u5236\u8be5\u7ed8\u5236\u5bf9 \u8c61\u3002 \u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e9b\u63a5\u53e3\u4e2d\u53ea\u6709 Draw \u63a5\u53e3\u662f\u7eaf\u865a\u63a5\u53e3\u3002 \u5728\u5b83\u7684\u57fa\u7c7b\u4e2d\uff0cSOjbect \u4f7f\u5f97 ISkinObj \u53ef\u4ee5\u65b9\u4fbf\u7684\u4ece XML \u914d\u7f6e\u6587\u4ef6\u4e2d\u521d\u59cb\u5316\uff0c\u800c TObjRefImpl2 \u5219\u63d0\u4f9b\u5f15\u7528\u8ba1\u6570\u7684\u5b9e\u73b0\u3002 \u5185\u7f6e\u7684 ISkinObj \u4e0d\u652f\u6301\u663e\u793a GIF \u56fe\u7247\uff0c\u4ee5\u663e\u793a GIF \u56fe\u8c61\u4e3a\u4f8b\u6765\u5206\u6790\u5982\u4f55\u6269\u5c55\u7ed8\u56fe\u5bf9\u8c61\u6765 \u652f\u6301 GIF \u56fe\u7247\u663e\u793a\u3002 \u5bf9\u8c61\u5b9a\u4e49\uff08trunk\\controls.extend\\gif\\SSkinGif.h\uff09 namespace SOUI { class SGifFrame { public : CAutoRefPtr < IBitmap > pBmp ; int nDelay ; }; /** * @class SSkinGif * @brief GIF \u56fe\u7247\u52a0\u8f7d\u53ca\u663e\u793a\u5bf9\u8c61 * * Describe */ class SSkinGif : public ISkinObj { SOUI_CLASS_NAME ( SSkinGif , L \"gif\" ) public : SSkinGif () : m_nFrames ( 0 ), m_iFrame ( 0 ), m_pFrames ( NULL ) { } //\u521d\u59cb\u5316 GDI+\u73af\u5883\uff0c\u7531\u4e8e\u8fd9\u91cc\u9700\u8981\u4f7f\u7528 GDI+\u6765\u89e3\u7801 GIF \u6587\u4ef6\u683c\u5f0f static BOOL Gdiplus_Startup (); //\u9000\u51fa GDI+\u73af\u5883 static void Gdiplus_Shutdown (); virtual ~ SSkinGif () { if ( m_pFrames ) delete [] m_pFrames ; } /** * Draw * @brief \u7ed8\u5236\u6307\u5b9a\u5e27\u7684 GIF \u56fe * @param IRenderTarget * pRT -- \u7ed8\u5236\u76ee\u6807 * @param LPCRECT rcDraw -- \u7ed8\u5236\u8303\u56f4 * @param DWORD dwState -- \u7ed8\u5236\u72b6\u6001\uff0c\u8fd9\u91cc\u88ab\u89e3\u91ca\u4e3a\u5e27\u53f7 * @param BYTE byAlpha -- \u900f\u660e\u5ea6 * @return void * Describe */ virtual void Draw ( IRenderTarget * pRT , LPCRECT rcDraw , DWORD dwState , BYTE byAlpha = 0xFF ); /** * GetStates * @brief \u83b7\u5f97 GIF \u5e27\u6570 * @return int -- \u5e27\u6570 * Describe */ virtual int GetStates (){ return m_nFrames ;} /** * GetSkinSize * @brief \u83b7\u5f97\u56fe\u7247\u5927\u5c0f * @return SIZE -- \u56fe\u7247\u5927\u5c0f * Describe */ virtual SIZE GetSkinSize () { SIZE sz = { 0 }; if ( m_nFrames > 0 && m_pFrames ) { sz = m_pFrames [ 0 ]. pBmp -> Size (); } return sz ; } /** * GetFrameDelay * @brief \u83b7\u5f97\u6307\u5b9a\u5e27\u7684\u663e\u793a\u65f6\u95f4 * @param int iFrame -- \u5e27\u53f7,\u4e3a-1 \u65f6\u4ee3\u8868\u83b7\u5f97\u5f53\u524d\u5e27\u7684\u5ef6\u65f6 * @return long -- \u5ef6\u65f6\u65f6\u95f4(*10ms) * Describe */ long GetFrameDelay ( int iFrame = -1 ); /** * ActiveNextFrame * @brief \u6fc0\u6d3b\u4e0b\u4e00\u5e27 * @return void * Describe */ void ActiveNextFrame (); /** * SelectActiveFrame * @brief \u6fc0\u6d3b\u6307\u5b9a\u5e27 * @param int iFrame -- \u5e27\u53f7 * @return void * Describe */ void SelectActiveFrame ( int iFrame ); /** * LoadFromFile * @brief \u4ece\u6587\u4ef6\u52a0\u8f7d GIF * @param LPCTSTR pszFileName -- \u6587\u4ef6\u540d * @return int -- GIF \u5e27\u6570\uff0c0-\u5931\u8d25 * Describe */ int LoadFromFile ( LPCTSTR pszFileName ); /** * LoadFromMemory * @brief \u4ece\u5185\u5b58\u52a0\u8f7d GIF * @param LPVOID pBits -- \u5185\u5b58\u5730\u5740 * @param size_t szData -- \u5185\u5b58\u6570\u636e\u957f\u5ea6 * @return int -- GIF \u5e27\u6570\uff0c0-\u5931\u8d25 * Describe */ int LoadFromMemory ( LPVOID pBits , size_t szData ); SOUI_ATTRS_BEGIN () ATTR_CUSTOM ( L \"src\" , OnAttrSrc ) //XML \u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u56fe\u7247\u8d44\u6e90 \u540d ,( type : name ) SOUI_ATTRS_END () protected : LRESULT OnAttrSrc ( const SStringW & strValue , BOOL bLoading ); int LoadFromGdipImage ( Gdiplus :: Bitmap * pImg ); int m_nFrames ; int m_iFrame ; SGifFrame * m_pFrames ; }; } //end of name space SOUI \u5bf9\u8c61\u6ce8\u518c\uff1a theApp -> RegisterSkinFactory ( TplSkinFactory < SSkinGif > ()); //\u6ce8\u518c SkinGif \u5bf9\u8c61\u7684\u4f7f\u7528\uff08trunk\\demo\\uires\\xml\\dlg_main.xml\uff09\uff1a < skin > <!-- \u5c40\u90e8 skin \u5bf9\u8c61 --> < gif name = \"gif_horse\" src = \"gif:gif_horse\" /> < gif name = \"gif_penguin\" src = \"gif:gif_penguin\" /> </ skin > ``` \u8fd9\u91cc\u7684 gif \u6807\u7b7e\u4e0e SSkinGif \u7c7b\u4e2d\u7684\u5b8f SOUI_CLASS_NAME ( SSkinGif , L \"gif\" ) \u4e2d\u7684\u201c gif \u201d \u662f\u5339\u914d\u7684\u3002 \u5230\u6b64\uff0c\u5728\u5e03\u5c40 XML \u53ca\u7a0b\u5e8f\u4e2d\u90fd\u53ef\u4ee5\u83b7\u5f97\u8fd9\u4e2a SSkinGif \u5bf9\u8c61\u7684\u6307\u9488\u4e86\u3002 ## 4.10.3 \u63a7\u4ef6\u7684\u6269\u5c55 \u63a7\u4ef6\u7684\u6269\u5c55\u548c\u7ed8\u56fe\u5bf9\u8c61\u7684\u6269\u5c55\u5957\u8def\u7c7b\u4f3c\uff0c\u4e5f\u662f\u5148\u4ece\u7cfb\u7edf\u63d0\u4f9b\u7684\u57fa\u7840\u7c7b\u6d3e\u751f\uff0c\u518d\u6ce8\u518c\u5230\u7cfb \u7edf\uff0c\u6700\u540e\u518d XML \u6216\u8005\u4ee3\u7801\u4e2d\u4f7f\u7528\u3002 \u548c\u7ed8\u56fe\u5bf9\u8c61\u4e0d\u540c\u5728\u4e8e\uff0c\u63a7\u4ef6\u662f UI \uff0c\u9700\u8981\u5904\u7406\u5404\u79cd UI \u76f8\u5173\u7684\u6d88\u606f\u4ee5\u53ca\u5411\u7a0b\u5e8f\u53d1\u51fa\u5404\u79cd\u63a7\u4ef6 \u7279\u6709\u7684\u4e8b\u4ef6\u3002 \u540c\u6837\u6211\u4eec\u8fd8\u662f\u4ee5 GIF \u663e\u793a\u7684\u63a7\u4ef6\u4e3a\u4f8b\uff08 trunk \\ controls . extend \\ gif \\ SGifPlayer . h \uff09\uff1a ``` cpp namespace SOUI { /** * @class SGifPlayer * @brief GIF \u56fe\u7247\u663e\u793a\u63a7\u4ef6 * * Describe */ class SGifPlayer : public SWindow { SOUI_CLASS_NAME ( SGifPlayer , L \"gifplayer\" ) //\u5b9a\u4e49 GIF \u63a7\u4ef6\u5728 XM \u52a0\u7684\u6807\u7b7e public : SGifPlayer (); ~ SGifPlayer (); /** * PlayGifFile * @brief \u5728\u63a7\u4ef6\u4e2d\u64ad\u653e\u4e00\u4e2a GIF \u56fe\u7247\u6587\u4ef6 * @param LPCTSTR pszFileName -- \u6587\u4ef6\u540d * @return BOOL -- true:\u6210\u529f * Describe */ BOOL PlayGifFile ( LPCTSTR pszFileName ); protected : //SWindow \u7684\u865a\u51fd\u6570 virtual CSize GetDesiredSize ( LPRECT pRcContainer ); public : //\u5c5e\u6027\u5904\u7406 SOUI_ATTRS_BEGIN () ATTR_CUSTOM ( L \"skin\" , OnAttrGif ) //\u4e3a\u63a7\u4ef6\u63d0\u4f9b\u4e00\u4e2a skin \u5c5e\u6027\uff0c\u7528\u6765\u63a5\u6536 SSkinObj \u5bf9\u8c61\u7684 name SOUI_ATTRS_END () protected : HRESULT OnAttrGif ( const SStringW & strValue , BOOL bLoading ); protected : //\u6d88\u606f\u5904\u7406\uff0cSOUI \u63a7\u4ef6\u7684\u6d88\u606f\u5904\u7406\u548c WTL\uff0cMFC \u5f88\u76f8\u4f3c\uff0c\u91c7\u7528\u76f8\u4f3c\u7684\u6620\u5c04\u8868\uff0c\u76f8\u540c\u6216 \u8005\u76f8\u4f3c\u7684\u6d88\u606f\u6620\u5c04\u5b8f /** * OnPaint * @brief \u7a97\u53e3\u7ed8\u5236\u6d88\u606f\u54cd\u5e94\u51fd\u6570 * @param IRenderTarget * pRT -- \u7ed8\u5236\u76ee\u6807 * @return void * Describe \u6ce8\u610f\u8fd9\u91cc\u7684\u53c2\u6570\u662f IRenderTarget *,\u800c\u4e0d\u662f WTL \u4e2d\u4f7f\u7528\u7684 HDC\uff0c\u540c\u65f6\u6d88\u606f \u6620\u5c04\u5b8f\u4e5f\u53d8\u4e3a MSG_WM_PAINT_EX */ void OnPaint ( IRenderTarget * pRT ); /** * OnTimer * @brief SOUI \u7a97\u53e3\u7684\u5b9a\u65f6\u5668\u5904\u7406\u51fd\u6570 * @param char cTimerID -- \u5b9a\u65f6\u5668 ID\uff0c\u8303\u56f4\u4ece 0-127\u3002 * @return void * Describe SOUI \u63a7\u4ef6\u7684\u5b9a\u65f6\u5668\u662f Host \u7a97\u53e3\u5b9a\u65f6\u5668 ID \u7684\u5206\u89e3\uff0c\u4ee5\u65b9\u4fbf\u6240\u6709\u7684\u63a7\u4ef6\u90fd\u901a\u8fc7 Host \u83b7\u5f97\u5b9a\u65f6\u5668\u7684\u5206\u53d1\u3002 * \u6ce8\u610f\u4f7f\u7528 MSG_WM_TIMER_EX \u6765\u6620\u5c04\u8be5\u6d88\u606f\u3002\u5b9a\u65f6\u5668\u4f7f\u7528 SWindow::SetTimer \u53ca SWindow::KillTimer \u6765\u521b\u5efa\u53ca\u91ca\u653e\u3002 * \u5982\u679c\u8be5\u5b9a\u65f6\u5668 ID \u8303\u56f4\u4e0d\u80fd\u6ee1\u8db3\u8981\u6c42\uff0c\u53ef\u4ee5\u4f7f\u7528 SWindow::SetTimer2 \u6765\u521b \u5efa\u3002 */ void OnTimer ( char cTimerID ); /** * OnShowWindow * @brief \u5904\u7406\u7a97\u53e3\u663e\u793a\u6d88\u606f * @param BOOL bShow -- true:\u663e\u793a * @param UINT nStatus -- \u663e\u793a\u539f\u56e0 * @return void * Describe \u53c2\u8003 MSDN \u7684 WM_SHOWWINDOW \u6d88\u606f */ void OnShowWindow ( BOOL bShow , UINT nStatus ); //SOUI \u63a7\u4ef6\u6d88\u606f\u6620\u5c04\u8868 SOUI_MSG_MAP_BEGIN () MSG_WM_TIMER_EX ( OnTimer ) //\u5b9a\u65f6\u5668\u6d88\u606f MSG_WM_PAINT_EX ( OnPaint ) //\u7a97\u53e3\u7ed8\u5236\u6d88\u606f MSG_WM_SHOWWINDOW ( OnShowWindow ) //\u7a97\u53e3\u663e\u793a\u72b6\u6001\u6d88\u606f SOUI_MSG_MAP_END () private : SSkinGif * m_pgif ; int m_iCurFrame ; }; } \u5b9e\u73b0\u4e86\u8be5\u7c7b\u4ee5\u540e\uff0c\u5728 WinMain \u4e2d\u6ce8\u518c\uff1a theApp -> RegisterWndFactory ( TplSWindowFactory < SGifPlayer > ()); //\u6ce8\u518c GIFPlayer \u6211\u4eec\u53ef\u4ee5\u5728\u5e03\u5c40 XML \u4e2d\u521b\u5efa GIF \u63a7\u4ef6\u63a7\u4ef6\u5e76\u663e\u793a\u4e86 (trunk\\demo\\uires\\xml\\dlg_main.xml\uff09\uff1a <gifplayer pos= \"10,10\" skin= \"gif_horse\" name= \"giftest\" cursor= \"ANI_ARROW\" /> <button width= \"250\" height= \"30\" name= \"btnSelectGif\" > load gif file </button> <gifplayer pos= \"10,150\" skin= \"gif_penguin\" /> \u4e0a\u9762\u7684 gifplayer \u8282\u70b9\u5373\u8868\u793a\u4ece XML \u4e2d\u521b\u5efa\u4e24\u4e2a SGifPlayer \u7c7b\u5bf9\u8c61\u3002 \u800c gifplayer \u5bf9\u8c61\u7684 skin \u5c5e\u6027\u5219\u5f15\u7528\u524d\u9762\u5b9a\u4e49\u7684 SSkinGif \u5bf9\u8c61\u3002 \u5907\u6ce8\uff1a \u5b9e\u9645\u4e0a\u66f4\u591a\u6269\u5c55\u6280\u5de7\u53ef\u4ee5\u53c2\u8003\u7cfb\u7edf\u5185\u7f6e\u7684\u63a7\u4ef6\u7684\u5b9e\u73b0\u3002\u5185\u7f6e\u63a7\u4ef6\u4e0e\u6269\u5c55\u63a7\u4ef6\u552f\u4e00\u7684\u533a\u522b\u5c31 \u5728\u4e8e\u7531\u8c01\u5b9e\u73b0\u5c06\u63a7\u4ef6\u5411\u7cfb\u7edf\u6ce8\u518c\u3002 \u5185\u7f6e\u63a7\u4ef6\u5728 SOUI \u5185\u6838\u521d\u59cb\u5316\u7684\u65f6\u5019\u81ea\u52a8\u6ce8\u518c\uff0c\u800c\u6269\u5c55\u63a7\u4ef6\u5219\u9700\u8981\u624b\u52a8\u589e\u52a0\u4e00\u884c\u6ce8\u518c\u4ee3 \u7801\u3002 \u6548\u679c\u9884\u89c8","title":"4.10 \u81ea\u5b9a\u4e49\u63a7\u4ef6"},{"location":"Development/10/#410","text":"","title":"4.10 \u81ea\u5b9a\u4e49\u63a7\u4ef6"},{"location":"Development/10/#4101","text":"\u5728 SOUI \u4e2d\u5df2\u7ecf\u63d0\u4f9b\u4e86\u5927\u90e8\u5206\u5e38\u7528\u7684\u63a7\u4ef6\uff0c\u4f46\u662f\u5185\u7f6e\u63a7\u4ef6\u4e0d\u53ef\u80fd\u6ee1\u8db3\u7528\u6237\u7684\u6240\u6709\u8981\u6c42\uff0c\u56e0 \u6b64\u4e00\u4e2a\u771f\u5b9e\u7684\u5e94\u7528\u5c11\u4e0d\u5f97\u8fd8\u8981\u505a\u4e00\u4e9b\u81ea\u5b9a\u4e49\u63a7\u4ef6\u3002 \u5b66\u4e60\u4e00\u4e2a\u65b0\u4e1c\u897f\uff0c\u6700\u7b80\u5355\u7684\u529e\u6cd5\u5c31\u662f\u4f9d\u846b\u82a6\u753b\u74e2\u3002\u4e8b\u5b9e\u4e0a\u5728 SOUI \u7cfb\u7edf\u4e2d\u5185\u7f6e\u63a7\u4ef6\u548c\u81ea\u5b9a \u4e49\u63a7\u4ef6\u7684\u5f00\u53d1\u6d41\u7a0b\u662f\u5b8c\u5168\u4e00\u6837\u7684\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u6253\u5f00 SOUI \u7684\u6e90\u4ee3\u7801\uff0c\u968f\u4fbf\u627e\u4e00\u4e2a\u63a7\u4ef6\u770b\u4e00 \u4e0b\u5c31\u5927\u4f53\u5dee\u4e0d\u591a\u4e86\u3002 \u4e0b\u9762\u6211\u4ee5 controls.extend \u76ee\u5f55\u4e0b\u7684\u7684 SRadioBox2 \u63a7\u4ef6\u4e3a\u4f8b\u5bf9\u63a7\u4ef6\u5f00\u53d1\u8fc7\u7a0b\u9700\u8981\u6ce8\u610f\u7684 \u5730\u65b9\u505a\u4e00\u70b9\u8bf4\u660e\u3002 \u8981\u5f00\u53d1\u4e00\u4e2a\u63a7\u4ef6\uff0c\u9996\u5148\u8981\u786e\u5b9a\u7684\u662f\u5e94\u8be5\u4ece\u54ea\u4e2a\u63a7\u4ef6\u6765\u7ee7\u627f\u3002\u9009\u62e9\u4e00\u4e2a\u5408\u9002\u7684\u57fa\u7c7b\u662f\u6b63\u786e\u5f00 \u53d1\u81ea\u5b9a\u4e49\u63a7\u4ef6\u7684\u524d\u63d0\u3002 \u4e4b\u6240\u4ee5\u8981\u5f00\u53d1\u4e00\u4e2a SRadioBox2 \u63a7\u4ef6\uff0c\u6211\u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898\u5f88\u7b80\u5355\uff1aSRadioBox \u63a7\u4ef6\u603b\u662f\u5728 \u5de6\u8fb9\u663e\u793a\u4e00\u4e2a\u5706\u5708\uff0c\u8fd9\u4e2a\u5706\u5708\u6709\u65f6\u5019\u4e0d\u662f\u6211\u60f3\u8981\u7684\u3002 \u56e0\u6b64\u6211\u9700\u8981\u505a\u7684\u5c31\u662f\u7ee7\u627f SRadioBox \u63a7\u4ef6\u7684\u884c\u4e3a\uff0c\u91cd\u5199 WM_PAINT \u7684\u5904\u7406\u3002 \u56e0\u6b64\u5c31\u6709\u4e86\u4e0b\u9762\u7684\u4ee3\u7801\uff1a class SRadioBox2 : public SRadioBox { public : SRadioBox2 ( void ); ~ SRadioBox2 ( void ); } \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6240\u6709 SOUI \u63a7\u4ef6\u90fd\u662f\u5728 namespace SOUI \u4e2d\uff0c\u56e0\u6b64\u81ea\u5b9a\u4e49\u63a7\u4ef6\u4e5f\u6700\u597d\u662f \u653e\u5728 SOUI \u8fd9\u4e2a namespace \u91cc\u3002 \u6709\u4e86\u4e0a\u9762\u7684\u9aa8\u67b6\uff0c\u4e0b\u9762\u6765\u9010\u6b65\u6dfb\u52a0\u5185\u5bb9\u3002 \u9996\u5148\u6211\u4eec\u9700\u8981\u7ed9\u81ea\u5b9a\u4e49\u63a7\u4ef6\u5b9a\u4e49\u4e00\u4e2a\u5728 XML \u4e2d\u53ef\u4ee5\u8bc6\u522b\u7684\u6807\u7b7e\u3002 \u53ea\u9700\u8981\u5728\u7c7b\u7684\u6700\u5f00\u59cb\u589e\u52a0\u4e00\u884c\uff1a class SRadioBox2 : public SRadioBox { SOUI_CLASS_NAME ( SRadioBox2 , L \"radio2\" ) public : SRadioBox2 ( void ); ~ SRadioBox2 ( void ); } ``` SOUI_CLASS_NAME \u544a\u8bc9 XML \u89e3\u6790\u5668\uff0c\u78b0\u5230 radio2 \u65f6\u81ea\u52a8\u521b\u5efa SRadioBox2 \u5bf9\u8c61\u3002 \u5b9e\u9645\u4e0a\u8fd9\u4e00\u884c\u66f4\u91cd\u8981\u7684\u4f5c\u7528\u662f\u7528\u6765\u505a\u5bf9\u8c61\u7c7b\u578b\u8fd0\u884c\u65f6\u8bc6\u522b\uff08 RTTI \uff09 , \u6709\u4e86\u8fd9\u4e2a\u673a\u5236\uff0c\u5728\u7f16\u8bd1 \u5668\u5173\u95ed C ++ \u7684 RTTI \u65f6\u4ecd\u7136\u53ef\u4ee5\u5b89\u5168\u7684\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\u3002 \u7136\u540e\u6211\u4eec\u9700\u8981\u5904\u7406\u63a7\u4ef6\u7684 WM_PAINT \u6d88\u606f\u3002 \u4e3a\u4e86\u5904\u7406\u8fd9\u4e2a\u6d88\u606f\uff0c\u6211\u4eec\u9700\u8981\u52a0\u5165\u6d88\u606f\u6620\u5c04\u8868\u53ca\u6d88\u606f\u5904\u7406\u51fd\u6570\uff1a ``` cpp class SRadioBox2 : public SRadioBox { SOUI_CLASS_NAME ( SRadioBox2 , L \"radio2\" ) public : SRadioBox2 ( void ); ~ SRadioBox2 ( void ); protected : void OnPaint ( IRenderTarget * pRT ); SOUI_MSG_MAP_BEGIN () MSG_WM_PAINT_EX ( OnPaint ) SOUI_MSG_MAP_END () }; SOUI \u63a7\u4ef6\u7684\u6d88\u606f\u5904\u7406\u673a\u5236\u662f\u548c WTL \u4e2d\u6284\u8fc7\u6765\u7684\uff0c\u548c MFC \u4e5f\u5f88\u76f8\u4f3c\u3002\u53ea\u662f\u5bf9\u4e8e\u90e8\u5206\u6d88 \u606f\uff0c\u7531\u4e8e\u5bf9\u4e8e\u6d88\u606f\u7684\u53c2\u6570\u7684\u89e3\u91ca\u4e0d\u4e00\u6837\uff0c\u6d88\u606f\u6620\u5c04\u7684\u5b8f\u4f1a\u6709\u4e00\u70b9\u53d8\u5316\u3002 \u5982\u8fd9\u91cc\u7684 WM_PAINT \u6d88\u606f\uff0c\u5728 SOUI \u91cc wparam \u4f20\u9012\u7684\u662f\u4e00\u4e2a IRenderTarget \u6307\u9488\uff0c\u800c \u4f20\u7edf\u7684 Win32 \u4f20\u9012\u7684\u662f\u4e00\u4e2a HDC\u3002\u56e0\u6b64\u6211\u4eec\u9700\u8981\u4f7f\u7528 MSG_WM_PAINT_EX \u4ee3\u66ff WTL \u4e2d\u4f7f\u7528\u7684 MSG_WM_PAINT\u3002 \u5927\u5bb6\u53ef\u80fd\u4f1a\u95ee\u6709\u54ea\u4e9b\u6d88\u606f\u6620\u5c04\u5b8f SOUI \u548c WLT \u4e0d\u4e00\u6837\uff1f \u5b9e\u9645\u4e0a\u5bf9\u4e8e\u4e00\u4e2a\u6709\u7ecf\u9a8c\u7684\u7a0b\u5e8f\u5458\uff0c\u4ed6\u5e94\u8be5\u53ef\u4ee5\u627e\u5230 MSG_WM_PAINT_EX \u7684\u5b8f\u5b9a\u4e49\uff0c\u5e76\u4e14 \u5728\u5b9a\u4e49\u9644\u8fd1\u5c31\u53ef\u4ee5\u627e\u5230\u6240\u6709\u7684 SOUI \u548c WLT \u4e0d\u540c\u7684\u6620\u5c04\u5b8f\u3002 \u4e0b\u9762\u662f\u5230\u76ee\u524d\u4e3a\u6b62 SOUI \u4e2d\u6240\u6709\u548c WTL \u4e0d\u540c\u7684\u5b8f\uff1a // BOOL OnEraseBkgnd(IRenderTarget * pRT) #define MSG_WM_ERASEBKGND_EX(func) \\ if (uMsg == WM_ERASEBKGND) \\ { \\ SetMsgHandled(TRUE); \\ lResult = (LRESULT)func((IRenderTarget *)wParam); \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnPaint(IRenderTarget * pRT) #define MSG_WM_PAINT_EX(func) \\ if (uMsg == WM_PAINT) \\ { \\ SetMsgHandled(TRUE); \\ func((IRenderTarget *)wParam); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnNcPaint(IRenderTarget * pRT) #define MSG_WM_NCPAINT_EX(func) \\ if (uMsg == WM_NCPAINT) \\ { \\ SetMsgHandled(TRUE); \\ func((IRenderTarget *)wParam); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnSetFont(IFont *pFont, BOOL bRedraw) #define MSG_WM_SETFONT_EX(func) \\ if (uMsg == WM_SETFONT) \\ { \\ SetMsgHandled(TRUE); \\ func((IFont*)wParam, (BOOL)LOWORD(lParam)); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnSetFocus() #define MSG_WM_SETFOCUS_EX(func) \\ if (uMsg == WM_SETFOCUS) \\ { \\ SetMsgHandled(TRUE); \\ func(); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnKillFocus() #define MSG_WM_KILLFOCUS_EX(func) \\ if (uMsg == WM_KILLFOCUS) \\ { \\ SetMsgHandled(TRUE); \\ func(); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnNcMouseHover(int nFlag,CPoint pt) #define MSG_WM_NCMOUSEHOVER(func) \\ if(uMsg==WM_NCMOUSEHOVER)\\ {\\ SetMsgHandled(TRUE); \\ func(wParam,CPoint(GET_X_LPARAM(lParam),GET_Y_LPARAM(lParam))); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnNcMouseLeave() #define MSG_WM_NCMOUSELEAVE(func) \\ if(uMsg==WM_NCMOUSELEAVE)\\ {\\ SetMsgHandled(TRUE); \\ func(); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } // void OnTimer(char cTimerID) #define MSG_WM_TIMER_EX(func) \\ if (uMsg == WM_TIMER) \\ { \\ SetMsgHandled(TRUE); \\ func((char)wParam); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } #define WM_TIMER2 (WM_USER+5432) //\u5b9a\u4e49\u4e00\u4e2a\u4e0e HWND \u5b9a\u65f6\u5668\u517c\u5bb9\u7684 SOUI \u5b9a\u65f6\u5668 #define MSG_WM_TIMER2(func) \\ if (uMsg == WM_TIMER2) \\ { \\ SetMsgHandled(TRUE); \\ func(wParam); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } \u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u81ea\u5b9a\u4e49\u63a7\u4ef6\u8fd8\u9700\u8981\u5904\u7406\u4e00\u4e9b\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027\uff0c\u8fd9\u65f6\u6211\u9700\u8981\u8fd8\u9700\u8981\u589e\u52a0\u4e00\u4e2a\u5c5e\u6027 \u6620\u5c04\u8868\uff08\u5982 SGifPlayer \uff09\uff1a ``` cpp SOUI_ATTRS_BEGIN () ATTR_CUSTOM ( L \"skin\" , OnAttrSkin ) //\u4e3a\u63a7\u4ef6\u63d0\u4f9b\u4e00\u4e2a skin \u5c5e\u6027\uff0c\u7528\u6765\u63a5\u6536 SSkinObj \u5bf9\u8c61\u7684 name SOUI_ATTRS_END () ``` \u5b8c\u6210\u4e0a\u9762\u51e0\u6b65\uff0c\u4e00\u4e2a\u81ea\u5b9a\u4e49\u63a7\u4ef6\u57fa\u672c\u4e0a\u5c31\u5b8c\u6210\u4e86\u3002 \u53ef\u80fd\u8fd8\u9700\u8981\u5b9e\u73b0\u51e0\u4e2a\u4fee\u6539\u57fa\u7c7b\u884c\u4e3a\u7684\u865a\u51fd\u6570\u3002 ## 4.10.2 \u7ed8\u56fe\u5bf9\u8c61\uff08ISkinObj\uff09\u7684\u6269\u5c55 \u5c3d\u7ba1 SOUI \u5df2\u7ecf\u5185\u7f6e\u4e86\u5927\u90e8\u5206\u5e38\u7528\u7684\u63a7\u4ef6\uff0c\u5f88\u663e\u7136\u5185\u7f6e\u63a7\u4ef6\u5f88\u96be\u6ee1\u8db3\u5404\u79cd\u5e94\u7528\u7684\u5f62\u5f0f\u5404\u5f02 \u7684\u9700\u6c42\u3002 \u56e0\u6b64\u53ea\u6709\u63d0\u4f9b\u8db3\u591f\u7684\u6269\u5c55\u6027\u624d\u80fd\u6ee1\u8db3\u771f\u5b9e\u5e94\u7528\u573a\u666f\u3002 \u9664\u4e86\u5c06\u7cfb\u7edf\u5c3d\u53ef\u80fd\u7684\u7ec4\u4ef6\u5316\u5916\uff0c SOUI \u5728\u63a7\u4ef6\u81ea\u7ed8 ( SWindow ) \u53ca\u7ed8\u56fe\u5bf9\u8c61 ( ISkinObj ) \u4e24\u4e2a \u65b9\u9762\u63d0\u4f9b\u7528\u6237\u6269\u5c55\u3002 \u25c6 \u7ed8\u56fe\u5bf9\u8c61 ( ISkinObj ) \u7684\u6269\u5c55 \u7cfb\u7edf\u5185\u7f6e\u4e86\u5982 SSkinImgList , SSkinImgFrame , SSkinScrollbar \u7b49\u7ed8\u56fe\u5bf9\u8c61\uff0c\u5728\u7a97\u53e3\u4e2d\u901a \u8fc7\u5f15\u7528\u8fd9\u4e9b\u7ed8\u56fe\u5bf9\u8c61\u53ef\u4ee5\u7ed8\u5236\u51fa\u4e0d\u540c\u7684\u9884\u5b9a\u4e49\u56fe\u5f62\u56fe\u8c61\uff08\u5982\u6309\u94ae\uff0c\u6eda\u52a8\u6761\uff0c\u4e5d\u5bab\u683c\u7b49\uff09\u3002 \u5b9e\u9645\u4e0a\u7528\u6237\u53ef\u4ee5\u5b9e\u73b0\u4efb\u610f\u7684\u7ed8\u56fe\u5bf9\u8c61\u5e76\u628a\u5b83\u4eec\u6ce8\u518c\u5230\u7cfb\u7edf\u91cc\uff0c\u4ee5\u4fbf\u5728 XML \u53ca\u4ee3\u7801\u4e2d\u4f7f \u7528\u3002 \u4e0b\u9762\u5148\u770b\u4e00\u4e0b\u5b9e\u73b0\u4e00\u4e2a ISkinObj \u9700\u8981\u5b9e\u73b0\u54ea\u4e9b\u63a5\u53e3\uff1a ``` cpp /** * @struct ISkinObj * @brief Skin \u5bf9\u8c61 * * Describe */ class SOUI_EXP ISkinObj : public SObject , public TObjRefImpl2 < IObjRef , ISkinObj > { public : ISkinObj () { } virtual ~ ISkinObj () { } /** * Draw * @brief \u5c06 this \u7ed8\u5236\u5230 RenderTarget \u4e0a\u53bb * @param IRenderTarget * pRT -- \u7ed8\u5236\u7528\u7684 RenderTarget * @param LPCRECT rcDraw -- \u7ed8\u5236\u4f4d\u7f6e * @param DWORD dwState -- \u7ed8\u5236\u72b6\u6001 * @param BYTE byAlpha -- \u900f\u660e\u5ea6 * @return void * Describe */ virtual void Draw ( IRenderTarget * pRT , LPCRECT rcDraw , DWORD dwState , BYTE byAlpha = 0xFF ) = 0 ; /** * GetSkinSize * @brief \u83b7\u5f97 Skin \u7684\u9ed8\u8ba4\u5927\u5c0f * @return SIZE -- Skin \u7684\u9ed8\u8ba4\u5927\u5c0f * Describe \u6d3e\u751f\u7c7b\u5e94\u8be5\u6839\u636e skin \u7684\u7279\u70b9\u5b9e\u73b0\u8be5\u63a5\u53e3 */ virtual SIZE GetSkinSize () { SIZE ret = { 0 , 0 }; return ret ; } /** * IgnoreState * @brief \u67e5\u8be2 skin \u662f\u5426\u6709\u72b6\u6001\u4fe1\u606f * @return BOOL -- true \u6709\u72b6\u6001\u4fe1\u606f * Describe */ virtual BOOL IgnoreState () { return TRUE ; } /** * GetStates * @brief \u83b7\u5f97 skin \u5bf9\u8c61\u5305\u542b\u7684\u72b6\u6001\u6570\u91cf * @return int -- \u72b6\u6001\u6570\u91cf * Describe \u9ed8\u8ba4\u4e3a 1 */ virtual int GetStates () { return 1 ; } }; ISkinObj \u662f\u4e00\u4e2a\u6d3e\u751f\u81ea SObject \u53ca TObjRefImpl2 \u7684\u7c7b\uff0c\u63d0\u4f9b\u4e86\u51e0 \u4e2a\u72b6\u6001\u67e5\u8be2\u76f8\u5173\u7684\u63a5\u53e3\uff0c\u4e5f\u63d0\u4f9b\u4e86\u4e00\u4e2a Draw \u63a5\u53e3\u6765\u5728 IRenderTarget \u4e0a\u7ed8\u5236\u8be5\u7ed8\u5236\u5bf9 \u8c61\u3002 \u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e9b\u63a5\u53e3\u4e2d\u53ea\u6709 Draw \u63a5\u53e3\u662f\u7eaf\u865a\u63a5\u53e3\u3002 \u5728\u5b83\u7684\u57fa\u7c7b\u4e2d\uff0cSOjbect \u4f7f\u5f97 ISkinObj \u53ef\u4ee5\u65b9\u4fbf\u7684\u4ece XML \u914d\u7f6e\u6587\u4ef6\u4e2d\u521d\u59cb\u5316\uff0c\u800c TObjRefImpl2 \u5219\u63d0\u4f9b\u5f15\u7528\u8ba1\u6570\u7684\u5b9e\u73b0\u3002 \u5185\u7f6e\u7684 ISkinObj \u4e0d\u652f\u6301\u663e\u793a GIF \u56fe\u7247\uff0c\u4ee5\u663e\u793a GIF \u56fe\u8c61\u4e3a\u4f8b\u6765\u5206\u6790\u5982\u4f55\u6269\u5c55\u7ed8\u56fe\u5bf9\u8c61\u6765 \u652f\u6301 GIF \u56fe\u7247\u663e\u793a\u3002 \u5bf9\u8c61\u5b9a\u4e49\uff08trunk\\controls.extend\\gif\\SSkinGif.h\uff09 namespace SOUI { class SGifFrame { public : CAutoRefPtr < IBitmap > pBmp ; int nDelay ; }; /** * @class SSkinGif * @brief GIF \u56fe\u7247\u52a0\u8f7d\u53ca\u663e\u793a\u5bf9\u8c61 * * Describe */ class SSkinGif : public ISkinObj { SOUI_CLASS_NAME ( SSkinGif , L \"gif\" ) public : SSkinGif () : m_nFrames ( 0 ), m_iFrame ( 0 ), m_pFrames ( NULL ) { } //\u521d\u59cb\u5316 GDI+\u73af\u5883\uff0c\u7531\u4e8e\u8fd9\u91cc\u9700\u8981\u4f7f\u7528 GDI+\u6765\u89e3\u7801 GIF \u6587\u4ef6\u683c\u5f0f static BOOL Gdiplus_Startup (); //\u9000\u51fa GDI+\u73af\u5883 static void Gdiplus_Shutdown (); virtual ~ SSkinGif () { if ( m_pFrames ) delete [] m_pFrames ; } /** * Draw * @brief \u7ed8\u5236\u6307\u5b9a\u5e27\u7684 GIF \u56fe * @param IRenderTarget * pRT -- \u7ed8\u5236\u76ee\u6807 * @param LPCRECT rcDraw -- \u7ed8\u5236\u8303\u56f4 * @param DWORD dwState -- \u7ed8\u5236\u72b6\u6001\uff0c\u8fd9\u91cc\u88ab\u89e3\u91ca\u4e3a\u5e27\u53f7 * @param BYTE byAlpha -- \u900f\u660e\u5ea6 * @return void * Describe */ virtual void Draw ( IRenderTarget * pRT , LPCRECT rcDraw , DWORD dwState , BYTE byAlpha = 0xFF ); /** * GetStates * @brief \u83b7\u5f97 GIF \u5e27\u6570 * @return int -- \u5e27\u6570 * Describe */ virtual int GetStates (){ return m_nFrames ;} /** * GetSkinSize * @brief \u83b7\u5f97\u56fe\u7247\u5927\u5c0f * @return SIZE -- \u56fe\u7247\u5927\u5c0f * Describe */ virtual SIZE GetSkinSize () { SIZE sz = { 0 }; if ( m_nFrames > 0 && m_pFrames ) { sz = m_pFrames [ 0 ]. pBmp -> Size (); } return sz ; } /** * GetFrameDelay * @brief \u83b7\u5f97\u6307\u5b9a\u5e27\u7684\u663e\u793a\u65f6\u95f4 * @param int iFrame -- \u5e27\u53f7,\u4e3a-1 \u65f6\u4ee3\u8868\u83b7\u5f97\u5f53\u524d\u5e27\u7684\u5ef6\u65f6 * @return long -- \u5ef6\u65f6\u65f6\u95f4(*10ms) * Describe */ long GetFrameDelay ( int iFrame = -1 ); /** * ActiveNextFrame * @brief \u6fc0\u6d3b\u4e0b\u4e00\u5e27 * @return void * Describe */ void ActiveNextFrame (); /** * SelectActiveFrame * @brief \u6fc0\u6d3b\u6307\u5b9a\u5e27 * @param int iFrame -- \u5e27\u53f7 * @return void * Describe */ void SelectActiveFrame ( int iFrame ); /** * LoadFromFile * @brief \u4ece\u6587\u4ef6\u52a0\u8f7d GIF * @param LPCTSTR pszFileName -- \u6587\u4ef6\u540d * @return int -- GIF \u5e27\u6570\uff0c0-\u5931\u8d25 * Describe */ int LoadFromFile ( LPCTSTR pszFileName ); /** * LoadFromMemory * @brief \u4ece\u5185\u5b58\u52a0\u8f7d GIF * @param LPVOID pBits -- \u5185\u5b58\u5730\u5740 * @param size_t szData -- \u5185\u5b58\u6570\u636e\u957f\u5ea6 * @return int -- GIF \u5e27\u6570\uff0c0-\u5931\u8d25 * Describe */ int LoadFromMemory ( LPVOID pBits , size_t szData ); SOUI_ATTRS_BEGIN () ATTR_CUSTOM ( L \"src\" , OnAttrSrc ) //XML \u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u56fe\u7247\u8d44\u6e90 \u540d ,( type : name ) SOUI_ATTRS_END () protected : LRESULT OnAttrSrc ( const SStringW & strValue , BOOL bLoading ); int LoadFromGdipImage ( Gdiplus :: Bitmap * pImg ); int m_nFrames ; int m_iFrame ; SGifFrame * m_pFrames ; }; } //end of name space SOUI \u5bf9\u8c61\u6ce8\u518c\uff1a theApp -> RegisterSkinFactory ( TplSkinFactory < SSkinGif > ()); //\u6ce8\u518c SkinGif \u5bf9\u8c61\u7684\u4f7f\u7528\uff08trunk\\demo\\uires\\xml\\dlg_main.xml\uff09\uff1a < skin > <!-- \u5c40\u90e8 skin \u5bf9\u8c61 --> < gif name = \"gif_horse\" src = \"gif:gif_horse\" /> < gif name = \"gif_penguin\" src = \"gif:gif_penguin\" /> </ skin > ``` \u8fd9\u91cc\u7684 gif \u6807\u7b7e\u4e0e SSkinGif \u7c7b\u4e2d\u7684\u5b8f SOUI_CLASS_NAME ( SSkinGif , L \"gif\" ) \u4e2d\u7684\u201c gif \u201d \u662f\u5339\u914d\u7684\u3002 \u5230\u6b64\uff0c\u5728\u5e03\u5c40 XML \u53ca\u7a0b\u5e8f\u4e2d\u90fd\u53ef\u4ee5\u83b7\u5f97\u8fd9\u4e2a SSkinGif \u5bf9\u8c61\u7684\u6307\u9488\u4e86\u3002 ## 4.10.3 \u63a7\u4ef6\u7684\u6269\u5c55 \u63a7\u4ef6\u7684\u6269\u5c55\u548c\u7ed8\u56fe\u5bf9\u8c61\u7684\u6269\u5c55\u5957\u8def\u7c7b\u4f3c\uff0c\u4e5f\u662f\u5148\u4ece\u7cfb\u7edf\u63d0\u4f9b\u7684\u57fa\u7840\u7c7b\u6d3e\u751f\uff0c\u518d\u6ce8\u518c\u5230\u7cfb \u7edf\uff0c\u6700\u540e\u518d XML \u6216\u8005\u4ee3\u7801\u4e2d\u4f7f\u7528\u3002 \u548c\u7ed8\u56fe\u5bf9\u8c61\u4e0d\u540c\u5728\u4e8e\uff0c\u63a7\u4ef6\u662f UI \uff0c\u9700\u8981\u5904\u7406\u5404\u79cd UI \u76f8\u5173\u7684\u6d88\u606f\u4ee5\u53ca\u5411\u7a0b\u5e8f\u53d1\u51fa\u5404\u79cd\u63a7\u4ef6 \u7279\u6709\u7684\u4e8b\u4ef6\u3002 \u540c\u6837\u6211\u4eec\u8fd8\u662f\u4ee5 GIF \u663e\u793a\u7684\u63a7\u4ef6\u4e3a\u4f8b\uff08 trunk \\ controls . extend \\ gif \\ SGifPlayer . h \uff09\uff1a ``` cpp namespace SOUI { /** * @class SGifPlayer * @brief GIF \u56fe\u7247\u663e\u793a\u63a7\u4ef6 * * Describe */ class SGifPlayer : public SWindow { SOUI_CLASS_NAME ( SGifPlayer , L \"gifplayer\" ) //\u5b9a\u4e49 GIF \u63a7\u4ef6\u5728 XM \u52a0\u7684\u6807\u7b7e public : SGifPlayer (); ~ SGifPlayer (); /** * PlayGifFile * @brief \u5728\u63a7\u4ef6\u4e2d\u64ad\u653e\u4e00\u4e2a GIF \u56fe\u7247\u6587\u4ef6 * @param LPCTSTR pszFileName -- \u6587\u4ef6\u540d * @return BOOL -- true:\u6210\u529f * Describe */ BOOL PlayGifFile ( LPCTSTR pszFileName ); protected : //SWindow \u7684\u865a\u51fd\u6570 virtual CSize GetDesiredSize ( LPRECT pRcContainer ); public : //\u5c5e\u6027\u5904\u7406 SOUI_ATTRS_BEGIN () ATTR_CUSTOM ( L \"skin\" , OnAttrGif ) //\u4e3a\u63a7\u4ef6\u63d0\u4f9b\u4e00\u4e2a skin \u5c5e\u6027\uff0c\u7528\u6765\u63a5\u6536 SSkinObj \u5bf9\u8c61\u7684 name SOUI_ATTRS_END () protected : HRESULT OnAttrGif ( const SStringW & strValue , BOOL bLoading ); protected : //\u6d88\u606f\u5904\u7406\uff0cSOUI \u63a7\u4ef6\u7684\u6d88\u606f\u5904\u7406\u548c WTL\uff0cMFC \u5f88\u76f8\u4f3c\uff0c\u91c7\u7528\u76f8\u4f3c\u7684\u6620\u5c04\u8868\uff0c\u76f8\u540c\u6216 \u8005\u76f8\u4f3c\u7684\u6d88\u606f\u6620\u5c04\u5b8f /** * OnPaint * @brief \u7a97\u53e3\u7ed8\u5236\u6d88\u606f\u54cd\u5e94\u51fd\u6570 * @param IRenderTarget * pRT -- \u7ed8\u5236\u76ee\u6807 * @return void * Describe \u6ce8\u610f\u8fd9\u91cc\u7684\u53c2\u6570\u662f IRenderTarget *,\u800c\u4e0d\u662f WTL \u4e2d\u4f7f\u7528\u7684 HDC\uff0c\u540c\u65f6\u6d88\u606f \u6620\u5c04\u5b8f\u4e5f\u53d8\u4e3a MSG_WM_PAINT_EX */ void OnPaint ( IRenderTarget * pRT ); /** * OnTimer * @brief SOUI \u7a97\u53e3\u7684\u5b9a\u65f6\u5668\u5904\u7406\u51fd\u6570 * @param char cTimerID -- \u5b9a\u65f6\u5668 ID\uff0c\u8303\u56f4\u4ece 0-127\u3002 * @return void * Describe SOUI \u63a7\u4ef6\u7684\u5b9a\u65f6\u5668\u662f Host \u7a97\u53e3\u5b9a\u65f6\u5668 ID \u7684\u5206\u89e3\uff0c\u4ee5\u65b9\u4fbf\u6240\u6709\u7684\u63a7\u4ef6\u90fd\u901a\u8fc7 Host \u83b7\u5f97\u5b9a\u65f6\u5668\u7684\u5206\u53d1\u3002 * \u6ce8\u610f\u4f7f\u7528 MSG_WM_TIMER_EX \u6765\u6620\u5c04\u8be5\u6d88\u606f\u3002\u5b9a\u65f6\u5668\u4f7f\u7528 SWindow::SetTimer \u53ca SWindow::KillTimer \u6765\u521b\u5efa\u53ca\u91ca\u653e\u3002 * \u5982\u679c\u8be5\u5b9a\u65f6\u5668 ID \u8303\u56f4\u4e0d\u80fd\u6ee1\u8db3\u8981\u6c42\uff0c\u53ef\u4ee5\u4f7f\u7528 SWindow::SetTimer2 \u6765\u521b \u5efa\u3002 */ void OnTimer ( char cTimerID ); /** * OnShowWindow * @brief \u5904\u7406\u7a97\u53e3\u663e\u793a\u6d88\u606f * @param BOOL bShow -- true:\u663e\u793a * @param UINT nStatus -- \u663e\u793a\u539f\u56e0 * @return void * Describe \u53c2\u8003 MSDN \u7684 WM_SHOWWINDOW \u6d88\u606f */ void OnShowWindow ( BOOL bShow , UINT nStatus ); //SOUI \u63a7\u4ef6\u6d88\u606f\u6620\u5c04\u8868 SOUI_MSG_MAP_BEGIN () MSG_WM_TIMER_EX ( OnTimer ) //\u5b9a\u65f6\u5668\u6d88\u606f MSG_WM_PAINT_EX ( OnPaint ) //\u7a97\u53e3\u7ed8\u5236\u6d88\u606f MSG_WM_SHOWWINDOW ( OnShowWindow ) //\u7a97\u53e3\u663e\u793a\u72b6\u6001\u6d88\u606f SOUI_MSG_MAP_END () private : SSkinGif * m_pgif ; int m_iCurFrame ; }; } \u5b9e\u73b0\u4e86\u8be5\u7c7b\u4ee5\u540e\uff0c\u5728 WinMain \u4e2d\u6ce8\u518c\uff1a theApp -> RegisterWndFactory ( TplSWindowFactory < SGifPlayer > ()); //\u6ce8\u518c GIFPlayer \u6211\u4eec\u53ef\u4ee5\u5728\u5e03\u5c40 XML \u4e2d\u521b\u5efa GIF \u63a7\u4ef6\u63a7\u4ef6\u5e76\u663e\u793a\u4e86 (trunk\\demo\\uires\\xml\\dlg_main.xml\uff09\uff1a <gifplayer pos= \"10,10\" skin= \"gif_horse\" name= \"giftest\" cursor= \"ANI_ARROW\" /> <button width= \"250\" height= \"30\" name= \"btnSelectGif\" > load gif file </button> <gifplayer pos= \"10,150\" skin= \"gif_penguin\" /> \u4e0a\u9762\u7684 gifplayer \u8282\u70b9\u5373\u8868\u793a\u4ece XML \u4e2d\u521b\u5efa\u4e24\u4e2a SGifPlayer \u7c7b\u5bf9\u8c61\u3002 \u800c gifplayer \u5bf9\u8c61\u7684 skin \u5c5e\u6027\u5219\u5f15\u7528\u524d\u9762\u5b9a\u4e49\u7684 SSkinGif \u5bf9\u8c61\u3002 \u5907\u6ce8\uff1a \u5b9e\u9645\u4e0a\u66f4\u591a\u6269\u5c55\u6280\u5de7\u53ef\u4ee5\u53c2\u8003\u7cfb\u7edf\u5185\u7f6e\u7684\u63a7\u4ef6\u7684\u5b9e\u73b0\u3002\u5185\u7f6e\u63a7\u4ef6\u4e0e\u6269\u5c55\u63a7\u4ef6\u552f\u4e00\u7684\u533a\u522b\u5c31 \u5728\u4e8e\u7531\u8c01\u5b9e\u73b0\u5c06\u63a7\u4ef6\u5411\u7cfb\u7edf\u6ce8\u518c\u3002 \u5185\u7f6e\u63a7\u4ef6\u5728 SOUI \u5185\u6838\u521d\u59cb\u5316\u7684\u65f6\u5019\u81ea\u52a8\u6ce8\u518c\uff0c\u800c\u6269\u5c55\u63a7\u4ef6\u5219\u9700\u8981\u624b\u52a8\u589e\u52a0\u4e00\u884c\u6ce8\u518c\u4ee3 \u7801\u3002 \u6548\u679c\u9884\u89c8","title":"4.10.1 \u5f00\u53d1\u81ea\u5b9a\u4e49\u63a7\u4ef6"},{"location":"Development/11/","text":"4.11 \u5728 SOUI \u4e2d\u4f7f\u7528\u5b9a\u65f6\u5668 \u00b6 \u5b9a\u65f6\u5668\u662f win32 \u7f16\u7a0b\u4e2d\u5e38\u7528\u7684\u5236\u4f5c\u52a8\u753b\u6548\u679c\u7684\u624b\u6bb5\u3002\u5728 Win32 \u7f16\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u4f7f \u7528::SetTimer \u6765\u521b\u5efa\u5b9a\u65f6\u5668\uff0c\u5b9a\u65f6\u5668\u6d88\u606f\u4f1a\u88ab\u4f1a\u53d1\u5230\u8c03\u7528 SetTimer \u65f6\u6307\u5b9a\u7684 HWND. \u5728 SOUI \u4e2d\u4e00\u822c\u6765\u8bf4\u53ea\u6709\u4e00\u4e2a\u5bbf\u4e3b\u7a97\u53e3\u6709 HWND\uff0c\u6240\u6709\u7684 SWindow \u90fd\u5c5e\u4e8e\u4e00\u4e2a\u5bbf\u4e3b\u7a97 \u53e3\uff0c\u5982\u6b64\u4e00\u6765\u76f4\u63a5\u4f7f\u7528::SetTimer \u521b\u5efa\u7684\u5b9a\u65f6\u5668\u5c31\u96be\u4ee5\u76f4\u63a5\u5206\u53d1\u5230 SWindow \u5bf9\u8c61\u4e86\u3002 \u5728 SOUI \u7684\u63a7\u4ef6\u4e2d\u4f7f\u7528\u5b9a\u65f6\u5668 \u4e3a\u4e86\u80fd\u591f\u65b9\u4fbf\u7684\u5728 SWindow \u4e2d\u4f7f\u7528\u5b9a\u65f6\u5668\uff0c\u5728 SOUI \u7cfb\u7edf\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u5c06\u5b9a\u65f6\u5668 ID\uff08\u5171 32 \u4f4d\uff09\u6309\u4f4d\u8fdb\u884c\u5206\u89e3\uff1a class SOUI_EXP STimerID { public : DWORD Swnd : 24 ; //\u7a97\u53e3\u53e5\u67c4,\u5982\u679c\u7a97\u53e3\u53e5\u67c4\u8d85\u8fc7 24 \u4f4d\u8303\u56f4\uff0c\u5219\u4e0d\u80fd\u4f7f\u7528\u8fd9\u79cd\u65b9 \u5f0f\u8bbe\u7f6e\u5b9a\u65f6\u5668 DWORD uTimerID : 7 ; //\u5b9a\u65f6\u5668 ID\uff0c\u4e00\u4e2a\u7a97\u53e3\u6700\u591a\u652f\u6301 128 \u4e2a\u5b9a\u65f6\u5668\u3002 DWORD bSwndTimer : 1 ; //\u533a\u522b\u901a\u7528\u5b9a\u65f6\u5668\u7684\u6807\u5fd7\uff0c\u6807\u5fd7\u4e3a 1 \u65f6\uff0c\u8868\u793a\u8be5\u5b9a\u65f6\u5668\u4e3a SWND \u5b9a\u65f6\u5668 STimerID ( SWND hWnd , char id ) { SASSERT ( hWnd < 0x00FFFFFF && id >= 0 ); bSwndTimer = 1 ; Swnd = hWnd ; uTimerID = id ; } STimerID ( DWORD dwID ) { memcpy ( this , & dwID , sizeof ( DWORD )); } operator DWORD & () const { return * ( DWORD * ) this ; } }; \u4f4e 24 \u4f4d\u7528\u6765\u5b58\u50a8 SWindow \u7684\u7a97\u53e3 ID(swnd)\u3002swnd \u662f\u4e00\u4e2a SWindow \u521b\u5efa\u5e8f\u53f7\uff0c\u5728\u4e00 \u4e2a\u5e94\u7528\u4e2d\uff0c\u901a\u5e38\u5f88\u96be\u4ea7\u751f\u8d85\u8fc7 0xFFFFFF(16777215)\u4e2a\u7a97\u53e3\u5bf9\u8c61\uff0c\u56e0\u6b64\u4f7f\u7528\u4f4e 24 \u4f4d\u6765\u5b58 \u50a8\u7a97\u53e3 ID \u5728\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u90fd\u662f\u591f\u7528\u7684\u4e86\u3002 \u9ad8 8 \u4f4d\u4e2d\u4fdd\u7559\u6700\u9ad8\u4f4d\u8bbe\u7f6e\u4e3a 1,\u7528\u6765\u533a\u522b\u76f4\u63a5\u4f7f\u7528::SetTimer \u521b\u5efa\u7684\u5b9a\u65f6\u5668\uff08\u4e0d\u53ef\u4ee5\u628a\u6700\u9ad8 \u4f4d\u7f6e 1\uff09\u3002 \u5269\u4e0b 7 \u4f4d\u7528\u4e8e SWindow \u4e2d\u4f5c\u4e3a\u5b9a\u65f6\u5668 ID\u3002\u56e0\u6b64\u5728 SOUI \u4e2d\uff0c\u4e00\u4e2a SWindow \u6700\u591a\u53ef\u4ee5\u521b \u5efa 0-127 \u4e2a\u5b9a\u65f6\u5668\u3002 \u521b\u5efa\u5b9a\u65f6\u5668\uff1a SWindow::SetTimer\uff080~127); /** * SWindow::SetTimer * @brief \u5229\u7528\u7a97\u53e3\u5b9a\u65f6\u5668\u6765\u8bbe\u7f6e\u4e00\u4e2a ID \u4e3a 0-127 \u7684 SWND \u5b9a\u65f6\u5668 * @param char id -- \u5b9a\u65f6\u5668 ID * @param UINT uElapse -- \u5ef6\u65f6(MS) * @return BOOL * * Describe \u53c2\u8003::SetTimer */ BOOL SWindow::SetTimer ( char id , UINT uElapse ); \u9500\u6bc1\u5b9a\u65f6\u5668: SWindow::KillTimer; /** * KillTimer * @brief \u5220\u9664\u4e00\u4e2a SWND \u5b9a\u65f6\u5668 * @param char id -- \u5b9a\u65f6\u5668 ID * @return void * * Describe */ void KillTimer ( char id ); \u54cd\u5e94\u5b9a\u65f6\u5668\u6d88\u606f\uff1a \u5728\u6d88\u606f\u6620\u5c04\u8868\u4e2d\u4f7f\u7528 MSG_WM_TIMER_EX\u3002\u53c2\u89c1\uff1aSGifPlayer.h SOUI_MSG_MAP_BEGIN () MSG_WM_TIMER_EX ( OnTimer ) //\u5b9a\u65f6\u5668\u6d88\u606f MSG_WM_PAINT_EX ( OnPaint ) //\u7a97\u53e3\u7ed8\u5236\u6d88\u606f MSG_WM_SHOWWINDOW ( OnShowWindow ) //\u7a97\u53e3\u663e\u793a\u72b6\u6001\u6d88\u606f SOUI_MSG_MAP_END () \u5982\u679c\u5728\u4e00\u4e2a\u7a97\u53e3\u4e2d\u5fc5\u987b\u8981\u521b\u5efa\u4f7f\u7528 32 \u4f4d\u7684\u5b9a\u65f6\u5668 ID\uff0c\u5728 SOUI \u4e2d\u53ef\u4ee5\u4f7f\u7528\u53e6\u4e00\u4e2a\u63a5\u53e3\u6765 \u5b9e\u73b0: /** * SetTimer2 * @brief \u5229\u7528\u51fd\u6570\u5b9a\u65f6\u5668\u6765\u6a21\u62df\u4e00\u4e2a\u517c\u5bb9\u7a97\u53e3\u5b9a\u65f6\u5668 * @param UINT_PTR id -- \u5b9a\u65f6\u5668 ID * @param UINT uElapse -- \u5ef6\u65f6(MS) * @return BOOL * * Describe \u7531\u4e8e SetTimer \u53ea\u652f\u6301 0-127 \u7684\u5b9a\u65f6\u5668 ID\uff0cSetTimer2 \u63d0\u4f9b\u8bbe\u7f6e\u5176\u5b83 timerid * \u80fd\u591f\u4f7f\u7528 SetTimer \u65f6\u5c3d\u91cf\u4e0d\u7528 SetTimer2\uff0c\u5728 Kill \u65f6\u6548\u7387\u4f1a\u6bd4\u8f83\u4f4e */ BOOL SetTimer2 ( UINT_PTR id , UINT uElapse ); /** * KillTimer2 * @brief \u5220\u9664\u4e00\u4e2a SetTimer2 \u8bbe\u7f6e\u7684\u5b9a\u65f6\u5668 * @param UINT_PTR id -- SetTimer2 \u8bbe\u7f6e\u7684\u5b9a\u65f6\u5668 ID * @return void * * Describe \u9700\u8981\u679a\u4e3e\u5b9a\u65f6\u5668\u5217\u8868 */ void KillTimer2 ( UINT_PTR id ); ``` \u54cd\u5e94\u5b9a\u65f6\u5668 : \u4f7f\u7528 SWindow :: SetTimer2 \u521b\u5efa\u7684\u5b9a\u65f6\u5668 , \u6700\u540e\u4f1a\u901a\u8fc7\u4e00\u4e2a\u6d88\u606f : WM_TIMER2 \u6765\u5206\u53d1\u5230 SWindow \u3002 ``` cpp #define WM_TIMER2 (WM_USER+5432) //\u5b9a\u4e49\u4e00\u4e2a\u4e0e HWND \u5b9a\u65f6\u5668\u517c\u5bb9\u7684 SOUI \u5b9a\u65f6\u5668 #define MSG_WM_TIMER2(func) \\ if (uMsg == WM_TIMER2) \\ { \\ SetMsgHandled(TRUE); \\ func(wParam); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u5b9a\u65f6\u5668 \u524d\u9762\u4e24\u79cd\u5b9a\u65f6\u5668\u90fd\u662f\u5728\u63a7\u4ef6\u5f00\u53d1\u7684\u65f6\u5019\u4f7f\u7528\u5b9a\u65f6\u5668\u7684\u65b9\u6cd5\u3002\u800c\u5728\u5e94\u7528\u5c42\uff0c\u8fd8\u53ef\u4ee5\u4e3a\u5bbf\u4e3b\u7a97 \u53e3\u76f4\u63a5\u4f7f\u7528::SetTimer \u6216\u8005\u5bbf\u4e3b\u7a97\u53e3\u7684\u57fa\u7c7b\uff1aCSimpleWnd::SetTimer \u6765\u521b\u5efa\u5b9a\u65f6\u5668\uff08\u6ce8 \u610f\u6700\u9ad8\u4f4d\u5fc5\u987b\u662f 0\uff09\u3002 \u5728\u54cd\u5e94\u8fd9\u7c7b\u5b9a\u65f6\u5668\u65f6\uff0c\u4e00\u6837\u53ef\u4ee5\u5728\u5bbf\u4e3b\u7a97\u53e3\u7684\u6d88\u606f\u6620\u5c04\u8868\u4e2d\u4f7f\u7528 MSG_WM_TIMER \u6765\u54cd \u5e94\u5b9a\u65f6\u5668\u6d88\u606f\u3002\u4f46\u662f\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e2a\u6620\u5c04\u5b8f\u4f1a\u622a\u83b7\u6240\u6709\u5206\u53d1\u7ed9\u5bbf\u4e3b\u7a97\u53e3\u7684\u5b9a\u65f6\u5668\uff0c\u5982 \u679c\u4e0d\u662f\u81ea\u5df1\u521b\u5efa\u7684\u5b9a\u65f6\u5668\uff0c\u5219\u9700\u8981\u7ee7\u7eed\u4ea4\u7ed9\u57fa\u7c7b\u5904\u7406\u3002 \u53ef\u4ee5\u8c03\u7528\uff1aSetMsgHandled(FALSE); \u6216\u8005\uff1aSHostWnd::OnTimer(UINT_PTR idEvent); \u5b9e\u73b0\u3002","title":"4.11 \u5728 SOUI \u4e2d\u4f7f\u7528\u5b9a\u65f6\u5668"},{"location":"Development/11/#411-soui","text":"\u5b9a\u65f6\u5668\u662f win32 \u7f16\u7a0b\u4e2d\u5e38\u7528\u7684\u5236\u4f5c\u52a8\u753b\u6548\u679c\u7684\u624b\u6bb5\u3002\u5728 Win32 \u7f16\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u4f7f \u7528::SetTimer \u6765\u521b\u5efa\u5b9a\u65f6\u5668\uff0c\u5b9a\u65f6\u5668\u6d88\u606f\u4f1a\u88ab\u4f1a\u53d1\u5230\u8c03\u7528 SetTimer \u65f6\u6307\u5b9a\u7684 HWND. \u5728 SOUI \u4e2d\u4e00\u822c\u6765\u8bf4\u53ea\u6709\u4e00\u4e2a\u5bbf\u4e3b\u7a97\u53e3\u6709 HWND\uff0c\u6240\u6709\u7684 SWindow \u90fd\u5c5e\u4e8e\u4e00\u4e2a\u5bbf\u4e3b\u7a97 \u53e3\uff0c\u5982\u6b64\u4e00\u6765\u76f4\u63a5\u4f7f\u7528::SetTimer \u521b\u5efa\u7684\u5b9a\u65f6\u5668\u5c31\u96be\u4ee5\u76f4\u63a5\u5206\u53d1\u5230 SWindow \u5bf9\u8c61\u4e86\u3002 \u5728 SOUI \u7684\u63a7\u4ef6\u4e2d\u4f7f\u7528\u5b9a\u65f6\u5668 \u4e3a\u4e86\u80fd\u591f\u65b9\u4fbf\u7684\u5728 SWindow \u4e2d\u4f7f\u7528\u5b9a\u65f6\u5668\uff0c\u5728 SOUI \u7cfb\u7edf\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u5c06\u5b9a\u65f6\u5668 ID\uff08\u5171 32 \u4f4d\uff09\u6309\u4f4d\u8fdb\u884c\u5206\u89e3\uff1a class SOUI_EXP STimerID { public : DWORD Swnd : 24 ; //\u7a97\u53e3\u53e5\u67c4,\u5982\u679c\u7a97\u53e3\u53e5\u67c4\u8d85\u8fc7 24 \u4f4d\u8303\u56f4\uff0c\u5219\u4e0d\u80fd\u4f7f\u7528\u8fd9\u79cd\u65b9 \u5f0f\u8bbe\u7f6e\u5b9a\u65f6\u5668 DWORD uTimerID : 7 ; //\u5b9a\u65f6\u5668 ID\uff0c\u4e00\u4e2a\u7a97\u53e3\u6700\u591a\u652f\u6301 128 \u4e2a\u5b9a\u65f6\u5668\u3002 DWORD bSwndTimer : 1 ; //\u533a\u522b\u901a\u7528\u5b9a\u65f6\u5668\u7684\u6807\u5fd7\uff0c\u6807\u5fd7\u4e3a 1 \u65f6\uff0c\u8868\u793a\u8be5\u5b9a\u65f6\u5668\u4e3a SWND \u5b9a\u65f6\u5668 STimerID ( SWND hWnd , char id ) { SASSERT ( hWnd < 0x00FFFFFF && id >= 0 ); bSwndTimer = 1 ; Swnd = hWnd ; uTimerID = id ; } STimerID ( DWORD dwID ) { memcpy ( this , & dwID , sizeof ( DWORD )); } operator DWORD & () const { return * ( DWORD * ) this ; } }; \u4f4e 24 \u4f4d\u7528\u6765\u5b58\u50a8 SWindow \u7684\u7a97\u53e3 ID(swnd)\u3002swnd \u662f\u4e00\u4e2a SWindow \u521b\u5efa\u5e8f\u53f7\uff0c\u5728\u4e00 \u4e2a\u5e94\u7528\u4e2d\uff0c\u901a\u5e38\u5f88\u96be\u4ea7\u751f\u8d85\u8fc7 0xFFFFFF(16777215)\u4e2a\u7a97\u53e3\u5bf9\u8c61\uff0c\u56e0\u6b64\u4f7f\u7528\u4f4e 24 \u4f4d\u6765\u5b58 \u50a8\u7a97\u53e3 ID \u5728\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u90fd\u662f\u591f\u7528\u7684\u4e86\u3002 \u9ad8 8 \u4f4d\u4e2d\u4fdd\u7559\u6700\u9ad8\u4f4d\u8bbe\u7f6e\u4e3a 1,\u7528\u6765\u533a\u522b\u76f4\u63a5\u4f7f\u7528::SetTimer \u521b\u5efa\u7684\u5b9a\u65f6\u5668\uff08\u4e0d\u53ef\u4ee5\u628a\u6700\u9ad8 \u4f4d\u7f6e 1\uff09\u3002 \u5269\u4e0b 7 \u4f4d\u7528\u4e8e SWindow \u4e2d\u4f5c\u4e3a\u5b9a\u65f6\u5668 ID\u3002\u56e0\u6b64\u5728 SOUI \u4e2d\uff0c\u4e00\u4e2a SWindow \u6700\u591a\u53ef\u4ee5\u521b \u5efa 0-127 \u4e2a\u5b9a\u65f6\u5668\u3002 \u521b\u5efa\u5b9a\u65f6\u5668\uff1a SWindow::SetTimer\uff080~127); /** * SWindow::SetTimer * @brief \u5229\u7528\u7a97\u53e3\u5b9a\u65f6\u5668\u6765\u8bbe\u7f6e\u4e00\u4e2a ID \u4e3a 0-127 \u7684 SWND \u5b9a\u65f6\u5668 * @param char id -- \u5b9a\u65f6\u5668 ID * @param UINT uElapse -- \u5ef6\u65f6(MS) * @return BOOL * * Describe \u53c2\u8003::SetTimer */ BOOL SWindow::SetTimer ( char id , UINT uElapse ); \u9500\u6bc1\u5b9a\u65f6\u5668: SWindow::KillTimer; /** * KillTimer * @brief \u5220\u9664\u4e00\u4e2a SWND \u5b9a\u65f6\u5668 * @param char id -- \u5b9a\u65f6\u5668 ID * @return void * * Describe */ void KillTimer ( char id ); \u54cd\u5e94\u5b9a\u65f6\u5668\u6d88\u606f\uff1a \u5728\u6d88\u606f\u6620\u5c04\u8868\u4e2d\u4f7f\u7528 MSG_WM_TIMER_EX\u3002\u53c2\u89c1\uff1aSGifPlayer.h SOUI_MSG_MAP_BEGIN () MSG_WM_TIMER_EX ( OnTimer ) //\u5b9a\u65f6\u5668\u6d88\u606f MSG_WM_PAINT_EX ( OnPaint ) //\u7a97\u53e3\u7ed8\u5236\u6d88\u606f MSG_WM_SHOWWINDOW ( OnShowWindow ) //\u7a97\u53e3\u663e\u793a\u72b6\u6001\u6d88\u606f SOUI_MSG_MAP_END () \u5982\u679c\u5728\u4e00\u4e2a\u7a97\u53e3\u4e2d\u5fc5\u987b\u8981\u521b\u5efa\u4f7f\u7528 32 \u4f4d\u7684\u5b9a\u65f6\u5668 ID\uff0c\u5728 SOUI \u4e2d\u53ef\u4ee5\u4f7f\u7528\u53e6\u4e00\u4e2a\u63a5\u53e3\u6765 \u5b9e\u73b0: /** * SetTimer2 * @brief \u5229\u7528\u51fd\u6570\u5b9a\u65f6\u5668\u6765\u6a21\u62df\u4e00\u4e2a\u517c\u5bb9\u7a97\u53e3\u5b9a\u65f6\u5668 * @param UINT_PTR id -- \u5b9a\u65f6\u5668 ID * @param UINT uElapse -- \u5ef6\u65f6(MS) * @return BOOL * * Describe \u7531\u4e8e SetTimer \u53ea\u652f\u6301 0-127 \u7684\u5b9a\u65f6\u5668 ID\uff0cSetTimer2 \u63d0\u4f9b\u8bbe\u7f6e\u5176\u5b83 timerid * \u80fd\u591f\u4f7f\u7528 SetTimer \u65f6\u5c3d\u91cf\u4e0d\u7528 SetTimer2\uff0c\u5728 Kill \u65f6\u6548\u7387\u4f1a\u6bd4\u8f83\u4f4e */ BOOL SetTimer2 ( UINT_PTR id , UINT uElapse ); /** * KillTimer2 * @brief \u5220\u9664\u4e00\u4e2a SetTimer2 \u8bbe\u7f6e\u7684\u5b9a\u65f6\u5668 * @param UINT_PTR id -- SetTimer2 \u8bbe\u7f6e\u7684\u5b9a\u65f6\u5668 ID * @return void * * Describe \u9700\u8981\u679a\u4e3e\u5b9a\u65f6\u5668\u5217\u8868 */ void KillTimer2 ( UINT_PTR id ); ``` \u54cd\u5e94\u5b9a\u65f6\u5668 : \u4f7f\u7528 SWindow :: SetTimer2 \u521b\u5efa\u7684\u5b9a\u65f6\u5668 , \u6700\u540e\u4f1a\u901a\u8fc7\u4e00\u4e2a\u6d88\u606f : WM_TIMER2 \u6765\u5206\u53d1\u5230 SWindow \u3002 ``` cpp #define WM_TIMER2 (WM_USER+5432) //\u5b9a\u4e49\u4e00\u4e2a\u4e0e HWND \u5b9a\u65f6\u5668\u517c\u5bb9\u7684 SOUI \u5b9a\u65f6\u5668 #define MSG_WM_TIMER2(func) \\ if (uMsg == WM_TIMER2) \\ { \\ SetMsgHandled(TRUE); \\ func(wParam); \\ lResult = 0; \\ if(IsMsgHandled()) \\ return TRUE; \\ } \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u5b9a\u65f6\u5668 \u524d\u9762\u4e24\u79cd\u5b9a\u65f6\u5668\u90fd\u662f\u5728\u63a7\u4ef6\u5f00\u53d1\u7684\u65f6\u5019\u4f7f\u7528\u5b9a\u65f6\u5668\u7684\u65b9\u6cd5\u3002\u800c\u5728\u5e94\u7528\u5c42\uff0c\u8fd8\u53ef\u4ee5\u4e3a\u5bbf\u4e3b\u7a97 \u53e3\u76f4\u63a5\u4f7f\u7528::SetTimer \u6216\u8005\u5bbf\u4e3b\u7a97\u53e3\u7684\u57fa\u7c7b\uff1aCSimpleWnd::SetTimer \u6765\u521b\u5efa\u5b9a\u65f6\u5668\uff08\u6ce8 \u610f\u6700\u9ad8\u4f4d\u5fc5\u987b\u662f 0\uff09\u3002 \u5728\u54cd\u5e94\u8fd9\u7c7b\u5b9a\u65f6\u5668\u65f6\uff0c\u4e00\u6837\u53ef\u4ee5\u5728\u5bbf\u4e3b\u7a97\u53e3\u7684\u6d88\u606f\u6620\u5c04\u8868\u4e2d\u4f7f\u7528 MSG_WM_TIMER \u6765\u54cd \u5e94\u5b9a\u65f6\u5668\u6d88\u606f\u3002\u4f46\u662f\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e2a\u6620\u5c04\u5b8f\u4f1a\u622a\u83b7\u6240\u6709\u5206\u53d1\u7ed9\u5bbf\u4e3b\u7a97\u53e3\u7684\u5b9a\u65f6\u5668\uff0c\u5982 \u679c\u4e0d\u662f\u81ea\u5df1\u521b\u5efa\u7684\u5b9a\u65f6\u5668\uff0c\u5219\u9700\u8981\u7ee7\u7eed\u4ea4\u7ed9\u57fa\u7c7b\u5904\u7406\u3002 \u53ef\u4ee5\u8c03\u7528\uff1aSetMsgHandled(FALSE); \u6216\u8005\uff1aSHostWnd::OnTimer(UINT_PTR idEvent); \u5b9e\u73b0\u3002","title":"4.11 \u5728 SOUI \u4e2d\u4f7f\u7528\u5b9a\u65f6\u5668"},{"location":"Development/12/","text":"4.12 \u5728 SOUI \u4e2d\u6d88\u606f\u901a\u8baf \u00b6 SOUI \u662f\u4e00\u5957\u57fa\u4e8e Win32 SDK \u7684\u7a97\u53e3\u5f00\u53d1\u7684\u4e00\u5957 DirectUI \u6846\u67b6\u3002\u5728 SOUI \u4e2d\u9664\u4e86\u6709\u771f\u7a97 \u53e3\u4f7f\u7528\u7a97\u53e3\u6d88\u606f\u901a\u8baf\u673a\u5236\u5916\uff0c\u8fd8\u6709 SOUI \u63a7\u4ef6\u4e4b\u95f4\u7684\u901a\u8baf\uff0c\u53ca\u63a7\u4ef6\u7684\u4e8b\u4ef6\u5904\u7406\u7b49\u3002 \u25c6 \u771f\u7a97\u53e3\u6d88\u606f\u901a\u8baf \u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528::SendMessage \u8fd9\u4e2a API \u6765\u4e0e\u5bbf\u4e3b\u7a97\u53e3\u901a\u8baf\u3002\u5728\u4efb\u610f\u4e00\u4e2a\u5730\u65b9\u53ea\u8981\u83b7\u53d6\u5230\u4e86 SOUI \u7684\u5bbf\u4e3b\u7a97\u53e3\u53e5\u67c4\u5c31\u53ef\u4ee5\u5411\u8be5\u7a97\u53e3\u53d1\u6d88\u606f\u3002 \u53d1\u6d88\u606f\u4ee5\u540e\u53ef\u4ee5\u5728\u4e3b\u754c\u9762\u7684\u771f\u7a97\u53e3\u7684\u6d88\u606f\u6620\u5c04\u8868\u4e2d\u54cd\u5e94\u5404\u79cd\u81ea\u5b9a\u4e49\u6d88\u606f\uff08\u5982\u4e0b\uff09\uff1a #define WM_MYMSG (WM_USER+100) LRESULT OnMyMsg ( UINT uMsg , WPARAM wp , LPARAM lp , BOOL & bHandled ) { return 0 ; } //HOST \u6d88\u606f\u53ca\u54cd\u5e94\u51fd\u6570\u6620\u5c04\u8868 BEGIN_MSG_MAP_EX ( CMainDlg ) MESSAGE_HANDLER ( WM_MYMSG , OnMyMsg ) MSG_WM_CREATE ( OnCreate ) MSG_WM_INITDIALOG ( OnInitDialog ) MSG_WM_DESTROY ( OnDestory ) MSG_WM_CLOSE ( OnClose ) MSG_WM_SIZE ( OnSize ) MSG_WM_COMMAND ( OnCommand ) MSG_WM_SHOWWINDOW ( OnShowWindow ) CHAIN_MSG_MAP ( SHostWnd ) REFLECT_NOTIFICATIONS_EX () END_MSG_MAP () \u6ce8\u610f\u4e0a\u9762\u4ee3\u7801\u7684\u7ea2\u8272\u90e8\u5206\u3002\u6709 WTL \u5f00\u53d1\u7ecf\u9a8c\u7684\u670b\u53cb\u5e94\u8be5\u5df2\u7ecf\u770b\u51fa\u6765\u4e86\uff0cSOUI \u5904\u7406\u771f\u7a97\u53e3 \u6d88\u606f\u7684\u5f62\u5f0f\u548c WTL \u5b8c\u5168\u4e00\u6837\u3002 \u25c6 SOUI \u63a7\u4ef6\u901a\u8baf \u6211\u4eec\u77e5\u9053\uff0c\u5728 win32 \u7f16\u8bd1\u4e2d\uff0c\u8981\u4e0e\u4e00\u4e2a\u63a7\u4ef6\uff08\u7a97\u53e3\uff09\u901a\u8baf\u80fd\u7528 SendMessage(PostMessage)\u53d1\u9001\u4e00\u4e2a\u6d88\u606f\u7ed9\u76ee\u6807\u7a97\u53e3\uff0c\u76ee\u6807\u7a97\u53e3\u6536\u5230\u540e\u8fdb\u884c\u5904\u7406\u3002\u90a3 \u4e48\u95ee\u9898\u6765\u4e86\uff0c\u5982\u4f55\u5411\u4e00\u4e2a SOUI \u7a97\u53e3\u53d1\u6d88\u606f\uff1f SOUI \u7684\u7a97\u53e3\u7c7b\u548c MFC \u7684\u7a97\u53e3\u7c7b\u5f88\u50cf\uff0c\u548c MFC \u4f7f\u7528 SendMessage(PostMessage\uff09\u53d1 \u6d88\u606f\u7c7b\u4f3c\uff0c\u5728 SOUI \u4e2d\u4e5f\u53ef\u4ee5\u4f7f\u7528 SWindow::SSendMessage \u6765\u5411\u76ee\u6807\u7a97\u53e3\u53d1\u9001\u4e00\u4e2a\u6d88 \u606f\u6765\u901a\u8baf\uff0c\u4f46\u4e0d\u652f\u6301 PostMessage\uff0c\u76ee\u6807\u7a97\u53e3\u5728 SOUI \u7a97\u53e3\u7684\u6d88\u606f\u6620\u5c04\u8868\u4e2d\u54cd\u5e94\u53d1\u9001\u8fc7\u6765 \u7684\u6d88\u606f\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u5185\u7f6e\u63a7\u4ef6 STabCtrl \u7684\u6d88\u606f\u6620\u5c04\u8868\uff1a cpp SOUI_MSG_MAP_BEGIN() MSG_WM_PAINT_EX(OnPaint) MSG_WM_DESTROY(OnDestroy) MSG_WM_LBUTTONDOWN(OnLButtonDown) MSG_WM_MOUSEMOVE(OnMouseMove) MSG_WM_MOUSELEAVE(OnMouseLeave) MSG_WM_KEYDOWN(OnKeyDown) SOUI_MSG_MAP_END() \u548c\u771f\u7a97\u53e3\u7684\u6620\u5c04\u8868\u4f7f\u7528 WTL \u7684\u6620\u5c04\u5b8f\u4e0d\u4e00\u6837\uff0cSOUI \u7a97\u53e3\u7684\u6620\u5c04\u5b8f\u4f7f\u7528 SOUI_MSG_MAP_BEGIN \u548c SOUI_MSG_MAP_END \u6765\u6784\u9020\u6d88\u606f\u5904\u7406\u51fd\u6570\uff0c\u4f46\u662f\u6620\u5c04\u8868 \u4e2d\u7684\u6d88\u606f\u6620\u5c04\u9879\u57fa\u672c\u548c WTL \u7684\u6620\u5c04\u5f62\u5f0f\u662f\u4e00\u6837\u7684\uff08\u6ce8\u610f\u4e2a\u522b\u6d88\u606f\u662f\u7ecf\u8fc7\u91cd\u5b9a\u4e49\u7684\uff0c\u5178\u578b \u7684\u5982 WM_PAINT \u6d88\u606f\uff0c\u5728 SOUI \u4e2d\u9700\u8981\u4f7f\u7528 MSG_WM_PAINT_EX \u6765\u5904\u7406\uff09\u3002 \u25c6 SOUI \u7684\u4e8b\u4ef6\u673a\u5236 \u6b64\u5916 SOUI \u4e2d\u63a7\u4ef6\u8981\u53d1\u51fa\u4e8b\u4ef6\u4ea4\u7ed9\u5e94\u7528\u5c42\u5904\u7406\u4f7f\u7528\u7684\u662f\u4e00\u5957\u4e8b\u4ef6\u673a\u5236\u3002 \u6bcf\u4e00\u4e2a\u4e8b\u4ef6\u6709\u5bf9\u5e94\u4e00\u4e2a EventArg \u7c7b\uff0c\u4e8b\u4ef6\u5728\u63a7\u4ef6\u4e2d\u4f7f\u7528 FireEvent \u542f\u52a8\u4e8b\u4ef6\u8def\u7531\uff0c\u5e94\u7528 \u7a0b\u5e8f\u53ef\u4ee5\u5728\u4e8b\u4ef6\u54cd\u5e94\u6620\u5c04\u8868\u4e2d\u5bf9\u5404\u79cd\u4e8b\u4ef6\u7edf\u4e00\u5904\u7406\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 subscribeEvent \u6765\u76f4\u63a5 \u8ba2\u9605\u7279\u5b9a SOUI \u7a97\u53e3\u7684\u4e00\u4e2a\u4e8b\u4ef6\uff0c\u76f4\u63a5\u5c06\u4e8b\u4ef6\u4e0e\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u5173\u8054\u3002\u8fd9\u4e00\u90e8\u5206\u8bf7\u53c2\u8003\u524d\u9762 \u76f8\u5173\u7ae0\u8282\u3002","title":"4.12 \u5728 SOUI \u4e2d\u6d88\u606f\u901a\u8baf"},{"location":"Development/12/#412-soui","text":"SOUI \u662f\u4e00\u5957\u57fa\u4e8e Win32 SDK \u7684\u7a97\u53e3\u5f00\u53d1\u7684\u4e00\u5957 DirectUI \u6846\u67b6\u3002\u5728 SOUI \u4e2d\u9664\u4e86\u6709\u771f\u7a97 \u53e3\u4f7f\u7528\u7a97\u53e3\u6d88\u606f\u901a\u8baf\u673a\u5236\u5916\uff0c\u8fd8\u6709 SOUI \u63a7\u4ef6\u4e4b\u95f4\u7684\u901a\u8baf\uff0c\u53ca\u63a7\u4ef6\u7684\u4e8b\u4ef6\u5904\u7406\u7b49\u3002 \u25c6 \u771f\u7a97\u53e3\u6d88\u606f\u901a\u8baf \u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528::SendMessage \u8fd9\u4e2a API \u6765\u4e0e\u5bbf\u4e3b\u7a97\u53e3\u901a\u8baf\u3002\u5728\u4efb\u610f\u4e00\u4e2a\u5730\u65b9\u53ea\u8981\u83b7\u53d6\u5230\u4e86 SOUI \u7684\u5bbf\u4e3b\u7a97\u53e3\u53e5\u67c4\u5c31\u53ef\u4ee5\u5411\u8be5\u7a97\u53e3\u53d1\u6d88\u606f\u3002 \u53d1\u6d88\u606f\u4ee5\u540e\u53ef\u4ee5\u5728\u4e3b\u754c\u9762\u7684\u771f\u7a97\u53e3\u7684\u6d88\u606f\u6620\u5c04\u8868\u4e2d\u54cd\u5e94\u5404\u79cd\u81ea\u5b9a\u4e49\u6d88\u606f\uff08\u5982\u4e0b\uff09\uff1a #define WM_MYMSG (WM_USER+100) LRESULT OnMyMsg ( UINT uMsg , WPARAM wp , LPARAM lp , BOOL & bHandled ) { return 0 ; } //HOST \u6d88\u606f\u53ca\u54cd\u5e94\u51fd\u6570\u6620\u5c04\u8868 BEGIN_MSG_MAP_EX ( CMainDlg ) MESSAGE_HANDLER ( WM_MYMSG , OnMyMsg ) MSG_WM_CREATE ( OnCreate ) MSG_WM_INITDIALOG ( OnInitDialog ) MSG_WM_DESTROY ( OnDestory ) MSG_WM_CLOSE ( OnClose ) MSG_WM_SIZE ( OnSize ) MSG_WM_COMMAND ( OnCommand ) MSG_WM_SHOWWINDOW ( OnShowWindow ) CHAIN_MSG_MAP ( SHostWnd ) REFLECT_NOTIFICATIONS_EX () END_MSG_MAP () \u6ce8\u610f\u4e0a\u9762\u4ee3\u7801\u7684\u7ea2\u8272\u90e8\u5206\u3002\u6709 WTL \u5f00\u53d1\u7ecf\u9a8c\u7684\u670b\u53cb\u5e94\u8be5\u5df2\u7ecf\u770b\u51fa\u6765\u4e86\uff0cSOUI \u5904\u7406\u771f\u7a97\u53e3 \u6d88\u606f\u7684\u5f62\u5f0f\u548c WTL \u5b8c\u5168\u4e00\u6837\u3002 \u25c6 SOUI \u63a7\u4ef6\u901a\u8baf \u6211\u4eec\u77e5\u9053\uff0c\u5728 win32 \u7f16\u8bd1\u4e2d\uff0c\u8981\u4e0e\u4e00\u4e2a\u63a7\u4ef6\uff08\u7a97\u53e3\uff09\u901a\u8baf\u80fd\u7528 SendMessage(PostMessage)\u53d1\u9001\u4e00\u4e2a\u6d88\u606f\u7ed9\u76ee\u6807\u7a97\u53e3\uff0c\u76ee\u6807\u7a97\u53e3\u6536\u5230\u540e\u8fdb\u884c\u5904\u7406\u3002\u90a3 \u4e48\u95ee\u9898\u6765\u4e86\uff0c\u5982\u4f55\u5411\u4e00\u4e2a SOUI \u7a97\u53e3\u53d1\u6d88\u606f\uff1f SOUI \u7684\u7a97\u53e3\u7c7b\u548c MFC \u7684\u7a97\u53e3\u7c7b\u5f88\u50cf\uff0c\u548c MFC \u4f7f\u7528 SendMessage(PostMessage\uff09\u53d1 \u6d88\u606f\u7c7b\u4f3c\uff0c\u5728 SOUI \u4e2d\u4e5f\u53ef\u4ee5\u4f7f\u7528 SWindow::SSendMessage \u6765\u5411\u76ee\u6807\u7a97\u53e3\u53d1\u9001\u4e00\u4e2a\u6d88 \u606f\u6765\u901a\u8baf\uff0c\u4f46\u4e0d\u652f\u6301 PostMessage\uff0c\u76ee\u6807\u7a97\u53e3\u5728 SOUI \u7a97\u53e3\u7684\u6d88\u606f\u6620\u5c04\u8868\u4e2d\u54cd\u5e94\u53d1\u9001\u8fc7\u6765 \u7684\u6d88\u606f\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u5185\u7f6e\u63a7\u4ef6 STabCtrl \u7684\u6d88\u606f\u6620\u5c04\u8868\uff1a cpp SOUI_MSG_MAP_BEGIN() MSG_WM_PAINT_EX(OnPaint) MSG_WM_DESTROY(OnDestroy) MSG_WM_LBUTTONDOWN(OnLButtonDown) MSG_WM_MOUSEMOVE(OnMouseMove) MSG_WM_MOUSELEAVE(OnMouseLeave) MSG_WM_KEYDOWN(OnKeyDown) SOUI_MSG_MAP_END() \u548c\u771f\u7a97\u53e3\u7684\u6620\u5c04\u8868\u4f7f\u7528 WTL \u7684\u6620\u5c04\u5b8f\u4e0d\u4e00\u6837\uff0cSOUI \u7a97\u53e3\u7684\u6620\u5c04\u5b8f\u4f7f\u7528 SOUI_MSG_MAP_BEGIN \u548c SOUI_MSG_MAP_END \u6765\u6784\u9020\u6d88\u606f\u5904\u7406\u51fd\u6570\uff0c\u4f46\u662f\u6620\u5c04\u8868 \u4e2d\u7684\u6d88\u606f\u6620\u5c04\u9879\u57fa\u672c\u548c WTL \u7684\u6620\u5c04\u5f62\u5f0f\u662f\u4e00\u6837\u7684\uff08\u6ce8\u610f\u4e2a\u522b\u6d88\u606f\u662f\u7ecf\u8fc7\u91cd\u5b9a\u4e49\u7684\uff0c\u5178\u578b \u7684\u5982 WM_PAINT \u6d88\u606f\uff0c\u5728 SOUI \u4e2d\u9700\u8981\u4f7f\u7528 MSG_WM_PAINT_EX \u6765\u5904\u7406\uff09\u3002 \u25c6 SOUI \u7684\u4e8b\u4ef6\u673a\u5236 \u6b64\u5916 SOUI \u4e2d\u63a7\u4ef6\u8981\u53d1\u51fa\u4e8b\u4ef6\u4ea4\u7ed9\u5e94\u7528\u5c42\u5904\u7406\u4f7f\u7528\u7684\u662f\u4e00\u5957\u4e8b\u4ef6\u673a\u5236\u3002 \u6bcf\u4e00\u4e2a\u4e8b\u4ef6\u6709\u5bf9\u5e94\u4e00\u4e2a EventArg \u7c7b\uff0c\u4e8b\u4ef6\u5728\u63a7\u4ef6\u4e2d\u4f7f\u7528 FireEvent \u542f\u52a8\u4e8b\u4ef6\u8def\u7531\uff0c\u5e94\u7528 \u7a0b\u5e8f\u53ef\u4ee5\u5728\u4e8b\u4ef6\u54cd\u5e94\u6620\u5c04\u8868\u4e2d\u5bf9\u5404\u79cd\u4e8b\u4ef6\u7edf\u4e00\u5904\u7406\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 subscribeEvent \u6765\u76f4\u63a5 \u8ba2\u9605\u7279\u5b9a SOUI \u7a97\u53e3\u7684\u4e00\u4e2a\u4e8b\u4ef6\uff0c\u76f4\u63a5\u5c06\u4e8b\u4ef6\u4e0e\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u5173\u8054\u3002\u8fd9\u4e00\u90e8\u5206\u8bf7\u53c2\u8003\u524d\u9762 \u76f8\u5173\u7ae0\u8282\u3002","title":"4.12 \u5728 SOUI \u4e2d\u6d88\u606f\u901a\u8baf"},{"location":"Development/13/","text":"4.13 \u4f7f\u7528\u7a97\u53e3\u7684 cache \u5c5e\u6027\u52a0\u901f SOUI \u7684\u6e32\u67d3 \u00b6 \u5185\u5bb9\u6e32\u67d3\u901f\u5ea6\u662f\u51b3\u5b9a\u4e00\u4e2a UI \u6210\u8d25\u7684\u5173\u952e\u3002\u65e0\u8bba UI \u505a\u5f97\u591a\u534e\u4e3d\uff0c\u6ca1\u6709\u901f\u5ea6\u90fd\u6ca1\u6709\u610f\u4e49\u3002 \u5728 MFC\uff0cWTL \u7b49\u5f00\u53d1\u6846\u67b6\u4e0b\uff0c\u6bcf\u4e2a\u63a7\u4ef6\u90fd\u662f\u4e00\u4e2a\u7a97\u53e3\uff0c\u7a97\u53e3\u53ea\u9700\u8981\u753b\u524d\u666f\uff0c\u80cc\u666f\u3002\u56e0\u4e3a \u7a97\u53e3\u4e4b\u95f4\u7684\u5185\u5bb9\u4e0d\u9700\u8981\u505a\u6df7\u5408\uff0c\u4e00\u4e2a\u5b50\u7a97\u53e3\u7684\u4e00\u6b21\u5237\u65b0\u53ea\u6d89\u53ca\u8be5\u7a97\u53e3\u672c\u8eab\uff0c\u548c\u5176\u5b83\u7a97\u53e3\u65e0 \u5173\uff0c\u56e0\u6b64\u8fd9\u6837\u6548\u7387\u5f88\u9ad8\u3002\u4f46\u662f\u7f8e\u4e2d\u4e0d\u8db3\u5728\u4e8e\uff0c\u7a97\u53e3\u4e4b\u95f4\u5185\u5bb9\u662f\u5b64\u7acb\u7684\uff0c\u8981\u60f3\u4e0d\u540c\u7a97\u53e3\u4e4b\u95f4 \u7684\u5185\u5bb9\u66f4\u534f\u8c03\uff0c\u5bf9\u7f8e\u672f\u6709\u5f88\u9ad8\u7684\u8981\u6c42\uff0c\u540c\u65f6\u4e5f\u57fa\u672c\u53ea\u80fd\u9002\u5e94\u4e2a\u522b\u7a97\u53e3\u5927\u5c0f\u76f8\u5bf9\u56fa\u5b9a\u7684\u573a \u666f\u3002 \u8981\u4f7f UI \u66f4\u52a0\u6f02\u4eae\uff0c\u6700\u7b80\u5355\u6709\u6548\u7684\u65b9\u6cd5\u5c31\u662f\u91c7\u7528 alpha \u6df7\u5408\u7684\u65b9\u5f0f\u5c06\u5404\u5c42\u7684\u7a97\u53e3\u76f8\u4e92\u6df7 \u5408\uff0c\u8fd9\u6837\u7a97\u53e3\u4e4b\u95f4\u6ca1\u6709\u4e86\u8fb9\u754c\u7684\u611f\u89c9\uff0c\u4ece\u800c\u4f7f\u5f97 UI \u66f4\u50cf\u4e00\u4e2a\u6574\u4f53\uff0c\u8fd9\u4e5f\u662f\u73b0\u4ee3 UI \u7684\u4e3b\u8981 \u5b9e\u73b0\u65b9\u5f0f\u3002 \u60f3\u50cf\u4e00\u4e0b\uff0c\u5982\u679c\u4e00\u4e2a\u6700\u4e0a\u5c42\u7684\u5b50\u7a97\u53e3\u5185\u5bb9\u53d1\u751f\u4e86\u53d8\u5316\uff0cUI \u7cfb\u7edf\u5982\u4f55\u628a\u7a97\u53e3\u5185\u5bb9\u7ed8\u5236\u51fa\u6765 \u5462\uff1f \u9996\u5148\u9700\u8981\u901a\u77e5 UI \u7cfb\u7edf\u7684\u6e32\u67d3\u5bf9\u8c61\u8bf4\u6211\u7684\u7a97\u53e3\u663e\u793a\u533a\u57df\u5185\u5bb9\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u8bf7\u6c42\u91cd\u7ed8\u3002 UI \u7cfb\u7edf\u62ff\u5230\u6e32\u67d3\u5bf9\u8c61\u540e\uff0c\u5bf9\u6e32\u67d3\u8303\u56f4\u8bbe\u5b9a\u526a\u88c1\u533a\uff08clip\uff09\uff0c\u9632\u6b62\u5237\u65b0\u90a3\u4e9b\u4e0d\u9700\u8981\u91cd\u7ed8\u7684\u533a \u57df\u3002 UI \u7cfb\u7edf\u4ece\u6700\u9876\u5c42\u7684\u7a97\u53e3\u5f00\u59cb\u4f9d\u6b21\u7ed8\u5236\u6bcf\u4e00\u5c42\u7684\u548c\u526a\u88c1\u533a\u91cd\u53e0\u7684\u7a97\u53e3\u7684\u5185\u5bb9\uff08\u4e0d\u540c\u7a97\u53e3\u4e4b\u95f4 \u7ed8\u5236\u5185\u5bb9\u7684\u6df7\u5408\u7531\u7ed8\u5236\u65b9\u6cd5\u5b9a\u4e49\uff0c\u4f8b\u5982\u56fe\u7247\u53ef\u80fd\u662f\u5229\u7528 alpha \u901a\u9053\uff09\u3002 \u4e3a\u4e86\u9632\u6b62\u7ed8\u5236\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u95ea\u70c1\uff0c\u4e00\u822c\u4e0a\u9762\u7ed8\u5236\u90fd\u662f\u5728\u4e00\u4e2a\u5185\u5b58\u7ed8\u56fe\u8bbe\u5907\uff08\u5982\u5185\u5b58 DC\uff09\u4e0a \u8fdb\u884c\u3002\u5728\u5168\u90e8\u7ed8\u5236\u5b8c\u6210\u540e\uff0c\u5c06\u7ed8\u5236\u5185\u5bb9\u518d\u5448\u73b0\u5230\u5c4f\u5e55\u3002 \u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff1a\u4e00\u822c\u5b50\u7a97\u53e3\u4f1a\u6bd4\u7236\u7a97\u53e3\u5c0f\uff0c\u5b50\u7a97\u53e3\u8bf7\u6c42\u91cd\u7ed8\u65f6\uff0c\u8981\u6267\u884c\u7236\u7a97\u53e3\u7684\u7ed8\u5236\u51fd \u6570\uff0c\u5982\u679c\u7236\u7a97\u53e3\u6ca1\u6709\u6839\u636e\u5f53\u524d\u7684\u526a\u88c1\u8303\u56f4\u6765\u786e\u5b9a\u81ea\u5df1\u7684\u7ed8\u5236\u8303\u56f4\uff0c\u90a3\u4e48\u5c3d\u7ba1\u6709\u526a\u88c1\u533a\u9650\u5236 \u4e86\u4e0d\u4f1a\u7ed8\u5236\u8d85\u51fa\u8fb9\u754c\uff0c\u5728\u5b9e\u9645\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u8d85\u51fa\u526a\u88c1\u533a\u7684\u7ed8\u5236\u884c\u4e3a\u4e5f\u53ef\u80fd\u6781\u5927\u7684\u5f71\u54cd UI \u7684 \u6027\u80fd\u3002 \u5982\u4f55\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\uff1f \u89e3\u51b3\u7684\u65b9\u6cd5\u53ef\u4ee5\u6709\u5f88\u591a\uff0c\u6bd4\u5982\u5728\u6bcf\u4e2a\u7a97\u53e3\u7684\u7ed8\u5236\u65b9\u6cd5\u90fd\u5b9e\u73b0\u53ea\u7ed8\u5236\u5728\u526a\u88c1\u533a\u7684\u90a3\u90e8\u5206\uff08\u5b9e \u9645\u4e0a\u5b9e\u73b0\u8d77\u6765\u975e\u5e38\u9ebb\u70e6\uff0c\u9644\u52a0\u7684\u526a\u88c1\u533a\u8ba1\u7b97\u4e5f\u53ef\u80fd\u6210\u4e3a\u65b0\u7684\u7ed8\u5236\u74f6\u9888\uff09\uff1b\u53c8\u6bd4\u5982\u6bcf\u4e2a\u7a97\u53e3 \u90fd\u4fdd\u7559\u80cc\u666f\u7a97\u53e3\u7684\u5185\u5bb9\uff0c\u5f53\u7a97\u53e3\u9700\u8981\u5237\u65b0\u65f6\uff0c\u76f4\u63a5\u76f4\u63a5\u628a\u80cc\u666f\u5185\u5bb9\u62ff\u8fc7\u6765\u5728\u4e0a\u9762\u753b\u3002 \u7b2c\u4e8c\u79cd\u65b9\u6cd5\u770b\u8d77\u6765\u6548\u7387\u662f\u6700\u9ad8\u7684\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u53ef\u80fd\u5e76\u4e0d\u9ad8\uff1a\u867d\u7136\u5728\u7ed8\u5236\u81ea\u5df1\u7684\u5185\u5bb9\u65f6\u901f\u5ea6 \u5feb\u4e86\uff0c\u95ee\u9898\u662f\u81ea\u5df1\u66f4\u65b0\u4ee5\u540e\uff0c\u8fd8\u9700\u8981\u540c\u65f6\u66f4\u65b0\u5b83\u7684\u4e0a\u5c42\u7a97\u53e3\u7684\u7f13\u5b58\uff0c\u53ef\u80fd\u5bfc\u81f4\u5185\u5b58\u5f00\u9500 \u5927\uff0c\u6548\u7387\u4e5f\u4e0d\u9ad8\u3002 \u5728 SOUI \u4e2d\uff0c\u6211\u4eec\u91c7\u7528\u4e86\u7b2c\u4e09\u79cd\u65b9\u6cd5\uff1a\u7ed9\u7a97\u53e3\u52a0\u4e00\u4e2a cache \u5c5e\u6027\u3002 \u5f53 cache=0 \u65f6\uff0c\u7a97\u53e3\u7684\u7ed8\u5236\u548c\u524d\u9762\u63d0\u5230\u7684\u6d41\u7a0b\u4e00\u6837\uff0c\u53ea\u662f\u5982\u679c\u7a97\u53e3\u6bd4\u8f83\u5927\uff0c\u800c\u9700\u8981\u4e00\u65f6 \u534a\u4f1a\u7684\u533a\u57df\u6bd4\u8f83\u5c0f\u65f6\uff0c\u901f\u5ea6\u6162\u4e00\u70b9\u3002 \u5982\u679c cache=1\uff0c\u5219\u7a97\u53e3\u7ed8\u5236\u7684\u5185\u5bb9\u4f1a\u88ab\u4fdd\u5b58\u5230\u4e00\u5f20\u7f13\u5b58\u4f4d\u56fe\u4e0a\uff0c\u5f53\u5176\u5b83\u7a97\u53e3\u5237\u65b0\u5e76\u5bfc\u81f4\u8be5 \u7a97\u53e3\u91cd\u7ed8\u65f6\uff0c\u76f4\u63a5\u4ece\u7f13\u5b58\u4e2d\u590d\u5236\u51fa\u6765\u5c31\u53ef\u4ee5\u4e86\u3002 \u5047\u5b9a\u4e00\u4e2a\u7a97\u53e3\u4f7f\u7528\u4e00\u5f20\u5c0f\u56fe\u7247\u8fdb\u884c\u4e5d\u5bab\u683c\u62c9\u4f38\u7ed8\u5236\u51fa\u6765\uff0c\u7ed8\u5236\u6574\u4e2a\u7a97\u53e3\u7531\u4e8e\u62c9\u4f38\u4e2d\u7684\u63d2\u503c \u7b49\u4e00\u7cfb\u5217\u7684\u8ba1\u7b97\uff0c\u7ed8\u5236\u53ef\u80fd\u9700\u8981\u6d88\u8017\u5927\u91cf\u7684 CPU \u65f6\u95f4\uff0c\u800c\u6709\u4e86\u7f13\u5b58\u4ee5\u540e\uff0c\u53ea\u5728\u7b2c\u4e00\u6b21\u7ed8\u5236 \u7684\u65f6\u5019\u4f7f\u7528\u56fe\u7247\u7ed8\u5236\u65b9\u6cd5\u8fdb\u884c\u7ed8\u5236\uff0c\u5176\u5b83\u65f6\u95f4\u90fd\u662f\u76f4\u63a5\u4ece\u7f13\u5b58\u590d\u5236\uff0c\u6548\u7387\u80fd\u591f\u6781\u5927\u7684\u63d0 \u9ad8\u3002 \u5f88\u663e\u7136\uff0ccache \u5c5e\u6027\u5728\u63d0\u9ad8\u6e32\u67d3\u6548\u7387\u7684\u540c\u65f6\uff0c\u4e5f\u9700\u8981\u5f00\u8f9f\u4e00\u5757\u7f13\u5b58\u6765\u4fdd\u5b58\u7ed8\u5236\u5185\u5bb9\uff0c\u4e5f\u5c31 \u662f\u5e38\u89c1\u7684\u7a7a\u95f4\u6362\u65f6\u95f4\u7684\u65b9\u6cd5\u3002\u56e0\u6b64\u5982\u679c\u7ed8\u5236\u672c\u8eab\u901f\u5ea6\u5c31\u8db3\u591f\u5feb\uff0c\u90a3\u4e48\u5b8c\u5168\u53ef\u4ee5\u4e0d\u4f7f\u7528\u7f13\u5b58 \uff08\u6bd4\u5982\u7ed9\u4e00\u4e2a\u7a97\u53e3\u586b\u5145\u4e00\u4e2a\u7eaf\u8272\u7684\u77e9\u5f62\uff09\u3002 \u603b\u7ed3\uff1a cache \u53ef\u4ee5\u63d0\u9ad8\u7ed8\u5236\u901f\u5ea6\uff0c\u4f46\u662f\u662f\u4ee5\u66f4\u9ad8\u7684\u5185\u5b58\u5360\u7528\u4e3a\u4ee3\u4ef7\u7684\uff0c\u5e94\u8be5\u53ea\u5728\u9700\u8981\u7684\u5730\u65b9\u4f7f\u7528 \uff08\u4f8b\u5982\u9876\u5c42\u80cc\u666f\u7a97\u53e3\uff09\u3002","title":"4.13 \u4f7f\u7528\u7a97\u53e3\u7684 cache \u5c5e\u6027\u52a0\u901f SOUI \u7684\u6e32\u67d3"},{"location":"Development/13/#413-cache-soui","text":"\u5185\u5bb9\u6e32\u67d3\u901f\u5ea6\u662f\u51b3\u5b9a\u4e00\u4e2a UI \u6210\u8d25\u7684\u5173\u952e\u3002\u65e0\u8bba UI \u505a\u5f97\u591a\u534e\u4e3d\uff0c\u6ca1\u6709\u901f\u5ea6\u90fd\u6ca1\u6709\u610f\u4e49\u3002 \u5728 MFC\uff0cWTL \u7b49\u5f00\u53d1\u6846\u67b6\u4e0b\uff0c\u6bcf\u4e2a\u63a7\u4ef6\u90fd\u662f\u4e00\u4e2a\u7a97\u53e3\uff0c\u7a97\u53e3\u53ea\u9700\u8981\u753b\u524d\u666f\uff0c\u80cc\u666f\u3002\u56e0\u4e3a \u7a97\u53e3\u4e4b\u95f4\u7684\u5185\u5bb9\u4e0d\u9700\u8981\u505a\u6df7\u5408\uff0c\u4e00\u4e2a\u5b50\u7a97\u53e3\u7684\u4e00\u6b21\u5237\u65b0\u53ea\u6d89\u53ca\u8be5\u7a97\u53e3\u672c\u8eab\uff0c\u548c\u5176\u5b83\u7a97\u53e3\u65e0 \u5173\uff0c\u56e0\u6b64\u8fd9\u6837\u6548\u7387\u5f88\u9ad8\u3002\u4f46\u662f\u7f8e\u4e2d\u4e0d\u8db3\u5728\u4e8e\uff0c\u7a97\u53e3\u4e4b\u95f4\u5185\u5bb9\u662f\u5b64\u7acb\u7684\uff0c\u8981\u60f3\u4e0d\u540c\u7a97\u53e3\u4e4b\u95f4 \u7684\u5185\u5bb9\u66f4\u534f\u8c03\uff0c\u5bf9\u7f8e\u672f\u6709\u5f88\u9ad8\u7684\u8981\u6c42\uff0c\u540c\u65f6\u4e5f\u57fa\u672c\u53ea\u80fd\u9002\u5e94\u4e2a\u522b\u7a97\u53e3\u5927\u5c0f\u76f8\u5bf9\u56fa\u5b9a\u7684\u573a \u666f\u3002 \u8981\u4f7f UI \u66f4\u52a0\u6f02\u4eae\uff0c\u6700\u7b80\u5355\u6709\u6548\u7684\u65b9\u6cd5\u5c31\u662f\u91c7\u7528 alpha \u6df7\u5408\u7684\u65b9\u5f0f\u5c06\u5404\u5c42\u7684\u7a97\u53e3\u76f8\u4e92\u6df7 \u5408\uff0c\u8fd9\u6837\u7a97\u53e3\u4e4b\u95f4\u6ca1\u6709\u4e86\u8fb9\u754c\u7684\u611f\u89c9\uff0c\u4ece\u800c\u4f7f\u5f97 UI \u66f4\u50cf\u4e00\u4e2a\u6574\u4f53\uff0c\u8fd9\u4e5f\u662f\u73b0\u4ee3 UI \u7684\u4e3b\u8981 \u5b9e\u73b0\u65b9\u5f0f\u3002 \u60f3\u50cf\u4e00\u4e0b\uff0c\u5982\u679c\u4e00\u4e2a\u6700\u4e0a\u5c42\u7684\u5b50\u7a97\u53e3\u5185\u5bb9\u53d1\u751f\u4e86\u53d8\u5316\uff0cUI \u7cfb\u7edf\u5982\u4f55\u628a\u7a97\u53e3\u5185\u5bb9\u7ed8\u5236\u51fa\u6765 \u5462\uff1f \u9996\u5148\u9700\u8981\u901a\u77e5 UI \u7cfb\u7edf\u7684\u6e32\u67d3\u5bf9\u8c61\u8bf4\u6211\u7684\u7a97\u53e3\u663e\u793a\u533a\u57df\u5185\u5bb9\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u8bf7\u6c42\u91cd\u7ed8\u3002 UI \u7cfb\u7edf\u62ff\u5230\u6e32\u67d3\u5bf9\u8c61\u540e\uff0c\u5bf9\u6e32\u67d3\u8303\u56f4\u8bbe\u5b9a\u526a\u88c1\u533a\uff08clip\uff09\uff0c\u9632\u6b62\u5237\u65b0\u90a3\u4e9b\u4e0d\u9700\u8981\u91cd\u7ed8\u7684\u533a \u57df\u3002 UI \u7cfb\u7edf\u4ece\u6700\u9876\u5c42\u7684\u7a97\u53e3\u5f00\u59cb\u4f9d\u6b21\u7ed8\u5236\u6bcf\u4e00\u5c42\u7684\u548c\u526a\u88c1\u533a\u91cd\u53e0\u7684\u7a97\u53e3\u7684\u5185\u5bb9\uff08\u4e0d\u540c\u7a97\u53e3\u4e4b\u95f4 \u7ed8\u5236\u5185\u5bb9\u7684\u6df7\u5408\u7531\u7ed8\u5236\u65b9\u6cd5\u5b9a\u4e49\uff0c\u4f8b\u5982\u56fe\u7247\u53ef\u80fd\u662f\u5229\u7528 alpha \u901a\u9053\uff09\u3002 \u4e3a\u4e86\u9632\u6b62\u7ed8\u5236\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u95ea\u70c1\uff0c\u4e00\u822c\u4e0a\u9762\u7ed8\u5236\u90fd\u662f\u5728\u4e00\u4e2a\u5185\u5b58\u7ed8\u56fe\u8bbe\u5907\uff08\u5982\u5185\u5b58 DC\uff09\u4e0a \u8fdb\u884c\u3002\u5728\u5168\u90e8\u7ed8\u5236\u5b8c\u6210\u540e\uff0c\u5c06\u7ed8\u5236\u5185\u5bb9\u518d\u5448\u73b0\u5230\u5c4f\u5e55\u3002 \u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff1a\u4e00\u822c\u5b50\u7a97\u53e3\u4f1a\u6bd4\u7236\u7a97\u53e3\u5c0f\uff0c\u5b50\u7a97\u53e3\u8bf7\u6c42\u91cd\u7ed8\u65f6\uff0c\u8981\u6267\u884c\u7236\u7a97\u53e3\u7684\u7ed8\u5236\u51fd \u6570\uff0c\u5982\u679c\u7236\u7a97\u53e3\u6ca1\u6709\u6839\u636e\u5f53\u524d\u7684\u526a\u88c1\u8303\u56f4\u6765\u786e\u5b9a\u81ea\u5df1\u7684\u7ed8\u5236\u8303\u56f4\uff0c\u90a3\u4e48\u5c3d\u7ba1\u6709\u526a\u88c1\u533a\u9650\u5236 \u4e86\u4e0d\u4f1a\u7ed8\u5236\u8d85\u51fa\u8fb9\u754c\uff0c\u5728\u5b9e\u9645\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u8d85\u51fa\u526a\u88c1\u533a\u7684\u7ed8\u5236\u884c\u4e3a\u4e5f\u53ef\u80fd\u6781\u5927\u7684\u5f71\u54cd UI \u7684 \u6027\u80fd\u3002 \u5982\u4f55\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\uff1f \u89e3\u51b3\u7684\u65b9\u6cd5\u53ef\u4ee5\u6709\u5f88\u591a\uff0c\u6bd4\u5982\u5728\u6bcf\u4e2a\u7a97\u53e3\u7684\u7ed8\u5236\u65b9\u6cd5\u90fd\u5b9e\u73b0\u53ea\u7ed8\u5236\u5728\u526a\u88c1\u533a\u7684\u90a3\u90e8\u5206\uff08\u5b9e \u9645\u4e0a\u5b9e\u73b0\u8d77\u6765\u975e\u5e38\u9ebb\u70e6\uff0c\u9644\u52a0\u7684\u526a\u88c1\u533a\u8ba1\u7b97\u4e5f\u53ef\u80fd\u6210\u4e3a\u65b0\u7684\u7ed8\u5236\u74f6\u9888\uff09\uff1b\u53c8\u6bd4\u5982\u6bcf\u4e2a\u7a97\u53e3 \u90fd\u4fdd\u7559\u80cc\u666f\u7a97\u53e3\u7684\u5185\u5bb9\uff0c\u5f53\u7a97\u53e3\u9700\u8981\u5237\u65b0\u65f6\uff0c\u76f4\u63a5\u76f4\u63a5\u628a\u80cc\u666f\u5185\u5bb9\u62ff\u8fc7\u6765\u5728\u4e0a\u9762\u753b\u3002 \u7b2c\u4e8c\u79cd\u65b9\u6cd5\u770b\u8d77\u6765\u6548\u7387\u662f\u6700\u9ad8\u7684\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u53ef\u80fd\u5e76\u4e0d\u9ad8\uff1a\u867d\u7136\u5728\u7ed8\u5236\u81ea\u5df1\u7684\u5185\u5bb9\u65f6\u901f\u5ea6 \u5feb\u4e86\uff0c\u95ee\u9898\u662f\u81ea\u5df1\u66f4\u65b0\u4ee5\u540e\uff0c\u8fd8\u9700\u8981\u540c\u65f6\u66f4\u65b0\u5b83\u7684\u4e0a\u5c42\u7a97\u53e3\u7684\u7f13\u5b58\uff0c\u53ef\u80fd\u5bfc\u81f4\u5185\u5b58\u5f00\u9500 \u5927\uff0c\u6548\u7387\u4e5f\u4e0d\u9ad8\u3002 \u5728 SOUI \u4e2d\uff0c\u6211\u4eec\u91c7\u7528\u4e86\u7b2c\u4e09\u79cd\u65b9\u6cd5\uff1a\u7ed9\u7a97\u53e3\u52a0\u4e00\u4e2a cache \u5c5e\u6027\u3002 \u5f53 cache=0 \u65f6\uff0c\u7a97\u53e3\u7684\u7ed8\u5236\u548c\u524d\u9762\u63d0\u5230\u7684\u6d41\u7a0b\u4e00\u6837\uff0c\u53ea\u662f\u5982\u679c\u7a97\u53e3\u6bd4\u8f83\u5927\uff0c\u800c\u9700\u8981\u4e00\u65f6 \u534a\u4f1a\u7684\u533a\u57df\u6bd4\u8f83\u5c0f\u65f6\uff0c\u901f\u5ea6\u6162\u4e00\u70b9\u3002 \u5982\u679c cache=1\uff0c\u5219\u7a97\u53e3\u7ed8\u5236\u7684\u5185\u5bb9\u4f1a\u88ab\u4fdd\u5b58\u5230\u4e00\u5f20\u7f13\u5b58\u4f4d\u56fe\u4e0a\uff0c\u5f53\u5176\u5b83\u7a97\u53e3\u5237\u65b0\u5e76\u5bfc\u81f4\u8be5 \u7a97\u53e3\u91cd\u7ed8\u65f6\uff0c\u76f4\u63a5\u4ece\u7f13\u5b58\u4e2d\u590d\u5236\u51fa\u6765\u5c31\u53ef\u4ee5\u4e86\u3002 \u5047\u5b9a\u4e00\u4e2a\u7a97\u53e3\u4f7f\u7528\u4e00\u5f20\u5c0f\u56fe\u7247\u8fdb\u884c\u4e5d\u5bab\u683c\u62c9\u4f38\u7ed8\u5236\u51fa\u6765\uff0c\u7ed8\u5236\u6574\u4e2a\u7a97\u53e3\u7531\u4e8e\u62c9\u4f38\u4e2d\u7684\u63d2\u503c \u7b49\u4e00\u7cfb\u5217\u7684\u8ba1\u7b97\uff0c\u7ed8\u5236\u53ef\u80fd\u9700\u8981\u6d88\u8017\u5927\u91cf\u7684 CPU \u65f6\u95f4\uff0c\u800c\u6709\u4e86\u7f13\u5b58\u4ee5\u540e\uff0c\u53ea\u5728\u7b2c\u4e00\u6b21\u7ed8\u5236 \u7684\u65f6\u5019\u4f7f\u7528\u56fe\u7247\u7ed8\u5236\u65b9\u6cd5\u8fdb\u884c\u7ed8\u5236\uff0c\u5176\u5b83\u65f6\u95f4\u90fd\u662f\u76f4\u63a5\u4ece\u7f13\u5b58\u590d\u5236\uff0c\u6548\u7387\u80fd\u591f\u6781\u5927\u7684\u63d0 \u9ad8\u3002 \u5f88\u663e\u7136\uff0ccache \u5c5e\u6027\u5728\u63d0\u9ad8\u6e32\u67d3\u6548\u7387\u7684\u540c\u65f6\uff0c\u4e5f\u9700\u8981\u5f00\u8f9f\u4e00\u5757\u7f13\u5b58\u6765\u4fdd\u5b58\u7ed8\u5236\u5185\u5bb9\uff0c\u4e5f\u5c31 \u662f\u5e38\u89c1\u7684\u7a7a\u95f4\u6362\u65f6\u95f4\u7684\u65b9\u6cd5\u3002\u56e0\u6b64\u5982\u679c\u7ed8\u5236\u672c\u8eab\u901f\u5ea6\u5c31\u8db3\u591f\u5feb\uff0c\u90a3\u4e48\u5b8c\u5168\u53ef\u4ee5\u4e0d\u4f7f\u7528\u7f13\u5b58 \uff08\u6bd4\u5982\u7ed9\u4e00\u4e2a\u7a97\u53e3\u586b\u5145\u4e00\u4e2a\u7eaf\u8272\u7684\u77e9\u5f62\uff09\u3002 \u603b\u7ed3\uff1a cache \u53ef\u4ee5\u63d0\u9ad8\u7ed8\u5236\u901f\u5ea6\uff0c\u4f46\u662f\u662f\u4ee5\u66f4\u9ad8\u7684\u5185\u5b58\u5360\u7528\u4e3a\u4ee3\u4ef7\u7684\uff0c\u5e94\u8be5\u53ea\u5728\u9700\u8981\u7684\u5730\u65b9\u4f7f\u7528 \uff08\u4f8b\u5982\u9876\u5c42\u80cc\u666f\u7a97\u53e3\uff09\u3002","title":"4.13 \u4f7f\u7528\u7a97\u53e3\u7684 cache \u5c5e\u6027\u52a0\u901f SOUI \u7684\u6e32\u67d3"},{"location":"Development/14/","text":"4.14 \u5728 SOUI \u4e2d\u5b9e\u73b0 PreTranslateMessage \u00b6 \u5728 MFC \u4e2d\uff0c\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u91cd\u8f7d CWnd::PreTranslateMessage \u8fd9\u6837\u4e00\u4e2a\u865a\u51fd\u6570\u6765\u5b9e\u73b0\u5bf9 \u4e00\u4e9b\u7a97\u53e3\u6d88\u606f\u7684\u9884\u5904\u7406\u3002\u591a\u7528\u4e8e tooltip \u7684\u663e\u793a\u63a7\u5236\u3002 \u5728 SOUI \u4e2d\u4e5f\u5b9e\u73b0\u4e86\u7c7b\u4f3c\u7684\u673a\u5236\u3002 \u8981\u5728 SOUI \u4e2d\u5b9e\u73b0 PreTranslateMessage\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u63a5\u53e3\uff1a struct IMessageFilter { virtual BOOL PreTranslateMessage ( MSG * pMsg ) = 0 ; }; \u53ef\u4ee5\u770b\u51fa\uff0c\u5b9e\u73b0\u8fd9\u4e2a\u63a5\u53e3\u548c\u5728 MFC \u4e2d\u91cd\u8f7d PreTranslateMessage \u662f\u76f8\u540c\u7684\u9053\u7406\u3002 \u548c MFC \u4e2d\u53ea\u9700\u8981\u91cd\u8f7d\u8fd9\u4e2a\u63a5\u53e3\u4e0d\u540c\uff0c\u5728 SOUI \u4e2d\uff0c\u9664\u4e86\u9700\u8981\u5b9e\u73b0 IMessageFilter \u5916\uff0c\u8fd8 \u9700\u8981\u5411\u5f53\u524d\u7684 MessageLoop \u6ce8\u518c\u8be5 IMessageFilter\u3002 class SOUI_EXP SMessageLoop { public : SArray < IMessageFilter *> m_aMsgFilter ; // Message filter operations BOOL AddMessageFilter ( IMessageFilter * pMessageFilter ); BOOL RemoveMessageFilter ( IMessageFilter * pMessageFilter ); //... }; ``` \u4e0a\u9762\u662f SMessageLoop \u4e24\u4e2a\u548c IMessageFilter \u76f8\u5173\u7684\u65b9\u6cd5\u3002 SMessageLoop :: AddMessageFilter \u5411\u5f53\u524d\u7684 message loop \u6ce8\u518c\u4e00\u4e2a IMessageFilter \uff1b SMessageLoop :: RemoveMessageFilter \u5219\u5411\u5f53\u524d\u7684 message loop \u6ce8\u9500\u4e00\u4e2a IMessageFilter \u5269\u4e0b\u7684\u95ee\u9898\u5c31\u662f\u5982\u4f55\u83b7\u5f97\u5f53\u524d\u7684 MessageLoop \u4e86\u3002 \u5728 SHostWnd \u6216\u8005 SHostDialog \u4e2d\u53ef\u4ee5\u8c03\u7528 SHostWnd :: GetMsgLoop () \u65b9\u6cd5\u83b7\u5f97\u3002 \u5728 SWindow \u4e2d\uff0c\u5219\u53ef\u4ee5\u8c03\u7528 SWindow :: GetContainer () -> GetMsgLoop () \u83b7\u5f97\u3002 \u4f7f\u7528\u793a\u4f8b\u53ef\u4ee5\u53c2\u8003 SDropDownWnd \u7684\u5b9e\u73b0\u3002 ``` cpp class SOUI_EXP SDropDownWnd : public SHostWnd , public IMessageFilter { //... };","title":"4.14 \u5728 SOUI \u4e2d\u5b9e\u73b0 PreTranslateMessage"},{"location":"Development/14/#414-soui-pretranslatemessage","text":"\u5728 MFC \u4e2d\uff0c\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u91cd\u8f7d CWnd::PreTranslateMessage \u8fd9\u6837\u4e00\u4e2a\u865a\u51fd\u6570\u6765\u5b9e\u73b0\u5bf9 \u4e00\u4e9b\u7a97\u53e3\u6d88\u606f\u7684\u9884\u5904\u7406\u3002\u591a\u7528\u4e8e tooltip \u7684\u663e\u793a\u63a7\u5236\u3002 \u5728 SOUI \u4e2d\u4e5f\u5b9e\u73b0\u4e86\u7c7b\u4f3c\u7684\u673a\u5236\u3002 \u8981\u5728 SOUI \u4e2d\u5b9e\u73b0 PreTranslateMessage\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u63a5\u53e3\uff1a struct IMessageFilter { virtual BOOL PreTranslateMessage ( MSG * pMsg ) = 0 ; }; \u53ef\u4ee5\u770b\u51fa\uff0c\u5b9e\u73b0\u8fd9\u4e2a\u63a5\u53e3\u548c\u5728 MFC \u4e2d\u91cd\u8f7d PreTranslateMessage \u662f\u76f8\u540c\u7684\u9053\u7406\u3002 \u548c MFC \u4e2d\u53ea\u9700\u8981\u91cd\u8f7d\u8fd9\u4e2a\u63a5\u53e3\u4e0d\u540c\uff0c\u5728 SOUI \u4e2d\uff0c\u9664\u4e86\u9700\u8981\u5b9e\u73b0 IMessageFilter \u5916\uff0c\u8fd8 \u9700\u8981\u5411\u5f53\u524d\u7684 MessageLoop \u6ce8\u518c\u8be5 IMessageFilter\u3002 class SOUI_EXP SMessageLoop { public : SArray < IMessageFilter *> m_aMsgFilter ; // Message filter operations BOOL AddMessageFilter ( IMessageFilter * pMessageFilter ); BOOL RemoveMessageFilter ( IMessageFilter * pMessageFilter ); //... }; ``` \u4e0a\u9762\u662f SMessageLoop \u4e24\u4e2a\u548c IMessageFilter \u76f8\u5173\u7684\u65b9\u6cd5\u3002 SMessageLoop :: AddMessageFilter \u5411\u5f53\u524d\u7684 message loop \u6ce8\u518c\u4e00\u4e2a IMessageFilter \uff1b SMessageLoop :: RemoveMessageFilter \u5219\u5411\u5f53\u524d\u7684 message loop \u6ce8\u9500\u4e00\u4e2a IMessageFilter \u5269\u4e0b\u7684\u95ee\u9898\u5c31\u662f\u5982\u4f55\u83b7\u5f97\u5f53\u524d\u7684 MessageLoop \u4e86\u3002 \u5728 SHostWnd \u6216\u8005 SHostDialog \u4e2d\u53ef\u4ee5\u8c03\u7528 SHostWnd :: GetMsgLoop () \u65b9\u6cd5\u83b7\u5f97\u3002 \u5728 SWindow \u4e2d\uff0c\u5219\u53ef\u4ee5\u8c03\u7528 SWindow :: GetContainer () -> GetMsgLoop () \u83b7\u5f97\u3002 \u4f7f\u7528\u793a\u4f8b\u53ef\u4ee5\u53c2\u8003 SDropDownWnd \u7684\u5b9e\u73b0\u3002 ``` cpp class SOUI_EXP SDropDownWnd : public SHostWnd , public IMessageFilter { //... };","title":"4.14 \u5728 SOUI \u4e2d\u5b9e\u73b0 PreTranslateMessage"},{"location":"Development/15/","text":"4.15 \u63d0\u9ad8 SOUI \u5e94\u7528\u7a0b\u5e8f\u6e32\u67d3\u6027\u80fd\u7684\u4e09\u79cd\u6b66\u5668 \u00b6 SOUI \u662f\u4e00\u5957 100%\u5f00\u6e90\u7684\u57fa\u4e8e DirectUI \u7684\u5ba2\u6237\u7aef\u5f00\u53d1\u6846\u67b6\u3002 \u57fa\u4e8e DirectUI \u8bbe\u8ba1\u7684 UI \u867d\u7136 UI \u5448\u73b0\u7684\u6548\u679c\u53ef\u4ee5\u5f88\u70ab\uff0c\u4f46\u662f\u76f8\u5bf9\u4e8e\u4f20\u7edf\u7684 win32 \u5e94\u7528\u7a0b \u5e8f\u4e2d\u6bcf\u4e2a\u63a7\u4ef6\u4e00\u4e2a\u7a97\u53e3\u53e5\u67c4\u7684\u5f62\u5f0f\uff0c\u6e32\u67d3\u6548\u7387\u662f\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u95ee\u9898\u3002 \u5728 SOUI \u7cfb\u7edf\u4e2d\u63d0\u4f9b\u4e86\u4e09\u79cd\u6b66\u5668\u53ef\u4ee5\u7528\u6765\u63d0\u9ad8\u6e32\u67d3\u6548\u7387\uff1a \u7b2c\u4e00\u79cd\u6b66\u5668\uff1a\u9009\u62e9\u66f4\u9ad8\u6548\u7684\u6e32\u67d3\u5f15\u64ce \u6e32\u67d3\u5f15\u64ce\u63d0\u4f9b\u6587\u5b57\uff0c\u51e0\u4f55\u56fe\u5f62\uff0c\u56fe\u50cf\u7684\u5728\u7f13\u5b58\u4e0a\u7684\u7ed8\u5236\u529f\u80fd\u3002\u5728 SOUI \u7cfb\u7edf\u4e2d\uff0c\u6e32\u67d3\u5f15\u64ce \u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u6a21\u5757\uff0c\u5b83\u4e0d\u4f9d\u8d56\u4e8e SOUI \u7cfb\u7edf\u4e2d\u7684\u5176\u5b83\u6a21\u5757\u3002 \u5728 SOUI \u7cfb\u7edf\u4e2d\u5df2\u7ecf\u5185\u7f6e\u4e86\u57fa\u4e8e skia \u53ca GDI \u4e24\u79cd\u6846\u67b6\u7684\u6e32\u67d3\u6a21\u5757(skia \u5373\u5728 google \u7684 chrome \u53ca android \u4e2d\u4f7f\u7528\u7684\u6e32\u67d3\u5f15\u64ce\uff09\u3002\u76f4\u89c2\u7684\u6bd4\u8f83\u91c7\u7528\u4e24\u79cd\u4e0d\u540c\u6e32\u67d3\u5f15\u64ce demo \u4e2d\u52a8 \u753b\u7684\u6d41\u7545\u5ea6\u5c31\u53ef\u4ee5\u77e5\u9053\u57fa\u4e8e skia \u7684\u6e32\u67d3\u5f15\u64ce\u901f\u5ea6\u8981\u6bd4\u57fa\u4e8e GDI \u7684\u5feb\u4e0d\u5c11\u3002\uff08GDI \u6162\u7684\u539f \u56e0\u53ef\u80fd\u662f\u56e0\u4e3a\u5728 GDI \u539f\u751f\u4e0d\u652f\u6301 alpha \u901a\u9053\uff0c\u800c\u5728\u5b9e\u73b0\u7684\u8fc7\u7a0b\u4e2d\u91c7\u7528 alphablend \u6a21\u62df alpha \u65f6\u5bfc\u81f4\u6027\u80fd\u635f\u5931\uff09 \u5982\u679c\u7528\u6237\u89c9\u5f97\u5185\u7f6e\u7684\u6e32\u67d3\u5f15\u64ce\u8fd8\u662f\u4e0d\u8db3\u4ee5\u6ee1\u8db3\u81ea\u5df1\u7684\u9700\u6c42\uff0c\u8fd8\u53ef\u4ee5\u9009\u62e9\u81ea\u5df1\u5b9e\u73b0\u65b0\u7684\u6e32\u67d3 \u5f15\u64ce\uff0c\u5982\u57fa\u4e8e Direct2D, cairo, agg \u7b49\u6e32\u67d3\u5f15\u64ce\u3002 \u7b2c\u4e8c\u79cd\u6b66\u5668\uff1a\u7ed8\u5236\u7f13\u5b58 \u4e00\u4e2a\u7a97\u53e3\u4e2d\u7684\u5448\u73b0\u7684\u5185\u5bb9\u5f88\u591a\u65f6\u5019\u90fd\u662f\u56fa\u5b9a\u7684\uff0c\u7279\u522b\u662f\u5f53\u7a97\u53e3\u5927\u5c0f\u4e0d\u53d8\u7684\u65f6\u5019\u3002\u7a97\u53e3\u4e2d\u5448 \u73b0\u7684\u5185\u5bb9\u53ef\u80fd\u662f\u7ecf\u8fc7\u590d\u6742\u8ba1\u7b97\u83b7\u5f97\u7684\uff08\u5982\u56fe\u50cf\u7684\u4e5d\u5bab\u683c\u5207\u5206\uff0c\u62c9\u4f38\u7b49\uff09\uff0c\u5982\u679c\u6bcf\u6b21\u5237\u65b0\u90fd \u91cd\u65b0\u8ba1\u7b97\u663e\u793a\u6e32\u67d3\u6548\u7387\u53ef\u80fd\u4e0b\u964d\uff0c\u7279\u522b\u662f\u5f53\u7a97\u53e3\u8fd8\u6bd4\u8f83\u5927\u7684\u65f6\u5019\u3002 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5728 SOUI \u7cfb\u7edf\u4e2d\uff0c\u6211\u4eec\u4e3a SWindow \u63d0\u4f9b\u4e86\u4e00\u4e2a cache \u5c5e\u6027\uff0c cache=\u201c1\u201d\u65f6\uff0c\u5728\u7a97\u53e3\u4e2d\u7ed8\u5236\u7684\u5185\u5bb9\u4f1a\u88ab\u81ea\u52a8\u7f13\u5b58\uff0c\u4e0b\u6b21\u5237\u65b0\u65f6\uff0c\u81ea\u52a8\u4ece\u7f13\u5b58\u4e2d\u63d0\u53d6\u6570 \u636e\uff0c\u4ece\u800c\u5927\u5927\u52a0\u901f\u7ed8\u5236\u8fc7\u7a0b\u3002 \u7b2c\u4e09\u79cd\u6b66\u5668\uff1a\u975e\u80cc\u666f\u6df7\u5408\u6280\u672f DirectUI \u70ab\u9177\u7684\u6548\u679c\u662f\u4f9d\u8d56\u4e8e\u5404\u7a97\u53e3\u4e4b\u95f4\u7684\u76f8\u4e92\u6df7\u5408\u5b9e\u73b0\u7684\uff08alphablend)\uff0c\u4f46\u662f\u6709\u4e9b\u65f6 \u5019\u4e00\u4e2a\u7a97\u53e3\u5b83\u53ef\u80fd\u6709\u81ea\u5df1\u56fa\u5b9a\u7684\u80cc\u666f\uff0c\u6216\u8005\u524d\u666f\u5b8c\u5168\u8986\u76d6\u7a97\u53e3\u800c\u4e0d\u9700\u8981\u80cc\u666f\u3002\u5982\u679c\u8fd9\u4e2a\u7a97 \u53e3\u5237\u65b0\u975e\u5e38\u9891\u7e41\uff0c\u90a3\u4e48\u6bcf\u6b21\u5237\u65b0\u90fd\u5148\u901a\u77e5\u5404\u7ea7\u7236\u7a97\u53e3\u5237\u65b0\u83b7\u5f97\u80cc\u666f\u518d\u505a\u6df7\u5408\u5c06\u662f\u5f88\u5927\u7684\u6027 \u80fd\u635f\u5931\uff08\u5982\u89c6\u9891\u64ad\u653e\u7a97\u53e3\uff09\u3002 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5728 SOUI \u7cfb\u7edf\u4e2d(ver:1.3.0.1)\u4e3a SWindow \u5b9e\u73b0\u4e86\u4e00\u4e2a\u65b0\u7684\u5c5e\u6027\uff1a bkgndBlend\uff0c\u8be5\u5c5e\u6027\u9ed8\u8ba4\u4e3a\u201c1\u201d\uff0c\u4ee3\u8868\u5237\u65b0\u65f6\u4f7f\u7528\u80cc\u666f\u6df7\u5408\u3002\u5982\u679c\u8be5\u5c5e\u6027\u4e3a\u201c0\u201d\uff0c\u5219 \u8be5\u7a97\u53e3\u5237\u65b0\u7684\u65f6\u5019\u76f4\u63a5\u5237\u65b0\u81ea\u5df1\uff0c\u800c\u4e0d\u8bf7\u6c42\u7236\u7a97\u53e3\u5237\u65b0\u80cc\u666f\uff0c\u6700\u7ec8\u63d0\u9ad8 UI \u7684\u6e32\u67d3\u6548\u7387\u3002","title":"4.15 \u63d0\u9ad8 SOUI \u5e94\u7528\u7a0b\u5e8f\u6e32\u67d3\u6027\u80fd\u7684\u4e09\u79cd\u6b66\u5668"},{"location":"Development/15/#415-soui","text":"SOUI \u662f\u4e00\u5957 100%\u5f00\u6e90\u7684\u57fa\u4e8e DirectUI \u7684\u5ba2\u6237\u7aef\u5f00\u53d1\u6846\u67b6\u3002 \u57fa\u4e8e DirectUI \u8bbe\u8ba1\u7684 UI \u867d\u7136 UI \u5448\u73b0\u7684\u6548\u679c\u53ef\u4ee5\u5f88\u70ab\uff0c\u4f46\u662f\u76f8\u5bf9\u4e8e\u4f20\u7edf\u7684 win32 \u5e94\u7528\u7a0b \u5e8f\u4e2d\u6bcf\u4e2a\u63a7\u4ef6\u4e00\u4e2a\u7a97\u53e3\u53e5\u67c4\u7684\u5f62\u5f0f\uff0c\u6e32\u67d3\u6548\u7387\u662f\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u95ee\u9898\u3002 \u5728 SOUI \u7cfb\u7edf\u4e2d\u63d0\u4f9b\u4e86\u4e09\u79cd\u6b66\u5668\u53ef\u4ee5\u7528\u6765\u63d0\u9ad8\u6e32\u67d3\u6548\u7387\uff1a \u7b2c\u4e00\u79cd\u6b66\u5668\uff1a\u9009\u62e9\u66f4\u9ad8\u6548\u7684\u6e32\u67d3\u5f15\u64ce \u6e32\u67d3\u5f15\u64ce\u63d0\u4f9b\u6587\u5b57\uff0c\u51e0\u4f55\u56fe\u5f62\uff0c\u56fe\u50cf\u7684\u5728\u7f13\u5b58\u4e0a\u7684\u7ed8\u5236\u529f\u80fd\u3002\u5728 SOUI \u7cfb\u7edf\u4e2d\uff0c\u6e32\u67d3\u5f15\u64ce \u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u6a21\u5757\uff0c\u5b83\u4e0d\u4f9d\u8d56\u4e8e SOUI \u7cfb\u7edf\u4e2d\u7684\u5176\u5b83\u6a21\u5757\u3002 \u5728 SOUI \u7cfb\u7edf\u4e2d\u5df2\u7ecf\u5185\u7f6e\u4e86\u57fa\u4e8e skia \u53ca GDI \u4e24\u79cd\u6846\u67b6\u7684\u6e32\u67d3\u6a21\u5757(skia \u5373\u5728 google \u7684 chrome \u53ca android \u4e2d\u4f7f\u7528\u7684\u6e32\u67d3\u5f15\u64ce\uff09\u3002\u76f4\u89c2\u7684\u6bd4\u8f83\u91c7\u7528\u4e24\u79cd\u4e0d\u540c\u6e32\u67d3\u5f15\u64ce demo \u4e2d\u52a8 \u753b\u7684\u6d41\u7545\u5ea6\u5c31\u53ef\u4ee5\u77e5\u9053\u57fa\u4e8e skia \u7684\u6e32\u67d3\u5f15\u64ce\u901f\u5ea6\u8981\u6bd4\u57fa\u4e8e GDI \u7684\u5feb\u4e0d\u5c11\u3002\uff08GDI \u6162\u7684\u539f \u56e0\u53ef\u80fd\u662f\u56e0\u4e3a\u5728 GDI \u539f\u751f\u4e0d\u652f\u6301 alpha \u901a\u9053\uff0c\u800c\u5728\u5b9e\u73b0\u7684\u8fc7\u7a0b\u4e2d\u91c7\u7528 alphablend \u6a21\u62df alpha \u65f6\u5bfc\u81f4\u6027\u80fd\u635f\u5931\uff09 \u5982\u679c\u7528\u6237\u89c9\u5f97\u5185\u7f6e\u7684\u6e32\u67d3\u5f15\u64ce\u8fd8\u662f\u4e0d\u8db3\u4ee5\u6ee1\u8db3\u81ea\u5df1\u7684\u9700\u6c42\uff0c\u8fd8\u53ef\u4ee5\u9009\u62e9\u81ea\u5df1\u5b9e\u73b0\u65b0\u7684\u6e32\u67d3 \u5f15\u64ce\uff0c\u5982\u57fa\u4e8e Direct2D, cairo, agg \u7b49\u6e32\u67d3\u5f15\u64ce\u3002 \u7b2c\u4e8c\u79cd\u6b66\u5668\uff1a\u7ed8\u5236\u7f13\u5b58 \u4e00\u4e2a\u7a97\u53e3\u4e2d\u7684\u5448\u73b0\u7684\u5185\u5bb9\u5f88\u591a\u65f6\u5019\u90fd\u662f\u56fa\u5b9a\u7684\uff0c\u7279\u522b\u662f\u5f53\u7a97\u53e3\u5927\u5c0f\u4e0d\u53d8\u7684\u65f6\u5019\u3002\u7a97\u53e3\u4e2d\u5448 \u73b0\u7684\u5185\u5bb9\u53ef\u80fd\u662f\u7ecf\u8fc7\u590d\u6742\u8ba1\u7b97\u83b7\u5f97\u7684\uff08\u5982\u56fe\u50cf\u7684\u4e5d\u5bab\u683c\u5207\u5206\uff0c\u62c9\u4f38\u7b49\uff09\uff0c\u5982\u679c\u6bcf\u6b21\u5237\u65b0\u90fd \u91cd\u65b0\u8ba1\u7b97\u663e\u793a\u6e32\u67d3\u6548\u7387\u53ef\u80fd\u4e0b\u964d\uff0c\u7279\u522b\u662f\u5f53\u7a97\u53e3\u8fd8\u6bd4\u8f83\u5927\u7684\u65f6\u5019\u3002 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5728 SOUI \u7cfb\u7edf\u4e2d\uff0c\u6211\u4eec\u4e3a SWindow \u63d0\u4f9b\u4e86\u4e00\u4e2a cache \u5c5e\u6027\uff0c cache=\u201c1\u201d\u65f6\uff0c\u5728\u7a97\u53e3\u4e2d\u7ed8\u5236\u7684\u5185\u5bb9\u4f1a\u88ab\u81ea\u52a8\u7f13\u5b58\uff0c\u4e0b\u6b21\u5237\u65b0\u65f6\uff0c\u81ea\u52a8\u4ece\u7f13\u5b58\u4e2d\u63d0\u53d6\u6570 \u636e\uff0c\u4ece\u800c\u5927\u5927\u52a0\u901f\u7ed8\u5236\u8fc7\u7a0b\u3002 \u7b2c\u4e09\u79cd\u6b66\u5668\uff1a\u975e\u80cc\u666f\u6df7\u5408\u6280\u672f DirectUI \u70ab\u9177\u7684\u6548\u679c\u662f\u4f9d\u8d56\u4e8e\u5404\u7a97\u53e3\u4e4b\u95f4\u7684\u76f8\u4e92\u6df7\u5408\u5b9e\u73b0\u7684\uff08alphablend)\uff0c\u4f46\u662f\u6709\u4e9b\u65f6 \u5019\u4e00\u4e2a\u7a97\u53e3\u5b83\u53ef\u80fd\u6709\u81ea\u5df1\u56fa\u5b9a\u7684\u80cc\u666f\uff0c\u6216\u8005\u524d\u666f\u5b8c\u5168\u8986\u76d6\u7a97\u53e3\u800c\u4e0d\u9700\u8981\u80cc\u666f\u3002\u5982\u679c\u8fd9\u4e2a\u7a97 \u53e3\u5237\u65b0\u975e\u5e38\u9891\u7e41\uff0c\u90a3\u4e48\u6bcf\u6b21\u5237\u65b0\u90fd\u5148\u901a\u77e5\u5404\u7ea7\u7236\u7a97\u53e3\u5237\u65b0\u83b7\u5f97\u80cc\u666f\u518d\u505a\u6df7\u5408\u5c06\u662f\u5f88\u5927\u7684\u6027 \u80fd\u635f\u5931\uff08\u5982\u89c6\u9891\u64ad\u653e\u7a97\u53e3\uff09\u3002 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5728 SOUI \u7cfb\u7edf\u4e2d(ver:1.3.0.1)\u4e3a SWindow \u5b9e\u73b0\u4e86\u4e00\u4e2a\u65b0\u7684\u5c5e\u6027\uff1a bkgndBlend\uff0c\u8be5\u5c5e\u6027\u9ed8\u8ba4\u4e3a\u201c1\u201d\uff0c\u4ee3\u8868\u5237\u65b0\u65f6\u4f7f\u7528\u80cc\u666f\u6df7\u5408\u3002\u5982\u679c\u8be5\u5c5e\u6027\u4e3a\u201c0\u201d\uff0c\u5219 \u8be5\u7a97\u53e3\u5237\u65b0\u7684\u65f6\u5019\u76f4\u63a5\u5237\u65b0\u81ea\u5df1\uff0c\u800c\u4e0d\u8bf7\u6c42\u7236\u7a97\u53e3\u5237\u65b0\u80cc\u666f\uff0c\u6700\u7ec8\u63d0\u9ad8 UI \u7684\u6e32\u67d3\u6548\u7387\u3002","title":"4.15 \u63d0\u9ad8 SOUI \u5e94\u7528\u7a0b\u5e8f\u6e32\u67d3\u6027\u80fd\u7684\u4e09\u79cd\u6b66\u5668"},{"location":"Development/16/","text":"4.16 \u5728 SOUI \u4e2d\u4f7f\u7528\u5206\u5c42\u7a97\u53e3 \u00b6 \u4ece Windows 2K \u5f00\u59cb\uff0cMS \u4e3a UI \u5f00\u53d1\u5f15\u5165\u4e86\u5206\u5c42\u7a97\u53e3\u8fd9\u4e00\u7a97\u53e3\u98ce\u683c\u3002\u4f7f\u7528\u5206\u5c42\u7a97\u53e3\uff0c\u5e94 \u7528\u7a0b\u5e8f\u7684\u4e3b\u7a97\u53e3\u53ef\u4ee5\u662f\u534a\u900f\u660e\uff0c\u4e5f\u53ef\u4ee5\u662f\u9010\u70b9\u534a\u900f\u660e\uff08\u5373\u6bcf\u4e00\u4e2a\u50cf\u7d20\u70b9\u7684\u900f\u660e\u5ea6\u53ef\u4ee5\u4e0d \u540c\uff09\u3002 \u53ef\u4ee5\u8bf4\uff0c\u6b63\u662f\u56e0\u4e3a\u6709\u4e86\u5206\u5c42\u7a97\u53e3\uff0c\u5728 Windows \u4e0a\u5f00\u53d1\u7684\u5e94\u7528\u7a0b\u5e8f\u7684 UI \u624d\u771f\u6b63\u70ab\u8d77\u6765\u3002 \u5728 UI \u7684\u4e3b\u7a97\u53e3\u4e0a\u52a0\u4e00\u4e2a\u5206\u5c42\u7a97\u53e3\u7684\u98ce\u683c\u5bf9\u4e8e\u4e00\u4e2a\u7a0d\u6709\u70b9 UI \u5f00\u53d1\u7ecf\u9a8c\u7684\u7a0b\u5e8f\u5458\u6765\u8bf4\u662f\u975e\u5e38 \u7b80\u5355\u7684\uff0c\u672c\u7bc7\u8981\u8bf4\u7684\u662f\u5728 SOUI \u7684\u7a97\u53e3\u7cfb\u7edf\u4e2d\u5b9e\u73b0 SOUI \u7684\u5206\u5c42\u7a97\u53e3\u3002 \u6b63\u5982\u4f7f\u7528\u7cfb\u7edf\u7684\u7a97\u53e3\u5df2\u7ecf\u53ef\u4ee5\u5b9e\u73b0\u5f88\u6f02\u4eae\u7684 UI\uff0c\u6211\u4eec\u8fd8\u662f\u4f1a\u9700\u8981 DirectUI \u8fd9\u6837\u7684 UI \u5f00\u53d1 \u6280\u672f\uff1b\u6709\u4e86\u7cfb\u7edf\u7684\u5206\u5c42\u7a97\u53e3\uff0c\u6211\u4eec\u8fd8\u662f\u4f1a\u9700\u8981\u5728 DirectUI Window \u4e4b\u95f4\u7684\u5206\u5c42\u7a97\u53e3\u6280 \u672f\u3002 \u4e00\u4e2a DirectUI \u7cfb\u7edf\u7684\u5206\u5c42\u7a97\u53e3\u6709\u4ec0\u4e48\u7528\u5462\uff1f \u5206\u5c42\u7a97\u53e3\u548c\u4e00\u822c\u7a97\u53e3\u7684\u5173\u952e\u533a\u522b\u5728\u5728\u4e8e\uff1a\u4e00\u4e2a\u5206\u5c42\u7a97\u53e3\u662f\u4e00\u4e2a\u76f8\u5bf9\u72ec\u7acb\u7684\u6e32\u67d3\u5c42\uff0c\u5b83\u80fd\u5c06 \u5b83\u7684\u5b50\u7a97\u53e3\u6e32\u67d3\u5230\u8fd9\u4e2a\u7a97\u53e3\u4e0a\uff0c\u5f53\u6240\u6709\u5206\u5c42\u7a97\u53e3\u90fd\u6e32\u67d3\u5b8c\u6210\u540e\uff0c\u518d\u6309\u7167\u5206\u5c42\u7a97\u53e3\u7684 zorder \u987a\u5e8f\u901a\u8fc7\u4e0d\u540c\u7684 alpha \u6df7\u5408\u6280\u672f\u8fdb\u884c\u6df7\u5408\uff1b\u800c\u4e00\u822c\u7684 DirectUI \u7cfb\u7edf\u53ea\u6709\u4e00\u4e2a\u6e32\u67d3\u5c42\uff0c\u6240\u6709 \u7a97\u53e3\u6309\u7167 zorder \u987a\u5e8f\u4f9d\u6b21\u6e32\u67d3\u5230\u8fd9\u4e2a\u6e32\u67d3\u5c42\u4e0a\uff0c\u7f3a\u5c11\u4e86\u4e0d\u540c\u6e32\u67d3\u5c42\u7684\u6982\u5ff5\u3002 \u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a\u4e1a\u52a1\u53ef\u80fd\u5e0c\u671b\u4e00\u4e2a\u529f\u80fd\u9762\u677f\u80fd\u591f\u6574\u4f53\u534a\u900f\u660e\uff0c\u8be5\u529f\u80fd\u9762\u7248\u53ef\u80fd\u5305\u542b\u5f88\u591a \u5b50\u7a97\u53e3\u3002 \u5982\u679c\u6ca1\u6709\u5206\u5c42\u7a97\u53e3\u7279\u6027\uff0c\u5728 DirectUI \u4e2d\u5b9e\u73b0\u7c7b\u4f3c\u7684\u9700\u6c42\u5f88\u5f88\u590d\u6742\uff08\u5982\u5206\u522b\u6307\u5b9a\u6bcf\u4e00\u4e2a\u5b50\u7a97 \u53e3\u7684\u534a\u900f\u660e\uff09\u800c\u4e14\u53ef\u80fd\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\u3001\u5185\u5b58\u6d88\u8017\u7684\u63d0\u9ad8\u7b49\u95ee\u9898\u3002 \u5982\u679c\u6709\u4e86\u5206\u5c42\u7a97\u53e3\uff0c\u5b9e\u73b0\u7c7b\u4f3c\u7684\u9700\u6c42\u5c31\u975e\u5e38\u7b80\u5355\u4e86\uff1a\u53ea\u9700\u8981\u4e3a\u8be5\u529f\u80fd\u9762\u677f\u6307\u5b9a\u4e00\u4e2a\u900f\u660e\u5ea6 \u5c31\u884c\u4e86\u3002\u5728\u6e32\u67d3\u7684\u65f6\u5019\uff0c\u529f\u80fd\u9762\u677f\u7684\u5b50\u7a97\u53e3\u4f1a\u4ee5\u6b63\u5e38\u7684\u6e32\u67d3\u65b9\u5f0f\u6e32\u67d3\u5230\u5206\u5c42\u7a97\u53e3\u7684\u7f13\u5b58 \u4e0a\uff0c\u5168\u90e8\u6e32\u67d3\u5b8c\u6210\u540e\uff0c\u518d\u6574\u4f53\u548c\u4e0a\u4e00\u4e2a\u6e32\u67d3\u5c42\u6df7\u5408\uff0c\u4ece\u800c\u5f97\u5230\u671f\u671b\u7684\u6548\u679c\u3002 \u5728 SOUI \u91cc\u5982\u4f55\u4f7f\u7528\u5206\u5c42\u7a97\u53e3\uff1a SOUI \u91c7\u7528 XML \u5b9a\u4e49 UI\uff0c\u8981\u5b9a\u4e49\u5206\u5c42\u7a97\u53e3\u53ea\u9700\u8981\u4e00\u4e2a layeredWindow=\"1\"\u7684\u5c5e\u6027\u5373\u53ef\u3002 XML \u5b9a\u4e49\uff1a < window pos = \"0,0,-0,-0\" clipClient = \"1\" skin = \"skin_bkgnd\" > < flywnd pos = \"-210,10,-0,-10\" posEnd = \"-10,10,@210,-10\" alpha = \"100\" layeredWindow = \"1\" > < toggle pos = \"0,|-15,@10,@30\" skin = \"_skin.sys.tree.toggle\" name = \"switch\" cursor = \"hand\" tip = \"click me to show the animator that show or hide the pane \"></toggle> < window pos = \"10,0,-0,-0\" colorBkgnd = \"#ff0000\" > < treectrl pos = \"10,0,-10,-10\" name = \"mytree2\" itemHeight = \"30\" iconSkin = \"skin_tree_icon\" checkBox = \"1\" font = \"underline:1\" > < item text = \"\u7ec4\u7ec7\u673a\u6784\" img = \"0\" selImg = \"1\" expand = \"0\" > < item text = \"\u5e02\u573a\u90e8\" img = \"0\" selImg = \"1\" > < item text = \"\u5357\u4e00\u533a\" img = \"2\" /> < item text = \"\u5317\u4e8c\u533a\" img = \"2\" /> < item text = \"\u897f\u4e09\u533a\" img = \"2\" > < item text = \"\u7b2c\u4e00\u5206\u961f\" img = \"0\" selImg = \"1\" expand = \"0\" > < item text = \"\u5f20\u4e09\u7ec4\" img = \"2\" /> < item text = \"\u674e\u56db\u7ec4\" img = \"2\" /> < item text = \"\u738b\u4e94\u7ec4\" img = \"2\" /> </ item > </ item > </ item > </ item > < item text = \"\u5ba3\u4f20\u90e8\" img = \"0\" selImg = \"1\" expand = \"0\" > < item text = \"\u5357\u4e00\u533a\" img = \"2\" /> < item text = \"\u5317\u4e8c\u533a\" img = \"2\" /> < item text = \"\u897f\u4e09\u533a\" img = \"2\" /> </ item > </ treectrl > < text pos = \"10,-100,-0,@100\" multilines = \"1\" > click the left grip to \\ nshow or hide the \\ npane </ text > </ window > </ flywnd > </ window > \u663e\u793a\u6548\u679c\uff1a","title":"4.16 \u5728 SOUI \u4e2d\u4f7f\u7528\u5206\u5c42\u7a97\u53e3"},{"location":"Development/16/#416-soui","text":"\u4ece Windows 2K \u5f00\u59cb\uff0cMS \u4e3a UI \u5f00\u53d1\u5f15\u5165\u4e86\u5206\u5c42\u7a97\u53e3\u8fd9\u4e00\u7a97\u53e3\u98ce\u683c\u3002\u4f7f\u7528\u5206\u5c42\u7a97\u53e3\uff0c\u5e94 \u7528\u7a0b\u5e8f\u7684\u4e3b\u7a97\u53e3\u53ef\u4ee5\u662f\u534a\u900f\u660e\uff0c\u4e5f\u53ef\u4ee5\u662f\u9010\u70b9\u534a\u900f\u660e\uff08\u5373\u6bcf\u4e00\u4e2a\u50cf\u7d20\u70b9\u7684\u900f\u660e\u5ea6\u53ef\u4ee5\u4e0d \u540c\uff09\u3002 \u53ef\u4ee5\u8bf4\uff0c\u6b63\u662f\u56e0\u4e3a\u6709\u4e86\u5206\u5c42\u7a97\u53e3\uff0c\u5728 Windows \u4e0a\u5f00\u53d1\u7684\u5e94\u7528\u7a0b\u5e8f\u7684 UI \u624d\u771f\u6b63\u70ab\u8d77\u6765\u3002 \u5728 UI \u7684\u4e3b\u7a97\u53e3\u4e0a\u52a0\u4e00\u4e2a\u5206\u5c42\u7a97\u53e3\u7684\u98ce\u683c\u5bf9\u4e8e\u4e00\u4e2a\u7a0d\u6709\u70b9 UI \u5f00\u53d1\u7ecf\u9a8c\u7684\u7a0b\u5e8f\u5458\u6765\u8bf4\u662f\u975e\u5e38 \u7b80\u5355\u7684\uff0c\u672c\u7bc7\u8981\u8bf4\u7684\u662f\u5728 SOUI \u7684\u7a97\u53e3\u7cfb\u7edf\u4e2d\u5b9e\u73b0 SOUI \u7684\u5206\u5c42\u7a97\u53e3\u3002 \u6b63\u5982\u4f7f\u7528\u7cfb\u7edf\u7684\u7a97\u53e3\u5df2\u7ecf\u53ef\u4ee5\u5b9e\u73b0\u5f88\u6f02\u4eae\u7684 UI\uff0c\u6211\u4eec\u8fd8\u662f\u4f1a\u9700\u8981 DirectUI \u8fd9\u6837\u7684 UI \u5f00\u53d1 \u6280\u672f\uff1b\u6709\u4e86\u7cfb\u7edf\u7684\u5206\u5c42\u7a97\u53e3\uff0c\u6211\u4eec\u8fd8\u662f\u4f1a\u9700\u8981\u5728 DirectUI Window \u4e4b\u95f4\u7684\u5206\u5c42\u7a97\u53e3\u6280 \u672f\u3002 \u4e00\u4e2a DirectUI \u7cfb\u7edf\u7684\u5206\u5c42\u7a97\u53e3\u6709\u4ec0\u4e48\u7528\u5462\uff1f \u5206\u5c42\u7a97\u53e3\u548c\u4e00\u822c\u7a97\u53e3\u7684\u5173\u952e\u533a\u522b\u5728\u5728\u4e8e\uff1a\u4e00\u4e2a\u5206\u5c42\u7a97\u53e3\u662f\u4e00\u4e2a\u76f8\u5bf9\u72ec\u7acb\u7684\u6e32\u67d3\u5c42\uff0c\u5b83\u80fd\u5c06 \u5b83\u7684\u5b50\u7a97\u53e3\u6e32\u67d3\u5230\u8fd9\u4e2a\u7a97\u53e3\u4e0a\uff0c\u5f53\u6240\u6709\u5206\u5c42\u7a97\u53e3\u90fd\u6e32\u67d3\u5b8c\u6210\u540e\uff0c\u518d\u6309\u7167\u5206\u5c42\u7a97\u53e3\u7684 zorder \u987a\u5e8f\u901a\u8fc7\u4e0d\u540c\u7684 alpha \u6df7\u5408\u6280\u672f\u8fdb\u884c\u6df7\u5408\uff1b\u800c\u4e00\u822c\u7684 DirectUI \u7cfb\u7edf\u53ea\u6709\u4e00\u4e2a\u6e32\u67d3\u5c42\uff0c\u6240\u6709 \u7a97\u53e3\u6309\u7167 zorder \u987a\u5e8f\u4f9d\u6b21\u6e32\u67d3\u5230\u8fd9\u4e2a\u6e32\u67d3\u5c42\u4e0a\uff0c\u7f3a\u5c11\u4e86\u4e0d\u540c\u6e32\u67d3\u5c42\u7684\u6982\u5ff5\u3002 \u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a\u4e1a\u52a1\u53ef\u80fd\u5e0c\u671b\u4e00\u4e2a\u529f\u80fd\u9762\u677f\u80fd\u591f\u6574\u4f53\u534a\u900f\u660e\uff0c\u8be5\u529f\u80fd\u9762\u7248\u53ef\u80fd\u5305\u542b\u5f88\u591a \u5b50\u7a97\u53e3\u3002 \u5982\u679c\u6ca1\u6709\u5206\u5c42\u7a97\u53e3\u7279\u6027\uff0c\u5728 DirectUI \u4e2d\u5b9e\u73b0\u7c7b\u4f3c\u7684\u9700\u6c42\u5f88\u5f88\u590d\u6742\uff08\u5982\u5206\u522b\u6307\u5b9a\u6bcf\u4e00\u4e2a\u5b50\u7a97 \u53e3\u7684\u534a\u900f\u660e\uff09\u800c\u4e14\u53ef\u80fd\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\u3001\u5185\u5b58\u6d88\u8017\u7684\u63d0\u9ad8\u7b49\u95ee\u9898\u3002 \u5982\u679c\u6709\u4e86\u5206\u5c42\u7a97\u53e3\uff0c\u5b9e\u73b0\u7c7b\u4f3c\u7684\u9700\u6c42\u5c31\u975e\u5e38\u7b80\u5355\u4e86\uff1a\u53ea\u9700\u8981\u4e3a\u8be5\u529f\u80fd\u9762\u677f\u6307\u5b9a\u4e00\u4e2a\u900f\u660e\u5ea6 \u5c31\u884c\u4e86\u3002\u5728\u6e32\u67d3\u7684\u65f6\u5019\uff0c\u529f\u80fd\u9762\u677f\u7684\u5b50\u7a97\u53e3\u4f1a\u4ee5\u6b63\u5e38\u7684\u6e32\u67d3\u65b9\u5f0f\u6e32\u67d3\u5230\u5206\u5c42\u7a97\u53e3\u7684\u7f13\u5b58 \u4e0a\uff0c\u5168\u90e8\u6e32\u67d3\u5b8c\u6210\u540e\uff0c\u518d\u6574\u4f53\u548c\u4e0a\u4e00\u4e2a\u6e32\u67d3\u5c42\u6df7\u5408\uff0c\u4ece\u800c\u5f97\u5230\u671f\u671b\u7684\u6548\u679c\u3002 \u5728 SOUI \u91cc\u5982\u4f55\u4f7f\u7528\u5206\u5c42\u7a97\u53e3\uff1a SOUI \u91c7\u7528 XML \u5b9a\u4e49 UI\uff0c\u8981\u5b9a\u4e49\u5206\u5c42\u7a97\u53e3\u53ea\u9700\u8981\u4e00\u4e2a layeredWindow=\"1\"\u7684\u5c5e\u6027\u5373\u53ef\u3002 XML \u5b9a\u4e49\uff1a < window pos = \"0,0,-0,-0\" clipClient = \"1\" skin = \"skin_bkgnd\" > < flywnd pos = \"-210,10,-0,-10\" posEnd = \"-10,10,@210,-10\" alpha = \"100\" layeredWindow = \"1\" > < toggle pos = \"0,|-15,@10,@30\" skin = \"_skin.sys.tree.toggle\" name = \"switch\" cursor = \"hand\" tip = \"click me to show the animator that show or hide the pane \"></toggle> < window pos = \"10,0,-0,-0\" colorBkgnd = \"#ff0000\" > < treectrl pos = \"10,0,-10,-10\" name = \"mytree2\" itemHeight = \"30\" iconSkin = \"skin_tree_icon\" checkBox = \"1\" font = \"underline:1\" > < item text = \"\u7ec4\u7ec7\u673a\u6784\" img = \"0\" selImg = \"1\" expand = \"0\" > < item text = \"\u5e02\u573a\u90e8\" img = \"0\" selImg = \"1\" > < item text = \"\u5357\u4e00\u533a\" img = \"2\" /> < item text = \"\u5317\u4e8c\u533a\" img = \"2\" /> < item text = \"\u897f\u4e09\u533a\" img = \"2\" > < item text = \"\u7b2c\u4e00\u5206\u961f\" img = \"0\" selImg = \"1\" expand = \"0\" > < item text = \"\u5f20\u4e09\u7ec4\" img = \"2\" /> < item text = \"\u674e\u56db\u7ec4\" img = \"2\" /> < item text = \"\u738b\u4e94\u7ec4\" img = \"2\" /> </ item > </ item > </ item > </ item > < item text = \"\u5ba3\u4f20\u90e8\" img = \"0\" selImg = \"1\" expand = \"0\" > < item text = \"\u5357\u4e00\u533a\" img = \"2\" /> < item text = \"\u5317\u4e8c\u533a\" img = \"2\" /> < item text = \"\u897f\u4e09\u533a\" img = \"2\" /> </ item > </ treectrl > < text pos = \"10,-100,-0,@100\" multilines = \"1\" > click the left grip to \\ nshow or hide the \\ npane </ text > </ window > </ flywnd > </ window > \u663e\u793a\u6548\u679c\uff1a","title":"4.16 \u5728 SOUI \u4e2d\u4f7f\u7528\u5206\u5c42\u7a97\u53e3"},{"location":"Development/17/","text":"4.17 \u5728 SOUI \u4e2d\u7684\u63a7\u4ef6\u6ce8\u518c\u673a\u5236 \u00b6 Win32 \u7f16\u7a0b\u4e2d\uff0c\u7528\u6237\u9700\u8981\u4e00\u4e2a\u65b0\u63a7\u4ef6\u65f6\uff0c\u9700\u8981\u5411\u7cfb\u7edf\u6ce8\u518c\u4e00\u4e2a\u65b0\u7684\u63a7\u4ef6\u7c7b\u578b\u3002\u6ce8\u518c\u4ee5\u540e\uff0c \u8c03\u7528::CreateWindow \u65f6\u624d\u80fd\u6839\u636e\u6807\u8bc6\u63a7\u4ef6\u7c7b\u578b\u7684\u5b57\u7b26\u4e32\u521b\u5efa\u51fa\u4e00\u4e2a\u65b0\u7684\u63a7\u4ef6\u7a97\u53e3\u5bf9\u8c61\u3002 \u4e3a\u4e86\u80fd\u591f\u4ece XML \u63cf\u8ff0\u7684\u5b57\u7b26\u4e32\u4e2d\u521b\u5efa\u51fa\u9700\u8981\u7684\u63a7\u4ef6\u5bf9\u8c61\uff0c\u548c Win32 \u7c7b\u4f3c\uff0c\u5728 SOUI \u4e2d\u8981 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u63a7\u4ef6\u4e5f\u540c\u6837\u9700\u8981\u5411 SOUI \u7cfb\u7edf\u6ce8\u518c\u65b0\u7684\u63a7\u4ef6\u7c7b\u3002 \u4ece demo.cpp \u7684 main \u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u7c7b\u4f3c\u5982\u4e0b\u7684\u63a7\u4ef6\u6ce8\u518c\u63a7\u4ef6\u7684\u4ee3\u7801\uff1a //\u5411 SApplication \u7cfb\u7edf\u4e2d\u6ce8\u518c\u7531\u5916\u90e8\u6269\u5c55\u7684\u63a7\u4ef6\u53ca SkinObj \u7c7b SWkeLoader wkeLoader ; if ( wkeLoader . Init ( _T ( \"wke.dll\" ))) { theApp -> RegisterWndFactory ( TplSWindowFactory < SWkeWebkit > ()); //\u6ce8\u518c WKE \u6d4f\u89c8\u5668 } theApp -> RegisterWndFactory ( TplSWindowFactory < SGifPlayer > ()); //\u6ce8\u518c GIFPlayer theApp -> RegisterSkinFactory ( TplSkinFactory < SSkinGif > ()); //\u6ce8\u518c SkinGif theApp -> RegisterSkinFactory ( TplSkinFactory < SSkinAPNG > ()); //\u6ce8\u518c SSkinAPNG theApp -> RegisterSkinFactory ( TplSkinFactory < SSkinVScrollbar > ()); //\u6ce8\u518c\u7eb5 \u5411\u6eda\u52a8\u6761\u76ae\u80a4 theApp -> RegisterWndFactory ( TplSWindowFactory < SIPAddressCtrl > ()); //\u6ce8\u518c IP \u63a7\u4ef6 theApp -> RegisterWndFactory ( TplSWindowFactory < SPropertyGrid > ()); //\u6ce8\u518c\u5c5e \u6027\u8868\u63a7\u4ef6 theApp -> RegisterWndFactory ( TplSWindowFactory < SChromeTabCtrl > ()); //\u6ce8\u518c ChromeTabCtrl theApp -> RegisterWndFactory ( TplSWindowFactory < SIECtrl > ()); //\u6ce8\u518c IECtrl theApp -> RegisterWndFactory ( TplSWindowFactory < SChatEdit > ()); //\u6ce8\u518c ChatEdit theApp -> RegisterWndFactory ( TplSWindowFactory < SScrollText > ()); //\u6ce8\u518c SScrollText if ( SUCCEEDED ( CUiAnimation :: Init ())) { theApp -> RegisterWndFactory ( TplSWindowFactory < SUiAnimationWnd > ()); //\u6ce8\u518c\u52a8\u753b\u63a7 \u4ef6 } theApp -> RegisterWndFactory ( TplSWindowFactory < SFlyWnd > ()); //\u6ce8\u518c\u98de\u884c\u52a8\u753b \u63a7\u4ef6 theApp -> RegisterWndFactory ( TplSWindowFactory < SFadeFrame > ()); //\u6ce8\u518c\u6e10\u663e \u9690\u52a8\u753b\u63a7\u4ef6 theApp -> RegisterWndFactory ( TplSWindowFactory < SRadioBox2 > ()); //\u6ce8\u518c\u6e10\u663e \u9690\u52a8\u753b\u63a7\u4ef6 \u4e0a\u9762\u4ee3\u7801\u4e2d\u5373\u6709\u65b0\u76ae\u80a4\u5bf9\u8c61\u7684\u6ce8\u518c\u4e5f\u6709\u7a97\u53e3\u63a7\u4ef6\u7684\u6ce8\u518c\uff0c\u8fd9\u79cd\u6ce8\u518c\u63a7\u4ef6\u65b9\u5f0f\u770b\u8d77\u6765\u6709\u70b9\u602a \u5f02\uff0c\u4f46\u4f7f\u7528\u8d77\u6765\u4e5f\u8fd8\u7b97\u662f\u7b80\u5355\uff0c\u53ea\u9700\u8981\u4e00\u884c\u4ee3\u7801\uff08\u5b9e\u9645\u4e0a\u662f\u4ece\u8457\u540d\u7684\u6e38\u620f GUI CEGUI \u501f \u9274\u8fc7\u6765\u7684\uff09\u3002 \u4ee5\u6ce8\u518c\u7a97\u53e3\u63a7\u4ef6\u4e3a\u4f8b\uff0c\u4e0b\u9762\u6211\u6765\u89e3\u91ca\u4e00\u4e0b\u4e3a\u4ec0\u4e48\u4f1a\u6709\u8fd9\u6837\u4e00\u79cd\u63a7\u4ef6\u6ce8\u518c\u65b9\u5f0f\u3002 \u5148\u770b\u770b TplSWindowFactory \u6a21\u677f\u7c7b\u7684\u5b9e\u73b0\uff1a class SWindowFactory { public : virtual ~ SWindowFactory () {} virtual SWindow * NewWindow () = 0 ; virtual LPCWSTR SWindowBaseName () = 0 ; virtual const SStringW & getWindowType () = 0 ; virtual SWindowFactory * Clone () const = 0 ; }; template < typename T > class TplSWindowFactory : public SWindowFactory { public : //! Default constructor. TplSWindowFactory () : m_strTypeName ( T :: GetClassName ()) { } LPCWSTR SWindowBaseName (){ return T :: BaseClassName ();} // Implement WindowFactory interface virtual SWindow * NewWindow () { return new T ; } virtual const SStringW & getWindowType () { return m_strTypeName ; } virtual SWindowFactory * Clone () const { return new TplSWindowFactory (); } protected : SStringW m_strTypeName ; }; ``` TplSWindowFactory \u4ece SWindowFactory \u6d3e\u751f\uff0c\u81ea\u52a8\u4e3a\u6a21\u677f\u53c2\u6570\u4e2d\u6307\u5b9a\u7684\u7c7b\u578b\u751f\u6210\u4e00\u4e2a SWindowFactory \u5bf9\u8c61\u3002 SWindowFactory \u6709\u4ec0\u4e48\u7528\u5462\uff1f SWindowFactory \u6700\u6838\u5fc3\u7684\u7528\u9014\u5c31\u5728\u4e8e\u5b83\u7684\u65b9\u6cd5\uff1a SWindow * SWindowFactory :: NewWindow (); \u8be5\u65b9\u6cd5\u8bf4\u6765\u5f88\u7b80\u5355\uff0c\u4e0d\u8fc7\u662f\u6839\u636e\u4e0d\u540c\u7684\u5b57\u7b26\u4e32\u4ece\u5806\u4e0a\u5206\u914d\u4e00\u4e2a SWindow \u5bf9\u8c61\uff0c\u4f46\u662f\u5728 C ++ \u4e2d\u6211\u4eec\u9700\u8981\u6ee1\u8db3\u4e00\u6761\u57fa\u672c\u539f\u5219\uff1a\u5185\u5b58\u5728\u54ea\u4e2a\u6a21\u5757\u4e2d\u5206\u914d\uff08\u4ece\u54ea\u4e2a\u6a21\u5757\u7684\u5806\u4e0a\u5206\u914d\uff09\u5c31 \u5fc5\u987b\u88ab\u54ea\u4e2a\u6a21\u5757\u91ca\u653e\u3002 \u5728 SOUI \u4e2d\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\u63a7\u4ef6\u90fd\u662f\u7531 SOUI . DLL \u8fd9\u4e2a\u6a21\u5757\u6765\u5206\u914d\u5185\u5b58\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4 SWindow * SWindowFactory :: NewWindow () \u53ea\u4f1a\u5728 SOUI \u6a21\u5757\u4e2d\u8c03\u7528\u3002 \u90a3\u4e48\u751f\u6210\u7684\u5bf9\u8c61\u5728\u54ea\u91cc\u91ca\u653e\u5462\uff1f \u8fd9\u5c31\u9700\u8981\u770b\u4e00\u4e0b SWindow \u6216\u8005 SSkinObjBase \u8fd9\u4e24\u4e2a\u7c7b\u7684\u5b9e\u73b0\u4e86\u3002 ``` cpp class SOUI_EXP SWindow : public SObject , public SMsgHandleState , public TObjRefImpl2 < IObjRef , SWindow > { SOUI_CLASS_NAME ( SWindow , L \"window\" ) //.... }; class SOUI_EXP SSkinObjBase : public TObjRefImpl < ISkinObj > { //...... }; ``` SWindow \u548c SSkinObjBase \u5b9e\u9645\u4e0a\u90fd\u6d3e\u751f\u81ea TObjRefImpl \u8fd9\u4e2a\u6a21\u677f\u7c7b\u3002\u4e0b\u9762\u770b\u4e00\u4e0b\u8fd9\u4e2a \u7c7b\u7684\u5b9e\u73b0 : ``` cpp template < class T > class TObjRefImpl : public T { public : TObjRefImpl () : m_cRef ( 1 ) { } virtual ~ TObjRefImpl (){ } //!\u6dfb\u52a0\u5f15\u7528 /*! */ virtual void AddRef () { InterlockedIncrement ( & m_cRef ); } //!\u91ca\u653e\u5f15\u7528 /*! */ virtual void Release () { InterlockedDecrement ( & m_cRef ); if ( m_cRef == 0 ) { OnFinalRelease (); } } //!\u91ca\u653e\u5bf9\u8c61 /*! */ virtual void OnFinalRelease () { delete this ; } protected : volatile LONG m_cRef ; }; template < class T , class T2 > class TObjRefImpl2 : public TObjRefImpl < T > { public : virtual void OnFinalRelease () { delete static_cast < T2 *> ( this ); } }; TObjRefImpl \u4e00\u4e2a\u91cd\u8981\u7684\u865a\u51fd\u6570\u662f void OnFinalRelease(){delete this;} \u7531\u4e8e SWindow \u53ca SSkinObjBase \u662f\u5728 SOUI \u6a21\u5757\u4e2d\u5b9e\u73b0\u7684\uff0c\u56e0\u6b64\u6d3e\u751f\u81ea\u8fd9\u4e24\u4e2a\u7c7b\u7684\u65b0\u7684 \u63a7\u4ef6\u7c7b\u53ca\u76ae\u80a4\u7c7b\u6700\u540e\u90fd\u5c06\u5728 SOUI \u6a21\u5757\u4e2d\u88ab\u91ca\u653e\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86\u5bf9\u8c61\u5185\u5b58\u7684\u5206\u914d\u3001\u91ca\u653e\u5728\u4e00 \u4e2a\u6a21\u5757\u3002 \u8fd9\u4e5f\u5c31\u662f\u8bf4\u4e0d\u7ba1\u662f SOUI \u6a21\u5757\u5185\u5b9e\u73b0\u7684\u63a7\u4ef6\u8fd8\u662f\u5728\u5e94\u7528\u5c42\u6269\u5c55\u7684\u63a7\u4ef6\u4e00\u822c\u60c5\u51b5\u4e0b\u90fd\u5e94\u8be5\u5411 SOUI \u7cfb\u7edf\u6ce8\u518c\u5e76\u7ecf\u7531 SOUI \u5185\u6838\u6765\u5b9e\u73b0\u5bf9\u8c61\u7684\u5206\u914d\u4e0e\u91ca\u653e\u3002 \u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u662f\u4e0d\u662f\u6240\u6709\u65b0\u63a7\u4ef6\u90fd\u5fc5\u987b\u5411\u7cfb\u7edf\u6ce8\u518c\u5462\uff1f \u5f53\u7136\u4e0d\u662f\u7684\uff0c\u6ce8\u610f OnFinalRelease \u662f\u4e00\u4e2a\u865a\u51fd\u6570\uff0c\u53ea\u9700\u8981\u5728\u65b0\u7684\u63a7\u4ef6\u7c7b\u4e2d\u589e\u52a0\u4e00\u4e2a void OnFinalRelease(){delete this;} \u5c31\u53ef\u4ee5\u628a\u63a7\u4ef6\u5185\u5b58\u7684\u91ca\u653e\u8f6c\u79fb\u5230\u5e94\u7528\u5c42\u7684\u6a21\u5757\u4e86\u3002\u5982\u6b64\u4f60\u5c31\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u6a21\u5757\u4e2d\u76f4\u63a5\u4f7f\u7528 new \u6765\u521b\u5efa\u65b0\u63a7\u4ef6\u4e86\u3002(\u53ef\u4ee5\u53c2\u8003\u5c5e\u6027\u8868\u63a7\u4ef6\u4e2d\u90e8\u5206\u5b50\u63a7\u4ef6\u7684\u5b9e\u73b0\uff09","title":"4.17 \u5728 SOUI \u4e2d\u7684\u63a7\u4ef6\u6ce8\u518c\u673a\u5236"},{"location":"Development/17/#417-soui","text":"Win32 \u7f16\u7a0b\u4e2d\uff0c\u7528\u6237\u9700\u8981\u4e00\u4e2a\u65b0\u63a7\u4ef6\u65f6\uff0c\u9700\u8981\u5411\u7cfb\u7edf\u6ce8\u518c\u4e00\u4e2a\u65b0\u7684\u63a7\u4ef6\u7c7b\u578b\u3002\u6ce8\u518c\u4ee5\u540e\uff0c \u8c03\u7528::CreateWindow \u65f6\u624d\u80fd\u6839\u636e\u6807\u8bc6\u63a7\u4ef6\u7c7b\u578b\u7684\u5b57\u7b26\u4e32\u521b\u5efa\u51fa\u4e00\u4e2a\u65b0\u7684\u63a7\u4ef6\u7a97\u53e3\u5bf9\u8c61\u3002 \u4e3a\u4e86\u80fd\u591f\u4ece XML \u63cf\u8ff0\u7684\u5b57\u7b26\u4e32\u4e2d\u521b\u5efa\u51fa\u9700\u8981\u7684\u63a7\u4ef6\u5bf9\u8c61\uff0c\u548c Win32 \u7c7b\u4f3c\uff0c\u5728 SOUI \u4e2d\u8981 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u63a7\u4ef6\u4e5f\u540c\u6837\u9700\u8981\u5411 SOUI \u7cfb\u7edf\u6ce8\u518c\u65b0\u7684\u63a7\u4ef6\u7c7b\u3002 \u4ece demo.cpp \u7684 main \u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u7c7b\u4f3c\u5982\u4e0b\u7684\u63a7\u4ef6\u6ce8\u518c\u63a7\u4ef6\u7684\u4ee3\u7801\uff1a //\u5411 SApplication \u7cfb\u7edf\u4e2d\u6ce8\u518c\u7531\u5916\u90e8\u6269\u5c55\u7684\u63a7\u4ef6\u53ca SkinObj \u7c7b SWkeLoader wkeLoader ; if ( wkeLoader . Init ( _T ( \"wke.dll\" ))) { theApp -> RegisterWndFactory ( TplSWindowFactory < SWkeWebkit > ()); //\u6ce8\u518c WKE \u6d4f\u89c8\u5668 } theApp -> RegisterWndFactory ( TplSWindowFactory < SGifPlayer > ()); //\u6ce8\u518c GIFPlayer theApp -> RegisterSkinFactory ( TplSkinFactory < SSkinGif > ()); //\u6ce8\u518c SkinGif theApp -> RegisterSkinFactory ( TplSkinFactory < SSkinAPNG > ()); //\u6ce8\u518c SSkinAPNG theApp -> RegisterSkinFactory ( TplSkinFactory < SSkinVScrollbar > ()); //\u6ce8\u518c\u7eb5 \u5411\u6eda\u52a8\u6761\u76ae\u80a4 theApp -> RegisterWndFactory ( TplSWindowFactory < SIPAddressCtrl > ()); //\u6ce8\u518c IP \u63a7\u4ef6 theApp -> RegisterWndFactory ( TplSWindowFactory < SPropertyGrid > ()); //\u6ce8\u518c\u5c5e \u6027\u8868\u63a7\u4ef6 theApp -> RegisterWndFactory ( TplSWindowFactory < SChromeTabCtrl > ()); //\u6ce8\u518c ChromeTabCtrl theApp -> RegisterWndFactory ( TplSWindowFactory < SIECtrl > ()); //\u6ce8\u518c IECtrl theApp -> RegisterWndFactory ( TplSWindowFactory < SChatEdit > ()); //\u6ce8\u518c ChatEdit theApp -> RegisterWndFactory ( TplSWindowFactory < SScrollText > ()); //\u6ce8\u518c SScrollText if ( SUCCEEDED ( CUiAnimation :: Init ())) { theApp -> RegisterWndFactory ( TplSWindowFactory < SUiAnimationWnd > ()); //\u6ce8\u518c\u52a8\u753b\u63a7 \u4ef6 } theApp -> RegisterWndFactory ( TplSWindowFactory < SFlyWnd > ()); //\u6ce8\u518c\u98de\u884c\u52a8\u753b \u63a7\u4ef6 theApp -> RegisterWndFactory ( TplSWindowFactory < SFadeFrame > ()); //\u6ce8\u518c\u6e10\u663e \u9690\u52a8\u753b\u63a7\u4ef6 theApp -> RegisterWndFactory ( TplSWindowFactory < SRadioBox2 > ()); //\u6ce8\u518c\u6e10\u663e \u9690\u52a8\u753b\u63a7\u4ef6 \u4e0a\u9762\u4ee3\u7801\u4e2d\u5373\u6709\u65b0\u76ae\u80a4\u5bf9\u8c61\u7684\u6ce8\u518c\u4e5f\u6709\u7a97\u53e3\u63a7\u4ef6\u7684\u6ce8\u518c\uff0c\u8fd9\u79cd\u6ce8\u518c\u63a7\u4ef6\u65b9\u5f0f\u770b\u8d77\u6765\u6709\u70b9\u602a \u5f02\uff0c\u4f46\u4f7f\u7528\u8d77\u6765\u4e5f\u8fd8\u7b97\u662f\u7b80\u5355\uff0c\u53ea\u9700\u8981\u4e00\u884c\u4ee3\u7801\uff08\u5b9e\u9645\u4e0a\u662f\u4ece\u8457\u540d\u7684\u6e38\u620f GUI CEGUI \u501f \u9274\u8fc7\u6765\u7684\uff09\u3002 \u4ee5\u6ce8\u518c\u7a97\u53e3\u63a7\u4ef6\u4e3a\u4f8b\uff0c\u4e0b\u9762\u6211\u6765\u89e3\u91ca\u4e00\u4e0b\u4e3a\u4ec0\u4e48\u4f1a\u6709\u8fd9\u6837\u4e00\u79cd\u63a7\u4ef6\u6ce8\u518c\u65b9\u5f0f\u3002 \u5148\u770b\u770b TplSWindowFactory \u6a21\u677f\u7c7b\u7684\u5b9e\u73b0\uff1a class SWindowFactory { public : virtual ~ SWindowFactory () {} virtual SWindow * NewWindow () = 0 ; virtual LPCWSTR SWindowBaseName () = 0 ; virtual const SStringW & getWindowType () = 0 ; virtual SWindowFactory * Clone () const = 0 ; }; template < typename T > class TplSWindowFactory : public SWindowFactory { public : //! Default constructor. TplSWindowFactory () : m_strTypeName ( T :: GetClassName ()) { } LPCWSTR SWindowBaseName (){ return T :: BaseClassName ();} // Implement WindowFactory interface virtual SWindow * NewWindow () { return new T ; } virtual const SStringW & getWindowType () { return m_strTypeName ; } virtual SWindowFactory * Clone () const { return new TplSWindowFactory (); } protected : SStringW m_strTypeName ; }; ``` TplSWindowFactory \u4ece SWindowFactory \u6d3e\u751f\uff0c\u81ea\u52a8\u4e3a\u6a21\u677f\u53c2\u6570\u4e2d\u6307\u5b9a\u7684\u7c7b\u578b\u751f\u6210\u4e00\u4e2a SWindowFactory \u5bf9\u8c61\u3002 SWindowFactory \u6709\u4ec0\u4e48\u7528\u5462\uff1f SWindowFactory \u6700\u6838\u5fc3\u7684\u7528\u9014\u5c31\u5728\u4e8e\u5b83\u7684\u65b9\u6cd5\uff1a SWindow * SWindowFactory :: NewWindow (); \u8be5\u65b9\u6cd5\u8bf4\u6765\u5f88\u7b80\u5355\uff0c\u4e0d\u8fc7\u662f\u6839\u636e\u4e0d\u540c\u7684\u5b57\u7b26\u4e32\u4ece\u5806\u4e0a\u5206\u914d\u4e00\u4e2a SWindow \u5bf9\u8c61\uff0c\u4f46\u662f\u5728 C ++ \u4e2d\u6211\u4eec\u9700\u8981\u6ee1\u8db3\u4e00\u6761\u57fa\u672c\u539f\u5219\uff1a\u5185\u5b58\u5728\u54ea\u4e2a\u6a21\u5757\u4e2d\u5206\u914d\uff08\u4ece\u54ea\u4e2a\u6a21\u5757\u7684\u5806\u4e0a\u5206\u914d\uff09\u5c31 \u5fc5\u987b\u88ab\u54ea\u4e2a\u6a21\u5757\u91ca\u653e\u3002 \u5728 SOUI \u4e2d\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\u63a7\u4ef6\u90fd\u662f\u7531 SOUI . DLL \u8fd9\u4e2a\u6a21\u5757\u6765\u5206\u914d\u5185\u5b58\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4 SWindow * SWindowFactory :: NewWindow () \u53ea\u4f1a\u5728 SOUI \u6a21\u5757\u4e2d\u8c03\u7528\u3002 \u90a3\u4e48\u751f\u6210\u7684\u5bf9\u8c61\u5728\u54ea\u91cc\u91ca\u653e\u5462\uff1f \u8fd9\u5c31\u9700\u8981\u770b\u4e00\u4e0b SWindow \u6216\u8005 SSkinObjBase \u8fd9\u4e24\u4e2a\u7c7b\u7684\u5b9e\u73b0\u4e86\u3002 ``` cpp class SOUI_EXP SWindow : public SObject , public SMsgHandleState , public TObjRefImpl2 < IObjRef , SWindow > { SOUI_CLASS_NAME ( SWindow , L \"window\" ) //.... }; class SOUI_EXP SSkinObjBase : public TObjRefImpl < ISkinObj > { //...... }; ``` SWindow \u548c SSkinObjBase \u5b9e\u9645\u4e0a\u90fd\u6d3e\u751f\u81ea TObjRefImpl \u8fd9\u4e2a\u6a21\u677f\u7c7b\u3002\u4e0b\u9762\u770b\u4e00\u4e0b\u8fd9\u4e2a \u7c7b\u7684\u5b9e\u73b0 : ``` cpp template < class T > class TObjRefImpl : public T { public : TObjRefImpl () : m_cRef ( 1 ) { } virtual ~ TObjRefImpl (){ } //!\u6dfb\u52a0\u5f15\u7528 /*! */ virtual void AddRef () { InterlockedIncrement ( & m_cRef ); } //!\u91ca\u653e\u5f15\u7528 /*! */ virtual void Release () { InterlockedDecrement ( & m_cRef ); if ( m_cRef == 0 ) { OnFinalRelease (); } } //!\u91ca\u653e\u5bf9\u8c61 /*! */ virtual void OnFinalRelease () { delete this ; } protected : volatile LONG m_cRef ; }; template < class T , class T2 > class TObjRefImpl2 : public TObjRefImpl < T > { public : virtual void OnFinalRelease () { delete static_cast < T2 *> ( this ); } }; TObjRefImpl \u4e00\u4e2a\u91cd\u8981\u7684\u865a\u51fd\u6570\u662f void OnFinalRelease(){delete this;} \u7531\u4e8e SWindow \u53ca SSkinObjBase \u662f\u5728 SOUI \u6a21\u5757\u4e2d\u5b9e\u73b0\u7684\uff0c\u56e0\u6b64\u6d3e\u751f\u81ea\u8fd9\u4e24\u4e2a\u7c7b\u7684\u65b0\u7684 \u63a7\u4ef6\u7c7b\u53ca\u76ae\u80a4\u7c7b\u6700\u540e\u90fd\u5c06\u5728 SOUI \u6a21\u5757\u4e2d\u88ab\u91ca\u653e\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86\u5bf9\u8c61\u5185\u5b58\u7684\u5206\u914d\u3001\u91ca\u653e\u5728\u4e00 \u4e2a\u6a21\u5757\u3002 \u8fd9\u4e5f\u5c31\u662f\u8bf4\u4e0d\u7ba1\u662f SOUI \u6a21\u5757\u5185\u5b9e\u73b0\u7684\u63a7\u4ef6\u8fd8\u662f\u5728\u5e94\u7528\u5c42\u6269\u5c55\u7684\u63a7\u4ef6\u4e00\u822c\u60c5\u51b5\u4e0b\u90fd\u5e94\u8be5\u5411 SOUI \u7cfb\u7edf\u6ce8\u518c\u5e76\u7ecf\u7531 SOUI \u5185\u6838\u6765\u5b9e\u73b0\u5bf9\u8c61\u7684\u5206\u914d\u4e0e\u91ca\u653e\u3002 \u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u662f\u4e0d\u662f\u6240\u6709\u65b0\u63a7\u4ef6\u90fd\u5fc5\u987b\u5411\u7cfb\u7edf\u6ce8\u518c\u5462\uff1f \u5f53\u7136\u4e0d\u662f\u7684\uff0c\u6ce8\u610f OnFinalRelease \u662f\u4e00\u4e2a\u865a\u51fd\u6570\uff0c\u53ea\u9700\u8981\u5728\u65b0\u7684\u63a7\u4ef6\u7c7b\u4e2d\u589e\u52a0\u4e00\u4e2a void OnFinalRelease(){delete this;} \u5c31\u53ef\u4ee5\u628a\u63a7\u4ef6\u5185\u5b58\u7684\u91ca\u653e\u8f6c\u79fb\u5230\u5e94\u7528\u5c42\u7684\u6a21\u5757\u4e86\u3002\u5982\u6b64\u4f60\u5c31\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u6a21\u5757\u4e2d\u76f4\u63a5\u4f7f\u7528 new \u6765\u521b\u5efa\u65b0\u63a7\u4ef6\u4e86\u3002(\u53ef\u4ee5\u53c2\u8003\u5c5e\u6027\u8868\u63a7\u4ef6\u4e2d\u90e8\u5206\u5b50\u63a7\u4ef6\u7684\u5b9e\u73b0\uff09","title":"4.17 \u5728 SOUI \u4e2d\u7684\u63a7\u4ef6\u6ce8\u518c\u673a\u5236"},{"location":"Development/18/","text":"4.18 \u5728 SOUI \u4e2d\u4f7f\u7528\u4ee3\u7801\u5411\u7a97\u53e3\u4e2d\u63d2\u5165\u5b50\u7a97\u53e3 \u00b6 \u4f7f\u7528 SOUI \u5f00\u53d1\u5ba2\u6237\u7aef UI \u7a0b\u5e8f\uff0c\u901a\u5e38\u4e5f\u63a8\u8350\u4f7f\u7528 XML \u4ee3\u7801\u6765\u521b\u5efa\u7a97\u53e3\uff0c\u8fd9\u6837\u521b\u5efa\u7684\u7a97\u53e3 \u4f7f\u7528\u65b9\u4fbf\uff0c\u5f53\u7a97\u53e3\u5927\u5c0f\u6539\u53d8\u65f6\uff0c\u5185\u90e8\u7684\u5b50\u7a97\u53e3\u4e5f\u66f4\u5bb9\u6613\u534f\u540c\u53d8\u5316\u3002 \u4f46\u662f\u6700\u8fd1\u4e0d\u65ad\u6709\u7f51\u53cb\u54a8\u8be2\u5982\u4f55\u4f7f\u7528\u4ee3\u7801\u6765\u521b\u5efa SOUI \u5b50\u7a97\u53e3\uff0c\u7279\u6b64\u5728\u8fd9\u91cc\u7edf\u4e00\u89e3\u7b54\u3002 \u8981\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\uff0c\u9996\u5148\u8981\u4e86\u89e3 SOUI \u7a97\u53e3\u521b\u5efa\u53ca\u5e03\u5c40\u7684\u6d41\u7a0b\u3002 \u5148\u4ece swnd.cpp \u91cc\u6284\u4e00\u6bb5\u521b\u5efa\u5b50\u7a97\u53e3\u7684\u4ee3\u7801\uff1a BOOL SWindow::CreateChildren ( pugi :: xml_node xmlNode ) { TestMainThread (); for ( pugi :: xml_node xmlChild = xmlNode . first_child (); xmlChild ; xmlChild = xmlChild . next_sibling ()) { if ( xmlChild . type () != pugi :: node_element ) continue ; if ( _wcsicmp ( xmlChild . name (), KLabelInclude ) == 0 ) { //\u5728\u7a97\u53e3\u5e03\u5c40\u4e2d\u652f\u6301 include \u6807\u7b7e SStringW strSrc = S_CW2T ( xmlChild . attribute ( L \"src\" ). value ()); pugi :: xml_document xmlDoc ; SStringTList strLst ; if ( 2 == ParseResID ( strSrc , strLst )) { LOADXML ( xmlDoc , strLst [ 1 ], strLst [ 0 ]); } else { LOADXML ( xmlDoc , strLst [ 0 ], RT_LAYOUT ); } if ( xmlDoc ) { CreateChildren ( xmlDoc . child ( KLabelInclude )); } else { SASSERT ( FALSE ); } } else if ( ! xmlChild . get_userdata ()) //\u901a\u8fc7 userdata \u6765\u6807\u8bb0\u4e00\u4e2a\u8282\u70b9\u662f\u5426\u53ef\u4ee5 \u5ffd\u7565 { SWindow * pChild = SApplication :: getSingleton (). CreateWindowByName ( xmlChild . name ()); if ( pChild ) { InsertChild ( pChild ); pChild -> InitFromXml ( xmlChild ); } } } return TRUE ; } ``` \u8fd9\u4e2a\u51fd\u6570\u7684\u529f\u80fd\u662f\u4e3a this \u4ece XML \u4e2d\u521b\u5efa\u5b83\u7684\u5b50\u7a97\u53e3\uff0c\u4e3b\u8981\u6ce8\u610f\u4ee3\u7801\u4e2d\u7ea2\u8272\u90e8\u5206\u3002 \u5176\u4e2d\u7b2c 30 \u884c\u662f\u4ece SOUI \u7684\u7a97\u53e3\u7c7b\u5382\u6839\u636e XML \u7ed3\u70b9\u540d new \u51fa\u4e00\u4e2a\u7a97\u53e3\u5bf9\u8c61\u3002 \u7b2c 33 \u884c\u628a\u521b\u5efa\u51fa\u6765\u7684\u7a97\u53e3\u63d2\u5165\u5230 this \u7684\u5b50\u7a97\u53e3\u94fe\u8868\u91cc\u53bb\u3002 \u800c\u7b2c 34 \u884c\u7684\u529f\u80fd\u662f\u4ece\u5b50\u7a97\u53e3\u5bf9\u5e94\u7684 XML \u7ed3\u70b9\u521d\u59cb\u5316\u5b50\u7a97\u53e3\u5c5e\u6027\u3002 \u5f88\u591a\u7f51\u53cb\u4ee5\u4e3a\u53ea\u8981\u5b8c\u6210\u4e0a\u9762\u6b65\u9aa4\u5c31\u5e94\u8be5\u53ef\u4ee5\u663e\u793a\u7a97\u53e3\u4e86\uff0c\u4f46\u7ed3\u679c\u786e\u5927\u5931\u6240\u671b\u3002 SOUI \u4e00\u4e2a\u91cd\u8981\u7279\u70b9\u5c31\u662f\u80fd\u591f\u81ea\u52a8\u5e03\u5c40\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u7684\u79d8\u5bc6\u5c31\u5728\u4e8e SWindow :: OnRelayout \u65b9\u6cd5\u3002 ``` cpp void SWindow :: OnRelayout ( const CRect & rcOld , const CRect & rcNew ) { SWindow * pParent = GetParent (); if ( pParent ) { pParent -> InvalidateRect ( rcOld ); pParent -> InvalidateRect ( rcNew ); } else { InvalidateRect ( m_rcWindow ); } SSendMessage ( WM_NCCALCSIZE ); //\u8ba1\u7b97\u975e\u5ba2\u6237\u533a\u5927\u5c0f UpdateChildrenPosition (); //\u66f4\u65b0\u5b50\u7a97\u53e3\u4f4d\u7f6e CRect rcClient ; GetClientRect ( & rcClient ); SSendMessage ( WM_SIZE , 0 , MAKELPARAM ( rcClient . Width (), rcClient . Height ())); } ``` \u5f53 this \u7a97\u53e3\u4f4d\u7f6e\u6539\u53d8\u540e\u90fd\u4f1a\u8fdb\u5165 OnRelayout \u65b9\u6cd5\u3002 \u6ce8\u610f\u51fd\u6570\u7b2c 15 \u884c\uff1a UpdateChildrenPosition () \uff1b\u8fd9\u4e2a\u8c03\u7528\u7684\u529f\u80fd\u5c31\u662f\u5c06 this \u7684\u6240\u6709\u5b50\u63a7 \u4ef6\u6309\u7167\u63a7\u4ef6\u4e2d\u5b9a\u4e49\u7684\u5e03\u5c40\u5c5e\u6027\u6765\u81ea\u52a8\u5e03\u5c40\u3002 \u8981\u5b9e\u73b0\u7a97\u53e3\u7684\u5e03\u5c40\uff0c\u9664\u4e86\u8c03\u7528\u7236\u7a97\u53e3\u7684 UpdateChildrenPosition () \u65b9\u6cd5\u5916\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u4f7f \u7528 SWindow :: Move \u65b9\u6cd5\u76f4\u63a5\u4fee\u6539\u7a97\u53e3\u4f4d\u7f6e\u3002 \u770b\u5230\u8fd9\u91cc\u5927\u5bb6\u5e94\u8be5\u5df2\u7ecf\u660e\u767d\u662f\u4ec0\u4e48\u539f\u56e0\u4e86\u3002 \u5f53\u7136\u4e0a\u8ff0\u65b9\u6cd5\u662f SOUI \u4e2d\u4f7f\u7528\u7684\u7a97\u53e3\u521b\u5efa\u53ca\u5e03\u5c40\u65b9\u6cd5\uff0c\u5177\u4f53\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u4ee3\u7801\u521b\u5efa\u63a7 \u4ef6\u8fd8\u6709\u4e00\u4e2a\u5730\u65b9\u9700\u8981\u6ce8\u610f\u3002 \u5173\u952e\u7684\u95ee\u9898\u662f\u5728 SOUI \u7cfb\u7edf\u4e2d\u7f16\u8bd1\u9ed8\u8ba4\u4f7f\u7528 MT \uff08\u9759\u6001\u94fe\u63a5\uff09\u65b9\u5f0f\u6765\u94fe\u63a5 CRT \u3002 MT \u65b9\u5f0f\u7f16\u8bd1\u65f6\u4f7f\u7528 CRT \u5206\u914d\u5185\u5b58\u662f\u5185\u5b58\u662f\u5c5e\u6027\u8c03\u7528\u7684\u6a21\u5757\uff08 DLL \uff09\u7684\uff0c\u5185\u5b58\u7684\u91ca\u653e\u4e5f\u56e0 \u6b64\u5fc5\u987b\u5728\u8be5\u6a21\u5757\u5185\u6267\u884c\u3002 \u5982\u679c\u7528\u6237\u76f4\u63a5\u4f7f\u7528 new \u6765\u5206\u914d\u4e00\u4e2a\u7a97\u53e3\u5bf9\u8c61\uff0c\u5e76\u628a\u5b83\u63d2\u5165\u5230 SOUI \u7a97\u53e3\u94fe\u8868\u4e2d\uff0c\u5728\u7a97\u53e3\u91ca \u653e\u7684\u65f6\u673a\u662f\u5728 SWindow :: OnFinalRelease () \u4e2d\uff08\u5b9e\u9645\u662f\u57fa\u7c7b TObjRefImpl2 < IObjRef , SWindow > \u7684\u65b9\u6cd5 ) \u3002 SWindow \u7684\u4ee3\u7801\u6bb5\u662f\u7f16\u8bd1\u5728 soui . dll \u4e2d\uff0c\u56e0\u6b64\u9ed8\u8ba4\u6267\u884c\u5185\u5b58\u91ca\u653e\u7684\u4ee3\u7801\u662f\u5728 soui . dll \u4e2d\uff0c\u4ece\u800c\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83\u3002 \u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a \u5bf9\u4e8e\u7cfb\u7edf\u63a7\u4ef6\uff0c\u7528\u6237\u5e94\u8be5\u4f7f\u7528 SApplication :: getSingleton (). CreateWindowByName ( xmlChild . name ()); \u6765\u521b\u5efa\u7a97\u53e3\u5bf9 \u8c61\u3002 \u800c\u5bf9\u4e8e\u7528\u6237\u81ea\u5df1\u6d3e\u751f\u5b9e\u73b0\u7684\u6269\u5c55\u7a97\u53e3\u7c7b\u5e76\u6ca1\u6709\u5411 SOUI \u7684\u7a97\u53e3\u7c7b\u5382\u6ce8\u518c\u65f6\uff0c\u53ea\u80fd\u4f7f\u7528 new \u65b9\u6cd5\u6765\u521b\u5efa\u7a97\u53e3\u5bf9\u8c61\u3002\u6ce8\u610f SWindow \u7684\u57fa\u7c7b\uff1a TObjRefImpl2 < IObjRef , SWindow > ``` cpp template < class T > class TObjRefImpl : public T { public : TObjRefImpl () : m_cRef ( 1 ) { } virtual ~ TObjRefImpl (){ } //!\u6dfb\u52a0\u5f15\u7528 /*! */ virtual long AddRef () { return InterlockedIncrement ( & m_cRef ); } //!\u91ca\u653e\u5f15\u7528 /*! */ virtual long Release () { long lRet = InterlockedDecrement ( & m_cRef ); if ( lRet == 0 ) { OnFinalRelease (); } return lRet ; } //!\u91ca\u653e\u5bf9\u8c61 /*! */ virtual void OnFinalRelease () { delete this ; } protected : volatile LONG m_cRef ; }; template < class T , class T2 > class TObjRefImpl2 : public TObjRefImpl < T > { public : virtual void OnFinalRelease () { delete static_cast < T2 *> ( this ); } }; \u6ce8\u610f\u4ee3\u7801\u4e2d\u7684 OnFinalRelease\uff0c\u5b83\u662f\u4e00\u4e2a\u865a\u65b9\u6cd5\u3002\u56e0\u6b64\u5bf9\u4e8e\u4f7f\u7528 new \u521b\u5efa\u7684\u7a97\u53e3\u5bf9\u8c61\uff0c \u53ea\u9700\u8981\u5728\u7a97\u53e3\u7c7b\u4e2d\u6284\u4e00\u6bb5\u4ee3\u7801\u5982\u4e0b\u5373\u53ef\uff1a class myctrl : public SWindow { SOUI_CLASS_NAME ( myctrl , L \"myctrl\" ) public : //... virtual void OnFinalRelease () { delete this ;} //... };","title":"4.18 \u5728 SOUI \u4e2d\u4f7f\u7528\u4ee3\u7801\u5411\u7a97\u53e3\u4e2d\u63d2\u5165\u5b50\u7a97\u53e3"},{"location":"Development/18/#418-soui","text":"\u4f7f\u7528 SOUI \u5f00\u53d1\u5ba2\u6237\u7aef UI \u7a0b\u5e8f\uff0c\u901a\u5e38\u4e5f\u63a8\u8350\u4f7f\u7528 XML \u4ee3\u7801\u6765\u521b\u5efa\u7a97\u53e3\uff0c\u8fd9\u6837\u521b\u5efa\u7684\u7a97\u53e3 \u4f7f\u7528\u65b9\u4fbf\uff0c\u5f53\u7a97\u53e3\u5927\u5c0f\u6539\u53d8\u65f6\uff0c\u5185\u90e8\u7684\u5b50\u7a97\u53e3\u4e5f\u66f4\u5bb9\u6613\u534f\u540c\u53d8\u5316\u3002 \u4f46\u662f\u6700\u8fd1\u4e0d\u65ad\u6709\u7f51\u53cb\u54a8\u8be2\u5982\u4f55\u4f7f\u7528\u4ee3\u7801\u6765\u521b\u5efa SOUI \u5b50\u7a97\u53e3\uff0c\u7279\u6b64\u5728\u8fd9\u91cc\u7edf\u4e00\u89e3\u7b54\u3002 \u8981\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\uff0c\u9996\u5148\u8981\u4e86\u89e3 SOUI \u7a97\u53e3\u521b\u5efa\u53ca\u5e03\u5c40\u7684\u6d41\u7a0b\u3002 \u5148\u4ece swnd.cpp \u91cc\u6284\u4e00\u6bb5\u521b\u5efa\u5b50\u7a97\u53e3\u7684\u4ee3\u7801\uff1a BOOL SWindow::CreateChildren ( pugi :: xml_node xmlNode ) { TestMainThread (); for ( pugi :: xml_node xmlChild = xmlNode . first_child (); xmlChild ; xmlChild = xmlChild . next_sibling ()) { if ( xmlChild . type () != pugi :: node_element ) continue ; if ( _wcsicmp ( xmlChild . name (), KLabelInclude ) == 0 ) { //\u5728\u7a97\u53e3\u5e03\u5c40\u4e2d\u652f\u6301 include \u6807\u7b7e SStringW strSrc = S_CW2T ( xmlChild . attribute ( L \"src\" ). value ()); pugi :: xml_document xmlDoc ; SStringTList strLst ; if ( 2 == ParseResID ( strSrc , strLst )) { LOADXML ( xmlDoc , strLst [ 1 ], strLst [ 0 ]); } else { LOADXML ( xmlDoc , strLst [ 0 ], RT_LAYOUT ); } if ( xmlDoc ) { CreateChildren ( xmlDoc . child ( KLabelInclude )); } else { SASSERT ( FALSE ); } } else if ( ! xmlChild . get_userdata ()) //\u901a\u8fc7 userdata \u6765\u6807\u8bb0\u4e00\u4e2a\u8282\u70b9\u662f\u5426\u53ef\u4ee5 \u5ffd\u7565 { SWindow * pChild = SApplication :: getSingleton (). CreateWindowByName ( xmlChild . name ()); if ( pChild ) { InsertChild ( pChild ); pChild -> InitFromXml ( xmlChild ); } } } return TRUE ; } ``` \u8fd9\u4e2a\u51fd\u6570\u7684\u529f\u80fd\u662f\u4e3a this \u4ece XML \u4e2d\u521b\u5efa\u5b83\u7684\u5b50\u7a97\u53e3\uff0c\u4e3b\u8981\u6ce8\u610f\u4ee3\u7801\u4e2d\u7ea2\u8272\u90e8\u5206\u3002 \u5176\u4e2d\u7b2c 30 \u884c\u662f\u4ece SOUI \u7684\u7a97\u53e3\u7c7b\u5382\u6839\u636e XML \u7ed3\u70b9\u540d new \u51fa\u4e00\u4e2a\u7a97\u53e3\u5bf9\u8c61\u3002 \u7b2c 33 \u884c\u628a\u521b\u5efa\u51fa\u6765\u7684\u7a97\u53e3\u63d2\u5165\u5230 this \u7684\u5b50\u7a97\u53e3\u94fe\u8868\u91cc\u53bb\u3002 \u800c\u7b2c 34 \u884c\u7684\u529f\u80fd\u662f\u4ece\u5b50\u7a97\u53e3\u5bf9\u5e94\u7684 XML \u7ed3\u70b9\u521d\u59cb\u5316\u5b50\u7a97\u53e3\u5c5e\u6027\u3002 \u5f88\u591a\u7f51\u53cb\u4ee5\u4e3a\u53ea\u8981\u5b8c\u6210\u4e0a\u9762\u6b65\u9aa4\u5c31\u5e94\u8be5\u53ef\u4ee5\u663e\u793a\u7a97\u53e3\u4e86\uff0c\u4f46\u7ed3\u679c\u786e\u5927\u5931\u6240\u671b\u3002 SOUI \u4e00\u4e2a\u91cd\u8981\u7279\u70b9\u5c31\u662f\u80fd\u591f\u81ea\u52a8\u5e03\u5c40\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u7684\u79d8\u5bc6\u5c31\u5728\u4e8e SWindow :: OnRelayout \u65b9\u6cd5\u3002 ``` cpp void SWindow :: OnRelayout ( const CRect & rcOld , const CRect & rcNew ) { SWindow * pParent = GetParent (); if ( pParent ) { pParent -> InvalidateRect ( rcOld ); pParent -> InvalidateRect ( rcNew ); } else { InvalidateRect ( m_rcWindow ); } SSendMessage ( WM_NCCALCSIZE ); //\u8ba1\u7b97\u975e\u5ba2\u6237\u533a\u5927\u5c0f UpdateChildrenPosition (); //\u66f4\u65b0\u5b50\u7a97\u53e3\u4f4d\u7f6e CRect rcClient ; GetClientRect ( & rcClient ); SSendMessage ( WM_SIZE , 0 , MAKELPARAM ( rcClient . Width (), rcClient . Height ())); } ``` \u5f53 this \u7a97\u53e3\u4f4d\u7f6e\u6539\u53d8\u540e\u90fd\u4f1a\u8fdb\u5165 OnRelayout \u65b9\u6cd5\u3002 \u6ce8\u610f\u51fd\u6570\u7b2c 15 \u884c\uff1a UpdateChildrenPosition () \uff1b\u8fd9\u4e2a\u8c03\u7528\u7684\u529f\u80fd\u5c31\u662f\u5c06 this \u7684\u6240\u6709\u5b50\u63a7 \u4ef6\u6309\u7167\u63a7\u4ef6\u4e2d\u5b9a\u4e49\u7684\u5e03\u5c40\u5c5e\u6027\u6765\u81ea\u52a8\u5e03\u5c40\u3002 \u8981\u5b9e\u73b0\u7a97\u53e3\u7684\u5e03\u5c40\uff0c\u9664\u4e86\u8c03\u7528\u7236\u7a97\u53e3\u7684 UpdateChildrenPosition () \u65b9\u6cd5\u5916\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u4f7f \u7528 SWindow :: Move \u65b9\u6cd5\u76f4\u63a5\u4fee\u6539\u7a97\u53e3\u4f4d\u7f6e\u3002 \u770b\u5230\u8fd9\u91cc\u5927\u5bb6\u5e94\u8be5\u5df2\u7ecf\u660e\u767d\u662f\u4ec0\u4e48\u539f\u56e0\u4e86\u3002 \u5f53\u7136\u4e0a\u8ff0\u65b9\u6cd5\u662f SOUI \u4e2d\u4f7f\u7528\u7684\u7a97\u53e3\u521b\u5efa\u53ca\u5e03\u5c40\u65b9\u6cd5\uff0c\u5177\u4f53\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u4ee3\u7801\u521b\u5efa\u63a7 \u4ef6\u8fd8\u6709\u4e00\u4e2a\u5730\u65b9\u9700\u8981\u6ce8\u610f\u3002 \u5173\u952e\u7684\u95ee\u9898\u662f\u5728 SOUI \u7cfb\u7edf\u4e2d\u7f16\u8bd1\u9ed8\u8ba4\u4f7f\u7528 MT \uff08\u9759\u6001\u94fe\u63a5\uff09\u65b9\u5f0f\u6765\u94fe\u63a5 CRT \u3002 MT \u65b9\u5f0f\u7f16\u8bd1\u65f6\u4f7f\u7528 CRT \u5206\u914d\u5185\u5b58\u662f\u5185\u5b58\u662f\u5c5e\u6027\u8c03\u7528\u7684\u6a21\u5757\uff08 DLL \uff09\u7684\uff0c\u5185\u5b58\u7684\u91ca\u653e\u4e5f\u56e0 \u6b64\u5fc5\u987b\u5728\u8be5\u6a21\u5757\u5185\u6267\u884c\u3002 \u5982\u679c\u7528\u6237\u76f4\u63a5\u4f7f\u7528 new \u6765\u5206\u914d\u4e00\u4e2a\u7a97\u53e3\u5bf9\u8c61\uff0c\u5e76\u628a\u5b83\u63d2\u5165\u5230 SOUI \u7a97\u53e3\u94fe\u8868\u4e2d\uff0c\u5728\u7a97\u53e3\u91ca \u653e\u7684\u65f6\u673a\u662f\u5728 SWindow :: OnFinalRelease () \u4e2d\uff08\u5b9e\u9645\u662f\u57fa\u7c7b TObjRefImpl2 < IObjRef , SWindow > \u7684\u65b9\u6cd5 ) \u3002 SWindow \u7684\u4ee3\u7801\u6bb5\u662f\u7f16\u8bd1\u5728 soui . dll \u4e2d\uff0c\u56e0\u6b64\u9ed8\u8ba4\u6267\u884c\u5185\u5b58\u91ca\u653e\u7684\u4ee3\u7801\u662f\u5728 soui . dll \u4e2d\uff0c\u4ece\u800c\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83\u3002 \u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a \u5bf9\u4e8e\u7cfb\u7edf\u63a7\u4ef6\uff0c\u7528\u6237\u5e94\u8be5\u4f7f\u7528 SApplication :: getSingleton (). CreateWindowByName ( xmlChild . name ()); \u6765\u521b\u5efa\u7a97\u53e3\u5bf9 \u8c61\u3002 \u800c\u5bf9\u4e8e\u7528\u6237\u81ea\u5df1\u6d3e\u751f\u5b9e\u73b0\u7684\u6269\u5c55\u7a97\u53e3\u7c7b\u5e76\u6ca1\u6709\u5411 SOUI \u7684\u7a97\u53e3\u7c7b\u5382\u6ce8\u518c\u65f6\uff0c\u53ea\u80fd\u4f7f\u7528 new \u65b9\u6cd5\u6765\u521b\u5efa\u7a97\u53e3\u5bf9\u8c61\u3002\u6ce8\u610f SWindow \u7684\u57fa\u7c7b\uff1a TObjRefImpl2 < IObjRef , SWindow > ``` cpp template < class T > class TObjRefImpl : public T { public : TObjRefImpl () : m_cRef ( 1 ) { } virtual ~ TObjRefImpl (){ } //!\u6dfb\u52a0\u5f15\u7528 /*! */ virtual long AddRef () { return InterlockedIncrement ( & m_cRef ); } //!\u91ca\u653e\u5f15\u7528 /*! */ virtual long Release () { long lRet = InterlockedDecrement ( & m_cRef ); if ( lRet == 0 ) { OnFinalRelease (); } return lRet ; } //!\u91ca\u653e\u5bf9\u8c61 /*! */ virtual void OnFinalRelease () { delete this ; } protected : volatile LONG m_cRef ; }; template < class T , class T2 > class TObjRefImpl2 : public TObjRefImpl < T > { public : virtual void OnFinalRelease () { delete static_cast < T2 *> ( this ); } }; \u6ce8\u610f\u4ee3\u7801\u4e2d\u7684 OnFinalRelease\uff0c\u5b83\u662f\u4e00\u4e2a\u865a\u65b9\u6cd5\u3002\u56e0\u6b64\u5bf9\u4e8e\u4f7f\u7528 new \u521b\u5efa\u7684\u7a97\u53e3\u5bf9\u8c61\uff0c \u53ea\u9700\u8981\u5728\u7a97\u53e3\u7c7b\u4e2d\u6284\u4e00\u6bb5\u4ee3\u7801\u5982\u4e0b\u5373\u53ef\uff1a class myctrl : public SWindow { SOUI_CLASS_NAME ( myctrl , L \"myctrl\" ) public : //... virtual void OnFinalRelease () { delete this ;} //... };","title":"4.18 \u5728 SOUI \u4e2d\u4f7f\u7528\u4ee3\u7801\u5411\u7a97\u53e3\u4e2d\u63d2\u5165\u5b50\u7a97\u53e3"},{"location":"Development/19/","text":"4.19 \u5728 SOUI \u4e2d\u4f7f\u7528 LUA \u811a\u672c\u5f00\u53d1\u754c\u9762 \u00b6 \u50cf\u5199\u7f51\u9875\u4e00\u6837\u505a\u5ba2\u6237\u7aef\u754c\u9762\u53ef\u80fd\u662f\u5f88\u591a\u5ba2\u6237\u7aef\u5f00\u53d1\u7684\u7406\u60f3\u3002 \u505a\u597d\u4e00\u4e2a\u53ef\u4ee5\u5b9e\u73b0\u548c\u7528\u6237\u4ea4\u4e92\u7684\u52a8\u6001\u7f51\u9875\u5e94\u8be5\u5305\u542b\u4e24\u4e2a\u90e8\u5206\uff1a\u4f7f\u7528 html \u505a\u7f51\u9875\u7684\u5e03\u5c40\uff0c \u4f7f\u7528\u811a\u672c\u5982 vbscript,javascript \u505a\u7528\u6237\u4ea4\u4e92\u7684\u903b\u8f91\u3002\u5f53\u9700\u6c42\u53d8\u5316\u65f6\uff0c\u53ea\u9700\u8981\u5728\u670d\u52a1\u7aef\u628a\u76f8 \u5173\u4ee3\u7801\u8c03\u6574\u4e00\u4e0b\uff0c\u7528\u6237\u5373\u53ef\u770b\u5230\u65b0\u7684\u5185\u5bb9\uff08\u754c\u9762\uff09\u3002 \u4f20\u7edf\u7684\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5f00\u53d1\u6d41\u7a0b\u548c\u7f51\u9875\u5f00\u53d1\u53ef\u80fd\u5b8c\u5168\u4e0d\u540c\u3002 \u9996\u5148\u662f\u754c\u9762\u7684\u5e03\u5c40\uff0c\u5728\u8001\u5f0f\u7684\u754c\u9762\u5e03\u5c40\u8fc7\u7a0b\u4e2d\uff0c\u7a0b\u5e8f\u5458\u5148\u5728\u754c\u9762\u4e0a\u653e\u597d\u5404\u79cd\u63a7\u4ef6\uff0c\u7136\u540e\u9700 \u8981\u81ea\u5df1\u901a\u8fc7\u76f8\u5e94\u7684\u4ee3\u7801\u6765\u7ef4\u62a4\u754c\u9762\u5728\u4e0d\u540c\u72b6\u6001\u4e0b\u63a7\u4ef6\u7684\u663e\u793a\u72b6\u6001\u53ca\u4f4d\u7f6e\u3002\u5f53\u754c\u9762\u4e2d\u5143\u7d20\u5f88 \u591a\u65f6\uff0c\u5355\u7eaf\u5e03\u5c40\u7684\u4ee3\u7801\u53ef\u80fd\u5c31\u4f1a\u975e\u5e38\u7684\u590d\u6742\u3002 \u754c\u9762\u505a\u597d\u4e86\uff0c\u7a0b\u5e8f\u5458\u9700\u8981\u589e\u52a0\u4ee3\u7801\u54cd\u5e94\u754c\u9762\u4e2d UI \u5143\u7d20\u5bf9\u5e94\u7684\u903b\u8f91\u3002\u5982\u903b\u8f91\u6bd4\u8f83\u56fa\u5b9a\uff0c\u4e00\u65e6 \u505a\u597d\u5c31\u4e0d\u9700\u8981\u53d8\u5316\u65f6\uff0c\u8fd9\u6837\u7684\u5b9e\u73b0\u7684\u7a0b\u5e8f\u6548\u7387\u53ef\u80fd\u66f4\u9ad8\u3002\u7136\u800c\u505a\u5ba2\u6237\u7aef\u7684\u4eba\u53ef\u80fd\u90fd\u7ecf\u5386\u8fc7 \u4fee\u6539\u754c\u9762\u7684\u95ee\u9898\u3002\u7b80\u5355\u7684\u63a7\u4ef6\u5750\u6807\u8c03\u6574\u8fd8\u597d\u529e\uff0c\u5982\u679c\u7a0b\u5e8f\u7684\u754c\u9762\u98ce\u683c\u751a\u81f3\u6574\u4e2a\u7a0b\u5e8f\u7684\u8fd0\u884c \u903b\u8f91\u90fd\u8981\u53d8\u5316\u65f6\uff0c\u4f7f\u7528\u4f20\u7edf\u7684\u5f00\u53d1\u65b9\u5f0f\u5b9e\u73b0\u7684\u5ba2\u6237\u7aef\u7a0b\u5e8f\u66f4\u65b0\u8d77\u6765\u4f1a\u975e\u5e38\u56f0\u96be\uff0c\u6709\u65f6\u751a\u81f3 \u53d8\u5f97\u4e0d\u53ef\u80fd\u5b9e\u73b0\u3002 \u8fd1\u5e74\u6765\uff0c\u5728\u5404\u79cd\u65b0\u5174\u7684\u754c\u9762\u5f00\u53d1\u5e93\u4e2d\u4f7f\u7528 XML \u6765\u63cf\u8ff0\u5e03\u5c40\u5df2\u7ecf\u5f97\u5230\u4e86\u5e7f\u6cdb\u7684\u5e94\u7528\u3002\u4f7f\u7528 XML \u63cf\u8ff0\u5e03\u5c40\u7684\u57fa\u672c\u51fa\u53d1\u70b9\u5e94\u8be5\u548c\u4f7f\u7528 HTML \u63cf\u8ff0\u7f51\u9875\u5e03\u5c40\u7c7b\u4f3c\uff0c\u5173\u952e\u662f\u89e3\u51b3\u754c\u9762\u5143\u7d20 \u7684\u6279\u91cf\u521b\u5efa\u53ca\u5143\u7d20\u95f4\u4f4d\u7f6e\u7684\u81ea\u52a8\u5e03\u5c40\u53ca UI \u5927\u5c0f\u53d8\u5316\u540e\u7684 UI \u5143\u7d20\u81ea\u9002\u5e94\u3002\u7136\u800c\u5230\u76ee\u524d\u4e3a\u6b62 \u5728 UI \u5e93\u4e2d\u4f7f\u7528\u811a\u672c\u6765\u5b9e\u73b0\u903b\u8f91\u63a7\u5236\u7684\u8fd8\u4e0d\u591a\u89c1\uff0c\u636e\u6211\u6240\u77e5\uff0c\u5728\u6d41\u884c\u7684 UI \u5e93\u4e2d\u53ea\u6709 qt, bolt \u8fd9\u4e24\u4e2a\u9879\u76ee\u652f\u6301\u3002\u65e0\u8bba\u662f QT \u8fd8\u662f Bolt\uff0c\u8fd9\u4e24\u4e2a\u90fd\u662f\u91cd\u91cf\u7ea7\u7684 UI \u5e93\uff0c\u800c\u4e14 QT \u4e2d\u4f7f \u7528\u811a\u672c\uff08Bolt \u4e0d\u4e86\u89e3\uff09\u7684\u65b9\u5f0f\u4e5f\u548c\u7f51\u9875\u5f00\u53d1\u60f3\u53bb\u751a\u8fdc\u3002 \u5c3d\u7ba1\u5728 DuiEngine \u65f6\u4ee3\u7684\u4ee3\u7801\u5e93\u4e2d\u5c31\u5305\u542b\u4e86\u4e00\u4e2a LUA \u811a\u672c\u6a21\u5757\uff0c\u4f46\u90a3\u4e2a\u65f6\u5019\u7684\u811a\u672c\u6a21\u5757 \u4e5f\u4ec5\u9650\u4e8e\u7b80\u5355\u7684 LUA \u811a\u672c\u548c C++\u63a7\u4ef6\u4ee3\u7801\u4e4b\u95f4\u7b80\u5355\u7684\u76f8\u4e92\u8c03\u7528\uff0c\u8fd8\u6ca1\u6709\u5f62\u6210\u4e00\u4e2a\u6e05\u6670\u7684 \u5e94\u7528\u6a21\u5f0f\u3002 \u7ecf\u8fc7 2015 \u5e74\u6625\u8282\u671f\u95f4\u5bf9\u811a\u672c\u6a21\u5757\u7684\u91cd\u6784\uff0c\u7ec8\u4e8e\u5728 SOUI \u4e2d\u5b9e\u73b0\u4e86\u548c\u7f51\u9875\u5f00\u53d1\u57fa\u672c\u4e00\u6837\u7684 \u754c\u9762\u5f00\u53d1\u6d41\u7a0b\u3002 \u5148\u770b\u4e00\u4e2a SOUI DEMO \u4e2d 100\uff05\u4f7f\u7528 LUA \u811a\u672c\u5b9e\u73b0\u7684\u5c0f\u6e38\u620f\u6548\u679c: \u4e0b\u9762\u6211\u4eec\u518d\u770b\u770b\u5b9e\u73b0\u4e0a\u8ff0\u6548\u679c\u7528\u5230\u7684\u4ee3\u7801\uff1a \u5728 SOUI \u4e2d\uff0c\u811a\u672c\u6a21\u5757\u548c\u5176\u5b83\u5982\u6e32\u67d3\u6a21\u5757\u7b49\u4e00\u6837\u662f\u4f7f\u7528\u7c7b\u4f3c\u63d2\u4ef6\u5f62\u5f0f\u5b9e\u73b0\u7684\uff0c\u5f53\u7136\u9996\u5148\u9700 \u8981\u6211\u4eec\u5728\u7a0b\u5e8f\u7684\u5165\u53e3\u52a0\u8f7d LUA \u811a\u672c\u6a21\u5757\uff1a ``` cpp int WINAPI _tWinMain(HINSTANCE hInstance, HINSTANCE / hPrevInstance /, LPTSTR / lpstrCmdLine /, int / nCmdShow /) { //\u5fc5\u987b\u8981\u8c03\u7528 OleInitialize \u6765\u521d\u59cb\u5316\u8fd0\u884c\u73af\u5883 HRESULT hRes = OleInitialize(NULL); SASSERT(SUCCEEDED(hRes)); // LoadLibrary(L\"E:\\soui.taobao\\richedit\\Debug\\riched20.dll\"); int nRet = 0; SComMgr pComMgr = new SComMgr; { //... //\u5b9a\u4e49\u4e00\u4e2a\u552f\u4e00\u7684 SApplication \u5bf9\u8c61\uff0cSApplication \u7ba1\u7406\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u8d44\u6e90 SApplication theApp=new SApplication(pRenderFactory,hInstance); ifdef DLL_CORE \u00b6 //\u52a0\u8f7d LUA \u811a\u672c\u6a21\u5757\uff0c\u6ce8\u610f\uff0c\u811a\u672c\u6a21\u5757\u53ea\u6709\u5728 SOUI \u5185\u6838\u662f\u4ee5 DLL \u65b9\u5f0f\u7f16\u8bd1\u65f6\u624d\u80fd\u4f7f\u7528\u3002 bLoaded=pComMgr->CreateScrpit_Lua((IObjRef**)&pScriptLua); SASSERT_FMT(bLoaded,_T(\"load interface [%s] failed!\"),_T(\"scirpt_lua\")); theApp->SetScriptFactory(pScriptLua); endif//DLL_CORE \u00b6 //\u52a0\u8f7d\u5168\u5c40\u8d44\u6e90\u63cf\u8ff0 XML theApp->Init(_T(\"xml_init\")); { //\u521b\u5efa\u5e76\u663e\u793a\u4f7f\u7528 SOUI \u5e03\u5c40\u5e94\u7528\u7a0b\u5e8f\u7a97\u53e3,\u4e3a\u4e86\u4fdd\u5b58\u7a97\u53e3\u5bf9\u8c61\u7684\u6790\u6784\u5148\u4e8e\u5176\u5b83\u5bf9\u8c61\uff0c\u628a\u5b83 \u4eec\u7f29\u8fdb\u4e00\u5c42\u3002 CMainDlg dlgMain; dlgMain.Create(GetActiveWindow(),0,0,800,600); dlgMain.GetNative()->SendMessage(WM_INITDIALOG); dlgMain.CenterWindow(); dlgMain.ShowWindow(SW_SHOWNORMAL); nRet=theApp->Run(dlgMain.m_hWnd); } //\u5e94\u7528\u7a0b\u5e8f\u9000\u51fa delete theApp; //... } exit: delete pComMgr; OleUninitialize(); return nRet; } \u5176\u6b21\u6211\u4eec\u9700\u8981\u5728 XML \u5e03\u5c40\u4e2d\u7684 SOUI \u8282\u70b9\u4e0b\u589e\u52a0\u4e00\u4e2a script \u7684\u5b50\u8282\u70b9\uff1a ```xml lua <SOUI trCtx=\"dlg_main\" title=\"SOUI-DEMO version:%ver%\" bigIcon=\"LOGO:32\" smallIcon=\"LOGO:16\" width=\"600\" height=\"400\" appWnd=\"1\" margin=\"5,5,5,5\" resizable=\"1\" translucent=\"1\" alpha=\"255\"> <skin> <!--\u5c40\u90e8 skin \u5bf9\u8c61--> <gif name=\"gif_penguin\" src=\"gif:gif_penguin\"/> <apng name=\"apng_haha\" src=\"apng:apng_haha\"/> </skin> <style> <!--\u5c40\u90e8 style \u5bf9\u8c61--> <class name=\"cls_edit\" ncSkin=\"_skin.sys.border\" margin-x=\"2\" margin-y=\"2\" /> </style> <script src=\"lua:lua_test\"> <!--\u5f53\u6ca1\u6709\u6307\u5b9a src \u5c5e\u6027\u65f6\u4ece cdata \u6bb5\u4e2d\u52a0\u8f7d\u811a\u672c--> <![CDATA[ function on_init(args) SMessageBox(0,T \"execute script function: on_init\", T \"msgbox\", 1); end function on_exit(args) SMessageBox(0,T \"execute script function: on_exit\", T \"msgbox\", 1); end function onEvtTest2(args) SMessageBox(0,T \"onEvtTest2\", T \"msgbox\", 1); return 1; end function onEvtTstClick(args) local txt3=SStringW(L\"append\",-1); local sender=toSWindow(args.sender); sender:GetParent():CreateChildrenFromString(L\"<button pos=\\\"0,0,150,30\\\" on_command=\\\"onEvtTest2\\\">lua btn \u4e2d\u6587</button>\"); sender:SetVisible(0,1); return 1; end ]]> </script> <root class=\"cls_dlg_frame\" cache=\"1\" on_init=\"on_init\" on_exit=\"on_exit\"> <caption pos=\"0,0,-0,30\" show=\"1\" font=\"adding:8\"> <icon pos=\"10,8\" src=\"LOGO:16\"/> <text class=\"cls_txt_red\">SOUI-DEMO version:%ver%</text> <imgbtn id=\"1\" skin=\"_skin.sys.btn.close\" pos=\"-45,0\" tip=\"close\" animate=\"1\"/> <imgbtn id=\"2\" skin=\"_skin.sys.btn.maximize\" pos=\"-83,0\" animate=\"1\" /> <imgbtn id=\"3\" skin=\"_skin.sys.btn.restore\" pos=\"-83,0\" show=\"0\" animate=\"1\" /> <imgbtn id=\"5\" skin=\"_skin.sys.btn.minimize\" pos=\"-121,0\" animate=\"1\" /> <imgbtn name=\"btn_menu\" skin=\"skin_btn_menu\" pos=\"-151,2\" animate=\"1\" /> </caption> <other/> </root> </SOUI> \u5728 script \u8282\u70b9\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 src \u5c5e\u6027\u6765\u6307\u5b9a\u811a\u672c\u6240\u5728\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u5c06\u811a\u672c\u76f4\u63a5\u4f7f\u7528 cdata \u5199\u5728 script \u8282\u70b9\u4e2d\uff0c\u4f46\u662f src \u4e2d\u6307\u5b9a\u7684\u811a\u672c\u4f18\u5148\u3002 \u6ce8\u610f\uff0c\u4e0a\u8ff0 XML \u4e2d\u6211\u4eec\u8fd8\u5728 root \u7ed3\u70b9\u4e2d\u589e\u52a0\u4e86\u4e24\u4e2a\u65b0\u7684\u5c5e\u6027\uff1aon_init, on_exit\uff0c\u8fd9\u4e24\u4e2a \u5c5e\u6027\u544a\u8bc9\u7a0b\u5e8f\u5728\u754c\u9762\u521d\u59cb\u5316\u5b8c\u6210\u53ca\u754c\u9762\u9500\u6bc1\u524d\u9700\u8981\u6267\u884c\u7684\u4e24\u4e2a\u811a\u672c\u51fd\u6570\u3002 \u5b9e\u73b0\u4e86\u4e0a\u9762\u4e24\u6b65\uff0c\u5728 SOUI \u4e2d\u4f7f\u7528\u811a\u672c\u7684\u51c6\u5907\u5de5\u4f5c\u5df2\u7ecf\u5c31\u7eea\u3002 \u4e3a\u4e86\u5b9e\u73b0\u4e0a\u56fe\u7684\u8dd1\u9a6c\u673a\u6548\u679c\uff0c\u9996\u5148\u6211\u4eec\u9700\u8981\u5728\u4e00\u4e2a\u754c\u9762\u4e2d\u4f7f\u7528 XML \u5b9e\u73b0\u57fa\u672c\u7684\u754c\u9762\u5143\u7d20 \u5e03\u5c40\uff1a <?xml version=\"1.0\" encoding=\"utf-8\"?> <include> <window size= \"full,full\" name= \"game_wnd\" on_size= \"on_canvas_size\" id= \"300\" > <text pos= \"0,0,-0,@30\" colorBkgnd= \"#cccccc\" colorText= \"#ff0000\" align= \"center\" > SOUI + LUA \u8dd1\u9a6c\u673a </text> <window pos= \"0,[0,-0,-50\" > <window pos= \"0,0,-64,-0\" name= \"game_canvas\" clipClient= \"1\" colorBkgnd= \"#ffffff\" > <!--\u6bd4\u8d5b\u573a\u5730--> <gifplayer name= \"player_1\" float= \"1\" skin= \"gif_horse\" > <text pos= \"0,%1\" colorText= \"rgb(255,0,0)\" font= \"size:20\" > 1 </text> </gifplayer> <gifplayer name= \"player_2\" float= \"1\" skin= \"gif_horse\" > <text pos= \"0,0\" colorText= \"rgb(255,0,0)\" font= \"size:20\" > 2 </text> </gifplayer> <gifplayer name= \"player_3\" float= \"1\" skin= \"gif_horse\" > <text pos= \"0,0\" colorText= \"rgb(255,0,0)\" font= \"size:20\" > 3 </text> </gifplayer> <gifplayer name= \"player_4\" float= \"1\" skin= \"gif_horse\" > <text pos= \"0,0\" colorText= \"rgb(255,0,0)\" font= \"size:20\" > 4 </text> </gifplayer> <gifplayer name= \"flag_win\" float= \"1\" skin= \"gif_win\" show= \"0\" id= \"400\" /> <text pos= \"|0,0\" > \u8d54\u7387: </text> <text pos= \"[0,0,@20,[0\" colorText= \"#ff0000\" name= \"txt_rate\" > 4 </text> <hr pos= \"-1,0,-0,-0\" mode= \"vertical\" colorLine= \"#ff0000\" /> </window> <window pos= \"[0,0,-0,-0\" > <window pos= \"0,%12.5,@64,@64\" offset= \"0,-0.5\" skin= \"img_coin\" id= \"1\" tip= \"\u4e0b\u6ce8 1 \u53f7\u9a6c\" on_command= \"on_bet\" > 0 </window> <window pos= \"0,%37.5,@64,@64\" offset= \"0,-0.5\" skin= \"img_coin\" id= \"2\" tip= \"\u4e0b\u6ce8 2 \u53f7\u9a6c\" on_command= \"on_bet\" > 0 </window> <window pos= \"0,%62.5,@64,@64\" offset= \"0,-0.5\" skin= \"img_coin\" id= \"3\" tip= \"\u4e0b\u6ce8 3 \u53f7\u9a6c\" on_command= \"on_bet\" > 0 </window> <window pos= \"0,%87.5,@64,@64\" offset= \"0,-0.5\" skin= \"img_coin\" id= \"4\" tip= \"\u4e0b\u6ce8 4 \u53f7\u9a6c\" on_command= \"on_bet\" > 0 </window> </window> </window> <window pos= \"10,[5,-0,-0\" name= \"game_toolbar\" > <button name= \"btn_run\" pos= \"0,|0,@100,@30\" offset= \"0,-0.5\" tip= \"run the game\" on_command= \"on_run\" > run </button> <text pos= \"]-5,0,@-1,-0\" offset= \"-1,0\" > \u73b0\u6709\u91d1\u5e01: </text> <text pos= \"-64,0,@64,-0\" name= \"txt_coins\" align= \"center\" > 100 </text> </window> </window> </include> \u5728\u4e0a\u8ff0 XML \u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 gifplayer \u63a7\u4ef6\u5b9a\u4e49\u4e86 4 \u5339\u9a6c\uff0c\u4f46\u662f\u6211\u4eec\u5e76\u6ca1\u6709\u4f7f\u7528 pos \u5c5e\u6027 \u5b9a\u4e49\u5b83\u7684\u4f4d\u7f6e\uff0c\u56e0\u4e3a\u5b83\u7684\u4f4d\u7f6e\u662f\u5728\u53d8\u5316\u7684\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u811a\u672c\u5728\u63a7\u5236\u3002\u6ce8\u610f\u4e0a\u8ff0 XML \u4e2d \u4e3a\u51e0\u4e2a\u6309\u94ae\u63a7\u4ef6\u6307\u5b9a\u7684 on_command \u5c5e\u6027\u3002on_command \u5c5e\u6027\u662f\u7a97\u53e3\u7684\u70b9\u51fb\u4e8b\u4ef6\u5c5e \u6027\uff0c\u6307\u5b9a\u540e\u53ef\u4ee5\u6267\u884c\u811a\u672c\u4e2d\u5bf9\u5e94\u7684\u51fd\u6570\u3002 \u4e8b\u5b9e\u4e0a\u5728 SOUI \u4e2d\u6bcf\u4e00\u4e2a\u4e8b\u4ef6\u90fd\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5728 XML \u4e2d\u53ef\u4ee5\u6620\u5c04\u5230\u811a\u672c\u811a\u672c\u51fd\u6570\u7684\u5c5e\u6027\uff0c \u8fd9\u91cc\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u8fd9\u4e2a\u5c5e\u6027\u5728\u54ea\u91cc\u5b9e\u73b0\u7684\uff1a class SOUI_EXP EventCmd : public TplEventArgs < EventCmd > { SOUI_CLASS_NAME ( EventCmd , L \"on_command\" ) public : EventCmd ( SObject * pSender ) : TplEventArgs < EventCmd > ( pSender ){} enum { EventID = EVT_CMD }; }; ``` \u901a\u8fc7\u4e0a\u9762\u4ee3\u7801\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u4e2a\u5c5e\u6027\u5b9e\u9645\u4e0a\u5c31\u662f\u8fd9\u4e2a\u4e8b\u4ef6\u7c7b\u5728 SOUI \u4e2d\u7684\u5b57\u7b26\u4e32\u540d\u5b57\u3002 \u4e0b\u9762\u6211\u4eec\u770b\u770b\u5b9e\u73b0\u8fd9\u4e2a\u8dd1\u9a6c\u673a\u771f\u6b63\u4f7f\u7528\u7684 LUA \u811a\u672c\u4ee3\u7801\uff1a ``` lua win = nil ; tid = 0 ; gamewnd = nil ; gamecanvas = nil ; players = {}; flag_win = nil ; coins_all = 100 ; -- \u73b0\u6709\u8d44\u91d1 coins_bet = { 0 , 0 , 0 , 0 } -- \u4e0b\u6ce8\u91d1\u989d bet_rate = 4 ; -- \u8d54\u7387 prog_max = 200 ; -- \u6700\u5927\u6b65\u6570 prog_all = { 0 , 0 , 0 , 0 } -- \u9a6c\u5339\u8fdb\u5ea6 function on_init ( args ) -- \u521d\u59cb\u5316\u5168\u5c40\u5bf9\u8c61 win = toHostWnd ( args . sender ); gamewnd = win : GetRoot () : FindChildByNameA ( \"game_wnd\" , -1 ); gamecanvas = gamewnd : FindChildByNameA ( \"game_canvas\" , -1 ); flag_win = gamewnd : FindChildByNameA ( \"flag_win\" , -1 ); players = { gamecanvas : FindChildByNameA ( \"player_1\" , -1 ), gamecanvas : FindChildByNameA ( \"player_2\" , -1 ), gamecanvas : FindChildByNameA ( \"player_3\" , -1 ), gamecanvas : FindChildByNameA ( \"player_4\" , -1 ) }; -- \u5e03\u5c40 on_canvas_size ( nil ); math . randomseed ( os . time ()); -- SMessageBox ( 0 , T \"execute script function: on_init\" , T \"msgbox\" , 1 ); end function on_exit ( args ) -- SMessageBox ( 0 , T \"execute script function: on_exit\" , T \"msgbox\" , 1 ); end function on_timer ( args ) if ( gamewnd ~= nil ) then local rcCanvas = gamecanvas : GetWindowRect2 (); local heiCanvas = rcCanvas : Height (); local widCanvas = rcCanvas : Width (); local rcPlayer = players [ 1 ] : GetWindowRect2 (); local wid = rcPlayer : Width (); local hei = rcPlayer : Height (); local win_id = 0 ; for i = 1 , 4 do local prog = prog_all [ i ]; if ( prog < prog_max ) then prog = prog + math . random ( 0 , 5 ); prog_all [ i ] = prog ; local rc = players [ i ] : GetWindowRect2 (); rc . left = rcCanvas . left + ( widCanvas - wid ) * prog / prog_max ; players [ i ] : Move2 ( rc . left , rc . top , -1 , -1 ); else win_id = i ; local rc = players [ i ] : GetWindowRect2 (); rc . left = rcCanvas . left + ( widCanvas - wid ); players [ i ] : Move2 ( rc . left , rc . top , -1 , -1 ); end end if win_id ~= 0 then gamewnd : FindChildByNameA ( \"btn_run\" , -1 ) : FireCommand (); coins_all = coins_all + coins_bet [ win_id ] * 4 ; gamewnd : FindChildByNameA ( \"txt_coins\" , - 1 ) : SetWindowText ( T ( coins_all )); coins_bet = { 0 , 0 , 0 , 0 }; local rcPlayer = players [ win_id ] : GetWindowRect2 (); local szFlag = flag_win : GetDesiredSize ( rcPlayer ); rcPlayer . right = rcPlayer . left + szFlag . cx ; rcPlayer . bottom = rcPlayer . top + szFlag . cy ; rcPlayer : OffsetRect ( - szFlag . cx , - szFlag . cy / 3 ); flag_win : Move ( rcPlayer ); flag_win : SetVisible ( 1 , 1 ); flag_win : SetUserData ( win_id ); for i = 1 , 4 do gamewnd : FindChildByID ( i , -1 ) : SetWindowText ( T ( \"0\" )); end end end end function on_bet ( args ) if tid ~= 0 then return 1 ; end local btn = toSWindow ( args . sender ); if coins_all >= 10 then id = btn : GetID (); coins_bet [ id ] = coins_bet [ id ] + 10 ; coins_all = coins_all -10 ; btn : SetWindowText ( T ( coins_bet [ id ])); gamewnd : FindChildByNameA ( \"txt_coins\" , -1 ) : SetWindowText ( T ( coins_all )); end return 1 ; end function on_canvas_size ( args ) if win == nil then return 0 ; end local rcCanvas = gamecanvas : GetWindowRect2 (); local heiCanvas = rcCanvas : Height (); local widCanvas = rcCanvas : Width (); local szPlayer = players [ 1 ] : GetDesiredSize ( rcCanvas ); local wid = szPlayer . cx ; local hei = szPlayer . cy ; local rcPlayer = CRect ( 0 , 0 , wid , hei ); local interval = ( heiCanvas - hei * 4 ) / 5 ; rcPlayer : OffsetRect ( rcCanvas . left , rcCanvas . top + interval ); for i = 1 , 4 do local rc = rcPlayer ; rc . left = rcCanvas . left + ( widCanvas - wid ) * prog_all [ i ] / prog_max ; rc . right = rc . left + wid ; players [ i ] : Move ( rc ); rcPlayer : OffsetRect ( 0 , interval + hei ); end local win_id = flag_win : GetUserData (); if win_id ~= 0 then local rcPlayer = players [ win_id ] : GetWindowRect2 (); local szFlag = flag_win : GetDesiredSize ( rcPlayer ); flag_win : Move2 ( rcPlayer . left - szFlag . cx , rcPlayer . top - szFlag . cy / 3 , -1 , - 1 ); end return 1 ; end function on_run ( args ) local btn = toSWindow ( args . sender ); if tid == 0 then prog_all = { 0 , 0 , 0 , 0 }; on_canvas_size ( nil ); tid = win : setInterval ( \"on_timer\" , 200 ); btn : SetWindowText ( T \"stop\" ); flag_win : SetVisible ( 0 , 1 ); else win : clearTimer ( tid ); btn : SetWindowText ( T \"run\" ); tid = 0 ; end return 1 ; end function on_btn_select_cbx ( args ) local btn = toSWindow ( args . sender ); local cbxwnd = btn : GetWindow ( 2 ); -- get previous sibling local cbx = toComboboxBase ( cbxwnd ); cbx : SetCurSel ( -1 ); end \u5728 on_init \u4e2d\uff0c\u6211\u4eec\u83b7\u5f97\u5fc5\u987b\u7684\u51e0\u4e2a UI \u63a7\u4ef6\uff0c\u5e76\u4fdd\u5b58\u5230 LUA \u7684\u5168\u5c40\u53d8\u91cf\u4e2d\u3002 \u5728 on_canvas_size \u4e2d\uff0c\u6211\u4eec\u6839\u636e UI \u5927\u5c0f\uff0c\u81ea\u52a8\u8c03\u6574 4 \u5339\u9a6c\u7684\u4f4d\u7f6e\u3002 \u7136\u540e\u5728\u51e0\u4e2a\u6309\u94ae\u7684\u4e8b\u4ef6\u54cd\u5e94\u51fd\u6570\u4e2d\u54cd\u5e94\u7528\u6237\u64cd\u4f5c\u3002 \u81f3\u6b64\u4e00\u4e2a\u7b80\u5355\u7684\u8dd1\u9a6c\u673a\u6548\u679c\u5c31\u5b8c\u6210\u4e86\u3002 \u4e5f\u8bb8\u6709\u4eba\u89c9\u5f97\u8fd9\u4e2a\u793a\u4f8b\u592a\u7b80\u5355\uff0c\u4f46\u8bf7\u60f3\u8c61\u4e00\u4e0b\uff0c\u91c7\u7528\u7c7b\u4f3c\u7684\u65b9\u6cd5\uff0c\u4ee5\u540e UI \u53ca\u903b\u8f91\u90fd\u53ef\u4ee5\u5728 \u670d\u52a1\u5668\u63a7\u4ef6\uff0c\u5ba2\u6237\u7aef\u5c31\u50cf\u7f51\u9875\u4e00\u6837\u6bcf\u5929\u90fd\u53ef\u4ee5\u4ece\u670d\u52a1\u5668\u66f4\u65b0\u754c\u9762\u4f1a\u662f\u4ec0\u4e48\u573a\u666f\uff0c\u90a3\u65f6\u5ba2\u6237 \u7aef\u53ef\u771f\u5c31\u6210\u4e86\u5ba2\u6237\u4e86\u3002 \u540e\u8bb0\uff1a\u5728 SOUI \u4e2d\u5b9e\u73b0\u548c\u7f51\u9875\u5f00\u53d1\u7c7b\u4f3c\u7684\u811a\u672c\u529f\u80fd\u7b97\u662f SOUI 2015 \u5e74\u975e\u5e38\u91cd\u8981\u4e00\u6b21\u66f4\u65b0\uff0c \u672c\u6765\u65e9\u5c31\u60f3\u5199\u4e00\u7bc7\u8fd9\u6837\u7684\u535a\u5ba2\u6765\u4ecb\u7ecd\uff0c\u65e0\u5948\u7531\u4e8e\u539f\u6765\u4f7f\u7528\u7684 lua_tinker 0.5c \u7248\u672c\u5bfc\u51fa C++\u7c7b\u5230 LUA \u8fd8\u6709\u8fd9\u6837\u90a3\u6837\u7684\u95ee\u9898\uff0c\u4e00\u76f4\u6ca1\u6709\u627e\u5230\u5408\u9002\u7684\u89e3\u51b3\u65b9\u6848\u3002 \u867d\u7136\u4e5f\u6709\u6bd4\u8f83\u6210\u719f\u7684\u65b9\u6cd5\u5982\uff0cluabind, tolua++\u7b49\uff0c\u4f46\u662f\u603b\u89c9\u5f97\u592a\u5e9e\u5927\uff0c\u4e0d\u9002\u5408 SOUI \u8fd9 \u4e2a\u975e\u5e38\u8f7b\u91cf\u7ea7\u7684 UI \u5e93\u3002 \u8fd9\u671f\u95f4\u4e5f\u5c1d\u8bd5\u4e86\u5982 luawrapper, fflua\uff0c\u4ee5\u53ca\u7f51\u4e0a\u627e\u5230\u7684\u522b\u4eba\u4fee\u6539\u7684\u5404\u7248\u672c lua_tinker\uff0c\u4f46 \u90fd\u4e0d\u7406\u60f3\u3002 \u4f7f\u7528\u5176\u5b83\u5bfc\u51fa\u65b9\u6cd5\u5c31\u4e0d\u8bf4\u4e86\uff0c\u6211\u4e5f\u6ca1\u6709\u6df1\u5165\u3002\u4f7f\u7528 lua_tinker \u4e3b\u8981\u7684\u95ee\u9898\u5c31\u662f\u5bfc\u51fa\u7684\u5b50\u7c7b \u4e0d\u80fd\u6b63\u5e38\u8c03\u7528\u57fa\u7c7b\u7684\u65b9\u6cd5\uff0c\u8fd9\u4e00\u70b9\u5f88\u5934\u75db\uff0c\u867d\u7136\u7528\u53d8\u901a\u7684\u65b9\u6cd5\u53ef\u4ee5\u83b7\u5f97\u8c03\u7528\u57fa\u7c7b\u65b9\u6cd5\u7684\u80fd \u529b\uff0c\u4f46\u662f\u770b\u8d77\u6765\u6709\u70b9\u80cc\u53db\u4e86 OOP \u7684\u601d\u60f3\u3002 \u76f4\u5230\u4eca\u5929\u624d\u641e\u660e\u767d\u4e0d\u80fd\u8c03\u7528\u57fa\u7c7b\u6210\u5458\u6700\u4e3b\u8981\u7684\u95ee\u9898\u6765\u81ea C++\u5bf9\u8c61\u7684\u591a\u7ee7\u627f\uff0c\u660e\u767d\u4e86\u8fd9\u4e2a\u95ee \u9898\u624d\u80fd\u89c4\u907f\u95ee\u9898\uff0c\u624d\u6562\u628a\u8fd9\u4e2a LUA \u6a21\u5757\u62ff\u51fa\u6765\u8bb2\u89e3\uff0c\u4e5f\u987a\u4fbf\u628a SOUI \u4e2d\u4f7f\u7528\u7684 LUA \u5185\u6838 \u548c 5.1 \u5347\u7ea7\u5230\u4e86 5.2.3\u3002","title":"4.19 \u5728 SOUI \u4e2d\u4f7f\u7528 LUA \u811a\u672c\u5f00\u53d1\u754c\u9762"},{"location":"Development/19/#419-soui-lua","text":"\u50cf\u5199\u7f51\u9875\u4e00\u6837\u505a\u5ba2\u6237\u7aef\u754c\u9762\u53ef\u80fd\u662f\u5f88\u591a\u5ba2\u6237\u7aef\u5f00\u53d1\u7684\u7406\u60f3\u3002 \u505a\u597d\u4e00\u4e2a\u53ef\u4ee5\u5b9e\u73b0\u548c\u7528\u6237\u4ea4\u4e92\u7684\u52a8\u6001\u7f51\u9875\u5e94\u8be5\u5305\u542b\u4e24\u4e2a\u90e8\u5206\uff1a\u4f7f\u7528 html \u505a\u7f51\u9875\u7684\u5e03\u5c40\uff0c \u4f7f\u7528\u811a\u672c\u5982 vbscript,javascript \u505a\u7528\u6237\u4ea4\u4e92\u7684\u903b\u8f91\u3002\u5f53\u9700\u6c42\u53d8\u5316\u65f6\uff0c\u53ea\u9700\u8981\u5728\u670d\u52a1\u7aef\u628a\u76f8 \u5173\u4ee3\u7801\u8c03\u6574\u4e00\u4e0b\uff0c\u7528\u6237\u5373\u53ef\u770b\u5230\u65b0\u7684\u5185\u5bb9\uff08\u754c\u9762\uff09\u3002 \u4f20\u7edf\u7684\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5f00\u53d1\u6d41\u7a0b\u548c\u7f51\u9875\u5f00\u53d1\u53ef\u80fd\u5b8c\u5168\u4e0d\u540c\u3002 \u9996\u5148\u662f\u754c\u9762\u7684\u5e03\u5c40\uff0c\u5728\u8001\u5f0f\u7684\u754c\u9762\u5e03\u5c40\u8fc7\u7a0b\u4e2d\uff0c\u7a0b\u5e8f\u5458\u5148\u5728\u754c\u9762\u4e0a\u653e\u597d\u5404\u79cd\u63a7\u4ef6\uff0c\u7136\u540e\u9700 \u8981\u81ea\u5df1\u901a\u8fc7\u76f8\u5e94\u7684\u4ee3\u7801\u6765\u7ef4\u62a4\u754c\u9762\u5728\u4e0d\u540c\u72b6\u6001\u4e0b\u63a7\u4ef6\u7684\u663e\u793a\u72b6\u6001\u53ca\u4f4d\u7f6e\u3002\u5f53\u754c\u9762\u4e2d\u5143\u7d20\u5f88 \u591a\u65f6\uff0c\u5355\u7eaf\u5e03\u5c40\u7684\u4ee3\u7801\u53ef\u80fd\u5c31\u4f1a\u975e\u5e38\u7684\u590d\u6742\u3002 \u754c\u9762\u505a\u597d\u4e86\uff0c\u7a0b\u5e8f\u5458\u9700\u8981\u589e\u52a0\u4ee3\u7801\u54cd\u5e94\u754c\u9762\u4e2d UI \u5143\u7d20\u5bf9\u5e94\u7684\u903b\u8f91\u3002\u5982\u903b\u8f91\u6bd4\u8f83\u56fa\u5b9a\uff0c\u4e00\u65e6 \u505a\u597d\u5c31\u4e0d\u9700\u8981\u53d8\u5316\u65f6\uff0c\u8fd9\u6837\u7684\u5b9e\u73b0\u7684\u7a0b\u5e8f\u6548\u7387\u53ef\u80fd\u66f4\u9ad8\u3002\u7136\u800c\u505a\u5ba2\u6237\u7aef\u7684\u4eba\u53ef\u80fd\u90fd\u7ecf\u5386\u8fc7 \u4fee\u6539\u754c\u9762\u7684\u95ee\u9898\u3002\u7b80\u5355\u7684\u63a7\u4ef6\u5750\u6807\u8c03\u6574\u8fd8\u597d\u529e\uff0c\u5982\u679c\u7a0b\u5e8f\u7684\u754c\u9762\u98ce\u683c\u751a\u81f3\u6574\u4e2a\u7a0b\u5e8f\u7684\u8fd0\u884c \u903b\u8f91\u90fd\u8981\u53d8\u5316\u65f6\uff0c\u4f7f\u7528\u4f20\u7edf\u7684\u5f00\u53d1\u65b9\u5f0f\u5b9e\u73b0\u7684\u5ba2\u6237\u7aef\u7a0b\u5e8f\u66f4\u65b0\u8d77\u6765\u4f1a\u975e\u5e38\u56f0\u96be\uff0c\u6709\u65f6\u751a\u81f3 \u53d8\u5f97\u4e0d\u53ef\u80fd\u5b9e\u73b0\u3002 \u8fd1\u5e74\u6765\uff0c\u5728\u5404\u79cd\u65b0\u5174\u7684\u754c\u9762\u5f00\u53d1\u5e93\u4e2d\u4f7f\u7528 XML \u6765\u63cf\u8ff0\u5e03\u5c40\u5df2\u7ecf\u5f97\u5230\u4e86\u5e7f\u6cdb\u7684\u5e94\u7528\u3002\u4f7f\u7528 XML \u63cf\u8ff0\u5e03\u5c40\u7684\u57fa\u672c\u51fa\u53d1\u70b9\u5e94\u8be5\u548c\u4f7f\u7528 HTML \u63cf\u8ff0\u7f51\u9875\u5e03\u5c40\u7c7b\u4f3c\uff0c\u5173\u952e\u662f\u89e3\u51b3\u754c\u9762\u5143\u7d20 \u7684\u6279\u91cf\u521b\u5efa\u53ca\u5143\u7d20\u95f4\u4f4d\u7f6e\u7684\u81ea\u52a8\u5e03\u5c40\u53ca UI \u5927\u5c0f\u53d8\u5316\u540e\u7684 UI \u5143\u7d20\u81ea\u9002\u5e94\u3002\u7136\u800c\u5230\u76ee\u524d\u4e3a\u6b62 \u5728 UI \u5e93\u4e2d\u4f7f\u7528\u811a\u672c\u6765\u5b9e\u73b0\u903b\u8f91\u63a7\u5236\u7684\u8fd8\u4e0d\u591a\u89c1\uff0c\u636e\u6211\u6240\u77e5\uff0c\u5728\u6d41\u884c\u7684 UI \u5e93\u4e2d\u53ea\u6709 qt, bolt \u8fd9\u4e24\u4e2a\u9879\u76ee\u652f\u6301\u3002\u65e0\u8bba\u662f QT \u8fd8\u662f Bolt\uff0c\u8fd9\u4e24\u4e2a\u90fd\u662f\u91cd\u91cf\u7ea7\u7684 UI \u5e93\uff0c\u800c\u4e14 QT \u4e2d\u4f7f \u7528\u811a\u672c\uff08Bolt \u4e0d\u4e86\u89e3\uff09\u7684\u65b9\u5f0f\u4e5f\u548c\u7f51\u9875\u5f00\u53d1\u60f3\u53bb\u751a\u8fdc\u3002 \u5c3d\u7ba1\u5728 DuiEngine \u65f6\u4ee3\u7684\u4ee3\u7801\u5e93\u4e2d\u5c31\u5305\u542b\u4e86\u4e00\u4e2a LUA \u811a\u672c\u6a21\u5757\uff0c\u4f46\u90a3\u4e2a\u65f6\u5019\u7684\u811a\u672c\u6a21\u5757 \u4e5f\u4ec5\u9650\u4e8e\u7b80\u5355\u7684 LUA \u811a\u672c\u548c C++\u63a7\u4ef6\u4ee3\u7801\u4e4b\u95f4\u7b80\u5355\u7684\u76f8\u4e92\u8c03\u7528\uff0c\u8fd8\u6ca1\u6709\u5f62\u6210\u4e00\u4e2a\u6e05\u6670\u7684 \u5e94\u7528\u6a21\u5f0f\u3002 \u7ecf\u8fc7 2015 \u5e74\u6625\u8282\u671f\u95f4\u5bf9\u811a\u672c\u6a21\u5757\u7684\u91cd\u6784\uff0c\u7ec8\u4e8e\u5728 SOUI \u4e2d\u5b9e\u73b0\u4e86\u548c\u7f51\u9875\u5f00\u53d1\u57fa\u672c\u4e00\u6837\u7684 \u754c\u9762\u5f00\u53d1\u6d41\u7a0b\u3002 \u5148\u770b\u4e00\u4e2a SOUI DEMO \u4e2d 100\uff05\u4f7f\u7528 LUA \u811a\u672c\u5b9e\u73b0\u7684\u5c0f\u6e38\u620f\u6548\u679c: \u4e0b\u9762\u6211\u4eec\u518d\u770b\u770b\u5b9e\u73b0\u4e0a\u8ff0\u6548\u679c\u7528\u5230\u7684\u4ee3\u7801\uff1a \u5728 SOUI \u4e2d\uff0c\u811a\u672c\u6a21\u5757\u548c\u5176\u5b83\u5982\u6e32\u67d3\u6a21\u5757\u7b49\u4e00\u6837\u662f\u4f7f\u7528\u7c7b\u4f3c\u63d2\u4ef6\u5f62\u5f0f\u5b9e\u73b0\u7684\uff0c\u5f53\u7136\u9996\u5148\u9700 \u8981\u6211\u4eec\u5728\u7a0b\u5e8f\u7684\u5165\u53e3\u52a0\u8f7d LUA \u811a\u672c\u6a21\u5757\uff1a ``` cpp int WINAPI _tWinMain(HINSTANCE hInstance, HINSTANCE / hPrevInstance /, LPTSTR / lpstrCmdLine /, int / nCmdShow /) { //\u5fc5\u987b\u8981\u8c03\u7528 OleInitialize \u6765\u521d\u59cb\u5316\u8fd0\u884c\u73af\u5883 HRESULT hRes = OleInitialize(NULL); SASSERT(SUCCEEDED(hRes)); // LoadLibrary(L\"E:\\soui.taobao\\richedit\\Debug\\riched20.dll\"); int nRet = 0; SComMgr pComMgr = new SComMgr; { //... //\u5b9a\u4e49\u4e00\u4e2a\u552f\u4e00\u7684 SApplication \u5bf9\u8c61\uff0cSApplication \u7ba1\u7406\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u8d44\u6e90 SApplication theApp=new SApplication(pRenderFactory,hInstance);","title":"4.19 \u5728 SOUI \u4e2d\u4f7f\u7528 LUA \u811a\u672c\u5f00\u53d1\u754c\u9762"},{"location":"Development/19/#ifdef-dll_core","text":"//\u52a0\u8f7d LUA \u811a\u672c\u6a21\u5757\uff0c\u6ce8\u610f\uff0c\u811a\u672c\u6a21\u5757\u53ea\u6709\u5728 SOUI \u5185\u6838\u662f\u4ee5 DLL \u65b9\u5f0f\u7f16\u8bd1\u65f6\u624d\u80fd\u4f7f\u7528\u3002 bLoaded=pComMgr->CreateScrpit_Lua((IObjRef**)&pScriptLua); SASSERT_FMT(bLoaded,_T(\"load interface [%s] failed!\"),_T(\"scirpt_lua\")); theApp->SetScriptFactory(pScriptLua);","title":"ifdef DLL_CORE"},{"location":"Development/19/#endifdll_core","text":"//\u52a0\u8f7d\u5168\u5c40\u8d44\u6e90\u63cf\u8ff0 XML theApp->Init(_T(\"xml_init\")); { //\u521b\u5efa\u5e76\u663e\u793a\u4f7f\u7528 SOUI \u5e03\u5c40\u5e94\u7528\u7a0b\u5e8f\u7a97\u53e3,\u4e3a\u4e86\u4fdd\u5b58\u7a97\u53e3\u5bf9\u8c61\u7684\u6790\u6784\u5148\u4e8e\u5176\u5b83\u5bf9\u8c61\uff0c\u628a\u5b83 \u4eec\u7f29\u8fdb\u4e00\u5c42\u3002 CMainDlg dlgMain; dlgMain.Create(GetActiveWindow(),0,0,800,600); dlgMain.GetNative()->SendMessage(WM_INITDIALOG); dlgMain.CenterWindow(); dlgMain.ShowWindow(SW_SHOWNORMAL); nRet=theApp->Run(dlgMain.m_hWnd); } //\u5e94\u7528\u7a0b\u5e8f\u9000\u51fa delete theApp; //... } exit: delete pComMgr; OleUninitialize(); return nRet; } \u5176\u6b21\u6211\u4eec\u9700\u8981\u5728 XML \u5e03\u5c40\u4e2d\u7684 SOUI \u8282\u70b9\u4e0b\u589e\u52a0\u4e00\u4e2a script \u7684\u5b50\u8282\u70b9\uff1a ```xml lua <SOUI trCtx=\"dlg_main\" title=\"SOUI-DEMO version:%ver%\" bigIcon=\"LOGO:32\" smallIcon=\"LOGO:16\" width=\"600\" height=\"400\" appWnd=\"1\" margin=\"5,5,5,5\" resizable=\"1\" translucent=\"1\" alpha=\"255\"> <skin> <!--\u5c40\u90e8 skin \u5bf9\u8c61--> <gif name=\"gif_penguin\" src=\"gif:gif_penguin\"/> <apng name=\"apng_haha\" src=\"apng:apng_haha\"/> </skin> <style> <!--\u5c40\u90e8 style \u5bf9\u8c61--> <class name=\"cls_edit\" ncSkin=\"_skin.sys.border\" margin-x=\"2\" margin-y=\"2\" /> </style> <script src=\"lua:lua_test\"> <!--\u5f53\u6ca1\u6709\u6307\u5b9a src \u5c5e\u6027\u65f6\u4ece cdata \u6bb5\u4e2d\u52a0\u8f7d\u811a\u672c--> <![CDATA[ function on_init(args) SMessageBox(0,T \"execute script function: on_init\", T \"msgbox\", 1); end function on_exit(args) SMessageBox(0,T \"execute script function: on_exit\", T \"msgbox\", 1); end function onEvtTest2(args) SMessageBox(0,T \"onEvtTest2\", T \"msgbox\", 1); return 1; end function onEvtTstClick(args) local txt3=SStringW(L\"append\",-1); local sender=toSWindow(args.sender); sender:GetParent():CreateChildrenFromString(L\"<button pos=\\\"0,0,150,30\\\" on_command=\\\"onEvtTest2\\\">lua btn \u4e2d\u6587</button>\"); sender:SetVisible(0,1); return 1; end ]]> </script> <root class=\"cls_dlg_frame\" cache=\"1\" on_init=\"on_init\" on_exit=\"on_exit\"> <caption pos=\"0,0,-0,30\" show=\"1\" font=\"adding:8\"> <icon pos=\"10,8\" src=\"LOGO:16\"/> <text class=\"cls_txt_red\">SOUI-DEMO version:%ver%</text> <imgbtn id=\"1\" skin=\"_skin.sys.btn.close\" pos=\"-45,0\" tip=\"close\" animate=\"1\"/> <imgbtn id=\"2\" skin=\"_skin.sys.btn.maximize\" pos=\"-83,0\" animate=\"1\" /> <imgbtn id=\"3\" skin=\"_skin.sys.btn.restore\" pos=\"-83,0\" show=\"0\" animate=\"1\" /> <imgbtn id=\"5\" skin=\"_skin.sys.btn.minimize\" pos=\"-121,0\" animate=\"1\" /> <imgbtn name=\"btn_menu\" skin=\"skin_btn_menu\" pos=\"-151,2\" animate=\"1\" /> </caption> <other/> </root> </SOUI> \u5728 script \u8282\u70b9\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 src \u5c5e\u6027\u6765\u6307\u5b9a\u811a\u672c\u6240\u5728\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u5c06\u811a\u672c\u76f4\u63a5\u4f7f\u7528 cdata \u5199\u5728 script \u8282\u70b9\u4e2d\uff0c\u4f46\u662f src \u4e2d\u6307\u5b9a\u7684\u811a\u672c\u4f18\u5148\u3002 \u6ce8\u610f\uff0c\u4e0a\u8ff0 XML \u4e2d\u6211\u4eec\u8fd8\u5728 root \u7ed3\u70b9\u4e2d\u589e\u52a0\u4e86\u4e24\u4e2a\u65b0\u7684\u5c5e\u6027\uff1aon_init, on_exit\uff0c\u8fd9\u4e24\u4e2a \u5c5e\u6027\u544a\u8bc9\u7a0b\u5e8f\u5728\u754c\u9762\u521d\u59cb\u5316\u5b8c\u6210\u53ca\u754c\u9762\u9500\u6bc1\u524d\u9700\u8981\u6267\u884c\u7684\u4e24\u4e2a\u811a\u672c\u51fd\u6570\u3002 \u5b9e\u73b0\u4e86\u4e0a\u9762\u4e24\u6b65\uff0c\u5728 SOUI \u4e2d\u4f7f\u7528\u811a\u672c\u7684\u51c6\u5907\u5de5\u4f5c\u5df2\u7ecf\u5c31\u7eea\u3002 \u4e3a\u4e86\u5b9e\u73b0\u4e0a\u56fe\u7684\u8dd1\u9a6c\u673a\u6548\u679c\uff0c\u9996\u5148\u6211\u4eec\u9700\u8981\u5728\u4e00\u4e2a\u754c\u9762\u4e2d\u4f7f\u7528 XML \u5b9e\u73b0\u57fa\u672c\u7684\u754c\u9762\u5143\u7d20 \u5e03\u5c40\uff1a <?xml version=\"1.0\" encoding=\"utf-8\"?> <include> <window size= \"full,full\" name= \"game_wnd\" on_size= \"on_canvas_size\" id= \"300\" > <text pos= \"0,0,-0,@30\" colorBkgnd= \"#cccccc\" colorText= \"#ff0000\" align= \"center\" > SOUI + LUA \u8dd1\u9a6c\u673a </text> <window pos= \"0,[0,-0,-50\" > <window pos= \"0,0,-64,-0\" name= \"game_canvas\" clipClient= \"1\" colorBkgnd= \"#ffffff\" > <!--\u6bd4\u8d5b\u573a\u5730--> <gifplayer name= \"player_1\" float= \"1\" skin= \"gif_horse\" > <text pos= \"0,%1\" colorText= \"rgb(255,0,0)\" font= \"size:20\" > 1 </text> </gifplayer> <gifplayer name= \"player_2\" float= \"1\" skin= \"gif_horse\" > <text pos= \"0,0\" colorText= \"rgb(255,0,0)\" font= \"size:20\" > 2 </text> </gifplayer> <gifplayer name= \"player_3\" float= \"1\" skin= \"gif_horse\" > <text pos= \"0,0\" colorText= \"rgb(255,0,0)\" font= \"size:20\" > 3 </text> </gifplayer> <gifplayer name= \"player_4\" float= \"1\" skin= \"gif_horse\" > <text pos= \"0,0\" colorText= \"rgb(255,0,0)\" font= \"size:20\" > 4 </text> </gifplayer> <gifplayer name= \"flag_win\" float= \"1\" skin= \"gif_win\" show= \"0\" id= \"400\" /> <text pos= \"|0,0\" > \u8d54\u7387: </text> <text pos= \"[0,0,@20,[0\" colorText= \"#ff0000\" name= \"txt_rate\" > 4 </text> <hr pos= \"-1,0,-0,-0\" mode= \"vertical\" colorLine= \"#ff0000\" /> </window> <window pos= \"[0,0,-0,-0\" > <window pos= \"0,%12.5,@64,@64\" offset= \"0,-0.5\" skin= \"img_coin\" id= \"1\" tip= \"\u4e0b\u6ce8 1 \u53f7\u9a6c\" on_command= \"on_bet\" > 0 </window> <window pos= \"0,%37.5,@64,@64\" offset= \"0,-0.5\" skin= \"img_coin\" id= \"2\" tip= \"\u4e0b\u6ce8 2 \u53f7\u9a6c\" on_command= \"on_bet\" > 0 </window> <window pos= \"0,%62.5,@64,@64\" offset= \"0,-0.5\" skin= \"img_coin\" id= \"3\" tip= \"\u4e0b\u6ce8 3 \u53f7\u9a6c\" on_command= \"on_bet\" > 0 </window> <window pos= \"0,%87.5,@64,@64\" offset= \"0,-0.5\" skin= \"img_coin\" id= \"4\" tip= \"\u4e0b\u6ce8 4 \u53f7\u9a6c\" on_command= \"on_bet\" > 0 </window> </window> </window> <window pos= \"10,[5,-0,-0\" name= \"game_toolbar\" > <button name= \"btn_run\" pos= \"0,|0,@100,@30\" offset= \"0,-0.5\" tip= \"run the game\" on_command= \"on_run\" > run </button> <text pos= \"]-5,0,@-1,-0\" offset= \"-1,0\" > \u73b0\u6709\u91d1\u5e01: </text> <text pos= \"-64,0,@64,-0\" name= \"txt_coins\" align= \"center\" > 100 </text> </window> </window> </include> \u5728\u4e0a\u8ff0 XML \u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 gifplayer \u63a7\u4ef6\u5b9a\u4e49\u4e86 4 \u5339\u9a6c\uff0c\u4f46\u662f\u6211\u4eec\u5e76\u6ca1\u6709\u4f7f\u7528 pos \u5c5e\u6027 \u5b9a\u4e49\u5b83\u7684\u4f4d\u7f6e\uff0c\u56e0\u4e3a\u5b83\u7684\u4f4d\u7f6e\u662f\u5728\u53d8\u5316\u7684\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u811a\u672c\u5728\u63a7\u5236\u3002\u6ce8\u610f\u4e0a\u8ff0 XML \u4e2d \u4e3a\u51e0\u4e2a\u6309\u94ae\u63a7\u4ef6\u6307\u5b9a\u7684 on_command \u5c5e\u6027\u3002on_command \u5c5e\u6027\u662f\u7a97\u53e3\u7684\u70b9\u51fb\u4e8b\u4ef6\u5c5e \u6027\uff0c\u6307\u5b9a\u540e\u53ef\u4ee5\u6267\u884c\u811a\u672c\u4e2d\u5bf9\u5e94\u7684\u51fd\u6570\u3002 \u4e8b\u5b9e\u4e0a\u5728 SOUI \u4e2d\u6bcf\u4e00\u4e2a\u4e8b\u4ef6\u90fd\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5728 XML \u4e2d\u53ef\u4ee5\u6620\u5c04\u5230\u811a\u672c\u811a\u672c\u51fd\u6570\u7684\u5c5e\u6027\uff0c \u8fd9\u91cc\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u8fd9\u4e2a\u5c5e\u6027\u5728\u54ea\u91cc\u5b9e\u73b0\u7684\uff1a class SOUI_EXP EventCmd : public TplEventArgs < EventCmd > { SOUI_CLASS_NAME ( EventCmd , L \"on_command\" ) public : EventCmd ( SObject * pSender ) : TplEventArgs < EventCmd > ( pSender ){} enum { EventID = EVT_CMD }; }; ``` \u901a\u8fc7\u4e0a\u9762\u4ee3\u7801\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u4e2a\u5c5e\u6027\u5b9e\u9645\u4e0a\u5c31\u662f\u8fd9\u4e2a\u4e8b\u4ef6\u7c7b\u5728 SOUI \u4e2d\u7684\u5b57\u7b26\u4e32\u540d\u5b57\u3002 \u4e0b\u9762\u6211\u4eec\u770b\u770b\u5b9e\u73b0\u8fd9\u4e2a\u8dd1\u9a6c\u673a\u771f\u6b63\u4f7f\u7528\u7684 LUA \u811a\u672c\u4ee3\u7801\uff1a ``` lua win = nil ; tid = 0 ; gamewnd = nil ; gamecanvas = nil ; players = {}; flag_win = nil ; coins_all = 100 ; -- \u73b0\u6709\u8d44\u91d1 coins_bet = { 0 , 0 , 0 , 0 } -- \u4e0b\u6ce8\u91d1\u989d bet_rate = 4 ; -- \u8d54\u7387 prog_max = 200 ; -- \u6700\u5927\u6b65\u6570 prog_all = { 0 , 0 , 0 , 0 } -- \u9a6c\u5339\u8fdb\u5ea6 function on_init ( args ) -- \u521d\u59cb\u5316\u5168\u5c40\u5bf9\u8c61 win = toHostWnd ( args . sender ); gamewnd = win : GetRoot () : FindChildByNameA ( \"game_wnd\" , -1 ); gamecanvas = gamewnd : FindChildByNameA ( \"game_canvas\" , -1 ); flag_win = gamewnd : FindChildByNameA ( \"flag_win\" , -1 ); players = { gamecanvas : FindChildByNameA ( \"player_1\" , -1 ), gamecanvas : FindChildByNameA ( \"player_2\" , -1 ), gamecanvas : FindChildByNameA ( \"player_3\" , -1 ), gamecanvas : FindChildByNameA ( \"player_4\" , -1 ) }; -- \u5e03\u5c40 on_canvas_size ( nil ); math . randomseed ( os . time ()); -- SMessageBox ( 0 , T \"execute script function: on_init\" , T \"msgbox\" , 1 ); end function on_exit ( args ) -- SMessageBox ( 0 , T \"execute script function: on_exit\" , T \"msgbox\" , 1 ); end function on_timer ( args ) if ( gamewnd ~= nil ) then local rcCanvas = gamecanvas : GetWindowRect2 (); local heiCanvas = rcCanvas : Height (); local widCanvas = rcCanvas : Width (); local rcPlayer = players [ 1 ] : GetWindowRect2 (); local wid = rcPlayer : Width (); local hei = rcPlayer : Height (); local win_id = 0 ; for i = 1 , 4 do local prog = prog_all [ i ]; if ( prog < prog_max ) then prog = prog + math . random ( 0 , 5 ); prog_all [ i ] = prog ; local rc = players [ i ] : GetWindowRect2 (); rc . left = rcCanvas . left + ( widCanvas - wid ) * prog / prog_max ; players [ i ] : Move2 ( rc . left , rc . top , -1 , -1 ); else win_id = i ; local rc = players [ i ] : GetWindowRect2 (); rc . left = rcCanvas . left + ( widCanvas - wid ); players [ i ] : Move2 ( rc . left , rc . top , -1 , -1 ); end end if win_id ~= 0 then gamewnd : FindChildByNameA ( \"btn_run\" , -1 ) : FireCommand (); coins_all = coins_all + coins_bet [ win_id ] * 4 ; gamewnd : FindChildByNameA ( \"txt_coins\" , - 1 ) : SetWindowText ( T ( coins_all )); coins_bet = { 0 , 0 , 0 , 0 }; local rcPlayer = players [ win_id ] : GetWindowRect2 (); local szFlag = flag_win : GetDesiredSize ( rcPlayer ); rcPlayer . right = rcPlayer . left + szFlag . cx ; rcPlayer . bottom = rcPlayer . top + szFlag . cy ; rcPlayer : OffsetRect ( - szFlag . cx , - szFlag . cy / 3 ); flag_win : Move ( rcPlayer ); flag_win : SetVisible ( 1 , 1 ); flag_win : SetUserData ( win_id ); for i = 1 , 4 do gamewnd : FindChildByID ( i , -1 ) : SetWindowText ( T ( \"0\" )); end end end end function on_bet ( args ) if tid ~= 0 then return 1 ; end local btn = toSWindow ( args . sender ); if coins_all >= 10 then id = btn : GetID (); coins_bet [ id ] = coins_bet [ id ] + 10 ; coins_all = coins_all -10 ; btn : SetWindowText ( T ( coins_bet [ id ])); gamewnd : FindChildByNameA ( \"txt_coins\" , -1 ) : SetWindowText ( T ( coins_all )); end return 1 ; end function on_canvas_size ( args ) if win == nil then return 0 ; end local rcCanvas = gamecanvas : GetWindowRect2 (); local heiCanvas = rcCanvas : Height (); local widCanvas = rcCanvas : Width (); local szPlayer = players [ 1 ] : GetDesiredSize ( rcCanvas ); local wid = szPlayer . cx ; local hei = szPlayer . cy ; local rcPlayer = CRect ( 0 , 0 , wid , hei ); local interval = ( heiCanvas - hei * 4 ) / 5 ; rcPlayer : OffsetRect ( rcCanvas . left , rcCanvas . top + interval ); for i = 1 , 4 do local rc = rcPlayer ; rc . left = rcCanvas . left + ( widCanvas - wid ) * prog_all [ i ] / prog_max ; rc . right = rc . left + wid ; players [ i ] : Move ( rc ); rcPlayer : OffsetRect ( 0 , interval + hei ); end local win_id = flag_win : GetUserData (); if win_id ~= 0 then local rcPlayer = players [ win_id ] : GetWindowRect2 (); local szFlag = flag_win : GetDesiredSize ( rcPlayer ); flag_win : Move2 ( rcPlayer . left - szFlag . cx , rcPlayer . top - szFlag . cy / 3 , -1 , - 1 ); end return 1 ; end function on_run ( args ) local btn = toSWindow ( args . sender ); if tid == 0 then prog_all = { 0 , 0 , 0 , 0 }; on_canvas_size ( nil ); tid = win : setInterval ( \"on_timer\" , 200 ); btn : SetWindowText ( T \"stop\" ); flag_win : SetVisible ( 0 , 1 ); else win : clearTimer ( tid ); btn : SetWindowText ( T \"run\" ); tid = 0 ; end return 1 ; end function on_btn_select_cbx ( args ) local btn = toSWindow ( args . sender ); local cbxwnd = btn : GetWindow ( 2 ); -- get previous sibling local cbx = toComboboxBase ( cbxwnd ); cbx : SetCurSel ( -1 ); end \u5728 on_init \u4e2d\uff0c\u6211\u4eec\u83b7\u5f97\u5fc5\u987b\u7684\u51e0\u4e2a UI \u63a7\u4ef6\uff0c\u5e76\u4fdd\u5b58\u5230 LUA \u7684\u5168\u5c40\u53d8\u91cf\u4e2d\u3002 \u5728 on_canvas_size \u4e2d\uff0c\u6211\u4eec\u6839\u636e UI \u5927\u5c0f\uff0c\u81ea\u52a8\u8c03\u6574 4 \u5339\u9a6c\u7684\u4f4d\u7f6e\u3002 \u7136\u540e\u5728\u51e0\u4e2a\u6309\u94ae\u7684\u4e8b\u4ef6\u54cd\u5e94\u51fd\u6570\u4e2d\u54cd\u5e94\u7528\u6237\u64cd\u4f5c\u3002 \u81f3\u6b64\u4e00\u4e2a\u7b80\u5355\u7684\u8dd1\u9a6c\u673a\u6548\u679c\u5c31\u5b8c\u6210\u4e86\u3002 \u4e5f\u8bb8\u6709\u4eba\u89c9\u5f97\u8fd9\u4e2a\u793a\u4f8b\u592a\u7b80\u5355\uff0c\u4f46\u8bf7\u60f3\u8c61\u4e00\u4e0b\uff0c\u91c7\u7528\u7c7b\u4f3c\u7684\u65b9\u6cd5\uff0c\u4ee5\u540e UI \u53ca\u903b\u8f91\u90fd\u53ef\u4ee5\u5728 \u670d\u52a1\u5668\u63a7\u4ef6\uff0c\u5ba2\u6237\u7aef\u5c31\u50cf\u7f51\u9875\u4e00\u6837\u6bcf\u5929\u90fd\u53ef\u4ee5\u4ece\u670d\u52a1\u5668\u66f4\u65b0\u754c\u9762\u4f1a\u662f\u4ec0\u4e48\u573a\u666f\uff0c\u90a3\u65f6\u5ba2\u6237 \u7aef\u53ef\u771f\u5c31\u6210\u4e86\u5ba2\u6237\u4e86\u3002 \u540e\u8bb0\uff1a\u5728 SOUI \u4e2d\u5b9e\u73b0\u548c\u7f51\u9875\u5f00\u53d1\u7c7b\u4f3c\u7684\u811a\u672c\u529f\u80fd\u7b97\u662f SOUI 2015 \u5e74\u975e\u5e38\u91cd\u8981\u4e00\u6b21\u66f4\u65b0\uff0c \u672c\u6765\u65e9\u5c31\u60f3\u5199\u4e00\u7bc7\u8fd9\u6837\u7684\u535a\u5ba2\u6765\u4ecb\u7ecd\uff0c\u65e0\u5948\u7531\u4e8e\u539f\u6765\u4f7f\u7528\u7684 lua_tinker 0.5c \u7248\u672c\u5bfc\u51fa C++\u7c7b\u5230 LUA \u8fd8\u6709\u8fd9\u6837\u90a3\u6837\u7684\u95ee\u9898\uff0c\u4e00\u76f4\u6ca1\u6709\u627e\u5230\u5408\u9002\u7684\u89e3\u51b3\u65b9\u6848\u3002 \u867d\u7136\u4e5f\u6709\u6bd4\u8f83\u6210\u719f\u7684\u65b9\u6cd5\u5982\uff0cluabind, tolua++\u7b49\uff0c\u4f46\u662f\u603b\u89c9\u5f97\u592a\u5e9e\u5927\uff0c\u4e0d\u9002\u5408 SOUI \u8fd9 \u4e2a\u975e\u5e38\u8f7b\u91cf\u7ea7\u7684 UI \u5e93\u3002 \u8fd9\u671f\u95f4\u4e5f\u5c1d\u8bd5\u4e86\u5982 luawrapper, fflua\uff0c\u4ee5\u53ca\u7f51\u4e0a\u627e\u5230\u7684\u522b\u4eba\u4fee\u6539\u7684\u5404\u7248\u672c lua_tinker\uff0c\u4f46 \u90fd\u4e0d\u7406\u60f3\u3002 \u4f7f\u7528\u5176\u5b83\u5bfc\u51fa\u65b9\u6cd5\u5c31\u4e0d\u8bf4\u4e86\uff0c\u6211\u4e5f\u6ca1\u6709\u6df1\u5165\u3002\u4f7f\u7528 lua_tinker \u4e3b\u8981\u7684\u95ee\u9898\u5c31\u662f\u5bfc\u51fa\u7684\u5b50\u7c7b \u4e0d\u80fd\u6b63\u5e38\u8c03\u7528\u57fa\u7c7b\u7684\u65b9\u6cd5\uff0c\u8fd9\u4e00\u70b9\u5f88\u5934\u75db\uff0c\u867d\u7136\u7528\u53d8\u901a\u7684\u65b9\u6cd5\u53ef\u4ee5\u83b7\u5f97\u8c03\u7528\u57fa\u7c7b\u65b9\u6cd5\u7684\u80fd \u529b\uff0c\u4f46\u662f\u770b\u8d77\u6765\u6709\u70b9\u80cc\u53db\u4e86 OOP \u7684\u601d\u60f3\u3002 \u76f4\u5230\u4eca\u5929\u624d\u641e\u660e\u767d\u4e0d\u80fd\u8c03\u7528\u57fa\u7c7b\u6210\u5458\u6700\u4e3b\u8981\u7684\u95ee\u9898\u6765\u81ea C++\u5bf9\u8c61\u7684\u591a\u7ee7\u627f\uff0c\u660e\u767d\u4e86\u8fd9\u4e2a\u95ee \u9898\u624d\u80fd\u89c4\u907f\u95ee\u9898\uff0c\u624d\u6562\u628a\u8fd9\u4e2a LUA \u6a21\u5757\u62ff\u51fa\u6765\u8bb2\u89e3\uff0c\u4e5f\u987a\u4fbf\u628a SOUI \u4e2d\u4f7f\u7528\u7684 LUA \u5185\u6838 \u548c 5.1 \u5347\u7ea7\u5230\u4e86 5.2.3\u3002","title":"endif//DLL_CORE"},{"location":"Development/2/","text":"4.2 \u7cfb\u7edf\u8d44\u6e90\u7ba1\u7406 \u00b6 \u4e0a\u4e00\u8282\uff0c\u6211\u4eec\u5df2\u7ecf\u8bb2\u5230\u5728 SOUI \u4e2d\u6240\u6709\u8d44\u6e90\u6587\u4ef6\u901a\u8fc7\u4e00\u4e2a uires.idx \u6587\u4ef6\u8fdb\u884c\u7d22\u5f15\u3002 \u8fd9\u91cc\u5c06\u4ecb\u7ecd\u5728\u7a0b\u5e8f\u4e2d\u5982\u4f55\u5f15\u7528\u8fd9\u4e9b\u8d44\u6e90\u6587\u4ef6\u3002 \u5728 SOUI \u7cfb\u7edf\u4e2d\uff0c\u8d44\u6e90\u6587\u4ef6\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684\u63a5\u53e3\u5bf9\u8c61\u8bfb\u53d6\uff1a namespace SOUI { enum BUILTIN_RESTYPE { RES_PE = 0 , RES_FILE , }; /** * @struct IResProvider * @brief ResProvider \u5bf9\u8c61 * * Describe \u5b9e\u73b0\u5404\u79cd\u8d44\u6e90\u7684\u52a0\u8f7d */ struct IResProvider : public IObjRef { /** * Init * @brief \u8d44\u6e90\u521d\u59cb\u5316\u51fd\u6570 * @param WPARAM wParam -- param 1 * @param LPARAM lParam -- param 2 * @return BOOL -- true:succeed * * Describe every Resprovider must implement this interface. */ virtual BOOL Init ( WPARAM wParam , LPARAM lParam ) = 0 ; /** * HasResource * @brief \u67e5\u8be2\u4e00\u4e2a\u8d44\u6e90\u662f\u5426\u5b58\u5728 * @param LPCTSTR strType -- \u8d44\u6e90\u7c7b\u578b * @param LPCTSTR pszResName -- \u8d44\u6e90\u540d\u79f0 * @return BOOL -- true \u5b58\u5728\uff0cfalse \u4e0d\u5b58\u5728 * Describe */ virtual BOOL HasResource ( LPCTSTR strType , LPCTSTR pszResName ) = 0 ; /** * LoadIcon * @brief \u4ece\u8d44\u6e90\u4e2d\u52a0\u8f7d ICON * @param LPCTSTR pszResName -- ICON \u540d\u79f0 * @param int cx -- ICON \u5bbd\u5ea6 * @param int cy -- ICON \u9ad8\u5ea6 * @return HICON -- \u6210\u529f\u8fd4\u56de ICON \u7684\u53e5\u67c4\uff0c\u5931\u8d25\u8fd4\u56de 0 * Describe */ virtual HICON LoadIcon ( LPCTSTR pszResName , int cx = 0 , int cy = 0 ) = 0 ; /** * LoadBitmap * @brief \u4ece\u8d44\u6e90\u4e2d\u52a0\u8f7d HBITMAP * @param LPCTSTR pszResName -- BITMAP \u540d\u79f0 * @return HBITMAP -- \u6210\u529f\u8fd4\u56de BITMAP \u7684\u53e5\u67c4\uff0c\u5931\u8d25\u8fd4\u56de 0 * Describe */ virtual HBITMAP LoadBitmap ( LPCTSTR pszResName ) = 0 ; /** * LoadCursor * @brief \u4ece\u8d44\u6e90\u4e2d\u52a0\u8f7d\u5149\u6807 * @param LPCTSTR pszResName -- \u5149\u6807\u540d * @return HCURSOR -- \u6210\u529f\u8fd4\u56de\u5149\u6807\u7684\u53e5\u67c4\uff0c\u5931\u8d25\u8fd4\u56de 0 * Describe \u652f\u6301\u52a8\u753b\u5149\u6807 */ virtual HCURSOR LoadCursor ( LPCTSTR pszResName ) = 0 ; /** * LoadImage * @brief \u4ece\u8d44\u6e90\u52a0\u8f7d\u4e00\u4e2a IBitmap \u5bf9\u8c61 * @param LPCTSTR strType -- \u56fe\u7247\u7c7b\u578b * @param LPCTSTR pszResName -- \u56fe\u7247\u540d * @return IBitmap * -- \u6210\u529f\u8fd4\u56de\u4e00\u4e2a IBitmap \u5bf9\u8c61\uff0c\u5931\u8d25\u8fd4\u56de 0 * Describe \u5982\u679c\u6ca1\u6709\u5b9a\u4e49 strType\uff0c\u5219\u6839\u636e name \u4f7f\u7528 FindImageType \u81ea\u52a8\u67e5\u627e\u5339\u914d \u7684\u7c7b\u578b */ virtual IBitmap * LoadImage ( LPCTSTR strType , LPCTSTR pszResName ) = 0 ; /** * LoadImgX * @brief \u4ece\u8d44\u6e90\u4e2d\u521b\u5efa\u4e00\u4e2a IImgX \u5bf9\u8c61 * @param LPCTSTR strType -- \u56fe\u7247\u7c7b\u578b * @param LPCTSTR pszResName -- \u56fe\u7247\u540d * @return IImgX * -- \u6210\u529f\u8fd4\u56de\u4e00\u4e2a IImgX \u5bf9\u8c61\uff0c\u5931\u8d25\u8fd4\u56de 0 * Describe */ virtual IImgX * LoadImgX ( LPCTSTR strType , LPCTSTR pszResName ) = 0 ; /** * GetRawBufferSize * @brief \u83b7\u5f97\u8d44\u6e90\u6570\u636e\u5927\u5c0f * @param LPCTSTR strType -- \u8d44\u6e90\u7c7b\u578b * @param LPCTSTR pszResName -- \u8d44\u6e90\u540d * @return size_t -- \u8d44\u6e90\u5927\u5c0f\uff08byte)\uff0c\u5931\u8d25\u8fd4\u56de 0 * Describe */ virtual size_t GetRawBufferSize ( LPCTSTR strType , LPCTSTR pszResName ) = 0 ; /** * GetRawBuffer * @brief \u83b7\u5f97\u8d44\u6e90\u5185\u5b58\u5757 * @param LPCTSTR strType -- \u8d44\u6e90\u7c7b\u578b * @param LPCTSTR pszResName -- \u8d44\u6e90\u540d * @param LPVOID pBuf -- \u8f93\u51fa\u5185\u5b58\u5757 * @param size_t size -- \u5185\u5b58\u5927\u5c0f * @return BOOL -- true \u6210\u529f * Describe \u5e94\u8be5\u5148\u7528 GetRawBufferSize \u67e5\u8be2\u8d44\u6e90\u5927\u5c0f\u518d\u5206\u914d\u8db3\u591f\u7a7a\u95f4 */ virtual BOOL GetRawBuffer ( LPCTSTR strType , LPCTSTR pszResName , LPVOID pBuf , size_t size ) = 0 ; /** * FindImageType * @brief \u67e5\u8be2\u4e0e\u6307\u5b9a\u540d\u79f0\u5339\u914d\u7684\u8d44\u6e90\u7c7b\u578b * @param LPCTSTR pszImgName -- \u8d44\u6e90\u540d\u79f0 * @return LPCTSTR -- \u8d44\u6e90\u7c7b\u578b\uff0c\u5931\u8d25\u8fd4\u56de NULL * Describe \u6ca1\u6709\u6307\u5b9a\u56fe\u7247\u7c7b\u578b\u65f6\u9ed8\u8ba4\u4ece\u8fd9\u4e9b\u7c7b\u522b\u4e2d\u67e5\u627e */ virtual LPCTSTR FindImageType ( LPCTSTR pszImgName ) = 0 ; }; /** * Helper_FindImageType * @brief \u67e5\u8be2\u4e0e\u6307\u5b9a\u540d\u79f0\u5339\u914d\u7684\u8d44\u6e90\u7c7b\u578b * @param IResProvider * pResProvider -- \u5f53\u524d\u7684 ResProvider * @param LPCTSTR pszImgName -- \u8d44\u6e90\u540d\u79f0 * @return LPCTSTR -- \u8d44\u6e90\u7c7b\u578b\uff0c\u5931\u8d25\u8fd4\u56de NULL * Describe \u63d0\u4f9b\u4e00\u4e2a\u516c\u5171\u7684\u8f85\u52a9\u51fd\u6570 */ } //namespace SOUI \u8fd9\u4e2a\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b\u901a\u8fc7\u5b9e\u73b0\u8fd9\u4e9b\u65e2\u5b9a\u63a5\u53e3\u6765\u5b8c\u6210\u56fe\u6807(HICON)\uff0c\u5149\u6807(HCURSOR)\uff0c\u4f4d\u56fe (HBITMAP)\uff0c\u4e00\u822c\u56fe\u7247(IBitmap)\u7684\u89e3\u7801\uff0c\u540c\u65f6\u4e5f\u63d0\u4f9b\u539f\u59cb\u6570\u636e(RawData)\u7684\u8bfb\u53d6\u3002 \u5728 SOUI \u7cfb\u7edf\u4e2d\u5185\u7f6e\u4e86\u4e24\u79cd\u7c7b\u578b\u7684\u8d44\u6e90\u52a0\u8f7d(ResProvider\uff09\u6a21\u5757\uff1aSResProviderPE \u548c SResProviderFiles\uff0c\u540c\u65f6\u4e5f\u901a\u8fc7\u5916\u7f6e\u7ec4\u4ef6\u7684\u5f62\u5f0f\u63d0\u4f9b\u4e86\u4ece ZIP \u6587\u4ef6\u52a0\u8f7d\u8d44\u6e90\u7684\u529f\u80fd\u3002 \u8fd9\u4e09\u79cd\u8d44\u6e90\u52a0\u8f7d\u65b9\u5f0f\u57fa\u672c\u4e0a\u6db5\u76d6\u4e86\u76ee\u524d\u5e38\u89c1\u7684\u8d44\u6e90\u52a0\u8f7d\u65b9\u5f0f\u3002 \u4e3a\u4e86\u80fd\u591f\u4ece PE \u7684\u8d44\u6e90\u6570\u636e\u6bb5\u4e2d\u52a0\u8f7d\u8d44\u6e90\uff0c\u6211\u4eec\u9700\u8981\u5c06 uires.idx \u4e2d\u7d22\u5f15\u7684\u6587\u4ef6\u8f6c\u6362\u6210 PE \u8d44\u6e90\u53ef\u4ee5\u8bc6\u522b\u7684\u8d44\u6e90\u7c7b\u578b+\u8d44\u6e90\u540d\uff08\u4e0d\u662f\u8d44\u6e90 ID\uff09\u7684\u5f62\u5f0f\u3002 \u4e3a\u4e86\u8fbe\u5230\u8fd9\u4e2a\u76ee\u7684\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728 VS \u7684\u8d44\u6e90\u6587\u4ef6\u4e2d\uff08.rc\uff09\u5c06 SOUI \u7684\u8d44\u6e90\u4e2d\u5b9a\u4e49\u7684\u6587\u4ef6 \u6309\u7167 uires.idx \u5b9a\u4e49\u7684\u7c7b\u578b\u548c\u540d\u79f0\u52a0\u8fdb\u53bb\u5373\u53ef\u3002 \u624b\u5de5\u6dfb\u52a0\u8d44\u6e90\u6587\u4ef6\u5f88\u96be\u4fdd\u8bc1\u4e0d\u5199\u9519\u3002\u4e3a\u6b64\uff0c\u6211\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5de5\u5177 \uff08tools\\uiresbuilder.exe)\uff0c\u8fd9\u4e2a\u5de5\u5177\u63a5\u6536\u4e00\u7ec4\u547d\u4ee4\u53c2\u6570\uff0c\u7528\u6765\u5c06 uires.idx \u8f6c\u6362\u6210\u4e00\u4e2a RC \u7f16\u8bd1\u5668\u53ef\u4ee5\u8bc6\u522b\u7684.rc2 \u6587\u4ef6\uff08\u547d\u4ee4\u884c\u53c2\u89c1\u4f7f\u7528\u5411\u5bfc\u751f\u6210\u7684\u5de5\u7a0b\uff09\u3002\u8981\u7f16\u8bd1\u8be5.rc2 \u6587\u4ef6\uff0c \u9700\u8981\u5728.rc \u7684\u8d44\u6e90\u5305\u542b\u4e2d\u52a0\u4e0a\u6211\u4eec\u751f\u6210\u7684.rc2 \u6587\u4ef6\u3002 \u5982\u679c\u7a0b\u5e8f\u4e2d\u7684\u8d44\u6e90\u4e0d\u4ece PE \u8d44\u6e90\u52a0\u8f7d\uff0c\u5219\u4e0d\u9700\u8981\u7f16\u8bd1 soui_res.rc2 \u6587\u4ef6\uff0c\u4ee5\u51cf\u5c11\u7a0b\u5e8f\u4f53 \u79ef\u3002 SResProviderPE, SResProviderFiles \u548c SResProviderZIP \u5206\u522b\u4ece PE \u8d44\u6e90\uff0c\u6587\u4ef6\u5939\u53ca ZIP \u6587\u4ef6\u5305\u4e2d\u521d\u59cb\u5316\u8d44\u6e90\uff1a #if (RES_TYPE == 0) //\u4ece\u6587\u4ef6\u52a0\u8f7d CreateResProvider ( RES_FILE ,( IObjRef ** ) & pResProvider ); if ( ! pResProvider -> Init (( LPARAM ) _T ( \"uires\" ), 0 )) { SASSERT ( 0 ); return 1 ; } #elif (RES_TYPE==1) //\u4ece EXE \u8d44\u6e90\u52a0\u8f7d CreateResProvider ( RES_PE ,( IObjRef ** ) & pResProvider ); pResProvider -> Init (( WPARAM ) hInstance , 0 ); #elif (RES_TYPE==2) //\u4ece ZIP \u5305\u52a0\u8f7d bLoaded = pComMgr -> CreateResProvider_ZIP (( IObjRef ** ) & pResProvider ); SASSERT_FMT ( bLoaded , _T ( \"load interface [%s] failed ! \"),_T(\" resprovider_zip \")); ZIPRES_PARAM param ; param . ZipFile ( pRenderFactory , _T ( \"uires.zip\" ), \"souizip\" ); bLoaded = pResProvider -> Init (( WPARAM ) & param , 0 ); SASSERT ( bLoaded ); #endif \u8d44\u6e90\u52a0\u8f7d\u6210\u529f\u540e\uff0c\u8c03\u7528 SApplication::AddResProvider(IResProvider )\u63a5\u53e3\u5c06\u521b\u5efa\u7684\u8d44 \u6e90\u52a0\u8f7d\u5668\u4ea4\u7ed9 SOUI \u7cfb\u7edf\u7ba1\u7406\u3002 SApplication::AddResProvider \u53ef\u4ee5\u8c03\u7528\u591a\u6b21\uff0c\u4fbf\u4e8e\u52a0\u8f7d\u4e0d\u540c\u7684\u8d44\u6e90\u3002 \u8d44\u6e90\u52a0\u8f7d\u540e\u4e0d\u518d\u9700\u8981\u4e86\u4e5f\u53ef\u4ee5\u4f7f\u7528 SApplication::RemoveResProvider(IResProvider ) \u6765\u5220\u9664\u3002 \u7a0b\u5e8f\u4e2d\u8981\u4f7f\u7528\u4e00\u4e2a\u8d44\u6e90\u65f6\uff0c\u9996\u5148\u8c03\u7528 SApplication::HasResource \u6765\u67e5\u8be2\u4e00\u4e2a\u8d44\u6e90\u662f\u5426\u5b58 \u5728\uff0c\u7136\u540e\u518d\u6839\u636e\u8d44\u6e90\u7c7b\u578b\u9009\u62e9\u4e0d\u540c\u7684\u63a5\u53e3\u52a0\u8f7d\u8d44\u6e90\u3002 SApplication \u4e2d\u7ba1\u7406\u7740\u4e00\u4e2a IResProvider \u5217\u8868\uff0c\u7cfb\u7edf\u91c7\u7528\u540e\u8fdb\u5148\u67e5\u7684\u7b97\u6cd5\u5904\u7406\u8d44\u6e90\u91cd \u540d\uff0c\u5373\u6700\u540e\u8c03\u7528 AddResProvider \u52a0\u8fdb\u6765\u7684\u8d44\u6e90\u52a0\u8f7d\u5668\u4f18\u5148\u7ea7\u6700\u9ad8\u3002","title":"4.2 \u7cfb\u7edf\u8d44\u6e90\u7ba1\u7406"},{"location":"Development/2/#42","text":"\u4e0a\u4e00\u8282\uff0c\u6211\u4eec\u5df2\u7ecf\u8bb2\u5230\u5728 SOUI \u4e2d\u6240\u6709\u8d44\u6e90\u6587\u4ef6\u901a\u8fc7\u4e00\u4e2a uires.idx \u6587\u4ef6\u8fdb\u884c\u7d22\u5f15\u3002 \u8fd9\u91cc\u5c06\u4ecb\u7ecd\u5728\u7a0b\u5e8f\u4e2d\u5982\u4f55\u5f15\u7528\u8fd9\u4e9b\u8d44\u6e90\u6587\u4ef6\u3002 \u5728 SOUI \u7cfb\u7edf\u4e2d\uff0c\u8d44\u6e90\u6587\u4ef6\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684\u63a5\u53e3\u5bf9\u8c61\u8bfb\u53d6\uff1a namespace SOUI { enum BUILTIN_RESTYPE { RES_PE = 0 , RES_FILE , }; /** * @struct IResProvider * @brief ResProvider \u5bf9\u8c61 * * Describe \u5b9e\u73b0\u5404\u79cd\u8d44\u6e90\u7684\u52a0\u8f7d */ struct IResProvider : public IObjRef { /** * Init * @brief \u8d44\u6e90\u521d\u59cb\u5316\u51fd\u6570 * @param WPARAM wParam -- param 1 * @param LPARAM lParam -- param 2 * @return BOOL -- true:succeed * * Describe every Resprovider must implement this interface. */ virtual BOOL Init ( WPARAM wParam , LPARAM lParam ) = 0 ; /** * HasResource * @brief \u67e5\u8be2\u4e00\u4e2a\u8d44\u6e90\u662f\u5426\u5b58\u5728 * @param LPCTSTR strType -- \u8d44\u6e90\u7c7b\u578b * @param LPCTSTR pszResName -- \u8d44\u6e90\u540d\u79f0 * @return BOOL -- true \u5b58\u5728\uff0cfalse \u4e0d\u5b58\u5728 * Describe */ virtual BOOL HasResource ( LPCTSTR strType , LPCTSTR pszResName ) = 0 ; /** * LoadIcon * @brief \u4ece\u8d44\u6e90\u4e2d\u52a0\u8f7d ICON * @param LPCTSTR pszResName -- ICON \u540d\u79f0 * @param int cx -- ICON \u5bbd\u5ea6 * @param int cy -- ICON \u9ad8\u5ea6 * @return HICON -- \u6210\u529f\u8fd4\u56de ICON \u7684\u53e5\u67c4\uff0c\u5931\u8d25\u8fd4\u56de 0 * Describe */ virtual HICON LoadIcon ( LPCTSTR pszResName , int cx = 0 , int cy = 0 ) = 0 ; /** * LoadBitmap * @brief \u4ece\u8d44\u6e90\u4e2d\u52a0\u8f7d HBITMAP * @param LPCTSTR pszResName -- BITMAP \u540d\u79f0 * @return HBITMAP -- \u6210\u529f\u8fd4\u56de BITMAP \u7684\u53e5\u67c4\uff0c\u5931\u8d25\u8fd4\u56de 0 * Describe */ virtual HBITMAP LoadBitmap ( LPCTSTR pszResName ) = 0 ; /** * LoadCursor * @brief \u4ece\u8d44\u6e90\u4e2d\u52a0\u8f7d\u5149\u6807 * @param LPCTSTR pszResName -- \u5149\u6807\u540d * @return HCURSOR -- \u6210\u529f\u8fd4\u56de\u5149\u6807\u7684\u53e5\u67c4\uff0c\u5931\u8d25\u8fd4\u56de 0 * Describe \u652f\u6301\u52a8\u753b\u5149\u6807 */ virtual HCURSOR LoadCursor ( LPCTSTR pszResName ) = 0 ; /** * LoadImage * @brief \u4ece\u8d44\u6e90\u52a0\u8f7d\u4e00\u4e2a IBitmap \u5bf9\u8c61 * @param LPCTSTR strType -- \u56fe\u7247\u7c7b\u578b * @param LPCTSTR pszResName -- \u56fe\u7247\u540d * @return IBitmap * -- \u6210\u529f\u8fd4\u56de\u4e00\u4e2a IBitmap \u5bf9\u8c61\uff0c\u5931\u8d25\u8fd4\u56de 0 * Describe \u5982\u679c\u6ca1\u6709\u5b9a\u4e49 strType\uff0c\u5219\u6839\u636e name \u4f7f\u7528 FindImageType \u81ea\u52a8\u67e5\u627e\u5339\u914d \u7684\u7c7b\u578b */ virtual IBitmap * LoadImage ( LPCTSTR strType , LPCTSTR pszResName ) = 0 ; /** * LoadImgX * @brief \u4ece\u8d44\u6e90\u4e2d\u521b\u5efa\u4e00\u4e2a IImgX \u5bf9\u8c61 * @param LPCTSTR strType -- \u56fe\u7247\u7c7b\u578b * @param LPCTSTR pszResName -- \u56fe\u7247\u540d * @return IImgX * -- \u6210\u529f\u8fd4\u56de\u4e00\u4e2a IImgX \u5bf9\u8c61\uff0c\u5931\u8d25\u8fd4\u56de 0 * Describe */ virtual IImgX * LoadImgX ( LPCTSTR strType , LPCTSTR pszResName ) = 0 ; /** * GetRawBufferSize * @brief \u83b7\u5f97\u8d44\u6e90\u6570\u636e\u5927\u5c0f * @param LPCTSTR strType -- \u8d44\u6e90\u7c7b\u578b * @param LPCTSTR pszResName -- \u8d44\u6e90\u540d * @return size_t -- \u8d44\u6e90\u5927\u5c0f\uff08byte)\uff0c\u5931\u8d25\u8fd4\u56de 0 * Describe */ virtual size_t GetRawBufferSize ( LPCTSTR strType , LPCTSTR pszResName ) = 0 ; /** * GetRawBuffer * @brief \u83b7\u5f97\u8d44\u6e90\u5185\u5b58\u5757 * @param LPCTSTR strType -- \u8d44\u6e90\u7c7b\u578b * @param LPCTSTR pszResName -- \u8d44\u6e90\u540d * @param LPVOID pBuf -- \u8f93\u51fa\u5185\u5b58\u5757 * @param size_t size -- \u5185\u5b58\u5927\u5c0f * @return BOOL -- true \u6210\u529f * Describe \u5e94\u8be5\u5148\u7528 GetRawBufferSize \u67e5\u8be2\u8d44\u6e90\u5927\u5c0f\u518d\u5206\u914d\u8db3\u591f\u7a7a\u95f4 */ virtual BOOL GetRawBuffer ( LPCTSTR strType , LPCTSTR pszResName , LPVOID pBuf , size_t size ) = 0 ; /** * FindImageType * @brief \u67e5\u8be2\u4e0e\u6307\u5b9a\u540d\u79f0\u5339\u914d\u7684\u8d44\u6e90\u7c7b\u578b * @param LPCTSTR pszImgName -- \u8d44\u6e90\u540d\u79f0 * @return LPCTSTR -- \u8d44\u6e90\u7c7b\u578b\uff0c\u5931\u8d25\u8fd4\u56de NULL * Describe \u6ca1\u6709\u6307\u5b9a\u56fe\u7247\u7c7b\u578b\u65f6\u9ed8\u8ba4\u4ece\u8fd9\u4e9b\u7c7b\u522b\u4e2d\u67e5\u627e */ virtual LPCTSTR FindImageType ( LPCTSTR pszImgName ) = 0 ; }; /** * Helper_FindImageType * @brief \u67e5\u8be2\u4e0e\u6307\u5b9a\u540d\u79f0\u5339\u914d\u7684\u8d44\u6e90\u7c7b\u578b * @param IResProvider * pResProvider -- \u5f53\u524d\u7684 ResProvider * @param LPCTSTR pszImgName -- \u8d44\u6e90\u540d\u79f0 * @return LPCTSTR -- \u8d44\u6e90\u7c7b\u578b\uff0c\u5931\u8d25\u8fd4\u56de NULL * Describe \u63d0\u4f9b\u4e00\u4e2a\u516c\u5171\u7684\u8f85\u52a9\u51fd\u6570 */ } //namespace SOUI \u8fd9\u4e2a\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b\u901a\u8fc7\u5b9e\u73b0\u8fd9\u4e9b\u65e2\u5b9a\u63a5\u53e3\u6765\u5b8c\u6210\u56fe\u6807(HICON)\uff0c\u5149\u6807(HCURSOR)\uff0c\u4f4d\u56fe (HBITMAP)\uff0c\u4e00\u822c\u56fe\u7247(IBitmap)\u7684\u89e3\u7801\uff0c\u540c\u65f6\u4e5f\u63d0\u4f9b\u539f\u59cb\u6570\u636e(RawData)\u7684\u8bfb\u53d6\u3002 \u5728 SOUI \u7cfb\u7edf\u4e2d\u5185\u7f6e\u4e86\u4e24\u79cd\u7c7b\u578b\u7684\u8d44\u6e90\u52a0\u8f7d(ResProvider\uff09\u6a21\u5757\uff1aSResProviderPE \u548c SResProviderFiles\uff0c\u540c\u65f6\u4e5f\u901a\u8fc7\u5916\u7f6e\u7ec4\u4ef6\u7684\u5f62\u5f0f\u63d0\u4f9b\u4e86\u4ece ZIP \u6587\u4ef6\u52a0\u8f7d\u8d44\u6e90\u7684\u529f\u80fd\u3002 \u8fd9\u4e09\u79cd\u8d44\u6e90\u52a0\u8f7d\u65b9\u5f0f\u57fa\u672c\u4e0a\u6db5\u76d6\u4e86\u76ee\u524d\u5e38\u89c1\u7684\u8d44\u6e90\u52a0\u8f7d\u65b9\u5f0f\u3002 \u4e3a\u4e86\u80fd\u591f\u4ece PE \u7684\u8d44\u6e90\u6570\u636e\u6bb5\u4e2d\u52a0\u8f7d\u8d44\u6e90\uff0c\u6211\u4eec\u9700\u8981\u5c06 uires.idx \u4e2d\u7d22\u5f15\u7684\u6587\u4ef6\u8f6c\u6362\u6210 PE \u8d44\u6e90\u53ef\u4ee5\u8bc6\u522b\u7684\u8d44\u6e90\u7c7b\u578b+\u8d44\u6e90\u540d\uff08\u4e0d\u662f\u8d44\u6e90 ID\uff09\u7684\u5f62\u5f0f\u3002 \u4e3a\u4e86\u8fbe\u5230\u8fd9\u4e2a\u76ee\u7684\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728 VS \u7684\u8d44\u6e90\u6587\u4ef6\u4e2d\uff08.rc\uff09\u5c06 SOUI \u7684\u8d44\u6e90\u4e2d\u5b9a\u4e49\u7684\u6587\u4ef6 \u6309\u7167 uires.idx \u5b9a\u4e49\u7684\u7c7b\u578b\u548c\u540d\u79f0\u52a0\u8fdb\u53bb\u5373\u53ef\u3002 \u624b\u5de5\u6dfb\u52a0\u8d44\u6e90\u6587\u4ef6\u5f88\u96be\u4fdd\u8bc1\u4e0d\u5199\u9519\u3002\u4e3a\u6b64\uff0c\u6211\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5de5\u5177 \uff08tools\\uiresbuilder.exe)\uff0c\u8fd9\u4e2a\u5de5\u5177\u63a5\u6536\u4e00\u7ec4\u547d\u4ee4\u53c2\u6570\uff0c\u7528\u6765\u5c06 uires.idx \u8f6c\u6362\u6210\u4e00\u4e2a RC \u7f16\u8bd1\u5668\u53ef\u4ee5\u8bc6\u522b\u7684.rc2 \u6587\u4ef6\uff08\u547d\u4ee4\u884c\u53c2\u89c1\u4f7f\u7528\u5411\u5bfc\u751f\u6210\u7684\u5de5\u7a0b\uff09\u3002\u8981\u7f16\u8bd1\u8be5.rc2 \u6587\u4ef6\uff0c \u9700\u8981\u5728.rc \u7684\u8d44\u6e90\u5305\u542b\u4e2d\u52a0\u4e0a\u6211\u4eec\u751f\u6210\u7684.rc2 \u6587\u4ef6\u3002 \u5982\u679c\u7a0b\u5e8f\u4e2d\u7684\u8d44\u6e90\u4e0d\u4ece PE \u8d44\u6e90\u52a0\u8f7d\uff0c\u5219\u4e0d\u9700\u8981\u7f16\u8bd1 soui_res.rc2 \u6587\u4ef6\uff0c\u4ee5\u51cf\u5c11\u7a0b\u5e8f\u4f53 \u79ef\u3002 SResProviderPE, SResProviderFiles \u548c SResProviderZIP \u5206\u522b\u4ece PE \u8d44\u6e90\uff0c\u6587\u4ef6\u5939\u53ca ZIP \u6587\u4ef6\u5305\u4e2d\u521d\u59cb\u5316\u8d44\u6e90\uff1a #if (RES_TYPE == 0) //\u4ece\u6587\u4ef6\u52a0\u8f7d CreateResProvider ( RES_FILE ,( IObjRef ** ) & pResProvider ); if ( ! pResProvider -> Init (( LPARAM ) _T ( \"uires\" ), 0 )) { SASSERT ( 0 ); return 1 ; } #elif (RES_TYPE==1) //\u4ece EXE \u8d44\u6e90\u52a0\u8f7d CreateResProvider ( RES_PE ,( IObjRef ** ) & pResProvider ); pResProvider -> Init (( WPARAM ) hInstance , 0 ); #elif (RES_TYPE==2) //\u4ece ZIP \u5305\u52a0\u8f7d bLoaded = pComMgr -> CreateResProvider_ZIP (( IObjRef ** ) & pResProvider ); SASSERT_FMT ( bLoaded , _T ( \"load interface [%s] failed ! \"),_T(\" resprovider_zip \")); ZIPRES_PARAM param ; param . ZipFile ( pRenderFactory , _T ( \"uires.zip\" ), \"souizip\" ); bLoaded = pResProvider -> Init (( WPARAM ) & param , 0 ); SASSERT ( bLoaded ); #endif \u8d44\u6e90\u52a0\u8f7d\u6210\u529f\u540e\uff0c\u8c03\u7528 SApplication::AddResProvider(IResProvider )\u63a5\u53e3\u5c06\u521b\u5efa\u7684\u8d44 \u6e90\u52a0\u8f7d\u5668\u4ea4\u7ed9 SOUI \u7cfb\u7edf\u7ba1\u7406\u3002 SApplication::AddResProvider \u53ef\u4ee5\u8c03\u7528\u591a\u6b21\uff0c\u4fbf\u4e8e\u52a0\u8f7d\u4e0d\u540c\u7684\u8d44\u6e90\u3002 \u8d44\u6e90\u52a0\u8f7d\u540e\u4e0d\u518d\u9700\u8981\u4e86\u4e5f\u53ef\u4ee5\u4f7f\u7528 SApplication::RemoveResProvider(IResProvider ) \u6765\u5220\u9664\u3002 \u7a0b\u5e8f\u4e2d\u8981\u4f7f\u7528\u4e00\u4e2a\u8d44\u6e90\u65f6\uff0c\u9996\u5148\u8c03\u7528 SApplication::HasResource \u6765\u67e5\u8be2\u4e00\u4e2a\u8d44\u6e90\u662f\u5426\u5b58 \u5728\uff0c\u7136\u540e\u518d\u6839\u636e\u8d44\u6e90\u7c7b\u578b\u9009\u62e9\u4e0d\u540c\u7684\u63a5\u53e3\u52a0\u8f7d\u8d44\u6e90\u3002 SApplication \u4e2d\u7ba1\u7406\u7740\u4e00\u4e2a IResProvider \u5217\u8868\uff0c\u7cfb\u7edf\u91c7\u7528\u540e\u8fdb\u5148\u67e5\u7684\u7b97\u6cd5\u5904\u7406\u8d44\u6e90\u91cd \u540d\uff0c\u5373\u6700\u540e\u8c03\u7528 AddResProvider \u52a0\u8fdb\u6765\u7684\u8d44\u6e90\u52a0\u8f7d\u5668\u4f18\u5148\u7ea7\u6700\u9ad8\u3002","title":"4.2 \u7cfb\u7edf\u8d44\u6e90\u7ba1\u7406"},{"location":"Development/20/","text":"4.20 \u5bfc\u51fa SOUI \u5bf9\u8c61\u5230 LUA \u811a\u672c \u00b6 LUA \u662f\u4e00\u79cd\u4f53\u79ef\u5c0f\uff0c\u901f\u5ea6\u5feb\u7684\u811a\u672c\u8bed\u8a00\u3002\u811a\u672c\u8bed\u8a00\u867d\u7136\u6027\u80fd\u4e0a\u548c C++\u8fd9\u6837\u7684 Naitive \u8bed\u8a00 \u76f8\u6bd4\u5dee\u4e00\u70b9\uff0c\u4f46\u662f\u5f00\u53d1\u901f\u5ea6\u5feb\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7684\u66f4\u65b0\u4ee3\u7801\u7b49\uff0c\u8fd1\u5e74\u6765\u53d7\u5230\u4e86\u8d8a\u6765\u8d8a\u591a\u5f00\u53d1\u8005\u7684 \u91cd\u89c6\u3002 \u5728 SOUI \u6846\u67b6\u4e2d\uff0c\u6211\u628a\u811a\u672c\u6a21\u5757\u53c2\u8003 CEGUI \u62bd\u8c61\u51fa\u4e00\u4e2a\u72ec\u7acb\u7684\u811a\u672c\u63a5\u53e3\uff0c\u65b9\u4fbf\u5b9e\u73b0\u5404\u79cd\u811a \u672c\u8bed\u8a00\u7684\u5bf9\u63a5\u3002 \u4e0b\u9762\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u5728 SOUI \u4e2d\u5b9e\u73b0\u7684 LUA \u811a\u672c\u6a21\u5757\u7684\u5b9e\u73b0\u3002 \u5728\u5ba2\u6237\u7aef\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u811a\u672c\u8bed\u8a00\u4e00\u4e2a\u57fa\u672c\u7684\u9700\u6c42\u5c31\u662f C++\u4ee3\u7801\u548c\u811a\u672c\u4ee3\u7801\u7684\u76f8\u4e92\u8c03\u7528\uff0c\u5373 C++\u4ee3\u7801\u53ef\u4ee5\u8c03\u7528\u811a\u672c\u4ee3\u7801\uff0c\u811a\u672c\u4ee3\u7801\u4e5f\u8981\u80fd\u591f\u65b9\u4fbf\u7684\u8c03\u7528 C++\u4ee3\u7801\u3002 LUA \u811a\u672c\u539f\u751f\u63d0\u4f9b\u4e86\u8bbf\u95ee C \u51fd\u6570\u7684\u65b9\u6cd5\uff0c\u53ea\u9700\u8981\u7b80\u5355\u7684\u8c03\u7528\u51e0\u884c\u4ee3\u7801\u5c31\u53ef\u4ee5\u65b9\u4fbf\u7684\u628a C \u51fd \u6570\u6ce8\u518c\u5230 LUA \u51fd\u6570\u7a7a\u95f4\u4e2d\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u539f\u751f\u63d0\u4f9b\u8bbf\u95ee C++\u5bf9\u8c61\u7684\u80fd\u529b\u3002 \u4f46\u662f LUA \u4e2d\u5b9e\u73b0\u7684 metatable \u80fd\u591f\u5f88\u597d\u7684\u6a21\u62df C++\u7684 OOP \u80fd\u529b\uff0c\u8fd9\u4e5f\u4e3a\u5bfc\u51fa C++\u5bf9\u8c61 \u5230 LUA \u63d0\u4f9b\u4e86\u53ef\u80fd\u3002 \u76ee\u524d\u5df2\u7ecf\u6709\u5f88\u591a\u65b9\u6cd5\u53ef\u4ee5\u5c06 C++\u5bf9\u8c61\u5bfc\u51fa\u5230 LUA\uff0c\u6bd4\u5982 luabind,tolua++, fflua \u53ca\u672c\u6587\u4e2d \u7528\u5230\u7684 lua_tinker\u3002 luabind \u636e\u8bf4\u4f53\u79ef\u6bd4\u8f83\u5927\uff0ctolua++\u597d\u50cf\u5df2\u7ecf\u6ca1\u4eba\u7ef4\u62a4\u4e86\uff0c\u76ee\u524d\u53ea\u652f\u6301 lua 5.1.4\uff0cfflua \u662f \u56fd\u5185\u4e00\u4e2a\u5927\u795e\u7684\u4f5c\u54c1\uff0c\u4f7f\u7528\u7b80\u5355\uff0c\u53ea\u662f\u6211\u4f7f\u7528\u4e2d\u78b0\u5230\u4e00\u70b9\u95ee\u9898\uff0c\u6700\u540e\u8fd8\u662f\u9009\u62e9\u4e86 lua_tinker\u3002 lua_tinker \u662f\u4e00\u4e2a\u97e9\u56fd\u5927\u795e\u7684\u4f5c\u54c1\uff0c\u867d\u7136\u4f5c\u8005\u672c\u4eba\u6ca1\u6709\u7ef4\u62a4\u4e86\uff0c\u4f46\u662f\u4ee3\u7801\u76f8\u5bf9\u6bd4\u8f83\u7b80\u5355\u6613 \u61c2\uff0c\u56fd\u5185\u6709\u4e0d\u5c11\u9ad8\u624b\u90fd\u5bf9\u5b83\u8fdb\u884c\u4e86\u6269\u5c55\u3002 \u5728 SOUI \u4e2d\u4f7f\u7528\u7684\u662f\u5b98\u65b9\u7684 0.5c \u7248\u672c\u4e0a\u7ed3\u5408\u7f51\u53cb\u4fee\u6539\u7684\u7248\u672c\uff0c\u5b9e\u73b0\u5bf9 lua 5.2.3 \u7684\u652f\u6301\u3002 \u8a00\u5f52\u6b63\u4f20\uff0c\u4e0b\u9762\u8bf4\u8bf4\u5982\u4f55\u4f7f\u7528 lua_tinker \u5bfc\u51fa SOUI \u5bf9\u5916\u5230 LUA\u3002 \u8981\u4f7f\u7528 LUA\uff0c\u9996\u5148\u5f53\u7136\u8981\u6709\u4e00\u4efd LUA \u5185\u6838\u4ee3\u7801\uff0c\u8fd9\u91cc\u7528\u7684 lua 5.2.3\u3002 \u4e3a\u4e86\u5728 SOUI \u4e2d\u4f7f\u7528 LUA\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u4f7f\u7528 LUA \u5185\u6838\u5b9e\u73b0\u4e00\u4e2a SOUI::IScriptModuler \u63a5 \u53e3: namespace SOUI { class SWindow ; /*! \\brief Abstract interface required for all scripting support modules to be used with the SOUI system. */ struct IScriptModule : public IObjRef { /** * GetScriptEngine * @brief \u83b7\u5f97\u811a\u672c\u5f15\u64ce\u7684\u6307\u9488 * @return void * -- \u811a\u672c\u5f15\u64ce\u7684\u6307\u9488 * Describe */ virtual void * GetScriptEngine () = 0 ; /************************************************************************* Abstract interface *************************************************************************/ /*! \\brief Execute a script file. \\param pszScriptFile String object holding the filename of the script file that is to be executed */ virtual void executeScriptFile ( LPCSTR pszScriptFile ) = 0 ; /*! \\brief Execute a script buffer. \\param buff buffer of the script that is to be executed \\param sz size of buffer */ virtual void executeScriptBuffer ( const char * buff , size_t sz ) = 0 ; /*! \\brief Execute script code contained in the given String object. \\param str String object holding the valid script code that should be executed. \\return Nothing. */ virtual void executeString ( LPCSTR str ) = 0 ; /*! \\brief Execute a scripted global 'event handler' function. The function should take some kind of EventArgs like parameter that the concrete implementation of this function can create from the passed EventArgs based object. \\param handler_name String object holding the name of the scripted handler function. \\param EventArgs *pEvt SWindow based object that should be passed, by any appropriate means, to the scripted function. \\return - true if the event was handled. - false if the event was not handled. */ virtual bool executeScriptedEventHandler ( LPCSTR handler_name , EventArgs * pEvt ) = 0 ; /*! \\brief Return identification string for the ScriptModule. If the internal id string has not been set by the ScriptModule creator, a generic string of \"Unknown scripting module\" will be returned. \\return String object holding a string that identifies the ScriptModule in use. */ virtual LPCSTR getIdentifierString () const = 0 ; /*! \\brief Subscribes or unsubscribe the named Event to a scripted function \\param target The target EventSet for the subscription. \\param uEvent Event ID to subscribe to. \\param subscriber_name String object containing the name of the script function that is to be subscribed to the Event. \\return */ virtual bool subscribeEvent ( SWindow * target , UINT uEvent , LPCSTR subscriber_name ) = 0 ; /** * unsubscribeEvent * @brief \u53d6\u6d88\u4e8b\u4ef6\u8ba2\u9605 * @param SWindow * target -- \u76ee\u6807\u7a97\u53e3 * @param UINT uEvent -- \u76ee\u6807\u4e8b\u4ef6 * @param LPCSTR subscriber_name -- \u811a\u672c\u51fd\u6570\u540d * @return bool -- true \u64cd\u4f5c\u6210\u529f * Describe */ virtual bool unsubscribeEvent ( SWindow * target , UINT uEvent , LPCSTR subscriber_name ) = 0 ; }; struct IScriptFactory : public IObjRef { virtual HRESULT CreateScriptModule ( IScriptModule ** ppScriptModule ) = 0 ; }; } \u5b9e\u73b0\u4e0a\u8ff0\u63a5\u53e3\u540e\uff0cSOUI \u5c31\u53ef\u4ee5\u7528\u8fd9\u4e2a\u63a5\u53e3\u548c\u811a\u672c\u4ea4\u4e92\u3002 \u5bfc\u51fa SOUI \u5bf9\u8c61\u901a\u5e38\u5e94\u8be5\u5728 IScriptModule \u7684\u5b9e\u73b0\u7c7b\u7684\u6784\u9020\u4e2d\u6267\u884c\u3002 \u4f7f\u7528 lua_tinker \u5bfc\u51fa C++\u5bf9\u8c61\u975e\u5e38\u7b80\u5355\uff0c\u4e0b\u9762\u770b\u4e00\u4e0b scriptmodule-lua \u662f\u5982\u4f55\u5bfc\u51fa SOUI \u4e2d\u4f7f\u7528\u7684\u51e0\u4e2a C++\u5bf9\u8c61\u7684\uff1a //\u5bfc\u51fa\u57fa\u672c\u7ed3\u6784\u4f53\u7c7b\u578b UINT rgb ( int r , int g , int b ) { return RGBA ( r , g , b , 255 ); } UINT rgba ( int r , int g , int b , int a ) { return RGBA ( r , g , b , a ); } BOOL ExpLua_Basic ( lua_State * L ) { try { lua_tinker :: def ( L , \"RGB\" , rgb ); lua_tinker :: def ( L , \"RGBA\" , rgba ); //POINT lua_tinker :: class_add < POINT > ( L , \"POINT\" ); lua_tinker :: class_mem < POINT > ( L , \"x\" , & POINT :: x ); lua_tinker :: class_mem < POINT > ( L , \"y\" , & POINT :: y ); //RECT lua_tinker :: class_add < RECT > ( L , \"RECT\" ); lua_tinker :: class_mem < RECT > ( L , \"left\" , & RECT :: left ); lua_tinker :: class_mem < RECT > ( L , \"top\" , & RECT :: top ); lua_tinker :: class_mem < RECT > ( L , \"right\" , & RECT :: right ); lua_tinker :: class_mem < RECT > ( L , \"bottom\" , & RECT :: bottom ); //SIZE lua_tinker :: class_add < SIZE > ( L , \"SIZE\" ); lua_tinker :: class_mem < SIZE > ( L , \"cx\" , & SIZE :: cx ); lua_tinker :: class_mem < SIZE > ( L , \"cy\" , & SIZE :: cy ); //CPoint lua_tinker :: class_add < CPoint > ( L , \"CPoint\" ); lua_tinker :: class_inh < CPoint , POINT > ( L ); lua_tinker :: class_con < CPoint > ( L , lua_tinker :: constructor < CPoint , LONG , LONG > ); //CRect lua_tinker :: class_add < CRect > ( L , \"CRect\" ); lua_tinker :: class_inh < CRect , RECT > ( L ); lua_tinker :: class_con < CRect > ( L , lua_tinker :: constructor < CRect , LONG , LONG , LONG , LONG > ); lua_tinker :: class_def < CRect > ( L , \"Width\" , & CRect :: Width ); lua_tinker :: class_def < CRect > ( L , \"Height\" , & CRect :: Height ); lua_tinker :: class_def < CRect > ( L , \"Size\" , & CRect :: Size ); lua_tinker :: class_def < CRect > ( L , \"IsRectEmpty\" , & CRect :: IsRectEmpty ); lua_tinker :: class_def < CRect > ( L , \"IsRectNull\" , & CRect :: IsRectNull ); lua_tinker :: class_def < CRect > ( L , \"PtInRect\" , & CRect :: PtInRect ); lua_tinker :: class_def < CRect > ( L , \"SetRectEmpty\" , & CRect :: SetRectEmpty ); lua_tinker :: class_def < CRect > ( L , \"OffsetRect\" ,( void ( CRect ::* )( int , int )) & CRect :: OffsetRect ); //CSize lua_tinker :: class_add < CSize > ( L , \"CSize\" ); lua_tinker :: class_inh < CSize , SIZE > ( L ); lua_tinker :: class_con < CSize > ( L , lua_tinker :: constructor < CSize , LONG , LONG > ); return TRUE ; } catch (...) { return FALSE ; } } #include <core/swnd.h> //\u5b9a\u4e49\u4e00\u4e2a\u4ece SObject \u8f6c\u6362\u6210 SWindow \u7684\u65b9\u6cd5 SWindow * toSWindow ( SObject * pObj ) { return sobj_cast < SWindow > ( pObj ); } BOOL ExpLua_Window ( lua_State * L ) { try { lua_tinker :: def ( L , \"toSWindow\" , toSWindow ); lua_tinker :: class_add < SWindow > ( L , \"SWindow\" ); lua_tinker :: class_inh < SWindow , SObject > ( L ); lua_tinker :: class_con < SWindow > ( L , lua_tinker :: constructor < SWindow > ); lua_tinker :: class_def < SWindow > ( L , \"GetContainer\" , & SWindow :: GetContainer ); lua_tinker :: class_def < SWindow > ( L , \"GetRoot\" , & SWindow :: GetRoot ); lua_tinker :: class_def < SWindow > ( L , \"GetTopLevelParent\" , & SWindow :: GetTopLevelPa rent ); lua_tinker :: class_def < SWindow > ( L , \"GetParent\" , & SWindow :: GetParent ); lua_tinker :: class_def < SWindow > ( L , \"DestroyChild\" , & SWindow :: DestroyChild ); lua_tinker :: class_def < SWindow > ( L , \"GetChildrenCount\" , & SWindow :: GetChildrenCou nt ); lua_tinker :: class_def < SWindow > ( L , \"FindChildByID\" , & SWindow :: FindChildByID ); lua_tinker :: class_def < SWindow > ( L , \"FindChildByNameA\" ,( SWindow * ( SWindow ::* )( LPCSTR , int )) & SWindow :: FindChildByName ); lua_tinker :: class_def < SWindow > ( L , \"FindChildByNameW\" ,( SWindow * ( SWindow ::* )( LPCWSTR , int )) & SWindow :: FindChildByName ); lua_tinker :: class_def < SWindow > ( L , \"CreateChildrenFromString\" ,( SWindow * ( SWindow ::* )( LPCWSTR )) & SWindow :: CreateChildren ); lua_tinker :: class_def < SWindow > ( L , \"GetTextAlign\" , & SWindow :: GetTextAlign ); lua_tinker :: class_def < SWindow > ( L , \"GetWindowRect\" ,( void ( SWindow ::* )( LPRECT )) & SWindow :: GetWindowRect ); lua_tinker :: class_def < SWindow > ( L , \"GetWindowRect2\" ,( CRect ( SWindow ::* )()) & SWindow :: GetWindowRect ); lua_tinker :: class_def < SWindow > ( L , \"GetClientRect\" ,( void ( SWindow ::* )( LPRECT )) & SWindow :: GetClientRect ); lua_tinker :: class_def < SWindow > ( L , \"GetClientRect2\" ,( CRect ( SWindow ::* )()) & SWindow :: GetClientRect ); lua_tinker :: class_def < SWindow > ( L , \"GetWindowText\" , & SWindow :: GetWindowText ); lua_tinker :: class_def < SWindow > ( L , \"SetWindowText\" , & SWindow :: SetWindowText ); lua_tinker :: class_def < SWindow > ( L , \"SendSwndMessage\" , & SWindow :: SSendMessage ); lua_tinker :: class_def < SWindow > ( L , \"GetID\" , & SWindow :: GetID ); lua_tinker :: class_def < SWindow > ( L , \"SetID\" , & SWindow :: SetID ); lua_tinker :: class_def < SWindow > ( L , \"GetUserData\" , & SWindow :: GetUserData ); lua_tinker :: class_def < SWindow > ( L , \"SetUserData\" , & SWindow :: SetUserData ); lua_tinker :: class_def < SWindow > ( L , \"GetName\" , & SWindow :: GetName ); lua_tinker :: class_def < SWindow > ( L , \"GetSwnd\" , & SWindow :: GetSwnd ); lua_tinker :: class_def < SWindow > ( L , \"InsertChild\" , & SWindow :: InsertChild ); lua_tinker :: class_def < SWindow > ( L , \"RemoveChild\" , & SWindow :: RemoveChild ); lua_tinker :: class_def < SWindow > ( L , \"IsChecked\" , & SWindow :: IsChecked ); lua_tinker :: class_def < SWindow > ( L , \"IsDisabled\" , & SWindow :: IsDisabled ); lua_tinker :: class_def < SWindow > ( L , \"IsVisible\" , & SWindow :: IsVisible ); lua_tinker :: class_def < SWindow > ( L , \"SetVisible\" , & SWindow :: SetVisible ); lua_tinker :: class_def < SWindow > ( L , \"EnableWindow\" , & SWindow :: EnableWindow ); lua_tinker :: class_def < SWindow > ( L , \"SetCheck\" , & SWindow :: SetCheck ); lua_tinker :: class_def < SWindow > ( L , \"SetOwner\" , & SWindow :: SetOwner ); lua_tinker :: class_def < SWindow > ( L , \"GetOwner\" , & SWindow :: GetOwner ); lua_tinker :: class_def < SWindow > ( L , \"Invalidate\" , & SWindow :: Invalidate ); lua_tinker :: class_def < SWindow > ( L , \"InvalidateRect\" ,( void ( SWindow ::* )( LPCRECT )) & SWindow :: InvalidateRect ); lua_tinker :: class_def < SWindow > ( L , \"AnimateWindow\" , & SWindow :: AnimateWindow ); lua_tinker :: class_def < SWindow > ( L , \"GetScriptModule\" , & SWindow :: GetScriptModule ); lua_tinker :: class_def < SWindow > ( L , \"Move2\" ,( void ( SWindow ::* )( int , int , int , int )) & SWindow :: Move ); lua_tinker :: class_def < SWindow > ( L , \"Move\" ,( void ( SWindow ::* )( LPCRECT )) & SWindow :: Move ); lua_tinker :: class_def < SWindow > ( L , \"FireCommand\" , & SWindow :: FireCommand ); lua_tinker :: class_def < SWindow > ( L , \"GetDesiredSize\" , & SWindow :: GetDesiredSize ); lua_tinker :: class_def < SWindow > ( L , \"GetWindow\" , & SWindow :: GetWindow ); return TRUE ; } catch (...) { return FALSE ; } } \u8fd8\u662f\u5f88\u7b80\u5355\u5427\uff1f\uff01 \u8fd9\u91cc\u6709\u4e24\u70b9\u9700\u8981\u6ce8\u610f\uff1a \u524d\u9762\u7684\u4ee3\u7801\u91cc\u4e00\u822c\u662f\u5bfc\u51fa\u5168\u5c40\u51fd\u6570\uff0c\u6210\u5458\u51fd\u6570\u53ca\u6210\u5458\u53d8\u91cf\uff0c\u4f46\u662f\u7c7b\u7684\u9759\u6001\u6210\u5458\u51fd\u6570\u662f\u4e0d\u80fd \u7528\u4e0a\u9762\u7684\u65b9\u6cd5\u5bfc\u51fa\u7684\uff0c\u4e0b\u9762\u770b\u4e00\u4e0b\u9759\u6001\u51fd\u6570\u5982\u4f55\u5904\u7406\uff1a BOOL ExpLua_App ( lua_State * L ) { try { lua_tinker :: class_add < SApplication > ( L , \"SApplication\" ); lua_tinker :: class_def < SApplication > ( L , \"AddResProvider\" , & SApplication :: AddRes Provider ); lua_tinker :: class_def < SApplication > ( L , \"RemoveResProvider\" , & SApplication :: Rem oveResProvider ); lua_tinker :: class_def < SApplication > ( L , \"Init\" , & SApplication :: Init ); lua_tinker :: class_def < SApplication > ( L , \"GetInstance\" , & SApplication :: GetInstan ce ); lua_tinker :: class_def < SApplication > ( L , \"CreateScriptModule\" , & SApplication :: Cr eateScriptModule ); lua_tinker :: class_def < SApplication > ( L , \"SetScriptModule\" , & SApplication :: SetSc riptFactory ); lua_tinker :: class_def < SApplication > ( L , \"GetTranslator\" , & SApplication :: GetTran slator ); lua_tinker :: class_def < SApplication > ( L , \"SetTranslator\" , & SApplication :: SetTran slator ); lua_tinker :: def ( L , \"theApp\" , & SApplication :: getSingletonPtr ); return TRUE ; } catch (...) { return FALSE ; } } \u6ce8\u610f\u4e0a\u9762\u5bfc\u51fa SApplication::getSingletonPtr \u4f7f\u7528\u7684\u65b9\u6cd5\uff0c\u5b9e\u9645\u4f7f\u7528\u7684\u662f\u548c\u5bfc\u51fa\u5168\u5c40\u51fd\u6570 \u4e00\u6837\u7684\u65b9\u6cd5\uff0c\u56e0\u6b64\u5728\u811a\u672c\u4e2d\u8c03\u7528\u7684\u65f6\u5019\u4e5f\u53ea\u80fd\u548c\u5168\u5c40\u51fd\u6570\u4e00\u6837\u8c03\u7528\uff0c\u8fd9\u4e00\u70b9\u548c C++\u8c03\u7528\u9759 \u6001\u51fd\u6570\u662f\u4e0d\u540c\u7684\u3002 \u7b2c\u4e8c\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u5c31\u662f\uff0c\u4f7f\u7528 lua_tinker \u5bfc\u51fa\u7684 C++\u7c7b\u5982\u679c\u662f\u591a\u7ee7\u627f\u7684\uff0c\u90a3\u4e48\u53ea\u80fd\u5bfc \u51fa\u4e00\u4e2a\u57fa\u7c7b\uff0c\u800c\u4e14\u8fd9\u4e2a\u57fa\u7c7b\u5fc5\u987b\u662f\u7b2c\u4e00\u4e2a\u57fa\u7c7b\u3002 \u4f8b\u5982 SWindow \u7c7b\uff0c\u5b83\u4ece\u591a\u4e2a\u57fa\u7c7b\u7ee7\u627f\u800c\u6765\uff0c\u4f46\u53ea\u80fd\u4f7f\u7528 lua_tinker::class_inh \u6765\u58f0\u660e\u7b2c \u4e00\u4e2a\u57fa\u7c7b SObject\uff0c\u5982\u679c\u628a SWindow \u7684\u7ee7\u627f\u987a\u5e8f\u8c03\u6574\u4e00\u4e0b\uff0c\u5728 LUA \u811a\u672c\u91cc\u83b7\u5f97 SWindow \u5bf9\u8c61\u540e\u4e5f\u8bbf\u95ee\u4e0d\u4e86 SObject \u7684\u65b9\u6cd5\uff0c\u8fd9\u4e00\u70b9\u9700\u8981\u7279\u522b\u6ce8\u610f\u3002 \u6ce8\uff1a\u4e0a\u9762\u8fd9\u4e2a\u95ee\u9898\u662f\u6211\u641c\u7d22\u597d\u957f\u65f6\u95f4\u624d\u53d1\u73b0\u7684\uff0c\u4f46\u4e5f\u6ca1\u6709\u5b8c\u5168\u89e3\u51b3\u95ee\u9898\uff0c\u672c\u6765\u60f3\u5728\u5bfc\u51fa SHostWnd \u65f6\u58f0\u660e\u7ee7\u627f\u81ea SWindow\uff0c\u5c3d\u7ba1\u628a SWindow \u653e\u5230\u4e86\u7ee7\u627f\u7684\u7b2c\u4e00\u4f4d\uff0c\u4f46\u662f\u5728 LUA \u811a\u672c\u4e2d\u7528 SHostWnd \u5bf9\u8c61\u8bbf\u95ee SWindow \u65b9\u6cd5\u4ecd\u7136\u5931\u8d25\uff0c\u4e0d\u77e5\u9053\u4ec0\u4e48\u539f\u56e0\uff0c\u6709\u5174\u8da3 \u7684\u670b\u53cb\u53ef\u4ee5\u7814\u7a76\u4e00\u4e0b\u3002 \u4e0a\u9762\u4ecb\u7ecd\u4e86\u5982\u4f55\u5bfc\u51fa C++\u5bf9\u8c61\u5230 LUA \u7a7a\u95f4\uff0c\u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e0b\u5728 LUA \u811a\u672c\u4e2d\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b C++\u5bf9\u8c61\uff1a \u6240\u6709\u7684 C++\u5bf9\u8c61\u5bfc\u51fa\u5230 LUA \u540e\u90fd\u5c06\u5bf9\u5e94\u4e00\u4e2a metatable\uff0c\u53ef\u4ee5\u4f7f\u7528\".\"\u6765\u8bbf\u95ee table \u4e2d\u7684 \u6210\u5458\u53d8\u91cf\uff08\u6620\u5c04\u4e86 C++\u5bf9\u8c61\u7684\u6210\u5458\u53d8\u91cf\uff09\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u201c\uff1a\u201d\u6765\u8bbf\u95ee table \u4e2d\u7684\u6210\u5458\u51fd\u6570 \uff08\u6620\u5c04\u4e86 C++\u5bf9\u8c61\u51fd\u6570\uff09\uff0c\u5168\u5c40\u51fd\u6570\u5219\u76f4\u63a5\u4f7f\u7528\u51fd\u6570\u540d\u8c03\u7528\u3002 \u4f8b\u5982\u4e0a\u9762\u5bfc\u51fa\u7684 CRect \u5bf9\u8c61\uff0c\u5728 LUA \u811a\u672c\u4e2d\u4f7f\u7528\u5982\u4e0b\uff1a function test ( arg ) local rc = CRect ( 0 , 0 , 100 , 100 ); local wid = rc : Width (); --\u8bbf\u95ee\u6210\u5458\u51fd\u6570 Width() local x1 = rc . left ; --\u8bbf\u95ee\u57fa\u7c7b\u5bf9\u8c61 RECT \u7684\u6210\u5458\u53d8\u91cf left end \u66f4\u591a\u64cd\u4f5c\u8bf7\u53c2\u8003 SOUI \u7684 demo","title":"4.20 \u5bfc\u51fa SOUI \u5bf9\u8c61\u5230 LUA \u811a\u672c"},{"location":"Development/20/#420-soui-lua","text":"LUA \u662f\u4e00\u79cd\u4f53\u79ef\u5c0f\uff0c\u901f\u5ea6\u5feb\u7684\u811a\u672c\u8bed\u8a00\u3002\u811a\u672c\u8bed\u8a00\u867d\u7136\u6027\u80fd\u4e0a\u548c C++\u8fd9\u6837\u7684 Naitive \u8bed\u8a00 \u76f8\u6bd4\u5dee\u4e00\u70b9\uff0c\u4f46\u662f\u5f00\u53d1\u901f\u5ea6\u5feb\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7684\u66f4\u65b0\u4ee3\u7801\u7b49\uff0c\u8fd1\u5e74\u6765\u53d7\u5230\u4e86\u8d8a\u6765\u8d8a\u591a\u5f00\u53d1\u8005\u7684 \u91cd\u89c6\u3002 \u5728 SOUI \u6846\u67b6\u4e2d\uff0c\u6211\u628a\u811a\u672c\u6a21\u5757\u53c2\u8003 CEGUI \u62bd\u8c61\u51fa\u4e00\u4e2a\u72ec\u7acb\u7684\u811a\u672c\u63a5\u53e3\uff0c\u65b9\u4fbf\u5b9e\u73b0\u5404\u79cd\u811a \u672c\u8bed\u8a00\u7684\u5bf9\u63a5\u3002 \u4e0b\u9762\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u5728 SOUI \u4e2d\u5b9e\u73b0\u7684 LUA \u811a\u672c\u6a21\u5757\u7684\u5b9e\u73b0\u3002 \u5728\u5ba2\u6237\u7aef\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u811a\u672c\u8bed\u8a00\u4e00\u4e2a\u57fa\u672c\u7684\u9700\u6c42\u5c31\u662f C++\u4ee3\u7801\u548c\u811a\u672c\u4ee3\u7801\u7684\u76f8\u4e92\u8c03\u7528\uff0c\u5373 C++\u4ee3\u7801\u53ef\u4ee5\u8c03\u7528\u811a\u672c\u4ee3\u7801\uff0c\u811a\u672c\u4ee3\u7801\u4e5f\u8981\u80fd\u591f\u65b9\u4fbf\u7684\u8c03\u7528 C++\u4ee3\u7801\u3002 LUA \u811a\u672c\u539f\u751f\u63d0\u4f9b\u4e86\u8bbf\u95ee C \u51fd\u6570\u7684\u65b9\u6cd5\uff0c\u53ea\u9700\u8981\u7b80\u5355\u7684\u8c03\u7528\u51e0\u884c\u4ee3\u7801\u5c31\u53ef\u4ee5\u65b9\u4fbf\u7684\u628a C \u51fd \u6570\u6ce8\u518c\u5230 LUA \u51fd\u6570\u7a7a\u95f4\u4e2d\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u539f\u751f\u63d0\u4f9b\u8bbf\u95ee C++\u5bf9\u8c61\u7684\u80fd\u529b\u3002 \u4f46\u662f LUA \u4e2d\u5b9e\u73b0\u7684 metatable \u80fd\u591f\u5f88\u597d\u7684\u6a21\u62df C++\u7684 OOP \u80fd\u529b\uff0c\u8fd9\u4e5f\u4e3a\u5bfc\u51fa C++\u5bf9\u8c61 \u5230 LUA \u63d0\u4f9b\u4e86\u53ef\u80fd\u3002 \u76ee\u524d\u5df2\u7ecf\u6709\u5f88\u591a\u65b9\u6cd5\u53ef\u4ee5\u5c06 C++\u5bf9\u8c61\u5bfc\u51fa\u5230 LUA\uff0c\u6bd4\u5982 luabind,tolua++, fflua \u53ca\u672c\u6587\u4e2d \u7528\u5230\u7684 lua_tinker\u3002 luabind \u636e\u8bf4\u4f53\u79ef\u6bd4\u8f83\u5927\uff0ctolua++\u597d\u50cf\u5df2\u7ecf\u6ca1\u4eba\u7ef4\u62a4\u4e86\uff0c\u76ee\u524d\u53ea\u652f\u6301 lua 5.1.4\uff0cfflua \u662f \u56fd\u5185\u4e00\u4e2a\u5927\u795e\u7684\u4f5c\u54c1\uff0c\u4f7f\u7528\u7b80\u5355\uff0c\u53ea\u662f\u6211\u4f7f\u7528\u4e2d\u78b0\u5230\u4e00\u70b9\u95ee\u9898\uff0c\u6700\u540e\u8fd8\u662f\u9009\u62e9\u4e86 lua_tinker\u3002 lua_tinker \u662f\u4e00\u4e2a\u97e9\u56fd\u5927\u795e\u7684\u4f5c\u54c1\uff0c\u867d\u7136\u4f5c\u8005\u672c\u4eba\u6ca1\u6709\u7ef4\u62a4\u4e86\uff0c\u4f46\u662f\u4ee3\u7801\u76f8\u5bf9\u6bd4\u8f83\u7b80\u5355\u6613 \u61c2\uff0c\u56fd\u5185\u6709\u4e0d\u5c11\u9ad8\u624b\u90fd\u5bf9\u5b83\u8fdb\u884c\u4e86\u6269\u5c55\u3002 \u5728 SOUI \u4e2d\u4f7f\u7528\u7684\u662f\u5b98\u65b9\u7684 0.5c \u7248\u672c\u4e0a\u7ed3\u5408\u7f51\u53cb\u4fee\u6539\u7684\u7248\u672c\uff0c\u5b9e\u73b0\u5bf9 lua 5.2.3 \u7684\u652f\u6301\u3002 \u8a00\u5f52\u6b63\u4f20\uff0c\u4e0b\u9762\u8bf4\u8bf4\u5982\u4f55\u4f7f\u7528 lua_tinker \u5bfc\u51fa SOUI \u5bf9\u5916\u5230 LUA\u3002 \u8981\u4f7f\u7528 LUA\uff0c\u9996\u5148\u5f53\u7136\u8981\u6709\u4e00\u4efd LUA \u5185\u6838\u4ee3\u7801\uff0c\u8fd9\u91cc\u7528\u7684 lua 5.2.3\u3002 \u4e3a\u4e86\u5728 SOUI \u4e2d\u4f7f\u7528 LUA\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u4f7f\u7528 LUA \u5185\u6838\u5b9e\u73b0\u4e00\u4e2a SOUI::IScriptModuler \u63a5 \u53e3: namespace SOUI { class SWindow ; /*! \\brief Abstract interface required for all scripting support modules to be used with the SOUI system. */ struct IScriptModule : public IObjRef { /** * GetScriptEngine * @brief \u83b7\u5f97\u811a\u672c\u5f15\u64ce\u7684\u6307\u9488 * @return void * -- \u811a\u672c\u5f15\u64ce\u7684\u6307\u9488 * Describe */ virtual void * GetScriptEngine () = 0 ; /************************************************************************* Abstract interface *************************************************************************/ /*! \\brief Execute a script file. \\param pszScriptFile String object holding the filename of the script file that is to be executed */ virtual void executeScriptFile ( LPCSTR pszScriptFile ) = 0 ; /*! \\brief Execute a script buffer. \\param buff buffer of the script that is to be executed \\param sz size of buffer */ virtual void executeScriptBuffer ( const char * buff , size_t sz ) = 0 ; /*! \\brief Execute script code contained in the given String object. \\param str String object holding the valid script code that should be executed. \\return Nothing. */ virtual void executeString ( LPCSTR str ) = 0 ; /*! \\brief Execute a scripted global 'event handler' function. The function should take some kind of EventArgs like parameter that the concrete implementation of this function can create from the passed EventArgs based object. \\param handler_name String object holding the name of the scripted handler function. \\param EventArgs *pEvt SWindow based object that should be passed, by any appropriate means, to the scripted function. \\return - true if the event was handled. - false if the event was not handled. */ virtual bool executeScriptedEventHandler ( LPCSTR handler_name , EventArgs * pEvt ) = 0 ; /*! \\brief Return identification string for the ScriptModule. If the internal id string has not been set by the ScriptModule creator, a generic string of \"Unknown scripting module\" will be returned. \\return String object holding a string that identifies the ScriptModule in use. */ virtual LPCSTR getIdentifierString () const = 0 ; /*! \\brief Subscribes or unsubscribe the named Event to a scripted function \\param target The target EventSet for the subscription. \\param uEvent Event ID to subscribe to. \\param subscriber_name String object containing the name of the script function that is to be subscribed to the Event. \\return */ virtual bool subscribeEvent ( SWindow * target , UINT uEvent , LPCSTR subscriber_name ) = 0 ; /** * unsubscribeEvent * @brief \u53d6\u6d88\u4e8b\u4ef6\u8ba2\u9605 * @param SWindow * target -- \u76ee\u6807\u7a97\u53e3 * @param UINT uEvent -- \u76ee\u6807\u4e8b\u4ef6 * @param LPCSTR subscriber_name -- \u811a\u672c\u51fd\u6570\u540d * @return bool -- true \u64cd\u4f5c\u6210\u529f * Describe */ virtual bool unsubscribeEvent ( SWindow * target , UINT uEvent , LPCSTR subscriber_name ) = 0 ; }; struct IScriptFactory : public IObjRef { virtual HRESULT CreateScriptModule ( IScriptModule ** ppScriptModule ) = 0 ; }; } \u5b9e\u73b0\u4e0a\u8ff0\u63a5\u53e3\u540e\uff0cSOUI \u5c31\u53ef\u4ee5\u7528\u8fd9\u4e2a\u63a5\u53e3\u548c\u811a\u672c\u4ea4\u4e92\u3002 \u5bfc\u51fa SOUI \u5bf9\u8c61\u901a\u5e38\u5e94\u8be5\u5728 IScriptModule \u7684\u5b9e\u73b0\u7c7b\u7684\u6784\u9020\u4e2d\u6267\u884c\u3002 \u4f7f\u7528 lua_tinker \u5bfc\u51fa C++\u5bf9\u8c61\u975e\u5e38\u7b80\u5355\uff0c\u4e0b\u9762\u770b\u4e00\u4e0b scriptmodule-lua \u662f\u5982\u4f55\u5bfc\u51fa SOUI \u4e2d\u4f7f\u7528\u7684\u51e0\u4e2a C++\u5bf9\u8c61\u7684\uff1a //\u5bfc\u51fa\u57fa\u672c\u7ed3\u6784\u4f53\u7c7b\u578b UINT rgb ( int r , int g , int b ) { return RGBA ( r , g , b , 255 ); } UINT rgba ( int r , int g , int b , int a ) { return RGBA ( r , g , b , a ); } BOOL ExpLua_Basic ( lua_State * L ) { try { lua_tinker :: def ( L , \"RGB\" , rgb ); lua_tinker :: def ( L , \"RGBA\" , rgba ); //POINT lua_tinker :: class_add < POINT > ( L , \"POINT\" ); lua_tinker :: class_mem < POINT > ( L , \"x\" , & POINT :: x ); lua_tinker :: class_mem < POINT > ( L , \"y\" , & POINT :: y ); //RECT lua_tinker :: class_add < RECT > ( L , \"RECT\" ); lua_tinker :: class_mem < RECT > ( L , \"left\" , & RECT :: left ); lua_tinker :: class_mem < RECT > ( L , \"top\" , & RECT :: top ); lua_tinker :: class_mem < RECT > ( L , \"right\" , & RECT :: right ); lua_tinker :: class_mem < RECT > ( L , \"bottom\" , & RECT :: bottom ); //SIZE lua_tinker :: class_add < SIZE > ( L , \"SIZE\" ); lua_tinker :: class_mem < SIZE > ( L , \"cx\" , & SIZE :: cx ); lua_tinker :: class_mem < SIZE > ( L , \"cy\" , & SIZE :: cy ); //CPoint lua_tinker :: class_add < CPoint > ( L , \"CPoint\" ); lua_tinker :: class_inh < CPoint , POINT > ( L ); lua_tinker :: class_con < CPoint > ( L , lua_tinker :: constructor < CPoint , LONG , LONG > ); //CRect lua_tinker :: class_add < CRect > ( L , \"CRect\" ); lua_tinker :: class_inh < CRect , RECT > ( L ); lua_tinker :: class_con < CRect > ( L , lua_tinker :: constructor < CRect , LONG , LONG , LONG , LONG > ); lua_tinker :: class_def < CRect > ( L , \"Width\" , & CRect :: Width ); lua_tinker :: class_def < CRect > ( L , \"Height\" , & CRect :: Height ); lua_tinker :: class_def < CRect > ( L , \"Size\" , & CRect :: Size ); lua_tinker :: class_def < CRect > ( L , \"IsRectEmpty\" , & CRect :: IsRectEmpty ); lua_tinker :: class_def < CRect > ( L , \"IsRectNull\" , & CRect :: IsRectNull ); lua_tinker :: class_def < CRect > ( L , \"PtInRect\" , & CRect :: PtInRect ); lua_tinker :: class_def < CRect > ( L , \"SetRectEmpty\" , & CRect :: SetRectEmpty ); lua_tinker :: class_def < CRect > ( L , \"OffsetRect\" ,( void ( CRect ::* )( int , int )) & CRect :: OffsetRect ); //CSize lua_tinker :: class_add < CSize > ( L , \"CSize\" ); lua_tinker :: class_inh < CSize , SIZE > ( L ); lua_tinker :: class_con < CSize > ( L , lua_tinker :: constructor < CSize , LONG , LONG > ); return TRUE ; } catch (...) { return FALSE ; } } #include <core/swnd.h> //\u5b9a\u4e49\u4e00\u4e2a\u4ece SObject \u8f6c\u6362\u6210 SWindow \u7684\u65b9\u6cd5 SWindow * toSWindow ( SObject * pObj ) { return sobj_cast < SWindow > ( pObj ); } BOOL ExpLua_Window ( lua_State * L ) { try { lua_tinker :: def ( L , \"toSWindow\" , toSWindow ); lua_tinker :: class_add < SWindow > ( L , \"SWindow\" ); lua_tinker :: class_inh < SWindow , SObject > ( L ); lua_tinker :: class_con < SWindow > ( L , lua_tinker :: constructor < SWindow > ); lua_tinker :: class_def < SWindow > ( L , \"GetContainer\" , & SWindow :: GetContainer ); lua_tinker :: class_def < SWindow > ( L , \"GetRoot\" , & SWindow :: GetRoot ); lua_tinker :: class_def < SWindow > ( L , \"GetTopLevelParent\" , & SWindow :: GetTopLevelPa rent ); lua_tinker :: class_def < SWindow > ( L , \"GetParent\" , & SWindow :: GetParent ); lua_tinker :: class_def < SWindow > ( L , \"DestroyChild\" , & SWindow :: DestroyChild ); lua_tinker :: class_def < SWindow > ( L , \"GetChildrenCount\" , & SWindow :: GetChildrenCou nt ); lua_tinker :: class_def < SWindow > ( L , \"FindChildByID\" , & SWindow :: FindChildByID ); lua_tinker :: class_def < SWindow > ( L , \"FindChildByNameA\" ,( SWindow * ( SWindow ::* )( LPCSTR , int )) & SWindow :: FindChildByName ); lua_tinker :: class_def < SWindow > ( L , \"FindChildByNameW\" ,( SWindow * ( SWindow ::* )( LPCWSTR , int )) & SWindow :: FindChildByName ); lua_tinker :: class_def < SWindow > ( L , \"CreateChildrenFromString\" ,( SWindow * ( SWindow ::* )( LPCWSTR )) & SWindow :: CreateChildren ); lua_tinker :: class_def < SWindow > ( L , \"GetTextAlign\" , & SWindow :: GetTextAlign ); lua_tinker :: class_def < SWindow > ( L , \"GetWindowRect\" ,( void ( SWindow ::* )( LPRECT )) & SWindow :: GetWindowRect ); lua_tinker :: class_def < SWindow > ( L , \"GetWindowRect2\" ,( CRect ( SWindow ::* )()) & SWindow :: GetWindowRect ); lua_tinker :: class_def < SWindow > ( L , \"GetClientRect\" ,( void ( SWindow ::* )( LPRECT )) & SWindow :: GetClientRect ); lua_tinker :: class_def < SWindow > ( L , \"GetClientRect2\" ,( CRect ( SWindow ::* )()) & SWindow :: GetClientRect ); lua_tinker :: class_def < SWindow > ( L , \"GetWindowText\" , & SWindow :: GetWindowText ); lua_tinker :: class_def < SWindow > ( L , \"SetWindowText\" , & SWindow :: SetWindowText ); lua_tinker :: class_def < SWindow > ( L , \"SendSwndMessage\" , & SWindow :: SSendMessage ); lua_tinker :: class_def < SWindow > ( L , \"GetID\" , & SWindow :: GetID ); lua_tinker :: class_def < SWindow > ( L , \"SetID\" , & SWindow :: SetID ); lua_tinker :: class_def < SWindow > ( L , \"GetUserData\" , & SWindow :: GetUserData ); lua_tinker :: class_def < SWindow > ( L , \"SetUserData\" , & SWindow :: SetUserData ); lua_tinker :: class_def < SWindow > ( L , \"GetName\" , & SWindow :: GetName ); lua_tinker :: class_def < SWindow > ( L , \"GetSwnd\" , & SWindow :: GetSwnd ); lua_tinker :: class_def < SWindow > ( L , \"InsertChild\" , & SWindow :: InsertChild ); lua_tinker :: class_def < SWindow > ( L , \"RemoveChild\" , & SWindow :: RemoveChild ); lua_tinker :: class_def < SWindow > ( L , \"IsChecked\" , & SWindow :: IsChecked ); lua_tinker :: class_def < SWindow > ( L , \"IsDisabled\" , & SWindow :: IsDisabled ); lua_tinker :: class_def < SWindow > ( L , \"IsVisible\" , & SWindow :: IsVisible ); lua_tinker :: class_def < SWindow > ( L , \"SetVisible\" , & SWindow :: SetVisible ); lua_tinker :: class_def < SWindow > ( L , \"EnableWindow\" , & SWindow :: EnableWindow ); lua_tinker :: class_def < SWindow > ( L , \"SetCheck\" , & SWindow :: SetCheck ); lua_tinker :: class_def < SWindow > ( L , \"SetOwner\" , & SWindow :: SetOwner ); lua_tinker :: class_def < SWindow > ( L , \"GetOwner\" , & SWindow :: GetOwner ); lua_tinker :: class_def < SWindow > ( L , \"Invalidate\" , & SWindow :: Invalidate ); lua_tinker :: class_def < SWindow > ( L , \"InvalidateRect\" ,( void ( SWindow ::* )( LPCRECT )) & SWindow :: InvalidateRect ); lua_tinker :: class_def < SWindow > ( L , \"AnimateWindow\" , & SWindow :: AnimateWindow ); lua_tinker :: class_def < SWindow > ( L , \"GetScriptModule\" , & SWindow :: GetScriptModule ); lua_tinker :: class_def < SWindow > ( L , \"Move2\" ,( void ( SWindow ::* )( int , int , int , int )) & SWindow :: Move ); lua_tinker :: class_def < SWindow > ( L , \"Move\" ,( void ( SWindow ::* )( LPCRECT )) & SWindow :: Move ); lua_tinker :: class_def < SWindow > ( L , \"FireCommand\" , & SWindow :: FireCommand ); lua_tinker :: class_def < SWindow > ( L , \"GetDesiredSize\" , & SWindow :: GetDesiredSize ); lua_tinker :: class_def < SWindow > ( L , \"GetWindow\" , & SWindow :: GetWindow ); return TRUE ; } catch (...) { return FALSE ; } } \u8fd8\u662f\u5f88\u7b80\u5355\u5427\uff1f\uff01 \u8fd9\u91cc\u6709\u4e24\u70b9\u9700\u8981\u6ce8\u610f\uff1a \u524d\u9762\u7684\u4ee3\u7801\u91cc\u4e00\u822c\u662f\u5bfc\u51fa\u5168\u5c40\u51fd\u6570\uff0c\u6210\u5458\u51fd\u6570\u53ca\u6210\u5458\u53d8\u91cf\uff0c\u4f46\u662f\u7c7b\u7684\u9759\u6001\u6210\u5458\u51fd\u6570\u662f\u4e0d\u80fd \u7528\u4e0a\u9762\u7684\u65b9\u6cd5\u5bfc\u51fa\u7684\uff0c\u4e0b\u9762\u770b\u4e00\u4e0b\u9759\u6001\u51fd\u6570\u5982\u4f55\u5904\u7406\uff1a BOOL ExpLua_App ( lua_State * L ) { try { lua_tinker :: class_add < SApplication > ( L , \"SApplication\" ); lua_tinker :: class_def < SApplication > ( L , \"AddResProvider\" , & SApplication :: AddRes Provider ); lua_tinker :: class_def < SApplication > ( L , \"RemoveResProvider\" , & SApplication :: Rem oveResProvider ); lua_tinker :: class_def < SApplication > ( L , \"Init\" , & SApplication :: Init ); lua_tinker :: class_def < SApplication > ( L , \"GetInstance\" , & SApplication :: GetInstan ce ); lua_tinker :: class_def < SApplication > ( L , \"CreateScriptModule\" , & SApplication :: Cr eateScriptModule ); lua_tinker :: class_def < SApplication > ( L , \"SetScriptModule\" , & SApplication :: SetSc riptFactory ); lua_tinker :: class_def < SApplication > ( L , \"GetTranslator\" , & SApplication :: GetTran slator ); lua_tinker :: class_def < SApplication > ( L , \"SetTranslator\" , & SApplication :: SetTran slator ); lua_tinker :: def ( L , \"theApp\" , & SApplication :: getSingletonPtr ); return TRUE ; } catch (...) { return FALSE ; } } \u6ce8\u610f\u4e0a\u9762\u5bfc\u51fa SApplication::getSingletonPtr \u4f7f\u7528\u7684\u65b9\u6cd5\uff0c\u5b9e\u9645\u4f7f\u7528\u7684\u662f\u548c\u5bfc\u51fa\u5168\u5c40\u51fd\u6570 \u4e00\u6837\u7684\u65b9\u6cd5\uff0c\u56e0\u6b64\u5728\u811a\u672c\u4e2d\u8c03\u7528\u7684\u65f6\u5019\u4e5f\u53ea\u80fd\u548c\u5168\u5c40\u51fd\u6570\u4e00\u6837\u8c03\u7528\uff0c\u8fd9\u4e00\u70b9\u548c C++\u8c03\u7528\u9759 \u6001\u51fd\u6570\u662f\u4e0d\u540c\u7684\u3002 \u7b2c\u4e8c\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u5c31\u662f\uff0c\u4f7f\u7528 lua_tinker \u5bfc\u51fa\u7684 C++\u7c7b\u5982\u679c\u662f\u591a\u7ee7\u627f\u7684\uff0c\u90a3\u4e48\u53ea\u80fd\u5bfc \u51fa\u4e00\u4e2a\u57fa\u7c7b\uff0c\u800c\u4e14\u8fd9\u4e2a\u57fa\u7c7b\u5fc5\u987b\u662f\u7b2c\u4e00\u4e2a\u57fa\u7c7b\u3002 \u4f8b\u5982 SWindow \u7c7b\uff0c\u5b83\u4ece\u591a\u4e2a\u57fa\u7c7b\u7ee7\u627f\u800c\u6765\uff0c\u4f46\u53ea\u80fd\u4f7f\u7528 lua_tinker::class_inh \u6765\u58f0\u660e\u7b2c \u4e00\u4e2a\u57fa\u7c7b SObject\uff0c\u5982\u679c\u628a SWindow \u7684\u7ee7\u627f\u987a\u5e8f\u8c03\u6574\u4e00\u4e0b\uff0c\u5728 LUA \u811a\u672c\u91cc\u83b7\u5f97 SWindow \u5bf9\u8c61\u540e\u4e5f\u8bbf\u95ee\u4e0d\u4e86 SObject \u7684\u65b9\u6cd5\uff0c\u8fd9\u4e00\u70b9\u9700\u8981\u7279\u522b\u6ce8\u610f\u3002 \u6ce8\uff1a\u4e0a\u9762\u8fd9\u4e2a\u95ee\u9898\u662f\u6211\u641c\u7d22\u597d\u957f\u65f6\u95f4\u624d\u53d1\u73b0\u7684\uff0c\u4f46\u4e5f\u6ca1\u6709\u5b8c\u5168\u89e3\u51b3\u95ee\u9898\uff0c\u672c\u6765\u60f3\u5728\u5bfc\u51fa SHostWnd \u65f6\u58f0\u660e\u7ee7\u627f\u81ea SWindow\uff0c\u5c3d\u7ba1\u628a SWindow \u653e\u5230\u4e86\u7ee7\u627f\u7684\u7b2c\u4e00\u4f4d\uff0c\u4f46\u662f\u5728 LUA \u811a\u672c\u4e2d\u7528 SHostWnd \u5bf9\u8c61\u8bbf\u95ee SWindow \u65b9\u6cd5\u4ecd\u7136\u5931\u8d25\uff0c\u4e0d\u77e5\u9053\u4ec0\u4e48\u539f\u56e0\uff0c\u6709\u5174\u8da3 \u7684\u670b\u53cb\u53ef\u4ee5\u7814\u7a76\u4e00\u4e0b\u3002 \u4e0a\u9762\u4ecb\u7ecd\u4e86\u5982\u4f55\u5bfc\u51fa C++\u5bf9\u8c61\u5230 LUA \u7a7a\u95f4\uff0c\u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e0b\u5728 LUA \u811a\u672c\u4e2d\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b C++\u5bf9\u8c61\uff1a \u6240\u6709\u7684 C++\u5bf9\u8c61\u5bfc\u51fa\u5230 LUA \u540e\u90fd\u5c06\u5bf9\u5e94\u4e00\u4e2a metatable\uff0c\u53ef\u4ee5\u4f7f\u7528\".\"\u6765\u8bbf\u95ee table \u4e2d\u7684 \u6210\u5458\u53d8\u91cf\uff08\u6620\u5c04\u4e86 C++\u5bf9\u8c61\u7684\u6210\u5458\u53d8\u91cf\uff09\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u201c\uff1a\u201d\u6765\u8bbf\u95ee table \u4e2d\u7684\u6210\u5458\u51fd\u6570 \uff08\u6620\u5c04\u4e86 C++\u5bf9\u8c61\u51fd\u6570\uff09\uff0c\u5168\u5c40\u51fd\u6570\u5219\u76f4\u63a5\u4f7f\u7528\u51fd\u6570\u540d\u8c03\u7528\u3002 \u4f8b\u5982\u4e0a\u9762\u5bfc\u51fa\u7684 CRect \u5bf9\u8c61\uff0c\u5728 LUA \u811a\u672c\u4e2d\u4f7f\u7528\u5982\u4e0b\uff1a function test ( arg ) local rc = CRect ( 0 , 0 , 100 , 100 ); local wid = rc : Width (); --\u8bbf\u95ee\u6210\u5458\u51fd\u6570 Width() local x1 = rc . left ; --\u8bbf\u95ee\u57fa\u7c7b\u5bf9\u8c61 RECT \u7684\u6210\u5458\u53d8\u91cf left end \u66f4\u591a\u64cd\u4f5c\u8bf7\u53c2\u8003 SOUI \u7684 demo","title":"4.20 \u5bfc\u51fa SOUI \u5bf9\u8c61\u5230 LUA \u811a\u672c"},{"location":"Development/21/","text":"4.21 \u5728 SOUI \u4e2d\u505a\u4e8b\u4ef6\u5206\u53d1\u5904\u7406 \u00b6 \u4e0d\u540c\u7684 SOUI \u63a7\u4ef6\u53ef\u4ee5\u4ea7\u751f\u4e0d\u540c\u7684\u4e8b\u4ef6\u3002SOUI \u7cfb\u7edf\u4e2d\u63d0\u4f9b\u4e86\u4e24\u79cd\u4e8b\u4ef6\u5904\u7406\u65b9\u5f0f\uff1a\u4e8b\u4ef6\u8ba2 \u9605 + \u4e8b\u4ef6\u5904\u7406\u6620\u5c04\u8868(\u53c2\u89c1\u7b2c\u516b\u7bc7\uff1aSOUI \u4e2d\u63a7\u4ef6\u4e8b\u4ef6\u7684\u54cd\u5e94) \u4e8b\u4ef6\u8ba2\u9605\u7531\u4e8e\u76f4\u63a5\u5c06\u4e8b\u4ef6\u53ca\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u8fde\u63a5\uff0c\u4e0d\u5b58\u5728\u4e8b\u4ef6\u5206\u53d1\u7684\u95ee\u9898\uff0c\u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecd\u4f7f \u7528\u4e8b\u4ef6\u6620\u5c04\u8868\u65f6\u7684\u4e8b\u4ef6\u5206\u53d1\u3002 \u5728\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\u524d\uff0c\u9996\u5148\u4e86\u89e3\u4e00\u4e0b\u4ec0\u4e48\u662f\u4e8b\u4ef6\u5206\u53d1\u3002 \u5728\u5927\u578b\u9879\u76ee\u4e2d\uff0c\u7a0b\u5e8f\u903b\u8f91\u53ef\u80fd\u975e\u5e38\u590d\u6742\uff0c\u5982\u679c\u5c06\u6240\u6709 UI \u4e2d\u63a7\u4ef6\u7684\u4e8b\u4ef6\u5904\u7406\u96c6\u4e2d\u5728\u4e00\u4e2a\u6d88\u606f /\u4e8b\u4ef6\u6620\u5c04\u8868\u91cc\uff0c\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u4f1a\u53d8\u5f97\u975e\u5e38\u5dee\u3002\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5e38\u89c1\u7684\u65b9\u6cd5\u5c31\u662f\u5c06\u4e8b\u4ef6\u8fdb\u884c \u5206\u7c7b\uff08\u5982\u6839\u636e\u6765\u6e90\u5206\u7c7b\uff09\uff0c\u4e0d\u540c\u7c7b\u522b\u7684\u4e8b\u4ef6\u91c7\u7528\u4e00\u4e2a\u72ec\u7acb\u7684\u4e8b\u4ef6\u5904\u7406\u5bf9\u8c61\u6765\u5904\u7406\uff0c\u8fd9\u5c31\u662f \u4e8b\u4ef6\u5206\u53d1\u7684\u6838\u5fc3\u3002 \u76ee\u524d\u6d41\u884c\u7684 UI \u901a\u5e38\u91c7\u7528 Tab \u63a7\u4ef6\u6765\u7ec4\u7ec7 UI\uff0c\u4e0d\u540c\u7684\u529f\u80fd\u653e\u5230\u4e0d\u540c\u7684 Tab \u9875\u4e2d\uff0c\u4e0d\u540c\u7684 Tab \u9875\u53ef\u80fd\u4e92\u4e0d\u76f8\u5e72\u7684\u529f\u80fd\u6a21\u5757\uff0c\u5bf9\u4e8e\u7c7b\u4f3c\u8fd9\u6837\u7684\u60c5\u5f62\u5f88\u81ea\u7136\u7684\u4f1a\u60f3\u5230\u91c7\u7528\u4e8b\u4ef6\u5206\u53d1\u673a\u5236 \u6765\u5b9e\u73b0\u6a21\u5757\u4e4b\u95f4\u903b\u8f91\u7684\u89e3\u8026\uff08\u5982\u4e0b\u56fe\u4e2d SoTool \u91c7\u7528\u7684 UI\uff09\u3002 \u5728\u4e0a\u9762\u7684 UI \u4e2d\uff0c\u867d\u7136\u6574\u4e2a UI \u88ab TAB \u5206\u6210\u4e86 6 \u4e2a\u9875\u9762\uff0c\u4f46\u662f 6 \u4e2a\u9875\u9762\u90fd\u5b58\u5728\u4e8e\u540c\u4e00\u4e2a\u5bbf \u4e3b\u7a97\u53e3\u4e2d\u3002 \u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5982\u679c UI \u76f8\u5bf9\u6bd4\u8f83\u7b80\u5355\uff0c\u6211\u4eec\u63a8\u8350\u76f4\u63a5\u5728\u5bbf\u4e3b\u7a97\u53e3\u7684\u4e8b\u4ef6\u5904\u7406\u6620\u5c04\u8868\u4e2d\u7edf\u4e00\u5904 \u7406\u63a7\u4ef6\u4e8b\u4ef6\u3002 \u4f46\u662f\u5f53\u51fa\u73b0\u5982\u4e0a\u56fe\u8fd9\u6837\u590d\u6742\u7684\u754c\u9762\u65f6\uff0c\u6700\u597d\u662f\u5c06\u4e0d\u540c\u529f\u80fd\u9875\u7684\u4e8b\u4ef6\u5904\u7406\u5728\u4e0d\u540c\u7684\u5bf9\u8c61\u4e2d\u5206 \u522b\u5904\u7406\u3002 \u5728 MFC \u4e2d\uff0c\u4e00\u4e2a\u7c7b\u8981\u5904\u7406\u6d88\u606f\uff0c\u8fd9\u4e2a\u7c7b\u901a\u5e38\u6d3e\u751f\u81ea CCmdTarget\uff08\u53ef\u80fd\u8bb0\u9519\u4e86\uff0c\u592a\u4e45\u4e0d \u7528 MFC \u4e86\uff09\uff0c\u4e3b\u7a97\u53e3\u6536\u5230\u7684\u6d88\u606f\u4f1a\u81ea\u52a8\u8def\u7531\u5230\u8fd9\u4e2a\u6d88\u606f\u5904\u7406\u5bf9\u8c61\u4e2d\u3002 \u5728 WTL \u4e2d\uff0cWTL \u63d0\u4f9b\u4e86\u4e00\u7ec4\u6d88\u606f\u6620\u5c04\u5b8f\uff1aCHAIN_MSG_MAP\uff0c CHAIN_MSG_MAP_MEMBER \u7b49\u4ee5\u4fbf\u5c06\u6d88\u606f\u5206\u53d1\u5230\u540c\u6837\u5b9e\u73b0\u4e86\u6d88\u606f\u6620\u5c04\u8868\u7684\u4efb\u610f C++\u5bf9 \u8c61\u3002 SOUI \u7684\u4e8b\u4ef6\u5206\u53d1\u91c7\u7528\u4e86 WTL \u6d88\u606f\u5206\u53d1\u7c7b\u4f3c\u7684\u673a\u5236\uff0c\u540c\u6837\u91c7\u7528\u4e8b\u4ef6\u6620\u5c04\u5b8f\u7684\u65b9\u5f0f\u6765\u6784\u9020\u4e8b \u4ef6\u6620\u5c04\u8868\uff0c\u4e0b\u9762\u662f SOUI \u4e2d\u51e0\u4e2a\u4e3b\u8981\u7684\u548c\u4e8b\u4ef6\u5206\u53d1\u76f8\u5173\u7684\u5b8f\uff1a #define EVENT_MAP_BEGIN() \\ protected: \\ virtual BOOL _HandleEvent(SOUI::EventArgs *pEvt)\\ { \\ UINT uCode = pEvt->GetID(); \\ #define EVENT_MAP_DECLEAR() \\ protected: \\ virtual BOOL _HandleEvent(SOUI::EventArgs *pEvt);\\ #define EVENT_MAP_BEGIN2(classname) \\ BOOL classname::_HandleEvent(SOUI::EventArgs *pEvt)\\ { \\ UINT uCode = pEvt->GetID(); \\ #define EVENT_MAP_END() \\ return __super::_HandleEvent(pEvt); \\ } \\ #define EVENT_MAP_BREAK() \\ return FALSE; \\ } \\ #define CHAIN_EVENT_MAP(ChainClass) \\ if(ChainClass::_HandleEvent(pEvt)) \\ return TRUE; \\ #define CHAIN_EVENT_MAP_MEMBER(theChainMember) \\ { \\ if(theChainMember._HandleEvent(pEvt)) \\ return TRUE; \\ } #define EVENT_CHECK_SENDER_ROOT(pRoot) \\ { \\ SWindow *pWnd = sobj_cast<SWindow>(pEvt->sender);\\ if(!pWnd->IsDescendant(pRoot)) \\ return FALSE; \\ } // void OnEvent(EventArgs *pEvt) #define EVENT_HANDLER(cd, func) \\ if(cd == uCode) \\ { \\ func(pEvt); return TRUE; \\ } ``` \u4e0b\u9762\u662f SoTool \u4e2d\u7684 MainDlg \u4e2d\u7684\u4e8b\u4ef6\u5904\u7406\uff1a ``` cpp //soui \u6d88\u606f EVENT_MAP_BEGIN () EVENT_NAME_COMMAND ( L \"btn_close\" , OnClose ) EVENT_NAME_COMMAND ( L \"btn_min\" , OnMinimize ) EVENT_NAME_COMMAND ( L \"btn_max\" , OnMaximize ) EVENT_NAME_COMMAND ( L \"btn_restore\" , OnRestore ) CHAIN_EVENT_MAP_MEMBER ( m_imgMergerHandler ) CHAIN_EVENT_MAP_MEMBER ( m_codeLineCounter ) CHAIN_EVENT_MAP_MEMBER ( m_2UnicodeHandler ) CHAIN_EVENT_MAP_MEMBER ( m_folderScanHandler ) CHAIN_EVENT_MAP_MEMBER ( m_calcMd5Handler ) EVENT_MAP_END () ``` \u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c EVENT_MAP_BEGIN () \u548c EVENT_MAP_END () \u8fd9\u4e24\u4e2a\u5b8f\u6784\u9020\u51fa\u4e00\u4e2a\u7a7a\u7684\u4e8b\u4ef6 \u5904\u7406\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u81ea\u52a8\u5c06\u672a\u5904\u7406\u7684\u4e8b\u4ef6\u4ea4\u7ed9\u57fa\u7c7b\u7684\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u5904\u7406\u3002 \u5982\u679c\u57fa\u7c7b\u4e2d\u6ca1\u6709\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u663e\u7136\u8fd9\u4e2a\u4e8b\u4ef6\u6620\u5c04\u8868\u7f16\u8bd1\u4e0d\u80fd\u901a\u8fc7\uff0c\u6b64\u65f6 SOUI \u63d0\u4f9b\u4e86\u53e6 \u4e00\u4e2a EVENT_MAP_BREAK () \u6765\u4ee3\u66ff\u3002 \u4e0a\u9762\u7684\u4e8b\u4ef6\u5206\u53d1\u8868\u4e2d\uff0c\u6211\u4f7f\u7528 CHAIN_EVENT_MAP_MEMBER \u5b8f\u5c06\u6765\u81ea\u4e0d\u540c\u9875\u9762\u7684\u63a7\u4ef6 \u4e8b\u4ef6\u4f20\u9012\u5230\u4e0d\u540c\u7684\u4e8b\u4ef6\u5904\u7406\u5bf9\u8c61\u4e2d\u3002 \u4e0b\u9762\u4ee3\u7801\u662f m_imgMergerHandler \u5bf9\u8c61\u5934\u6587\u4ef6\u3002 ``` cpp class CImageMergerHandler : public IFileDropHandler { friend class CMainDlg ; public : CImageMergerHandler ( void ); ~ CImageMergerHandler ( void ); void OnInit ( SWindow * pRoot ); void AddFile ( LPCWSTR pszFileName ); protected : virtual void OnFileDropdown ( HDROP hDrop ); void OnSave (); void OnClear (); void OnModeHorz (); void OnModeVert (); EVENT_MAP_BEGIN () EVENT_CHECK_SENDER_ROOT ( m_pPageRoot ) EVENT_NAME_COMMAND ( L \"btn_save\" , OnSave ) EVENT_NAME_COMMAND ( L \"btn_clear\" , OnClear ) EVENT_NAME_COMMAND ( L \"radio_horz\" , OnModeHorz ) EVENT_NAME_COMMAND ( L \"radio_vert\" , OnModeVert ) EVENT_MAP_BREAK () SWindow * m_pPageRoot ; SImgCanvas * m_pImgCanvas ; }; \u53ef\u4ee5\u770b\u5230\u8fd9\u91cc\u7684\u4e8b\u4ef6\u6620\u5c04\u8868\u4f7f\u7528\u4e86 EVENT_MAP_BREAK \u6765\u7ed3\u675f\u3002 \u5728 SOUI \u4e2d\u63a8\u8350\u4f7f\u7528\u63a7\u4ef6\u7684 name \u5c5e\u6027\u6765\u6807\u8bc6\u4e00\u4e2a\u63a7\u4ef6\uff08name \u5c5e\u6027\u662f\u4e00\u4e2a wchar \u7684\u5b57 \u7b26\u4e32\uff0c\u4f7f\u7528 name \u867d\u7136\u5728\u4e8b\u4ef6\u5206\u53d1\u65f6\u91c7\u7528\u5b57\u7b26\u4e32\u6bd4\u8f83\uff0c\u8f83\u57fa\u4e8e\u6574\u6570 id \u5c5e\u6027\u7684\u6bd4\u8f83\u6548\u7387\u4f4e \u4e00\u70b9\uff0c\u597d\u5904\u5728\u4e8e\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u597d\uff09\uff0c\u4e0d\u540c\u7684\u9875\u9762\u4e2d\u7684\u63a7\u4ef6\u5982\u679c\u51fa\u73b0\u76f8\u540c\u7684 name \u8be5\u5982\u4f55\u8bc6 \u522b\u5462\uff1f \u5728 SOUI \u4e2d\u4f7f\u7528\u4e86\u4e00\u70b9\u5c0f\u6280\u5de7\uff1a\u5728\u4e8b\u4ef6\u5904\u7406\u5bf9\u8c61\u4e2d\u5b9e\u73b0\u4e00\u4e2a oninit \u51fd\u6570\uff0c\u8be5\u51fd\u6570\u5728 maindlg \u4e2d\u5904\u7406 WM_INITDIALOG \u65f6\u88ab\u8c03\u7528\uff0c\u5728 oninit \u4e2d\u4fdd\u5b58\u4e86\u4e00\u4e2a\u9875\u9762\u6839\u8282\u70b9\u7684\u6307 \u9488\uff1aSWindow m_pPageRoot; \u5728\u4e8b\u4ef6\u6620\u5c04\u8868\u7684\u5f00\u59cb\uff0c\u6211\u4eec\u91c7\u7528 EVENT_CHECK_SENDER_ROOT(m_pPageRoot)\u8fd9\u4e2a\u5b8f \u6765\u8bc6\u522b\u90a3\u4e9b\u6765\u81ea\u672c\u9875\u9762\u7684\u4e8b\u4ef6\u3002\u5982\u679c\u4e8b\u4ef6\u662f\u6765\u81ea\u5176\u5b83\u9875\u9762\u5219\u4e0d\u5904\u7406\u3002","title":"4.21 \u5728 SOUI \u4e2d\u505a\u4e8b\u4ef6\u5206\u53d1\u5904\u7406"},{"location":"Development/21/#421-soui","text":"\u4e0d\u540c\u7684 SOUI \u63a7\u4ef6\u53ef\u4ee5\u4ea7\u751f\u4e0d\u540c\u7684\u4e8b\u4ef6\u3002SOUI \u7cfb\u7edf\u4e2d\u63d0\u4f9b\u4e86\u4e24\u79cd\u4e8b\u4ef6\u5904\u7406\u65b9\u5f0f\uff1a\u4e8b\u4ef6\u8ba2 \u9605 + \u4e8b\u4ef6\u5904\u7406\u6620\u5c04\u8868(\u53c2\u89c1\u7b2c\u516b\u7bc7\uff1aSOUI \u4e2d\u63a7\u4ef6\u4e8b\u4ef6\u7684\u54cd\u5e94) \u4e8b\u4ef6\u8ba2\u9605\u7531\u4e8e\u76f4\u63a5\u5c06\u4e8b\u4ef6\u53ca\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u8fde\u63a5\uff0c\u4e0d\u5b58\u5728\u4e8b\u4ef6\u5206\u53d1\u7684\u95ee\u9898\uff0c\u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecd\u4f7f \u7528\u4e8b\u4ef6\u6620\u5c04\u8868\u65f6\u7684\u4e8b\u4ef6\u5206\u53d1\u3002 \u5728\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\u524d\uff0c\u9996\u5148\u4e86\u89e3\u4e00\u4e0b\u4ec0\u4e48\u662f\u4e8b\u4ef6\u5206\u53d1\u3002 \u5728\u5927\u578b\u9879\u76ee\u4e2d\uff0c\u7a0b\u5e8f\u903b\u8f91\u53ef\u80fd\u975e\u5e38\u590d\u6742\uff0c\u5982\u679c\u5c06\u6240\u6709 UI \u4e2d\u63a7\u4ef6\u7684\u4e8b\u4ef6\u5904\u7406\u96c6\u4e2d\u5728\u4e00\u4e2a\u6d88\u606f /\u4e8b\u4ef6\u6620\u5c04\u8868\u91cc\uff0c\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u4f1a\u53d8\u5f97\u975e\u5e38\u5dee\u3002\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5e38\u89c1\u7684\u65b9\u6cd5\u5c31\u662f\u5c06\u4e8b\u4ef6\u8fdb\u884c \u5206\u7c7b\uff08\u5982\u6839\u636e\u6765\u6e90\u5206\u7c7b\uff09\uff0c\u4e0d\u540c\u7c7b\u522b\u7684\u4e8b\u4ef6\u91c7\u7528\u4e00\u4e2a\u72ec\u7acb\u7684\u4e8b\u4ef6\u5904\u7406\u5bf9\u8c61\u6765\u5904\u7406\uff0c\u8fd9\u5c31\u662f \u4e8b\u4ef6\u5206\u53d1\u7684\u6838\u5fc3\u3002 \u76ee\u524d\u6d41\u884c\u7684 UI \u901a\u5e38\u91c7\u7528 Tab \u63a7\u4ef6\u6765\u7ec4\u7ec7 UI\uff0c\u4e0d\u540c\u7684\u529f\u80fd\u653e\u5230\u4e0d\u540c\u7684 Tab \u9875\u4e2d\uff0c\u4e0d\u540c\u7684 Tab \u9875\u53ef\u80fd\u4e92\u4e0d\u76f8\u5e72\u7684\u529f\u80fd\u6a21\u5757\uff0c\u5bf9\u4e8e\u7c7b\u4f3c\u8fd9\u6837\u7684\u60c5\u5f62\u5f88\u81ea\u7136\u7684\u4f1a\u60f3\u5230\u91c7\u7528\u4e8b\u4ef6\u5206\u53d1\u673a\u5236 \u6765\u5b9e\u73b0\u6a21\u5757\u4e4b\u95f4\u903b\u8f91\u7684\u89e3\u8026\uff08\u5982\u4e0b\u56fe\u4e2d SoTool \u91c7\u7528\u7684 UI\uff09\u3002 \u5728\u4e0a\u9762\u7684 UI \u4e2d\uff0c\u867d\u7136\u6574\u4e2a UI \u88ab TAB \u5206\u6210\u4e86 6 \u4e2a\u9875\u9762\uff0c\u4f46\u662f 6 \u4e2a\u9875\u9762\u90fd\u5b58\u5728\u4e8e\u540c\u4e00\u4e2a\u5bbf \u4e3b\u7a97\u53e3\u4e2d\u3002 \u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5982\u679c UI \u76f8\u5bf9\u6bd4\u8f83\u7b80\u5355\uff0c\u6211\u4eec\u63a8\u8350\u76f4\u63a5\u5728\u5bbf\u4e3b\u7a97\u53e3\u7684\u4e8b\u4ef6\u5904\u7406\u6620\u5c04\u8868\u4e2d\u7edf\u4e00\u5904 \u7406\u63a7\u4ef6\u4e8b\u4ef6\u3002 \u4f46\u662f\u5f53\u51fa\u73b0\u5982\u4e0a\u56fe\u8fd9\u6837\u590d\u6742\u7684\u754c\u9762\u65f6\uff0c\u6700\u597d\u662f\u5c06\u4e0d\u540c\u529f\u80fd\u9875\u7684\u4e8b\u4ef6\u5904\u7406\u5728\u4e0d\u540c\u7684\u5bf9\u8c61\u4e2d\u5206 \u522b\u5904\u7406\u3002 \u5728 MFC \u4e2d\uff0c\u4e00\u4e2a\u7c7b\u8981\u5904\u7406\u6d88\u606f\uff0c\u8fd9\u4e2a\u7c7b\u901a\u5e38\u6d3e\u751f\u81ea CCmdTarget\uff08\u53ef\u80fd\u8bb0\u9519\u4e86\uff0c\u592a\u4e45\u4e0d \u7528 MFC \u4e86\uff09\uff0c\u4e3b\u7a97\u53e3\u6536\u5230\u7684\u6d88\u606f\u4f1a\u81ea\u52a8\u8def\u7531\u5230\u8fd9\u4e2a\u6d88\u606f\u5904\u7406\u5bf9\u8c61\u4e2d\u3002 \u5728 WTL \u4e2d\uff0cWTL \u63d0\u4f9b\u4e86\u4e00\u7ec4\u6d88\u606f\u6620\u5c04\u5b8f\uff1aCHAIN_MSG_MAP\uff0c CHAIN_MSG_MAP_MEMBER \u7b49\u4ee5\u4fbf\u5c06\u6d88\u606f\u5206\u53d1\u5230\u540c\u6837\u5b9e\u73b0\u4e86\u6d88\u606f\u6620\u5c04\u8868\u7684\u4efb\u610f C++\u5bf9 \u8c61\u3002 SOUI \u7684\u4e8b\u4ef6\u5206\u53d1\u91c7\u7528\u4e86 WTL \u6d88\u606f\u5206\u53d1\u7c7b\u4f3c\u7684\u673a\u5236\uff0c\u540c\u6837\u91c7\u7528\u4e8b\u4ef6\u6620\u5c04\u5b8f\u7684\u65b9\u5f0f\u6765\u6784\u9020\u4e8b \u4ef6\u6620\u5c04\u8868\uff0c\u4e0b\u9762\u662f SOUI \u4e2d\u51e0\u4e2a\u4e3b\u8981\u7684\u548c\u4e8b\u4ef6\u5206\u53d1\u76f8\u5173\u7684\u5b8f\uff1a #define EVENT_MAP_BEGIN() \\ protected: \\ virtual BOOL _HandleEvent(SOUI::EventArgs *pEvt)\\ { \\ UINT uCode = pEvt->GetID(); \\ #define EVENT_MAP_DECLEAR() \\ protected: \\ virtual BOOL _HandleEvent(SOUI::EventArgs *pEvt);\\ #define EVENT_MAP_BEGIN2(classname) \\ BOOL classname::_HandleEvent(SOUI::EventArgs *pEvt)\\ { \\ UINT uCode = pEvt->GetID(); \\ #define EVENT_MAP_END() \\ return __super::_HandleEvent(pEvt); \\ } \\ #define EVENT_MAP_BREAK() \\ return FALSE; \\ } \\ #define CHAIN_EVENT_MAP(ChainClass) \\ if(ChainClass::_HandleEvent(pEvt)) \\ return TRUE; \\ #define CHAIN_EVENT_MAP_MEMBER(theChainMember) \\ { \\ if(theChainMember._HandleEvent(pEvt)) \\ return TRUE; \\ } #define EVENT_CHECK_SENDER_ROOT(pRoot) \\ { \\ SWindow *pWnd = sobj_cast<SWindow>(pEvt->sender);\\ if(!pWnd->IsDescendant(pRoot)) \\ return FALSE; \\ } // void OnEvent(EventArgs *pEvt) #define EVENT_HANDLER(cd, func) \\ if(cd == uCode) \\ { \\ func(pEvt); return TRUE; \\ } ``` \u4e0b\u9762\u662f SoTool \u4e2d\u7684 MainDlg \u4e2d\u7684\u4e8b\u4ef6\u5904\u7406\uff1a ``` cpp //soui \u6d88\u606f EVENT_MAP_BEGIN () EVENT_NAME_COMMAND ( L \"btn_close\" , OnClose ) EVENT_NAME_COMMAND ( L \"btn_min\" , OnMinimize ) EVENT_NAME_COMMAND ( L \"btn_max\" , OnMaximize ) EVENT_NAME_COMMAND ( L \"btn_restore\" , OnRestore ) CHAIN_EVENT_MAP_MEMBER ( m_imgMergerHandler ) CHAIN_EVENT_MAP_MEMBER ( m_codeLineCounter ) CHAIN_EVENT_MAP_MEMBER ( m_2UnicodeHandler ) CHAIN_EVENT_MAP_MEMBER ( m_folderScanHandler ) CHAIN_EVENT_MAP_MEMBER ( m_calcMd5Handler ) EVENT_MAP_END () ``` \u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c EVENT_MAP_BEGIN () \u548c EVENT_MAP_END () \u8fd9\u4e24\u4e2a\u5b8f\u6784\u9020\u51fa\u4e00\u4e2a\u7a7a\u7684\u4e8b\u4ef6 \u5904\u7406\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u81ea\u52a8\u5c06\u672a\u5904\u7406\u7684\u4e8b\u4ef6\u4ea4\u7ed9\u57fa\u7c7b\u7684\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u5904\u7406\u3002 \u5982\u679c\u57fa\u7c7b\u4e2d\u6ca1\u6709\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u663e\u7136\u8fd9\u4e2a\u4e8b\u4ef6\u6620\u5c04\u8868\u7f16\u8bd1\u4e0d\u80fd\u901a\u8fc7\uff0c\u6b64\u65f6 SOUI \u63d0\u4f9b\u4e86\u53e6 \u4e00\u4e2a EVENT_MAP_BREAK () \u6765\u4ee3\u66ff\u3002 \u4e0a\u9762\u7684\u4e8b\u4ef6\u5206\u53d1\u8868\u4e2d\uff0c\u6211\u4f7f\u7528 CHAIN_EVENT_MAP_MEMBER \u5b8f\u5c06\u6765\u81ea\u4e0d\u540c\u9875\u9762\u7684\u63a7\u4ef6 \u4e8b\u4ef6\u4f20\u9012\u5230\u4e0d\u540c\u7684\u4e8b\u4ef6\u5904\u7406\u5bf9\u8c61\u4e2d\u3002 \u4e0b\u9762\u4ee3\u7801\u662f m_imgMergerHandler \u5bf9\u8c61\u5934\u6587\u4ef6\u3002 ``` cpp class CImageMergerHandler : public IFileDropHandler { friend class CMainDlg ; public : CImageMergerHandler ( void ); ~ CImageMergerHandler ( void ); void OnInit ( SWindow * pRoot ); void AddFile ( LPCWSTR pszFileName ); protected : virtual void OnFileDropdown ( HDROP hDrop ); void OnSave (); void OnClear (); void OnModeHorz (); void OnModeVert (); EVENT_MAP_BEGIN () EVENT_CHECK_SENDER_ROOT ( m_pPageRoot ) EVENT_NAME_COMMAND ( L \"btn_save\" , OnSave ) EVENT_NAME_COMMAND ( L \"btn_clear\" , OnClear ) EVENT_NAME_COMMAND ( L \"radio_horz\" , OnModeHorz ) EVENT_NAME_COMMAND ( L \"radio_vert\" , OnModeVert ) EVENT_MAP_BREAK () SWindow * m_pPageRoot ; SImgCanvas * m_pImgCanvas ; }; \u53ef\u4ee5\u770b\u5230\u8fd9\u91cc\u7684\u4e8b\u4ef6\u6620\u5c04\u8868\u4f7f\u7528\u4e86 EVENT_MAP_BREAK \u6765\u7ed3\u675f\u3002 \u5728 SOUI \u4e2d\u63a8\u8350\u4f7f\u7528\u63a7\u4ef6\u7684 name \u5c5e\u6027\u6765\u6807\u8bc6\u4e00\u4e2a\u63a7\u4ef6\uff08name \u5c5e\u6027\u662f\u4e00\u4e2a wchar \u7684\u5b57 \u7b26\u4e32\uff0c\u4f7f\u7528 name \u867d\u7136\u5728\u4e8b\u4ef6\u5206\u53d1\u65f6\u91c7\u7528\u5b57\u7b26\u4e32\u6bd4\u8f83\uff0c\u8f83\u57fa\u4e8e\u6574\u6570 id \u5c5e\u6027\u7684\u6bd4\u8f83\u6548\u7387\u4f4e \u4e00\u70b9\uff0c\u597d\u5904\u5728\u4e8e\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u597d\uff09\uff0c\u4e0d\u540c\u7684\u9875\u9762\u4e2d\u7684\u63a7\u4ef6\u5982\u679c\u51fa\u73b0\u76f8\u540c\u7684 name \u8be5\u5982\u4f55\u8bc6 \u522b\u5462\uff1f \u5728 SOUI \u4e2d\u4f7f\u7528\u4e86\u4e00\u70b9\u5c0f\u6280\u5de7\uff1a\u5728\u4e8b\u4ef6\u5904\u7406\u5bf9\u8c61\u4e2d\u5b9e\u73b0\u4e00\u4e2a oninit \u51fd\u6570\uff0c\u8be5\u51fd\u6570\u5728 maindlg \u4e2d\u5904\u7406 WM_INITDIALOG \u65f6\u88ab\u8c03\u7528\uff0c\u5728 oninit \u4e2d\u4fdd\u5b58\u4e86\u4e00\u4e2a\u9875\u9762\u6839\u8282\u70b9\u7684\u6307 \u9488\uff1aSWindow m_pPageRoot; \u5728\u4e8b\u4ef6\u6620\u5c04\u8868\u7684\u5f00\u59cb\uff0c\u6211\u4eec\u91c7\u7528 EVENT_CHECK_SENDER_ROOT(m_pPageRoot)\u8fd9\u4e2a\u5b8f \u6765\u8bc6\u522b\u90a3\u4e9b\u6765\u81ea\u672c\u9875\u9762\u7684\u4e8b\u4ef6\u3002\u5982\u679c\u4e8b\u4ef6\u662f\u6765\u81ea\u5176\u5b83\u9875\u9762\u5219\u4e0d\u5904\u7406\u3002","title":"4.21 \u5728 SOUI \u4e2d\u505a\u4e8b\u4ef6\u5206\u53d1\u5904\u7406"},{"location":"Development/22/","text":"4.22 \u5728 SOUI \u4e2d\u4f7f\u7528\u5f02\u6b65\u901a\u77e5 \u00b6 \u5f02\u6b65\u901a\u77e5\u662f\u5ba2\u6237\u7aef\u5f00\u53d1\u4e2d\u5e38\u89c1\u7684\u9700\u6c42\uff0c\u6bd4\u5982\u5728\u4e00\u4e2a\u7f51\u7edc\u5904\u7406\u7ebf\u7a0b\u4e2d\u8981\u901a\u77e5 UI \u7ebf\u7a0b\u66f4\u65b0\u7b49 \u7b49\u3002 \u901a\u5e38\u5728 Windows \u7f16\u7a0b\u4e2d\uff0c\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u4e00\u822c\u4f1a\u5411 UI \u7ebf\u7a0b\u7684\u7a97\u53e3\u53e5\u67c4 Post/Send \u4e00\u4e2a \u7a97\u53e3\u6d88\u606f\u4ece\u800c\u8fbe\u5230\u5c06\u975e UI \u7ebf\u7a0b\u7684\u4e8b\u4ef6\u5207\u6362\u5230 UI \u7ebf\u7a0b\u5904\u7406\u7684\u76ee\u7684\u3002 \u5728 SOUI \u5f15\u5165\u901a\u77e5\u4e2d\u5fc3\u4ee5\u524d\u8981\u5728 SOUI \u4e2d\u5904\u7406\u975e UI \u7ebf\u7a0b\u4e8b\u4ef6\u6211\u4e5f\u63a8\u8350\u7528\u4e0a\u9762\u7684\u65b9\u6cd5\u3002 \u4f7f\u7528\u7a97\u53e3\u6d88\u606f\u81f3\u5c11\u6709\u4ee5\u4e0b\u4e24\u4e2a\u4e0d\u8db3\uff1a 1\u3001\u9700\u8981\u5728\u7ebf\u7a0b\u4e2d\u6301\u6709\u4e00\u4e2a\u7a97\u53e3\u53e5\u67c4\u3002 2\u3001\u53d1\u51fa\u7684\u6d88\u606f\u53ea\u80fd\u5728\u8be5\u7a97\u53e3\u53e5\u67c4\u7684\u6d88\u606f\u5904\u7406\u51fd\u6570\u91cc\u5904\u7406\u3002 SNotifyCenter \u6700\u65b0\u7684 SOUI \u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u7684\u5355\u4f8b\u5bf9\u8c61\uff1aSNotifyCenter\uff0c\u4e13\u95e8\u7528\u6765\u5904\u7406\u8fd9\u7c7b\u95ee\u9898\u3002 \u65b0\u7684 SNotifyCenter \u89e3\u51b3\u4e86\u7a97\u53e3\u6d88\u606f\u5b58\u5728\u7684\u4e0a\u9762\u7684\u4e24\u4e2a\u95ee\u9898\uff1a 1\u3001\u901a\u8fc7\u4f7f\u7528\u5168\u5c40\u5355\u4f8b\uff0cSNotifyCenter \u53ef\u4ee5\u5728\u4ee3\u7801\u4efb\u610f\u4f4d\u7f6e\u83b7\u53d6\u5b83\u7684\u6307\u9488\uff08\u524d\u63d0\u5f53\u7136\u662f\u8981 \u5728\u5b83\u7684\u751f\u547d\u5468\u671f\u5185\uff09\uff1b 2\u3001\u4f7f\u7528 SNotifyCenter \u4ea7\u751f\u7684\u901a\u77e5\u91c7\u7528 SOUI \u7684\u4e8b\u4ef6\u7cfb\u7edf\u6765\u6d3e\u53d1\uff0c\u901a\u8fc7\u7ed3\u5408 SOUI \u7684\u4e8b \u4ef6\u8ba2\u9605\u7cfb\u7edf\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u4efb\u610f\u4f4d\u7f6e\u5904\u7406\u53d1\u51fa\u7684\u4e8b\u4ef6\u3002 \u5728\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 SNotifyCenter \u524d\uff0c\u5148\u770b\u4e00\u4e0b NotifyCenter.h \u7684\u4ee3\u7801\uff1a #pragma once #include <core/SSingleton.h> namespace SOUI { template < class T > class TAutoEventMapReg { typedef TAutoEventMapReg < T > _thisClass ; public : TAutoEventMapReg () { SNotifyCenter :: getSingleton (). RegisterEventMap ( Subscriber ( & _thisClass :: OnEve nt , this )); } ~ TAutoEventMapReg () { SNotifyCenter :: getSingleton (). UnregisterEventMap ( Subscriber ( & _thisClass :: OnE vent , this )); } protected : bool OnEvent ( EventArgs * e ){ T * pThis = static_cast < T *> ( this ); return !! pThis -> _HandleEvent ( e ); } }; class SOUI_EXP SNotifyCenter : public SSingleton < SNotifyCenter > , public SEventSet { public : SNotifyCenter ( void ); ~ SNotifyCenter ( void ); /** * FireEventSync * @brief \u89e6\u53d1\u4e00\u4e2a\u540c\u6b65\u901a\u77e5\u4e8b\u4ef6 * @param EventArgs *e -- \u4e8b\u4ef6\u5bf9\u8c61 * @return * * Describe \u53ea\u80fd\u5728 UI \u7ebf\u7a0b\u4e2d\u8c03\u7528 */ void FireEventSync ( EventArgs * e ); /** * FireEventAsync * @brief \u89e6\u53d1\u4e00\u4e2a\u5f02\u6b65\u901a\u77e5\u4e8b\u4ef6 * @param EventArgs *e -- \u4e8b\u4ef6\u5bf9\u8c61 * @return * * Describe \u53ef\u4ee5\u5728\u975e UI \u7ebf\u7a0b\u4e2d\u8c03\u7528\uff0cEventArgs *e \u5fc5\u987b\u662f\u4ece\u5806\u4e0a\u5206\u914d\u7684\u5185\u5b58\uff0c\u8c03\u7528\u540e \u4f7f\u7528 Release \u91ca\u653e\u5f15\u7528\u8ba1\u6570 */ void FireEventAsync ( EventArgs * e ); /** * RegisterEventMap * @brief \u6ce8\u518c\u4e00\u4e2a\u5904\u7406\u901a\u77e5\u7684\u5bf9\u8c61 * @param const ISlotFunctor &slot -- \u4e8b\u4ef6\u5904\u7406\u5bf9\u8c61 * @return * * Describe */ bool RegisterEventMap ( const ISlotFunctor & slot ); /** * RegisterEventMap * @brief \u6ce8\u9500\u4e00\u4e2a\u5904\u7406\u901a\u77e5\u7684\u5bf9\u8c61 * @param const ISlotFunctor &slot -- \u4e8b\u4ef6\u5904\u7406\u5bf9\u8c61 * @return * * Describe */ bool UnregisterEventMap ( const ISlotFunctor & slot ); protected : void OnFireEvent ( EventArgs * e ); void ExecutePendingEvents (); static VOID CALLBACK OnTimer ( HWND hwnd , UINT uMsg , UINT_PTR idEvent , DWORD dwTime ); SCriticalSection m_cs ; //\u7ebf\u7a0b\u540c\u6b65\u5bf9\u8c61 SList < EventArgs *> * m_evtPending ; //\u6302\u8d77\u7684\u7b49\u5f85\u6267\u884c\u7684\u4e8b\u4ef6 DWORD m_dwMainTrdID ; //\u4e3b\u7ebf\u7a0b ID UINT_PTR m_timerID ; //\u5b9a\u65f6\u5668 ID\uff0c\u7528\u6765\u6267\u884c\u5f02\u6b65\u4e8b\u4ef6 SList < ISlotFunctor *> m_evtHandlerMap ; }; } \u5728\u8fd9\u4e2a\u6587\u4ef6\u4e2d\u63d0\u4f9b\u4e86\u4e24\u4e2a\u7c7b\uff0c\u4e00\u4e2a\u5c31\u662f SNotifyCenter\uff0c\u53e6\u4e00\u4e2a\u662f TAutoEventMapReg<T> \u3002 \u53ef\u4ee5\u770b\u5230 SNotifyCenter \u4e2d\u9664\u6784\u9020\u5916\u53ea\u6709 4 \u4e2a public \u65b9\u6cd5: FireEventSync, FireEventAsync \u7528\u6765\u89e6\u53d1\u4e8b\u4ef6\u3002 RegisterEventMap\uff0cUnregisterEventMap \u5219\u7528\u6765\u63d0\u4f9b\u4e8b\u4ef6\u5904\u7406\u8ba2\u9605\u3002 \u5982\u4f55\u4f7f\u7528 SNotifyCenter? 1\u3001\u5728 main \u4e2d\u5b9e\u4f8b\u5316 SNotifyCenter\u3002\uff08\u4e0d\u660e\u767d\u53ef\u4ee5\u53c2\u8003 demo) 2\u3001\u5b9a\u4e49\u9700\u8981\u901a\u8fc7\u901a\u77e5\u4e2d\u5fc3\u5206\u53d1\u7684\u4e8b\u4ef6\u7c7b\u578b\uff0c\u9996\u5148\u5b9a\u4e49\u4e8b\u4ef6\uff0c\u7136\u540e\u5411\u901a\u77e5\u4e2d\u5fc3\u6ce8\u518c\uff0c\u53c2\u89c1 \u4e0b\u9762\u4ee3\u7801\uff1a void CMainDlg::OnBtnStartNotifyThread () { if ( IsRunning ()) return ; SNotifyCenter :: getSingleton (). addEvent ( EVENTID ( EventThreadStart )); SNotifyCenter :: getSingleton (). addEvent ( EVENTID ( EventThreadStop )); SNotifyCenter :: getSingleton (). addEvent ( EVENTID ( EventThread )); EventThreadStart evt ( this ); SNotifyCenter :: getSingleton (). FireEventSync ( & evt ); BeginThread (); } void CMainDlg::OnBtnStopNotifyThread () { if ( ! IsRunning ()) return ; EndThread (); EventThreadStop evt ( this ); SNotifyCenter :: getSingleton (). FireEventSync ( & evt ); SNotifyCenter :: getSingleton (). removeEvent ( EventThreadStart :: EventID ); SNotifyCenter :: getSingleton (). removeEvent ( EventThreadStop :: EventID ); SNotifyCenter :: getSingleton (). removeEvent ( EventThread :: EventID ); } 3\u3001\u4f7f\u9700\u8981\u5904\u7406\u901a\u77e5\u4e2d\u5fc3\u5206\u53d1\u7684\u4e8b\u4ef6\u7684\u5bf9\u8c61\u4ece TAutoEventMapReg \u7ee7\u627f\uff0c\u5b9e\u73b0\u4e8b\u4ef6\u7684\u81ea \u52a8\u8ba2\u9605\uff08\u65b9\u4fbf\u5728\u4e8b\u4ef6\u6620\u5c04\u8868\u4e2d\u7edf\u4e00\u5904\u7406\u4e8b\u4ef6)\uff0c\u8fd9\u4e00\u6b65\u662f\u53ef\u9009\u7684\uff0c\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 SOUI \u63d0\u4f9b\u7684\u4e8b\u4ef6\u8ba2\u9605\u673a\u5236\u5411\u901a\u77e5\u4e2d\u5fc3\u8ba2\u9605\u7279\u5b9a\u4e8b\u4ef6\u3002 4\u3001\u5728\u4e8b\u4ef6\u6620\u5c04\u8868\u91cc\u5904\u7406\u4e8b\u4ef6\uff08\u6ca1\u6709\u7b2c 3 \u6b65\u65f6\uff0c\u5219\u540c\u6837\u6ca1\u6709\u8fd9\u4e00\u6b65\uff09\u3002 \u5177\u4f53\u7528\u6cd5\u53c2\u89c1 SOUI \u7684 demo\u3002","title":"4.22 \u5728 SOUI \u4e2d\u4f7f\u7528\u5f02\u6b65\u901a\u77e5"},{"location":"Development/22/#422-soui","text":"\u5f02\u6b65\u901a\u77e5\u662f\u5ba2\u6237\u7aef\u5f00\u53d1\u4e2d\u5e38\u89c1\u7684\u9700\u6c42\uff0c\u6bd4\u5982\u5728\u4e00\u4e2a\u7f51\u7edc\u5904\u7406\u7ebf\u7a0b\u4e2d\u8981\u901a\u77e5 UI \u7ebf\u7a0b\u66f4\u65b0\u7b49 \u7b49\u3002 \u901a\u5e38\u5728 Windows \u7f16\u7a0b\u4e2d\uff0c\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u4e00\u822c\u4f1a\u5411 UI \u7ebf\u7a0b\u7684\u7a97\u53e3\u53e5\u67c4 Post/Send \u4e00\u4e2a \u7a97\u53e3\u6d88\u606f\u4ece\u800c\u8fbe\u5230\u5c06\u975e UI \u7ebf\u7a0b\u7684\u4e8b\u4ef6\u5207\u6362\u5230 UI \u7ebf\u7a0b\u5904\u7406\u7684\u76ee\u7684\u3002 \u5728 SOUI \u5f15\u5165\u901a\u77e5\u4e2d\u5fc3\u4ee5\u524d\u8981\u5728 SOUI \u4e2d\u5904\u7406\u975e UI \u7ebf\u7a0b\u4e8b\u4ef6\u6211\u4e5f\u63a8\u8350\u7528\u4e0a\u9762\u7684\u65b9\u6cd5\u3002 \u4f7f\u7528\u7a97\u53e3\u6d88\u606f\u81f3\u5c11\u6709\u4ee5\u4e0b\u4e24\u4e2a\u4e0d\u8db3\uff1a 1\u3001\u9700\u8981\u5728\u7ebf\u7a0b\u4e2d\u6301\u6709\u4e00\u4e2a\u7a97\u53e3\u53e5\u67c4\u3002 2\u3001\u53d1\u51fa\u7684\u6d88\u606f\u53ea\u80fd\u5728\u8be5\u7a97\u53e3\u53e5\u67c4\u7684\u6d88\u606f\u5904\u7406\u51fd\u6570\u91cc\u5904\u7406\u3002 SNotifyCenter \u6700\u65b0\u7684 SOUI \u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u7684\u5355\u4f8b\u5bf9\u8c61\uff1aSNotifyCenter\uff0c\u4e13\u95e8\u7528\u6765\u5904\u7406\u8fd9\u7c7b\u95ee\u9898\u3002 \u65b0\u7684 SNotifyCenter \u89e3\u51b3\u4e86\u7a97\u53e3\u6d88\u606f\u5b58\u5728\u7684\u4e0a\u9762\u7684\u4e24\u4e2a\u95ee\u9898\uff1a 1\u3001\u901a\u8fc7\u4f7f\u7528\u5168\u5c40\u5355\u4f8b\uff0cSNotifyCenter \u53ef\u4ee5\u5728\u4ee3\u7801\u4efb\u610f\u4f4d\u7f6e\u83b7\u53d6\u5b83\u7684\u6307\u9488\uff08\u524d\u63d0\u5f53\u7136\u662f\u8981 \u5728\u5b83\u7684\u751f\u547d\u5468\u671f\u5185\uff09\uff1b 2\u3001\u4f7f\u7528 SNotifyCenter \u4ea7\u751f\u7684\u901a\u77e5\u91c7\u7528 SOUI \u7684\u4e8b\u4ef6\u7cfb\u7edf\u6765\u6d3e\u53d1\uff0c\u901a\u8fc7\u7ed3\u5408 SOUI \u7684\u4e8b \u4ef6\u8ba2\u9605\u7cfb\u7edf\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u4efb\u610f\u4f4d\u7f6e\u5904\u7406\u53d1\u51fa\u7684\u4e8b\u4ef6\u3002 \u5728\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 SNotifyCenter \u524d\uff0c\u5148\u770b\u4e00\u4e0b NotifyCenter.h \u7684\u4ee3\u7801\uff1a #pragma once #include <core/SSingleton.h> namespace SOUI { template < class T > class TAutoEventMapReg { typedef TAutoEventMapReg < T > _thisClass ; public : TAutoEventMapReg () { SNotifyCenter :: getSingleton (). RegisterEventMap ( Subscriber ( & _thisClass :: OnEve nt , this )); } ~ TAutoEventMapReg () { SNotifyCenter :: getSingleton (). UnregisterEventMap ( Subscriber ( & _thisClass :: OnE vent , this )); } protected : bool OnEvent ( EventArgs * e ){ T * pThis = static_cast < T *> ( this ); return !! pThis -> _HandleEvent ( e ); } }; class SOUI_EXP SNotifyCenter : public SSingleton < SNotifyCenter > , public SEventSet { public : SNotifyCenter ( void ); ~ SNotifyCenter ( void ); /** * FireEventSync * @brief \u89e6\u53d1\u4e00\u4e2a\u540c\u6b65\u901a\u77e5\u4e8b\u4ef6 * @param EventArgs *e -- \u4e8b\u4ef6\u5bf9\u8c61 * @return * * Describe \u53ea\u80fd\u5728 UI \u7ebf\u7a0b\u4e2d\u8c03\u7528 */ void FireEventSync ( EventArgs * e ); /** * FireEventAsync * @brief \u89e6\u53d1\u4e00\u4e2a\u5f02\u6b65\u901a\u77e5\u4e8b\u4ef6 * @param EventArgs *e -- \u4e8b\u4ef6\u5bf9\u8c61 * @return * * Describe \u53ef\u4ee5\u5728\u975e UI \u7ebf\u7a0b\u4e2d\u8c03\u7528\uff0cEventArgs *e \u5fc5\u987b\u662f\u4ece\u5806\u4e0a\u5206\u914d\u7684\u5185\u5b58\uff0c\u8c03\u7528\u540e \u4f7f\u7528 Release \u91ca\u653e\u5f15\u7528\u8ba1\u6570 */ void FireEventAsync ( EventArgs * e ); /** * RegisterEventMap * @brief \u6ce8\u518c\u4e00\u4e2a\u5904\u7406\u901a\u77e5\u7684\u5bf9\u8c61 * @param const ISlotFunctor &slot -- \u4e8b\u4ef6\u5904\u7406\u5bf9\u8c61 * @return * * Describe */ bool RegisterEventMap ( const ISlotFunctor & slot ); /** * RegisterEventMap * @brief \u6ce8\u9500\u4e00\u4e2a\u5904\u7406\u901a\u77e5\u7684\u5bf9\u8c61 * @param const ISlotFunctor &slot -- \u4e8b\u4ef6\u5904\u7406\u5bf9\u8c61 * @return * * Describe */ bool UnregisterEventMap ( const ISlotFunctor & slot ); protected : void OnFireEvent ( EventArgs * e ); void ExecutePendingEvents (); static VOID CALLBACK OnTimer ( HWND hwnd , UINT uMsg , UINT_PTR idEvent , DWORD dwTime ); SCriticalSection m_cs ; //\u7ebf\u7a0b\u540c\u6b65\u5bf9\u8c61 SList < EventArgs *> * m_evtPending ; //\u6302\u8d77\u7684\u7b49\u5f85\u6267\u884c\u7684\u4e8b\u4ef6 DWORD m_dwMainTrdID ; //\u4e3b\u7ebf\u7a0b ID UINT_PTR m_timerID ; //\u5b9a\u65f6\u5668 ID\uff0c\u7528\u6765\u6267\u884c\u5f02\u6b65\u4e8b\u4ef6 SList < ISlotFunctor *> m_evtHandlerMap ; }; } \u5728\u8fd9\u4e2a\u6587\u4ef6\u4e2d\u63d0\u4f9b\u4e86\u4e24\u4e2a\u7c7b\uff0c\u4e00\u4e2a\u5c31\u662f SNotifyCenter\uff0c\u53e6\u4e00\u4e2a\u662f TAutoEventMapReg<T> \u3002 \u53ef\u4ee5\u770b\u5230 SNotifyCenter \u4e2d\u9664\u6784\u9020\u5916\u53ea\u6709 4 \u4e2a public \u65b9\u6cd5: FireEventSync, FireEventAsync \u7528\u6765\u89e6\u53d1\u4e8b\u4ef6\u3002 RegisterEventMap\uff0cUnregisterEventMap \u5219\u7528\u6765\u63d0\u4f9b\u4e8b\u4ef6\u5904\u7406\u8ba2\u9605\u3002 \u5982\u4f55\u4f7f\u7528 SNotifyCenter? 1\u3001\u5728 main \u4e2d\u5b9e\u4f8b\u5316 SNotifyCenter\u3002\uff08\u4e0d\u660e\u767d\u53ef\u4ee5\u53c2\u8003 demo) 2\u3001\u5b9a\u4e49\u9700\u8981\u901a\u8fc7\u901a\u77e5\u4e2d\u5fc3\u5206\u53d1\u7684\u4e8b\u4ef6\u7c7b\u578b\uff0c\u9996\u5148\u5b9a\u4e49\u4e8b\u4ef6\uff0c\u7136\u540e\u5411\u901a\u77e5\u4e2d\u5fc3\u6ce8\u518c\uff0c\u53c2\u89c1 \u4e0b\u9762\u4ee3\u7801\uff1a void CMainDlg::OnBtnStartNotifyThread () { if ( IsRunning ()) return ; SNotifyCenter :: getSingleton (). addEvent ( EVENTID ( EventThreadStart )); SNotifyCenter :: getSingleton (). addEvent ( EVENTID ( EventThreadStop )); SNotifyCenter :: getSingleton (). addEvent ( EVENTID ( EventThread )); EventThreadStart evt ( this ); SNotifyCenter :: getSingleton (). FireEventSync ( & evt ); BeginThread (); } void CMainDlg::OnBtnStopNotifyThread () { if ( ! IsRunning ()) return ; EndThread (); EventThreadStop evt ( this ); SNotifyCenter :: getSingleton (). FireEventSync ( & evt ); SNotifyCenter :: getSingleton (). removeEvent ( EventThreadStart :: EventID ); SNotifyCenter :: getSingleton (). removeEvent ( EventThreadStop :: EventID ); SNotifyCenter :: getSingleton (). removeEvent ( EventThread :: EventID ); } 3\u3001\u4f7f\u9700\u8981\u5904\u7406\u901a\u77e5\u4e2d\u5fc3\u5206\u53d1\u7684\u4e8b\u4ef6\u7684\u5bf9\u8c61\u4ece TAutoEventMapReg \u7ee7\u627f\uff0c\u5b9e\u73b0\u4e8b\u4ef6\u7684\u81ea \u52a8\u8ba2\u9605\uff08\u65b9\u4fbf\u5728\u4e8b\u4ef6\u6620\u5c04\u8868\u4e2d\u7edf\u4e00\u5904\u7406\u4e8b\u4ef6)\uff0c\u8fd9\u4e00\u6b65\u662f\u53ef\u9009\u7684\uff0c\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 SOUI \u63d0\u4f9b\u7684\u4e8b\u4ef6\u8ba2\u9605\u673a\u5236\u5411\u901a\u77e5\u4e2d\u5fc3\u8ba2\u9605\u7279\u5b9a\u4e8b\u4ef6\u3002 4\u3001\u5728\u4e8b\u4ef6\u6620\u5c04\u8868\u91cc\u5904\u7406\u4e8b\u4ef6\uff08\u6ca1\u6709\u7b2c 3 \u6b65\u65f6\uff0c\u5219\u540c\u6837\u6ca1\u6709\u8fd9\u4e00\u6b65\uff09\u3002 \u5177\u4f53\u7528\u6cd5\u53c2\u89c1 SOUI \u7684 demo\u3002","title":"4.22 \u5728 SOUI \u4e2d\u4f7f\u7528\u5f02\u6b65\u901a\u77e5"},{"location":"Development/23/","text":"4.23 \u5728 SOUI2.0 \u4e2d\u50cf android \u4e00\u6837\u4f7f\u7528\u8d44\u6e90 \u00b6 SOUI2.0 \u4e4b\u524d\uff0c\u5728 SOUI \u4e2d\u4f7f\u7528\u8d44\u6e90\u901a\u5e38\u662f\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e2a\u8d44\u6e90\u7684 name\uff08\u4e00\u4e2a\u5b57\u7b26\u4e32\uff09\u6765 \u5f15\u7528\u3002\u4f7f\u7528\u5b57\u7b26\u4e32\u7684\u597d\u5904\u5728\u4e8e\u5b57\u7b26\u4e32\u80fd\u591f\u8868\u8fbe\u8fd9\u4e2a\u8d44\u6e90\u7684\u610f\u4e49\uff0c\u56e0\u6b64\u4f7f\u7528\u5b57\u7b26\u4e32\u4e5f\u662f\u73b0\u4ee3 UI \u5f15\u64ce\u5e38\u7528\u7684\u65b9\u5f0f\u3002 \u5c3d\u7ba1\u76f4\u63a5\u4f7f\u7528\u5b57\u7b26\u4e32\u6709\u610f\u4e49\u660e\u786e\u7684\u4f18\u70b9\uff0c\u5b83\u540c\u6837\u4e5f\u6709\u7f3a\u70b9\uff1a 1\u3001\u5b57\u7b26\u4e32\u5199\u9519\u4e86\uff0c\u7f16\u8bd1\u5668\u4e0d\u77e5\u9053\u3002\u8fd9\u53ef\u80fd\u5bfc\u81f4\u4e00\u4e9b\u5f88\u96be\u53d1\u73b0\u7684 BUG\u3002 2\u3001\u63a7\u4ef6\u67e5\u8be2\uff0c\u6bd4\u8f83\u65f6\u57fa\u4e8e\u5b57\u7b26\u4e32\uff0c\u76f8\u5bf9\u6765\u8bf4\u6027\u80fd\u4f1a\u5dee\u4e00\u70b9\uff08\u597d\u5728\u73b0\u5728 CPU \u591f\u5f3a\uff0c\u8fd9\u70b9\u6027 \u80fd\u635f\u5931\u901a\u5e38\u53ef\u4ee5\u5ffd\u7565\uff09\u3002 \u505a\u8fc7 Android \u5f00\u53d1\u7684\u670b\u53cb\u53ef\u80fd\u77e5\u9053\uff0c\u5728 Android \u4e2d\u8981\u5f15\u7528\u4e00\u4e2a\u8d44\u6e90\u5982\u56fe\u7247\u3001\u5b57\u7b26\u4e32\u3001\u989c \u8272\u7b49\u53ef\u4ee5\u4f7f\u7528 R.id.xxx, R.string.xxx,R.color.xxx \u8fd9\u6837\u7684\u5f62\u5f0f\u6765\u5f15\u7528\u3002 Android \u5185\u90e8\u5168\u90e8\u81ea\u52a8\u8f6c\u6362\u6210 ID\uff0c\u6574\u6570\u6bd4\u8f83\u663e\u7136\u6bd4\u5b57\u7b26\u4e32\u6bd4\u8f83\u5feb\uff0c\u8fd9\u91cc\u4e0d\u4f5c\u8ba8\u8bba\u3002 \u8fd9\u79cd\u65b9\u5f0f\u4e00\u4e2a\u597d\u5904\u5728\u4e8e Android \u7684\u81ea\u52a8\u8865\u5168\u529f\u80fd\u80fd\u591f\u5e2e\u52a9\u4f60\u5feb\u901f\u7684\u8f93\u5165\u4f60\u9700\u8981\u7684\u8d44\u6e90\uff0c\u9664 \u4e86\u52a0\u5feb\u4e86\u7f16\u7801\u901f\u5ea6\uff0c\u8fd8\u5927\u5927\u51cf\u5c11\u4e86\u8f93\u5165\u9519\u8bef\u3002 SOUI2.0 \u628a Android \u7684\u8fd9\u79cd\u8d44\u6e90\u5f15\u7528\u65b9\u5f0f\u5f15\u5165\u4e86\u8fdb\u6765\u3002 \u5173\u952e\u5728\u4e8e uiresbuilder\u3002\u539f\u6765 SOUI \u4e2d\u7684 uiresbuilder \u53ea\u63d0\u4f9b\u5c06\u8d44\u6e90\u8f6c\u6362\u6210.rc2 \u529f\u80fd\uff0c\u65b9 \u4fbf\u5c06\u8d44\u6e90\u7f16\u8bd1\u5230 EXE/DLL \u4e2d\u3002 2.0 \u7248\u672c\u65b0\u589e\u52a0 name \u63d0\u53d6\uff0cid \u751f\u6210\uff0c\u5b57\u7b26\u4e32\u8868 ID \u751f\u6210\uff0c\u989c\u8272\u8868 ID \u751f\u6210\u529f\u80fd\u3002\u5b83\u4eec\u4f1a\u8f93 \u51fa\u5230\u4e00\u4e2a C++\u5934\u6587\u4ef6\uff08\u7531\u547d\u4ee4\u884c\u53c2\u6570\u6307\u5b9a\uff09\u3002 \u8981\u4f7f\u7528\u8be5\u529f\u80fd\u9996\u5148\u8981\u4fdd\u8bc1\u6240\u6709\u7684\u5e03\u5c40 XML \u6240\u5728\u7684\u8d44\u6e90\u7c7b\u578b\u4e3a\"Layout\"\uff0c\u7136\u540e\u5728 uiresbuilder \u7684\u547d\u540d\u884c\u4e2d\u52a0\u5165\uff1a -h \u201c\u8f93\u51fa\u6587\u4ef6\u540d\u201d idtable\u3002-h \u540e\u9762\u7d27\u8ddf\u8f93\u51fa\u6587\u4ef6\u540d\uff0c idtable \u6307\u793a\u9700\u8981\u7ed9\u6ca1\u6709\u6307\u5b9a ID \u7684\u63a7\u4ef6\u81ea\u52a8\u751f\u6210 ID\uff0c\u8be5\u529f\u80fd\u9ed8\u8ba4\u5173\u95ed\u3002 \u751f\u6210\u6210\u529f\u540e\uff0c\u4f60\u7684\u201c\u8f93\u51fa\u6587\u4ef6\u201d\u7684\u5185\u5bb9\u53ef\u80fd\u662f\u4e0b\u9762\u7684\u6837\u5b50\uff1a //stamp:0ae7b68801b8deb8 /*<------------------------------------------------------------------------- ------------------------>*/ /*\u8be5\u6587\u4ef6\u7531 uiresbuilder \u751f\u6210\uff0c\u8bf7\u4e0d\u8981\u624b\u52a8\u4fee\u6539*/ /*<------------------------------------------------------------------------- ------------------------>*/ #pragma once #include <res.mgr/snamedvalue.h> namespace SOUI { const SNamedID :: NAMEDVALUE namedXmlID [] = { { L \"btnSelectGif\" , 65540 }, { L \"btn_display\" , 65541 }, { L \"btn_hidetst\" , 65542 }, { L \"btn_lrc\" , 65543 }, { L \"btn_menu\" , 65536 }, { L \"ctrl_flash\" , 65538 }, { L \"gif_test\" , 1000 }, { L \"giftest\" , 65539 }, { L \"tab_main\" , 65537 } }; class _R { public : class _name { public : _name (){ btnSelectGif = namedXmlID [ 0 ]. strName ; btn_display = namedXmlID [ 1 ]. strName ; btn_hidetst = namedXmlID [ 2 ]. strName ; btn_lrc = namedXmlID [ 3 ]. strName ; btn_menu = namedXmlID [ 4 ]. strName ; ctrl_flash = namedXmlID [ 5 ]. strName ; gif_test = namedXmlID [ 6 ]. strName ; giftest = namedXmlID [ 7 ]. strName ; tab_main = namedXmlID [ 8 ]. strName ; } const wchar_t * btnSelectGif ; const wchar_t * btn_display ; const wchar_t * btn_hidetst ; const wchar_t * btn_lrc ; const wchar_t * btn_menu ; const wchar_t * ctrl_flash ; const wchar_t * gif_test ; const wchar_t * giftest ; const wchar_t * tab_main ; } name ; class _id { public : const static int btnSelectGif = 65540 ; const static int btn_display = 65541 ; const static int btn_hidetst = 65542 ; const static int btn_lrc = 65543 ; const static int btn_menu = 65536 ; const static int ctrl_flash = 65538 ; const static int gif_test = 1000 ; const static int giftest = 65539 ; const static int tab_main = 65537 ; } id ; class _string { public : const static int mccol_1 = 0 ; const static int mccol_2 = 1 ; const static int mccol_3 = 2 ; const static int mccol_4 = 3 ; const static int mccol_5 = 4 ; const static int mccol_6 = 5 ; const static int title = 6 ; const static int ver = 7 ; } string ; class _color { public : const static int blue = 0 ; const static int gray = 1 ; const static int green = 2 ; const static int red = 3 ; const static int white = 4 ; } color ; }; const _R R ; } \u7b2c\u4e00\u884c\u4fdd\u7559\u7684\u662f\u4e00\u4e2a\u65f6\u95f4\u6233\uff0c\u5982\u679c\u8d44\u6e90\u4e2d\u5e03\u5c40\u76f8\u5173\u7684\u8d44\u6e90\u6ca1\u6709\u53d8\u5316\uff0c\u5219\u4e0d\u518d\u751f\u6210\u3002 \u9996\u5148\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a name, id \u6620\u5c04\u8868\uff1aSNamedID::NAMEDVALUE\uff0c\u8fd9\u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\u6570 \u7ec4\uff0c\u4fdd\u7559\u6bcf\u4e00\u4e2a\u63a7\u4ef6\u7684\u540d\u5b57\u53ca ID\uff08\u81ea\u52a8\u751f\u6210\u7684\u53ca XML \u4e2d\u5b9a\u4e49\u7684\uff0c\u81ea\u52a8\u751f\u6210\u7684 ID \u81ea\u52a8\u4ece 65536 \u5f00\u59cb\uff0c\u56e0\u6b64\u81ea\u5df1\u5b9a\u4e49\u65f6\u5e94\u8be5\u5c0f\u4e8e\u8fd9\u4e2a\u503c\uff09\u3002 \u63a5\u4e0b\u6765\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7c7b class _R\u3002_R \u4e2d\u6709 4 \u4e2a\u5b50\u7c7b\uff1a_name,_id, _string,_color\uff0c\u6bcf\u4e2a\u7c7b \u6709\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u5bf9\u5e94\u7684\u540d\u5b57\u4e3a:name, id, string, color\u3002 \u6700\u540e\u5b9a\u4e49\u4e00\u4e2a_R \u7684\u5b9e\u4f8b R\u3002 \u5230\u8fd9\u91cc\u4f60\u5e94\u8be5\u5df2\u7ecf\u77e5\u9053\u5728 SOUI \u4e2d R \u8fd9\u4e2a\u5bf9\u8c61\u6709\u54ea\u51e0\u4e2a\u6210\u5458\u4e86\u3002 \u90a3\u4e48\u5728\u4ee3\u7801\u4e2d\u5982\u4f55\u4f7f\u7528 R \u8fd9\u4e2a\u5bf9\u8c61\u5462\uff1f \u5982\u4f55\u4f7f\u7528 name \u5bf9\u8c61\uff1a \u89c2\u5bdf R \u8fd9\u4e2a\u5bf9\u8c61\uff0c\u4f60\u53ef\u80fd\u5df2\u7ecf\u53d1\u73b0\uff0c\u5728\u4ee3\u7801\u76f4\u63a5\u4f7f\u7528 R.name.btnSelectGif \u5c31\u7b49\u4ef7\u4e8e\u5728\u4ee3 \u7801\u4e2d\u8f93\u5165 L\u201cbtnSelectGif\u201d\uff0c\u8fd9\u6837\u7684\u597d\u5904\u5728\u4e8e\u4f60\u5728\u8f93\u5165 R.name.btn \u540e VS \u6216\u8005 VA \u53ef\u80fd \u5c31\u7ed9\u4f60\u8865\u5168\u540e\u9762\u7684 SelectGif\uff0c\u65e2\u63d0\u9ad8\u4e86\u7f16\u7801\u6548\u7387\uff0c\u53c8\u4fdd\u8bc1\u4e86\u4e0d\u4f1a\u51fa\u9519\u3002\uff08\u5bf9\u8c61 name \u4fee \u6539\u4ee5\u540e\u4e5f\u53ef\u4ee5\u4f7f\u7528 VA \u7684\u53d8\u91cf\u91cd\u547d\u540d\u529f\u80fd\u81ea\u52a8\u6279\u91cf\u4fee\u6539\uff09\u3002 \u5982\u4f55\u4f7f\u7528 ID \u5bf9\u8c61\uff1a \u524d\u9762\u63d0\u5230\u4f7f\u7528\u5b57\u7b26\u4e32\u6765\u67e5\u627e\u7a97\u53e3\u5bf9\u8c61\u76f8\u5bf9\u6765\u8bf4\u8f83 ID \u6bd4\u8f83\u4f1a\u6162\u4e00\u70b9\uff0c\u90a3\u4e48\u5982\u4f55\u4f7f\u7528 ID \u5bf9\u8c61 \u5462\uff1f\u8981\u4f7f\u7528 ID \u5bf9\u8c61\uff0c\u6709\u4e00\u4e2a\u8981\u6c42\uff1a\u7531\u4e8e\u81ea\u52a8\u751f\u6210\u7684 ID \u5e76\u6ca1\u6709\u4fee\u6539\u5230\u539f\u6709\u7684 XML \u4e2d\uff0c\u76f4 \u63a5\u4ece XML \u4e2d\u521d\u59cb\u5316\u5e03\u5c40\u65f6\u662f\u6ca1\u6709 ID \u5c5e\u6027\u7684\u3002\u4e3a\u6b64 SOUI2.0 \u7684 SApplication \u5bf9\u8c61\u589e\u52a0\u4e86 \u4e00\u4e2a\u65b9\u6cd5\uff1aInitXmlNamedID\uff0c\u53c2\u89c1 demo(\u6ce8\u610f\u8c03\u7528\u4f4d\u7f6e\uff09\uff1a //\u5982\u679c\u9700\u8981\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528 R::id::namedid \u8fd9\u79cd\u65b9\u5f0f\u6765\u4f7f\u7528\u63a7\u4ef6\u5fc5\u987b\u8981\u8fd9\u4e00\u884c\u4ee3\u7801\uff1a2016 \u5e742 \u6708 2 \u65e5\uff0cR::id::namedXmlID \u662f\u7531 uiresbuilder \u589e\u52a0-h .\\res\\resource.h idtable \u8fd9 3\u4e2a\u53c2\u6570\u540e\u751f\u6210\u7684\u3002 theApp -> InitXmlNamedID ( namedXmlID , ARRAYSIZE ( namedXmlID ), TRUE ); \u5728\u5e03\u5c40\u521b\u5efa\u524d\u7ed9 App \u5bf9\u8c61\u521d\u59cb\u5316\u4e00\u4e2a\u81ea\u52a8\u751f\u6210\u7684 Name \u8f6c ID \u8868\u3002 \u63a7\u4ef6\u521b\u5efa\u5e76\u521d\u59cb\u5316 name \u5c5e\u6027\u65f6\uff0c\u81ea\u52a8\u4ece\u8be5\u8868\u4e2d\u67e5\u8be2 ID\u3002 \u5982\u6b64\uff0c\u5728\u4ee3\u7801\u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 R.id.btnSelectGif \u6765\u67e5\u627e\u5bf9\u5e94\u7684\u63a7\u4ef6\u4e86\u3002 \u5982\u4f55\u4f7f\u7528 string, color \u5bf9\u8c61\uff1a \u5728\u5e03\u5c40 XML \u4e2d\u4f7f\u7528\u4f7f\u7528 string, color \u5bf9\u8c61\u548c android \u4e00\u6837\uff1a\u91c7\u7528@string/str-name, @color/color-name \u6765\u5206\u522b\u5f15\u7528\u5728 string\uff0ccolor \u4e2d\u5b9a\u4e49\u7684\u5bf9\u5e94\u7684\u5b57\u7b26\u4e32\u6216\u8005\u989c\u8272\u503c\u3002 \u8fd9\u91cc\u91cd\u70b9\u8bb2\u4e00\u4e0b\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\u8fd9\u4e24\u4e2a\u5bf9\u8c61\uff1a //\u6f14\u793a R.color.xxx,R.string.xxx \u5728\u4ee3\u7801\u4e2d\u7684\u4f7f\u7528\u3002 COLORREF crRed = GETCOLOR ( R . color . red ); SStringW strVer = GETSTRING ( R . string . ver ); \u4e0a\u9762\u662f demo\uff1awinmain \u4e2d\u4e00\u4e2a\u4f7f\u7528\u793a\u4f8b\u3002 R.color.red\uff0c R.string.ver \u662f\u81ea\u52a8\u751f\u6210\u7684\u4e24\u4e2a\u6574\u6570\uff0cGETCOLOR, GETSTRING \u8fd9\u4e24\u4e2a\u5b8f \u4f1a\u81ea\u52a8\u4ece\u8d44\u6e90\u4e2d\u7684\u5b57\u7b26\u4e32\u8868\u53ca\u989c\u8272\u8868\u4e2d\u83b7\u53d6\u5bf9\u5e94\u7684 ID \u6307\u5b9a\u7684\u503c\u3002","title":"4.23 \u5728 SOUI2.0 \u4e2d\u50cf android \u4e00\u6837\u4f7f\u7528\u8d44\u6e90"},{"location":"Development/23/#423-soui20-android","text":"SOUI2.0 \u4e4b\u524d\uff0c\u5728 SOUI \u4e2d\u4f7f\u7528\u8d44\u6e90\u901a\u5e38\u662f\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e2a\u8d44\u6e90\u7684 name\uff08\u4e00\u4e2a\u5b57\u7b26\u4e32\uff09\u6765 \u5f15\u7528\u3002\u4f7f\u7528\u5b57\u7b26\u4e32\u7684\u597d\u5904\u5728\u4e8e\u5b57\u7b26\u4e32\u80fd\u591f\u8868\u8fbe\u8fd9\u4e2a\u8d44\u6e90\u7684\u610f\u4e49\uff0c\u56e0\u6b64\u4f7f\u7528\u5b57\u7b26\u4e32\u4e5f\u662f\u73b0\u4ee3 UI \u5f15\u64ce\u5e38\u7528\u7684\u65b9\u5f0f\u3002 \u5c3d\u7ba1\u76f4\u63a5\u4f7f\u7528\u5b57\u7b26\u4e32\u6709\u610f\u4e49\u660e\u786e\u7684\u4f18\u70b9\uff0c\u5b83\u540c\u6837\u4e5f\u6709\u7f3a\u70b9\uff1a 1\u3001\u5b57\u7b26\u4e32\u5199\u9519\u4e86\uff0c\u7f16\u8bd1\u5668\u4e0d\u77e5\u9053\u3002\u8fd9\u53ef\u80fd\u5bfc\u81f4\u4e00\u4e9b\u5f88\u96be\u53d1\u73b0\u7684 BUG\u3002 2\u3001\u63a7\u4ef6\u67e5\u8be2\uff0c\u6bd4\u8f83\u65f6\u57fa\u4e8e\u5b57\u7b26\u4e32\uff0c\u76f8\u5bf9\u6765\u8bf4\u6027\u80fd\u4f1a\u5dee\u4e00\u70b9\uff08\u597d\u5728\u73b0\u5728 CPU \u591f\u5f3a\uff0c\u8fd9\u70b9\u6027 \u80fd\u635f\u5931\u901a\u5e38\u53ef\u4ee5\u5ffd\u7565\uff09\u3002 \u505a\u8fc7 Android \u5f00\u53d1\u7684\u670b\u53cb\u53ef\u80fd\u77e5\u9053\uff0c\u5728 Android \u4e2d\u8981\u5f15\u7528\u4e00\u4e2a\u8d44\u6e90\u5982\u56fe\u7247\u3001\u5b57\u7b26\u4e32\u3001\u989c \u8272\u7b49\u53ef\u4ee5\u4f7f\u7528 R.id.xxx, R.string.xxx,R.color.xxx \u8fd9\u6837\u7684\u5f62\u5f0f\u6765\u5f15\u7528\u3002 Android \u5185\u90e8\u5168\u90e8\u81ea\u52a8\u8f6c\u6362\u6210 ID\uff0c\u6574\u6570\u6bd4\u8f83\u663e\u7136\u6bd4\u5b57\u7b26\u4e32\u6bd4\u8f83\u5feb\uff0c\u8fd9\u91cc\u4e0d\u4f5c\u8ba8\u8bba\u3002 \u8fd9\u79cd\u65b9\u5f0f\u4e00\u4e2a\u597d\u5904\u5728\u4e8e Android \u7684\u81ea\u52a8\u8865\u5168\u529f\u80fd\u80fd\u591f\u5e2e\u52a9\u4f60\u5feb\u901f\u7684\u8f93\u5165\u4f60\u9700\u8981\u7684\u8d44\u6e90\uff0c\u9664 \u4e86\u52a0\u5feb\u4e86\u7f16\u7801\u901f\u5ea6\uff0c\u8fd8\u5927\u5927\u51cf\u5c11\u4e86\u8f93\u5165\u9519\u8bef\u3002 SOUI2.0 \u628a Android \u7684\u8fd9\u79cd\u8d44\u6e90\u5f15\u7528\u65b9\u5f0f\u5f15\u5165\u4e86\u8fdb\u6765\u3002 \u5173\u952e\u5728\u4e8e uiresbuilder\u3002\u539f\u6765 SOUI \u4e2d\u7684 uiresbuilder \u53ea\u63d0\u4f9b\u5c06\u8d44\u6e90\u8f6c\u6362\u6210.rc2 \u529f\u80fd\uff0c\u65b9 \u4fbf\u5c06\u8d44\u6e90\u7f16\u8bd1\u5230 EXE/DLL \u4e2d\u3002 2.0 \u7248\u672c\u65b0\u589e\u52a0 name \u63d0\u53d6\uff0cid \u751f\u6210\uff0c\u5b57\u7b26\u4e32\u8868 ID \u751f\u6210\uff0c\u989c\u8272\u8868 ID \u751f\u6210\u529f\u80fd\u3002\u5b83\u4eec\u4f1a\u8f93 \u51fa\u5230\u4e00\u4e2a C++\u5934\u6587\u4ef6\uff08\u7531\u547d\u4ee4\u884c\u53c2\u6570\u6307\u5b9a\uff09\u3002 \u8981\u4f7f\u7528\u8be5\u529f\u80fd\u9996\u5148\u8981\u4fdd\u8bc1\u6240\u6709\u7684\u5e03\u5c40 XML \u6240\u5728\u7684\u8d44\u6e90\u7c7b\u578b\u4e3a\"Layout\"\uff0c\u7136\u540e\u5728 uiresbuilder \u7684\u547d\u540d\u884c\u4e2d\u52a0\u5165\uff1a -h \u201c\u8f93\u51fa\u6587\u4ef6\u540d\u201d idtable\u3002-h \u540e\u9762\u7d27\u8ddf\u8f93\u51fa\u6587\u4ef6\u540d\uff0c idtable \u6307\u793a\u9700\u8981\u7ed9\u6ca1\u6709\u6307\u5b9a ID \u7684\u63a7\u4ef6\u81ea\u52a8\u751f\u6210 ID\uff0c\u8be5\u529f\u80fd\u9ed8\u8ba4\u5173\u95ed\u3002 \u751f\u6210\u6210\u529f\u540e\uff0c\u4f60\u7684\u201c\u8f93\u51fa\u6587\u4ef6\u201d\u7684\u5185\u5bb9\u53ef\u80fd\u662f\u4e0b\u9762\u7684\u6837\u5b50\uff1a //stamp:0ae7b68801b8deb8 /*<------------------------------------------------------------------------- ------------------------>*/ /*\u8be5\u6587\u4ef6\u7531 uiresbuilder \u751f\u6210\uff0c\u8bf7\u4e0d\u8981\u624b\u52a8\u4fee\u6539*/ /*<------------------------------------------------------------------------- ------------------------>*/ #pragma once #include <res.mgr/snamedvalue.h> namespace SOUI { const SNamedID :: NAMEDVALUE namedXmlID [] = { { L \"btnSelectGif\" , 65540 }, { L \"btn_display\" , 65541 }, { L \"btn_hidetst\" , 65542 }, { L \"btn_lrc\" , 65543 }, { L \"btn_menu\" , 65536 }, { L \"ctrl_flash\" , 65538 }, { L \"gif_test\" , 1000 }, { L \"giftest\" , 65539 }, { L \"tab_main\" , 65537 } }; class _R { public : class _name { public : _name (){ btnSelectGif = namedXmlID [ 0 ]. strName ; btn_display = namedXmlID [ 1 ]. strName ; btn_hidetst = namedXmlID [ 2 ]. strName ; btn_lrc = namedXmlID [ 3 ]. strName ; btn_menu = namedXmlID [ 4 ]. strName ; ctrl_flash = namedXmlID [ 5 ]. strName ; gif_test = namedXmlID [ 6 ]. strName ; giftest = namedXmlID [ 7 ]. strName ; tab_main = namedXmlID [ 8 ]. strName ; } const wchar_t * btnSelectGif ; const wchar_t * btn_display ; const wchar_t * btn_hidetst ; const wchar_t * btn_lrc ; const wchar_t * btn_menu ; const wchar_t * ctrl_flash ; const wchar_t * gif_test ; const wchar_t * giftest ; const wchar_t * tab_main ; } name ; class _id { public : const static int btnSelectGif = 65540 ; const static int btn_display = 65541 ; const static int btn_hidetst = 65542 ; const static int btn_lrc = 65543 ; const static int btn_menu = 65536 ; const static int ctrl_flash = 65538 ; const static int gif_test = 1000 ; const static int giftest = 65539 ; const static int tab_main = 65537 ; } id ; class _string { public : const static int mccol_1 = 0 ; const static int mccol_2 = 1 ; const static int mccol_3 = 2 ; const static int mccol_4 = 3 ; const static int mccol_5 = 4 ; const static int mccol_6 = 5 ; const static int title = 6 ; const static int ver = 7 ; } string ; class _color { public : const static int blue = 0 ; const static int gray = 1 ; const static int green = 2 ; const static int red = 3 ; const static int white = 4 ; } color ; }; const _R R ; } \u7b2c\u4e00\u884c\u4fdd\u7559\u7684\u662f\u4e00\u4e2a\u65f6\u95f4\u6233\uff0c\u5982\u679c\u8d44\u6e90\u4e2d\u5e03\u5c40\u76f8\u5173\u7684\u8d44\u6e90\u6ca1\u6709\u53d8\u5316\uff0c\u5219\u4e0d\u518d\u751f\u6210\u3002 \u9996\u5148\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a name, id \u6620\u5c04\u8868\uff1aSNamedID::NAMEDVALUE\uff0c\u8fd9\u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\u6570 \u7ec4\uff0c\u4fdd\u7559\u6bcf\u4e00\u4e2a\u63a7\u4ef6\u7684\u540d\u5b57\u53ca ID\uff08\u81ea\u52a8\u751f\u6210\u7684\u53ca XML \u4e2d\u5b9a\u4e49\u7684\uff0c\u81ea\u52a8\u751f\u6210\u7684 ID \u81ea\u52a8\u4ece 65536 \u5f00\u59cb\uff0c\u56e0\u6b64\u81ea\u5df1\u5b9a\u4e49\u65f6\u5e94\u8be5\u5c0f\u4e8e\u8fd9\u4e2a\u503c\uff09\u3002 \u63a5\u4e0b\u6765\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7c7b class _R\u3002_R \u4e2d\u6709 4 \u4e2a\u5b50\u7c7b\uff1a_name,_id, _string,_color\uff0c\u6bcf\u4e2a\u7c7b \u6709\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u5bf9\u5e94\u7684\u540d\u5b57\u4e3a:name, id, string, color\u3002 \u6700\u540e\u5b9a\u4e49\u4e00\u4e2a_R \u7684\u5b9e\u4f8b R\u3002 \u5230\u8fd9\u91cc\u4f60\u5e94\u8be5\u5df2\u7ecf\u77e5\u9053\u5728 SOUI \u4e2d R \u8fd9\u4e2a\u5bf9\u8c61\u6709\u54ea\u51e0\u4e2a\u6210\u5458\u4e86\u3002 \u90a3\u4e48\u5728\u4ee3\u7801\u4e2d\u5982\u4f55\u4f7f\u7528 R \u8fd9\u4e2a\u5bf9\u8c61\u5462\uff1f \u5982\u4f55\u4f7f\u7528 name \u5bf9\u8c61\uff1a \u89c2\u5bdf R \u8fd9\u4e2a\u5bf9\u8c61\uff0c\u4f60\u53ef\u80fd\u5df2\u7ecf\u53d1\u73b0\uff0c\u5728\u4ee3\u7801\u76f4\u63a5\u4f7f\u7528 R.name.btnSelectGif \u5c31\u7b49\u4ef7\u4e8e\u5728\u4ee3 \u7801\u4e2d\u8f93\u5165 L\u201cbtnSelectGif\u201d\uff0c\u8fd9\u6837\u7684\u597d\u5904\u5728\u4e8e\u4f60\u5728\u8f93\u5165 R.name.btn \u540e VS \u6216\u8005 VA \u53ef\u80fd \u5c31\u7ed9\u4f60\u8865\u5168\u540e\u9762\u7684 SelectGif\uff0c\u65e2\u63d0\u9ad8\u4e86\u7f16\u7801\u6548\u7387\uff0c\u53c8\u4fdd\u8bc1\u4e86\u4e0d\u4f1a\u51fa\u9519\u3002\uff08\u5bf9\u8c61 name \u4fee \u6539\u4ee5\u540e\u4e5f\u53ef\u4ee5\u4f7f\u7528 VA \u7684\u53d8\u91cf\u91cd\u547d\u540d\u529f\u80fd\u81ea\u52a8\u6279\u91cf\u4fee\u6539\uff09\u3002 \u5982\u4f55\u4f7f\u7528 ID \u5bf9\u8c61\uff1a \u524d\u9762\u63d0\u5230\u4f7f\u7528\u5b57\u7b26\u4e32\u6765\u67e5\u627e\u7a97\u53e3\u5bf9\u8c61\u76f8\u5bf9\u6765\u8bf4\u8f83 ID \u6bd4\u8f83\u4f1a\u6162\u4e00\u70b9\uff0c\u90a3\u4e48\u5982\u4f55\u4f7f\u7528 ID \u5bf9\u8c61 \u5462\uff1f\u8981\u4f7f\u7528 ID \u5bf9\u8c61\uff0c\u6709\u4e00\u4e2a\u8981\u6c42\uff1a\u7531\u4e8e\u81ea\u52a8\u751f\u6210\u7684 ID \u5e76\u6ca1\u6709\u4fee\u6539\u5230\u539f\u6709\u7684 XML \u4e2d\uff0c\u76f4 \u63a5\u4ece XML \u4e2d\u521d\u59cb\u5316\u5e03\u5c40\u65f6\u662f\u6ca1\u6709 ID \u5c5e\u6027\u7684\u3002\u4e3a\u6b64 SOUI2.0 \u7684 SApplication \u5bf9\u8c61\u589e\u52a0\u4e86 \u4e00\u4e2a\u65b9\u6cd5\uff1aInitXmlNamedID\uff0c\u53c2\u89c1 demo(\u6ce8\u610f\u8c03\u7528\u4f4d\u7f6e\uff09\uff1a //\u5982\u679c\u9700\u8981\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528 R::id::namedid \u8fd9\u79cd\u65b9\u5f0f\u6765\u4f7f\u7528\u63a7\u4ef6\u5fc5\u987b\u8981\u8fd9\u4e00\u884c\u4ee3\u7801\uff1a2016 \u5e742 \u6708 2 \u65e5\uff0cR::id::namedXmlID \u662f\u7531 uiresbuilder \u589e\u52a0-h .\\res\\resource.h idtable \u8fd9 3\u4e2a\u53c2\u6570\u540e\u751f\u6210\u7684\u3002 theApp -> InitXmlNamedID ( namedXmlID , ARRAYSIZE ( namedXmlID ), TRUE ); \u5728\u5e03\u5c40\u521b\u5efa\u524d\u7ed9 App \u5bf9\u8c61\u521d\u59cb\u5316\u4e00\u4e2a\u81ea\u52a8\u751f\u6210\u7684 Name \u8f6c ID \u8868\u3002 \u63a7\u4ef6\u521b\u5efa\u5e76\u521d\u59cb\u5316 name \u5c5e\u6027\u65f6\uff0c\u81ea\u52a8\u4ece\u8be5\u8868\u4e2d\u67e5\u8be2 ID\u3002 \u5982\u6b64\uff0c\u5728\u4ee3\u7801\u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 R.id.btnSelectGif \u6765\u67e5\u627e\u5bf9\u5e94\u7684\u63a7\u4ef6\u4e86\u3002 \u5982\u4f55\u4f7f\u7528 string, color \u5bf9\u8c61\uff1a \u5728\u5e03\u5c40 XML \u4e2d\u4f7f\u7528\u4f7f\u7528 string, color \u5bf9\u8c61\u548c android \u4e00\u6837\uff1a\u91c7\u7528@string/str-name, @color/color-name \u6765\u5206\u522b\u5f15\u7528\u5728 string\uff0ccolor \u4e2d\u5b9a\u4e49\u7684\u5bf9\u5e94\u7684\u5b57\u7b26\u4e32\u6216\u8005\u989c\u8272\u503c\u3002 \u8fd9\u91cc\u91cd\u70b9\u8bb2\u4e00\u4e0b\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\u8fd9\u4e24\u4e2a\u5bf9\u8c61\uff1a //\u6f14\u793a R.color.xxx,R.string.xxx \u5728\u4ee3\u7801\u4e2d\u7684\u4f7f\u7528\u3002 COLORREF crRed = GETCOLOR ( R . color . red ); SStringW strVer = GETSTRING ( R . string . ver ); \u4e0a\u9762\u662f demo\uff1awinmain \u4e2d\u4e00\u4e2a\u4f7f\u7528\u793a\u4f8b\u3002 R.color.red\uff0c R.string.ver \u662f\u81ea\u52a8\u751f\u6210\u7684\u4e24\u4e2a\u6574\u6570\uff0cGETCOLOR, GETSTRING \u8fd9\u4e24\u4e2a\u5b8f \u4f1a\u81ea\u52a8\u4ece\u8d44\u6e90\u4e2d\u7684\u5b57\u7b26\u4e32\u8868\u53ca\u989c\u8272\u8868\u4e2d\u83b7\u53d6\u5bf9\u5e94\u7684 ID \u6307\u5b9a\u7684\u503c\u3002","title":"4.23 \u5728 SOUI2.0 \u4e2d\u50cf android \u4e00\u6837\u4f7f\u7528\u8d44\u6e90"},{"location":"Development/24/","text":"4.24 \u4e24\u4e2a SOUI \u65b0\u63a7\u4ef6 ---- SListView \u548c SComboView\uff08\u501f\u7528 Andorid \u7684\u8bbe\u8ba1\uff09 \u00b6 SOUI \u539f\u6765\u5b9e\u73b0\u7684 SListBoxEx \u7684\u6548\u7387\u4e00\u76f4\u662f\u6211\u5bf9 SOUI \u4e0d\u592a\u6ee1\u610f\u7684\u5730\u65b9\uff0c\u5305\u62ec\u540e\u6765\u7f51\u53cb\u5b9e \u73b0\u7684 SListCtrlEx\u3002 \u8fd9\u7c7b\u63a7\u4ef6\u4e3a\u6bcf\u4e00\u4e2a\u5217\u8868\u9879\u521b\u5efa\u4e00\u4e2a SWindow \u6765\u5bb9\u7eb3\u6570\u636e\uff0c\u5f53\u6570\u636e\u91cf\u6bd4\u8f83\u5927\uff0810000+) \u65f6\uff0c\u4e00\u65b9\u9762\u5185\u5b58\u6d88\u8017\u4f1a\u5f88\u4e25\u91cd\uff1b\u53e6\u4e00\u65b9\u9762\u5217\u8868\u6570\u636e\u521d\u59cb\u5316\u4e5f\u9700\u8981\u5927\u91cf\u7684\u65f6\u95f4\u3002 \u4eca\u5e74\u5f00\u59cb\u8f6c\u578b\u505a Android \u5f00\u53d1\u3002\u5927\u5bb6\u90fd\u77e5\u9053 Android \u5f00\u53d1 APP \u548c PC \u4e0a\u5f00\u53d1 APP \u76f8\u6bd4\u8981 \u7b80\u5355\u5f88\u591a\uff0c\u5176\u4e2d\u6211\u4e2a\u4eba\u4f53\u4f1a\u6700\u6df1\u7684\u5c31\u662f Android \u7684 ListView \u63a7\u4ef6\u3002 \u5728 Android \u4e2d\uff0cListView \u4e2d\u5217\u8868\u9879\u7684\u663e\u793a\u91c7\u7528\u63a7\u4ef6+\u9002\u914d\u5668(Adapter)\u7684\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\u6240 \u8c13\u7684 MVC \u6a21\u5f0f\u3002\u4e00\u4e2a\u8868\u9879\u5728\u9700\u8981\u663e\u793a\u7684\u65f6\u5019\u624d\u4f1a\u628a\u6570\u636e\u52a0\u8f7d\u5230 View \u91cc\u53bb\uff0c\u5f53\u8fd9\u4e2a\u8868\u9879 \u88ab\u9690\u85cf\u8d77\u6765\u4ee5\u540e\uff0c\u5bb9\u7eb3\u8be5\u8868\u9879\u7684\u5bb9\u5668(View)\u5219\u81ea\u52a8\u88ab\u52a0\u5165\u5230 ListView \u4e2d\u4fdd\u5b58\u7684\u4e00\u4e2a\u5bb9\u5668\u56de \u6536\u5217\u8868\u4e2d\u3002\u9700\u8981\u663e\u793a\u4e00\u4e2a\u65b0\u8868\u9879\u65f6\u9996\u5148\u53bb\u56de\u6536\u7ad9\u91cc\u67e5\u627e\u662f\u5426\u5b58\u5728\u6307\u5b9a\u7c7b\u578b\u7684\u5bb9\u5668\uff0c\u5b58\u5728\u5219 \u81ea\u52a8\u590d\u7528\u3002 \u57fa\u672c\u601d\u60f3\u5982\u4e0a\uff0c\u5f53\u7136\u5b9e\u9645\u5b9e\u73b0\u8fd8\u4f7f\u7528\u4e86\u5f88\u591a\u6280\u5de7\u3002\u901a\u8fc7\u4e0a\u8ff0\u673a\u5236\uff0c\u53ef\u4ee5\u6709\u6548\u89e3\u51b3 ListView \u663e\u793a\u5927\u91cf\u6570\u636e\u7684\u95ee\u9898\u3002 \u672c\u6765\u4e5f\u4e00\u76f4\u60f3\u91cd\u5199 SOUI \u7684 ListBox, \u8fd9\u6bb5\u65f6\u95f4\u6b63\u597d\u9879\u76ee\u9700\u8981\uff0c\u62bd\u51fa\u65f6\u95f4\u6a21\u4eff\u4e86\u4e00\u4e2a\uff0c\u6548\u679c \u4e0d\u9519\u3002 \u5148\u770b\u770b\u6548\u679c\uff1a \u7b2c\u4e00\u5f20\u56fe\u662f\u4e00\u4e2a\u52a0\u8f7d 50000 \u884c\u7684 SListView \u63a7\u4ef6\uff0c\u7b2c\u4e8c\u4e2a\u56fe\u662f\u6f14\u793a\u4f7f\u7528 SComboView \u6765 \u505a\u7528\u6237\u767b\u9646\u754c\u9762\u3002 \u8981\u5728 SOUI \u4e2d\u4f7f\u7528 SListView\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u81ea\u5df1\u5b9e\u73b0\u6570\u636e\u586b\u5145\u7684 Adapter: class CTestAdapter : public SAdapterBase { protected : SListView * m_pOwenr ; public : CTestAdapter ( SListView * pOwner ) : m_pOwenr ( pOwner ) { } virtual int getCount () { return 50000 ; } virtual void getView ( int position , SWindow * pItem ) { if ( pItem -> GetChildrenCount () == 0 ) { pItem -> InitFromXml ( m_pOwenr -> GetTemplate ()); } SAnimateImgWnd * pAni = pItem -> FindChildByName2 < SAnimateImgWnd > ( L \"ani_test\" ); SButton * pBtn = pItem -> FindChildByName2 < SButton > ( L \"btn_test\" ); pBtn -> SetWindowText ( SStringW (). Format ( L \"button %d\" , position )); pBtn -> SetUserData ( position ); pBtn -> GetEventSet () -> subscribeEvent ( EVT_CMD , Subscriber ( & CTestAdapter :: OnButt onClick , this )); } bool OnButtonClick ( EventArgs * pEvt ) { SButton * pBtn = sobj_cast < SButton > ( pEvt -> sender ); int iItem = pBtn -> GetUserData (); SMessageBox ( NULL , SStringT (). Format ( _T ( \"button of %d item was clicked \"),iItem),_T(\" haha \"),MB_OK); return true ; } }; \u8fd9\u91cc\u6700\u5173\u952e\u7684\u5c31\u662f\u5b9e\u73b0 IAdapter \u4e2d\u7684 getView \u65b9\u6cd5\u3002 \u548c Android \u7684 ListView \u4e0d\u540c\uff0cSOUI \u4e2d\u4f7f\u7528\u6761\u4ef6 pItem->GetChildrenCount()==0 \u6765\u5224 \u65ad\u4e00\u4e2a\u5bb9\u5668\u662f\u5426\u662f\u88ab\u590d\u7528\u3002 \u5f53 pItem->GetChildrenCount()==0 \u65f6\u4ee3\u8868\u8be5\u5bb9\u5668\u8fd8\u6ca1\u6709\u88ab\u521d\u59cb\u5316\uff0c\u9700\u8981\u81ea\u5df1\u4ece XML \u6a21 \u677f\u4e2d\u521d\u59cb\u5316\u5bb9\u5668\u3002XML \u6a21\u677f\u53ef\u4ee5\u81ea\u5df1\u81ea\u5df1\u5b9a\u4e49\u7684\u4efb\u610f\u7b26\u5408 SOUI \u5e03\u5c40\u8bed\u6cd5\u7684\u6570\u636e\u3002 \u5bb9\u5668\u521d\u59cb\u5316\u5b8c\u6210\u540e\u5c31\u53ef\u4ee5\u5411\u91cc\u9762\u586b\u5145\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u5411\u63a7\u4ef6\u8fde\u63a5\u54cd\u5e94\u51fd\u6570\u4e86 \uff08subscribeEvent\uff09\u3002 \u5728 UI \u521b\u5efa\u5b8c\u6210\u540e\u9700\u8981\u5728\u4ee3\u7801\u4e2d\u628a\u8fd9\u4e2a Adapter \u4ea4\u7ed9 SListView\uff1a LRESULT CMainDlg::OnInitDialog ( HWND hWnd , LPARAM lParam ) { //.... SListView * pLstView = FindChildByName2 < SListView > ( \"lv_test\" ); if ( pLstView ) { CTestAdapter * pAdapter = new CTestAdapter ( pLstView ); pLstView -> SetAdapter ( pAdapter ); pAdapter -> Release (); } return 0 ; } \u7b2c\u4e8c\u4e2a\u754c\u9762\u662f\u6f14\u793a SComboView \u7684\u3002SComboView \u7684\u7528\u6237\u548c SListView \u57fa\u672c\u4e00\u6837\uff0c\u5177\u4f53 \u770b\u4ee3\u7801\u3002","title":"4.24 \u4e24\u4e2a SOUI \u65b0\u63a7\u4ef6 ---- SListView \u548c SComboView\uff08\u501f\u7528 Andorid \u7684\u8bbe\u8ba1\uff09"},{"location":"Development/24/#424-soui-slistview-scomboview-andorid","text":"SOUI \u539f\u6765\u5b9e\u73b0\u7684 SListBoxEx \u7684\u6548\u7387\u4e00\u76f4\u662f\u6211\u5bf9 SOUI \u4e0d\u592a\u6ee1\u610f\u7684\u5730\u65b9\uff0c\u5305\u62ec\u540e\u6765\u7f51\u53cb\u5b9e \u73b0\u7684 SListCtrlEx\u3002 \u8fd9\u7c7b\u63a7\u4ef6\u4e3a\u6bcf\u4e00\u4e2a\u5217\u8868\u9879\u521b\u5efa\u4e00\u4e2a SWindow \u6765\u5bb9\u7eb3\u6570\u636e\uff0c\u5f53\u6570\u636e\u91cf\u6bd4\u8f83\u5927\uff0810000+) \u65f6\uff0c\u4e00\u65b9\u9762\u5185\u5b58\u6d88\u8017\u4f1a\u5f88\u4e25\u91cd\uff1b\u53e6\u4e00\u65b9\u9762\u5217\u8868\u6570\u636e\u521d\u59cb\u5316\u4e5f\u9700\u8981\u5927\u91cf\u7684\u65f6\u95f4\u3002 \u4eca\u5e74\u5f00\u59cb\u8f6c\u578b\u505a Android \u5f00\u53d1\u3002\u5927\u5bb6\u90fd\u77e5\u9053 Android \u5f00\u53d1 APP \u548c PC \u4e0a\u5f00\u53d1 APP \u76f8\u6bd4\u8981 \u7b80\u5355\u5f88\u591a\uff0c\u5176\u4e2d\u6211\u4e2a\u4eba\u4f53\u4f1a\u6700\u6df1\u7684\u5c31\u662f Android \u7684 ListView \u63a7\u4ef6\u3002 \u5728 Android \u4e2d\uff0cListView \u4e2d\u5217\u8868\u9879\u7684\u663e\u793a\u91c7\u7528\u63a7\u4ef6+\u9002\u914d\u5668(Adapter)\u7684\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\u6240 \u8c13\u7684 MVC \u6a21\u5f0f\u3002\u4e00\u4e2a\u8868\u9879\u5728\u9700\u8981\u663e\u793a\u7684\u65f6\u5019\u624d\u4f1a\u628a\u6570\u636e\u52a0\u8f7d\u5230 View \u91cc\u53bb\uff0c\u5f53\u8fd9\u4e2a\u8868\u9879 \u88ab\u9690\u85cf\u8d77\u6765\u4ee5\u540e\uff0c\u5bb9\u7eb3\u8be5\u8868\u9879\u7684\u5bb9\u5668(View)\u5219\u81ea\u52a8\u88ab\u52a0\u5165\u5230 ListView \u4e2d\u4fdd\u5b58\u7684\u4e00\u4e2a\u5bb9\u5668\u56de \u6536\u5217\u8868\u4e2d\u3002\u9700\u8981\u663e\u793a\u4e00\u4e2a\u65b0\u8868\u9879\u65f6\u9996\u5148\u53bb\u56de\u6536\u7ad9\u91cc\u67e5\u627e\u662f\u5426\u5b58\u5728\u6307\u5b9a\u7c7b\u578b\u7684\u5bb9\u5668\uff0c\u5b58\u5728\u5219 \u81ea\u52a8\u590d\u7528\u3002 \u57fa\u672c\u601d\u60f3\u5982\u4e0a\uff0c\u5f53\u7136\u5b9e\u9645\u5b9e\u73b0\u8fd8\u4f7f\u7528\u4e86\u5f88\u591a\u6280\u5de7\u3002\u901a\u8fc7\u4e0a\u8ff0\u673a\u5236\uff0c\u53ef\u4ee5\u6709\u6548\u89e3\u51b3 ListView \u663e\u793a\u5927\u91cf\u6570\u636e\u7684\u95ee\u9898\u3002 \u672c\u6765\u4e5f\u4e00\u76f4\u60f3\u91cd\u5199 SOUI \u7684 ListBox, \u8fd9\u6bb5\u65f6\u95f4\u6b63\u597d\u9879\u76ee\u9700\u8981\uff0c\u62bd\u51fa\u65f6\u95f4\u6a21\u4eff\u4e86\u4e00\u4e2a\uff0c\u6548\u679c \u4e0d\u9519\u3002 \u5148\u770b\u770b\u6548\u679c\uff1a \u7b2c\u4e00\u5f20\u56fe\u662f\u4e00\u4e2a\u52a0\u8f7d 50000 \u884c\u7684 SListView \u63a7\u4ef6\uff0c\u7b2c\u4e8c\u4e2a\u56fe\u662f\u6f14\u793a\u4f7f\u7528 SComboView \u6765 \u505a\u7528\u6237\u767b\u9646\u754c\u9762\u3002 \u8981\u5728 SOUI \u4e2d\u4f7f\u7528 SListView\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u81ea\u5df1\u5b9e\u73b0\u6570\u636e\u586b\u5145\u7684 Adapter: class CTestAdapter : public SAdapterBase { protected : SListView * m_pOwenr ; public : CTestAdapter ( SListView * pOwner ) : m_pOwenr ( pOwner ) { } virtual int getCount () { return 50000 ; } virtual void getView ( int position , SWindow * pItem ) { if ( pItem -> GetChildrenCount () == 0 ) { pItem -> InitFromXml ( m_pOwenr -> GetTemplate ()); } SAnimateImgWnd * pAni = pItem -> FindChildByName2 < SAnimateImgWnd > ( L \"ani_test\" ); SButton * pBtn = pItem -> FindChildByName2 < SButton > ( L \"btn_test\" ); pBtn -> SetWindowText ( SStringW (). Format ( L \"button %d\" , position )); pBtn -> SetUserData ( position ); pBtn -> GetEventSet () -> subscribeEvent ( EVT_CMD , Subscriber ( & CTestAdapter :: OnButt onClick , this )); } bool OnButtonClick ( EventArgs * pEvt ) { SButton * pBtn = sobj_cast < SButton > ( pEvt -> sender ); int iItem = pBtn -> GetUserData (); SMessageBox ( NULL , SStringT (). Format ( _T ( \"button of %d item was clicked \"),iItem),_T(\" haha \"),MB_OK); return true ; } }; \u8fd9\u91cc\u6700\u5173\u952e\u7684\u5c31\u662f\u5b9e\u73b0 IAdapter \u4e2d\u7684 getView \u65b9\u6cd5\u3002 \u548c Android \u7684 ListView \u4e0d\u540c\uff0cSOUI \u4e2d\u4f7f\u7528\u6761\u4ef6 pItem->GetChildrenCount()==0 \u6765\u5224 \u65ad\u4e00\u4e2a\u5bb9\u5668\u662f\u5426\u662f\u88ab\u590d\u7528\u3002 \u5f53 pItem->GetChildrenCount()==0 \u65f6\u4ee3\u8868\u8be5\u5bb9\u5668\u8fd8\u6ca1\u6709\u88ab\u521d\u59cb\u5316\uff0c\u9700\u8981\u81ea\u5df1\u4ece XML \u6a21 \u677f\u4e2d\u521d\u59cb\u5316\u5bb9\u5668\u3002XML \u6a21\u677f\u53ef\u4ee5\u81ea\u5df1\u81ea\u5df1\u5b9a\u4e49\u7684\u4efb\u610f\u7b26\u5408 SOUI \u5e03\u5c40\u8bed\u6cd5\u7684\u6570\u636e\u3002 \u5bb9\u5668\u521d\u59cb\u5316\u5b8c\u6210\u540e\u5c31\u53ef\u4ee5\u5411\u91cc\u9762\u586b\u5145\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u5411\u63a7\u4ef6\u8fde\u63a5\u54cd\u5e94\u51fd\u6570\u4e86 \uff08subscribeEvent\uff09\u3002 \u5728 UI \u521b\u5efa\u5b8c\u6210\u540e\u9700\u8981\u5728\u4ee3\u7801\u4e2d\u628a\u8fd9\u4e2a Adapter \u4ea4\u7ed9 SListView\uff1a LRESULT CMainDlg::OnInitDialog ( HWND hWnd , LPARAM lParam ) { //.... SListView * pLstView = FindChildByName2 < SListView > ( \"lv_test\" ); if ( pLstView ) { CTestAdapter * pAdapter = new CTestAdapter ( pLstView ); pLstView -> SetAdapter ( pAdapter ); pAdapter -> Release (); } return 0 ; } \u7b2c\u4e8c\u4e2a\u754c\u9762\u662f\u6f14\u793a SComboView \u7684\u3002SComboView \u7684\u7528\u6237\u548c SListView \u57fa\u672c\u4e00\u6837\uff0c\u5177\u4f53 \u770b\u4ee3\u7801\u3002","title":"4.24 \u4e24\u4e2a SOUI \u65b0\u63a7\u4ef6 ---- SListView \u548c SComboView\uff08\u501f\u7528 Andorid \u7684\u8bbe\u8ba1\uff09"},{"location":"Development/25/","text":"4.25 \u5728 SOUI \u4e2d\u63a7\u4ef6\u5c5e\u6027\u67e5\u8be2\u65b9\u6cd5 \u00b6 SOUI \u9879\u76ee\u7684 SVN \u6839\u76ee\u5f55\u4e0b\u6709\u4e00\u4e2a doc \u76ee\u5f55\uff0c\u4e0b\u9762\u6709\u4e00\u4efd\u63a7\u4ef6\u5c5e\u6027\u8868\u3002\u5305\u542b\u4e86\u5927\u90e8\u5206\u63a7\u4ef6 \u7684\u5927\u90e8\u5206\u5c5e\u6027\uff0c\u4e0d\u8fc7\u4e5f\u4e0d\u4e00\u5b9a\u5b8c\u5168\u51c6\u786e\u3002\u6700\u4fdd\u9669\u7684\u529e\u6cd5\u8fd8\u662f\u67e5\u6e90\u4ee3\u7801\u3002 SOUI \u5bf9\u8c61\u5305\u542b\u63a7\u4ef6\u53ca ISkinObj \u7b49\u4ece SObject \u6d3e\u751f\u7684\u5bf9\u8c61\u90fd\u53ef\u4ee5\u4f7f\u7528 XML \u914d\u7f6e\u5c5e\u6027\u3002\u8981 \u77e5\u9053\u5982\u4f55\u67e5 SOUI \u5bf9\u8c61\u5c5e\u6027\uff0c\u9996\u5148\u8981\u770b\u4e00\u4e0b SOUI \u89e3\u91ca\u5c5e\u6027\u7684\u6d41\u7a0b\u3002 ```cpp BOOL SObject::InitFromXml( pugi::xml_node xmlNode ) { if(!xmlNode) return FALSE; ifdef _DEBUG \u00b6 { pugi::xml_writer_buff writer; xmlNode.print(writer,L\"\\t\",pugi::format_default,pugi::encoding_utf16); m_strXml=SStringW(writer.buffer(),writer.size()); } endif \u00b6 //\u8bbe\u7f6e\u5f53\u524d\u5bf9\u8c61\u7684\u5c5e\u6027 //\u4f18\u5148\u5904\u7406\"class\"\u5c5e\u6027 pugi::xml_attribute attrClass=xmlNode.attribute(L\"class\"); if(attrClass) { attrClass.set_userdata(1); //\u9884\u5904\u7406\u8fc7\u7684\u5c5e\u6027\uff0c\u7ed9\u5c5e\u6027\u589e\u52a0\u4e00\u4e2a userdata SetAttribute(attrClass.name(), attrClass.value(), TRUE); } for (pugi::xml_attribute attr = xmlNode.first_attribute(); attr; attr = attr.next_attribute()) { if(attr.get_userdata()) continue; //\u5ffd\u7565\u5df2\u7ecf\u88ab\u9884\u5904\u7406\u7684\u5c5e\u6027 SetAttribute(attr.name(), attr.value(), TRUE); } if(attrClass) { attrClass.set_userdata(0); } //\u8c03\u7528\u521d\u59cb\u5316\u5b8c\u6210\u63a5\u53e3 OnInitFinished(xmlNode); return TRUE; } \u5728 InitFromXml \u65b9\u6cd5\u4e2d\uff0c\u9996\u5148\u83b7\u53d6 class \u5c5e\u6027\u4ea4\u7ed9\u5bf9\u8c61\u89e3\u91ca\uff0c\u7136\u540e\u518d\u679a\u4e3e\u5176\u5b83\u5c5e\u6027\u3002 \u83b7\u53d6\u5230\u4e00\u4e2a\u5c5e\u6027\u4ee5\u540e\u8c03\u7528 SOjbect::SetAttribute \u65b9\u6cd5\u6765\u5904\u7406\u5c5e\u6027\u3002 ```cpp class SObject{ public virtual HRESULT SetAttribute(const SStringW & strAttribName, const SStringW & strValue, BOOL bLoading) { return DefAttributeProc(strAttribName,strValue,bLoading); } }; SetAttribute \u662f\u4e00\u4e2a\u865a\u51fd\u6570\uff0c\u6240\u6709\u6d3e\u751f\u7c7b\u90fd\u53ef\u4ee5\u901a\u8fc7\u91cd\u8f7d\u8be5\u65b9\u6cd5\u6765\u5b9e\u73b0\u4e0d\u540c\u5c5e\u6027\u7684\u5904\u7406\u3002 \u5728 SOUI \u4e2d\u63d0\u4f9b\u4e86\u4e00\u7ec4\u5b8f\u6765\u5904\u7406 SObject \u7684\u5c5e\u6027\uff0c\u4e0b\u9762\u770b\u4e00\u4e0b SWindow \u7c7b\u7684\u5b9e\u73b0\uff1a SOUI_ATTRS_BEGIN () ATTR_CUSTOM ( L \"id\" , OnAttrID ) ATTR_STRINGW ( L \"name\" , m_strName , FALSE ) ATTR_CUSTOM ( L \"skin\" , OnAttrSkin ) //\u76f4\u63a5\u83b7\u5f97\u76ae\u80a4\u5bf9\u8c61 ATTR_SKIN ( L \"ncskin\" , m_pNcSkin , TRUE ) //\u76f4\u63a5\u83b7\u5f97\u76ae\u80a4\u5bf9\u8c61 ATTR_CUSTOM ( L \"class\" , OnAttrClass ) //\u83b7\u5f97 style ATTR_INT ( L \"data\" , m_uData , 0 ) ATTR_CUSTOM ( L \"enable\" , OnAttrEnable ) ATTR_CUSTOM ( L \"visible\" , OnAttrVisible ) ATTR_CUSTOM ( L \"show\" , OnAttrVisible ) ATTR_CUSTOM ( L \"display\" , OnAttrDisplay ) ATTR_CUSTOM ( L \"pos\" , OnAttrPos ) ATTR_CUSTOM ( L \"offset\" , OnAttrOffset ) ATTR_CUSTOM ( L \"pos2type\" , OnAttrPos2type ) ATTR_CUSTOM ( L \"cache\" , OnAttrCache ) ATTR_CUSTOM ( L \"alpha\" , OnAttrAlpha ) ATTR_CUSTOM ( L \"layeredWindow\" , OnAttrLayeredWindow ) ATTR_CUSTOM ( L \"trackMouseEvent\" , OnAttrTrackMouseEvent ) ATTR_I18NSTRT ( L \"tip\" , m_strToolTipText , FALSE ) //\u4f7f\u7528\u8bed\u8a00\u5305\u7ffb\u8bd1 ATTR_INT ( L \"msgTransparent\" , m_bMsgTransparent , FALSE ) ATTR_INT ( L \"maxWidth\" , m_nMaxWidth , FALSE ) ATTR_INT ( L \"clipClient\" , m_bClipClient , FALSE ) ATTR_INT ( L \"focusable\" , m_bFocusable , FALSE ) ATTR_INT ( L \"float\" , m_bFloat , FALSE ) ATTR_CHAIN ( m_style ) //\u652f\u6301\u5bf9 style \u4e2d\u7684\u5c5e\u6027\u5b9a\u5236 SOUI_ATTRS_END () ``` SOUI_ATTRS_BEGIN + SOUI_ATTRS_END \u5b8f\u5c55\u5f00\u6784\u6210\u4e00\u4e2a\u7a7a\u7684 SetAttribute \u51fd\u6570\u3002 ATTR_XXX \u5219\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u5c5e\u6027\u63d0\u4f9b\u4e00\u79cd\u56fa\u5b9a\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u5168\u90e8\u5c5e\u6027\u5f62\u6210\u4e00\u4e2a\u5c5e\u6027\u6620\u5c04 \u8868\u3002 \u56e0\u6b64\u8981\u67e5\u5bf9\u8c61\u5c5e\u6027\uff0c\u9996\u5148\u5c31\u662f\u67e5\u5bf9\u8c61\u4ee3\u7801\u4e2d\u5bf9\u5e94\u7684\u5c5e\u6027\u6620\u5c04\u8868\uff0c\u540c\u65f6\u4e5f\u522b\u5fd8\u8bb0\u53bb\u67e5\u5bf9\u8c61\u7684 \u57fa\u7c7b\u7684\u5c5e\u6027\u6620\u5c04\u8868\u3002 \u6709\u4e9b\u5bf9\u8c61\uff08\u5982 Richedit ) \u7684\u5c5e\u6027\u53ef\u80fd\u5728\u8fd9\u4e2a\u5c5e\u6027\u6620\u5c04\u8868\u91cc\u627e\u4e0d\u5230\uff0c\u90a3\u53c8\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f \u6ce8\u610f SetAttribute \u6700\u540e\u8c03\u7528\u4e86 DefAttributeProc \uff0c\u4f7f\u7528\u5c5e\u6027\u6620\u5c04\u8868\u6784\u9020\u7684\u5c5e\u6027\u5904\u7406\u51fd\u6570 \u4e5f\u540c\u6837\u4f1a\u8c03\u7528 DefAttributeProc \u3002 \u5728 DefAttributeProc \u4e2d\u53ef\u4ee5\u6279\u91cf\u7684\u6309\u7167\u81ea\u5df1\u7684\u65b9\u5f0f\u5904\u7406\u5c5e\u6027\u3002\u4e0b\u9762\u770b\u4e00\u4e0b Richedit :: DefAttributeProc \u7684\u5b9e\u73b0\uff1a ``` cpp HRESULT SRichEdit :: DefAttributeProc ( const SStringW & strAttribName , const SStringW & strValue , BOOL bLoading ) { HRESULT hRet = S_FALSE ; DWORD dwBit = 0 , dwMask = 0 ; //hscrollbar if ( strAttribName . CompareNoCase ( L \"hscrollBar\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ WS_HSCROLL ; else m_dwStyle |= WS_HSCROLL ; dwBit |= TXTBIT_SCROLLBARCHANGE ; dwMask |= TXTBIT_SCROLLBARCHANGE ; } //vscrollbar else if ( strAttribName . CompareNoCase ( L \"vscrollBar\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ WS_VSCROLL ; else m_dwStyle |= WS_VSCROLL ; dwBit |= TXTBIT_SCROLLBARCHANGE ; dwMask |= TXTBIT_SCROLLBARCHANGE ; } //auto hscroll else if ( strAttribName . CompareNoCase ( L \"autoHscroll\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ ES_AUTOHSCROLL ; else m_dwStyle |= ES_AUTOHSCROLL ; dwBit |= TXTBIT_SCROLLBARCHANGE ; dwMask |= TXTBIT_SCROLLBARCHANGE ; } //auto hscroll else if ( strAttribName . CompareNoCase ( L \"autoVscroll\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ ES_AUTOVSCROLL ; else m_dwStyle |= ES_AUTOVSCROLL ; dwBit |= TXTBIT_SCROLLBARCHANGE ; dwMask |= TXTBIT_SCROLLBARCHANGE ; } //multilines else if ( strAttribName . CompareNoCase ( L \"multiLines\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ ES_MULTILINE ; else m_dwStyle |= ES_MULTILINE , dwBit |= TXTBIT_MULTILINE ; dwMask |= TXTBIT_MULTILINE ; } //readonly else if ( strAttribName . CompareNoCase ( L \"readOnly\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ ES_READONLY ; else m_dwStyle |= ES_READONLY , dwBit |= TXTBIT_READONLY ; dwMask |= TXTBIT_READONLY ; if ( ! bLoading ) { //update dragdrop OnEnableDragDrop ( ! ( m_dwStyle & ES_READONLY ) && m_fEnableDragDrop ); } } //want return else if ( strAttribName . CompareNoCase ( L \"wantReturn\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ ES_WANTRETURN ; else m_dwStyle |= ES_WANTRETURN ; } //password else if ( strAttribName . CompareNoCase ( L \"password\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ ES_PASSWORD ; else m_dwStyle |= ES_PASSWORD , dwBit |= TXTBIT_USEPASSWORD ; dwMask |= TXTBIT_USEPASSWORD ; } //number else if ( strAttribName . CompareNoCase ( L \"number\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ ES_NUMBER ; else m_dwStyle |= ES_NUMBER ; } //password char else if ( strAttribName . CompareNoCase ( L \"passwordChar\" ) == 0 ) { SStringT strValueT = S_CW2T ( strValue ); m_chPasswordChar = strValueT [ 0 ]; } //enabledragdrop else if ( strAttribName . CompareNoCase ( L \"enableDragdrop\" ) == 0 ) { if ( strValue == L \"0\" ) { m_fEnableDragDrop = FALSE ; } else { m_fEnableDragDrop = TRUE ; } if ( ! bLoading ) { OnEnableDragDrop ( ! ( m_dwStyle & ES_READONLY ) & m_fEnableDragDrop ); } } //auto Sel else if ( strAttribName . CompareNoCase ( L \"autoSel\" ) == 0 ) { if ( strValue == L \"0\" ) { m_fAutoSel = FALSE ; } else { m_fAutoSel = TRUE ; } } else { hRet = __super :: DefAttributeProc ( strAttribName , strValue , bLoading ); } if ( ! bLoading ) { m_pTxtHost -> GetTextService () -> OnTxPropertyBitsChange ( dwMask , dwBit ); hRet = TRUE ; } return hRet ; } \u53ef\u4ee5\u770b\u5230\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u5bf9\u5f88\u591a\u5c5e\u6027\u505a\u4e86\u5904\u7406\u3002 \u603b\u7ed3\uff1a \u5148\u67e5\u76ee\u6807\u5bf9\u8c61\u7684\u5c5e\u6027\u6620\u5c04\u8868\uff0c\u518d\u627e\u57fa\u7c7b\u7684\u5c5e\u6027\u6620\u5c04\u8868\uff0c\u6700\u540e\u67e5\u5bf9\u8c61\u7684 DefAttributeProc\u3002","title":"4.25 \u5728 SOUI \u4e2d\u63a7\u4ef6\u5c5e\u6027\u67e5\u8be2\u65b9\u6cd5"},{"location":"Development/25/#425-soui","text":"SOUI \u9879\u76ee\u7684 SVN \u6839\u76ee\u5f55\u4e0b\u6709\u4e00\u4e2a doc \u76ee\u5f55\uff0c\u4e0b\u9762\u6709\u4e00\u4efd\u63a7\u4ef6\u5c5e\u6027\u8868\u3002\u5305\u542b\u4e86\u5927\u90e8\u5206\u63a7\u4ef6 \u7684\u5927\u90e8\u5206\u5c5e\u6027\uff0c\u4e0d\u8fc7\u4e5f\u4e0d\u4e00\u5b9a\u5b8c\u5168\u51c6\u786e\u3002\u6700\u4fdd\u9669\u7684\u529e\u6cd5\u8fd8\u662f\u67e5\u6e90\u4ee3\u7801\u3002 SOUI \u5bf9\u8c61\u5305\u542b\u63a7\u4ef6\u53ca ISkinObj \u7b49\u4ece SObject \u6d3e\u751f\u7684\u5bf9\u8c61\u90fd\u53ef\u4ee5\u4f7f\u7528 XML \u914d\u7f6e\u5c5e\u6027\u3002\u8981 \u77e5\u9053\u5982\u4f55\u67e5 SOUI \u5bf9\u8c61\u5c5e\u6027\uff0c\u9996\u5148\u8981\u770b\u4e00\u4e0b SOUI \u89e3\u91ca\u5c5e\u6027\u7684\u6d41\u7a0b\u3002 ```cpp BOOL SObject::InitFromXml( pugi::xml_node xmlNode ) { if(!xmlNode) return FALSE;","title":"4.25 \u5728 SOUI \u4e2d\u63a7\u4ef6\u5c5e\u6027\u67e5\u8be2\u65b9\u6cd5"},{"location":"Development/25/#ifdef-_debug","text":"{ pugi::xml_writer_buff writer; xmlNode.print(writer,L\"\\t\",pugi::format_default,pugi::encoding_utf16); m_strXml=SStringW(writer.buffer(),writer.size()); }","title":"ifdef _DEBUG"},{"location":"Development/25/#endif","text":"//\u8bbe\u7f6e\u5f53\u524d\u5bf9\u8c61\u7684\u5c5e\u6027 //\u4f18\u5148\u5904\u7406\"class\"\u5c5e\u6027 pugi::xml_attribute attrClass=xmlNode.attribute(L\"class\"); if(attrClass) { attrClass.set_userdata(1); //\u9884\u5904\u7406\u8fc7\u7684\u5c5e\u6027\uff0c\u7ed9\u5c5e\u6027\u589e\u52a0\u4e00\u4e2a userdata SetAttribute(attrClass.name(), attrClass.value(), TRUE); } for (pugi::xml_attribute attr = xmlNode.first_attribute(); attr; attr = attr.next_attribute()) { if(attr.get_userdata()) continue; //\u5ffd\u7565\u5df2\u7ecf\u88ab\u9884\u5904\u7406\u7684\u5c5e\u6027 SetAttribute(attr.name(), attr.value(), TRUE); } if(attrClass) { attrClass.set_userdata(0); } //\u8c03\u7528\u521d\u59cb\u5316\u5b8c\u6210\u63a5\u53e3 OnInitFinished(xmlNode); return TRUE; } \u5728 InitFromXml \u65b9\u6cd5\u4e2d\uff0c\u9996\u5148\u83b7\u53d6 class \u5c5e\u6027\u4ea4\u7ed9\u5bf9\u8c61\u89e3\u91ca\uff0c\u7136\u540e\u518d\u679a\u4e3e\u5176\u5b83\u5c5e\u6027\u3002 \u83b7\u53d6\u5230\u4e00\u4e2a\u5c5e\u6027\u4ee5\u540e\u8c03\u7528 SOjbect::SetAttribute \u65b9\u6cd5\u6765\u5904\u7406\u5c5e\u6027\u3002 ```cpp class SObject{ public virtual HRESULT SetAttribute(const SStringW & strAttribName, const SStringW & strValue, BOOL bLoading) { return DefAttributeProc(strAttribName,strValue,bLoading); } }; SetAttribute \u662f\u4e00\u4e2a\u865a\u51fd\u6570\uff0c\u6240\u6709\u6d3e\u751f\u7c7b\u90fd\u53ef\u4ee5\u901a\u8fc7\u91cd\u8f7d\u8be5\u65b9\u6cd5\u6765\u5b9e\u73b0\u4e0d\u540c\u5c5e\u6027\u7684\u5904\u7406\u3002 \u5728 SOUI \u4e2d\u63d0\u4f9b\u4e86\u4e00\u7ec4\u5b8f\u6765\u5904\u7406 SObject \u7684\u5c5e\u6027\uff0c\u4e0b\u9762\u770b\u4e00\u4e0b SWindow \u7c7b\u7684\u5b9e\u73b0\uff1a SOUI_ATTRS_BEGIN () ATTR_CUSTOM ( L \"id\" , OnAttrID ) ATTR_STRINGW ( L \"name\" , m_strName , FALSE ) ATTR_CUSTOM ( L \"skin\" , OnAttrSkin ) //\u76f4\u63a5\u83b7\u5f97\u76ae\u80a4\u5bf9\u8c61 ATTR_SKIN ( L \"ncskin\" , m_pNcSkin , TRUE ) //\u76f4\u63a5\u83b7\u5f97\u76ae\u80a4\u5bf9\u8c61 ATTR_CUSTOM ( L \"class\" , OnAttrClass ) //\u83b7\u5f97 style ATTR_INT ( L \"data\" , m_uData , 0 ) ATTR_CUSTOM ( L \"enable\" , OnAttrEnable ) ATTR_CUSTOM ( L \"visible\" , OnAttrVisible ) ATTR_CUSTOM ( L \"show\" , OnAttrVisible ) ATTR_CUSTOM ( L \"display\" , OnAttrDisplay ) ATTR_CUSTOM ( L \"pos\" , OnAttrPos ) ATTR_CUSTOM ( L \"offset\" , OnAttrOffset ) ATTR_CUSTOM ( L \"pos2type\" , OnAttrPos2type ) ATTR_CUSTOM ( L \"cache\" , OnAttrCache ) ATTR_CUSTOM ( L \"alpha\" , OnAttrAlpha ) ATTR_CUSTOM ( L \"layeredWindow\" , OnAttrLayeredWindow ) ATTR_CUSTOM ( L \"trackMouseEvent\" , OnAttrTrackMouseEvent ) ATTR_I18NSTRT ( L \"tip\" , m_strToolTipText , FALSE ) //\u4f7f\u7528\u8bed\u8a00\u5305\u7ffb\u8bd1 ATTR_INT ( L \"msgTransparent\" , m_bMsgTransparent , FALSE ) ATTR_INT ( L \"maxWidth\" , m_nMaxWidth , FALSE ) ATTR_INT ( L \"clipClient\" , m_bClipClient , FALSE ) ATTR_INT ( L \"focusable\" , m_bFocusable , FALSE ) ATTR_INT ( L \"float\" , m_bFloat , FALSE ) ATTR_CHAIN ( m_style ) //\u652f\u6301\u5bf9 style \u4e2d\u7684\u5c5e\u6027\u5b9a\u5236 SOUI_ATTRS_END () ``` SOUI_ATTRS_BEGIN + SOUI_ATTRS_END \u5b8f\u5c55\u5f00\u6784\u6210\u4e00\u4e2a\u7a7a\u7684 SetAttribute \u51fd\u6570\u3002 ATTR_XXX \u5219\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u5c5e\u6027\u63d0\u4f9b\u4e00\u79cd\u56fa\u5b9a\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u5168\u90e8\u5c5e\u6027\u5f62\u6210\u4e00\u4e2a\u5c5e\u6027\u6620\u5c04 \u8868\u3002 \u56e0\u6b64\u8981\u67e5\u5bf9\u8c61\u5c5e\u6027\uff0c\u9996\u5148\u5c31\u662f\u67e5\u5bf9\u8c61\u4ee3\u7801\u4e2d\u5bf9\u5e94\u7684\u5c5e\u6027\u6620\u5c04\u8868\uff0c\u540c\u65f6\u4e5f\u522b\u5fd8\u8bb0\u53bb\u67e5\u5bf9\u8c61\u7684 \u57fa\u7c7b\u7684\u5c5e\u6027\u6620\u5c04\u8868\u3002 \u6709\u4e9b\u5bf9\u8c61\uff08\u5982 Richedit ) \u7684\u5c5e\u6027\u53ef\u80fd\u5728\u8fd9\u4e2a\u5c5e\u6027\u6620\u5c04\u8868\u91cc\u627e\u4e0d\u5230\uff0c\u90a3\u53c8\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f \u6ce8\u610f SetAttribute \u6700\u540e\u8c03\u7528\u4e86 DefAttributeProc \uff0c\u4f7f\u7528\u5c5e\u6027\u6620\u5c04\u8868\u6784\u9020\u7684\u5c5e\u6027\u5904\u7406\u51fd\u6570 \u4e5f\u540c\u6837\u4f1a\u8c03\u7528 DefAttributeProc \u3002 \u5728 DefAttributeProc \u4e2d\u53ef\u4ee5\u6279\u91cf\u7684\u6309\u7167\u81ea\u5df1\u7684\u65b9\u5f0f\u5904\u7406\u5c5e\u6027\u3002\u4e0b\u9762\u770b\u4e00\u4e0b Richedit :: DefAttributeProc \u7684\u5b9e\u73b0\uff1a ``` cpp HRESULT SRichEdit :: DefAttributeProc ( const SStringW & strAttribName , const SStringW & strValue , BOOL bLoading ) { HRESULT hRet = S_FALSE ; DWORD dwBit = 0 , dwMask = 0 ; //hscrollbar if ( strAttribName . CompareNoCase ( L \"hscrollBar\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ WS_HSCROLL ; else m_dwStyle |= WS_HSCROLL ; dwBit |= TXTBIT_SCROLLBARCHANGE ; dwMask |= TXTBIT_SCROLLBARCHANGE ; } //vscrollbar else if ( strAttribName . CompareNoCase ( L \"vscrollBar\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ WS_VSCROLL ; else m_dwStyle |= WS_VSCROLL ; dwBit |= TXTBIT_SCROLLBARCHANGE ; dwMask |= TXTBIT_SCROLLBARCHANGE ; } //auto hscroll else if ( strAttribName . CompareNoCase ( L \"autoHscroll\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ ES_AUTOHSCROLL ; else m_dwStyle |= ES_AUTOHSCROLL ; dwBit |= TXTBIT_SCROLLBARCHANGE ; dwMask |= TXTBIT_SCROLLBARCHANGE ; } //auto hscroll else if ( strAttribName . CompareNoCase ( L \"autoVscroll\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ ES_AUTOVSCROLL ; else m_dwStyle |= ES_AUTOVSCROLL ; dwBit |= TXTBIT_SCROLLBARCHANGE ; dwMask |= TXTBIT_SCROLLBARCHANGE ; } //multilines else if ( strAttribName . CompareNoCase ( L \"multiLines\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ ES_MULTILINE ; else m_dwStyle |= ES_MULTILINE , dwBit |= TXTBIT_MULTILINE ; dwMask |= TXTBIT_MULTILINE ; } //readonly else if ( strAttribName . CompareNoCase ( L \"readOnly\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ ES_READONLY ; else m_dwStyle |= ES_READONLY , dwBit |= TXTBIT_READONLY ; dwMask |= TXTBIT_READONLY ; if ( ! bLoading ) { //update dragdrop OnEnableDragDrop ( ! ( m_dwStyle & ES_READONLY ) && m_fEnableDragDrop ); } } //want return else if ( strAttribName . CompareNoCase ( L \"wantReturn\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ ES_WANTRETURN ; else m_dwStyle |= ES_WANTRETURN ; } //password else if ( strAttribName . CompareNoCase ( L \"password\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ ES_PASSWORD ; else m_dwStyle |= ES_PASSWORD , dwBit |= TXTBIT_USEPASSWORD ; dwMask |= TXTBIT_USEPASSWORD ; } //number else if ( strAttribName . CompareNoCase ( L \"number\" ) == 0 ) { if ( strValue == L \"0\" ) m_dwStyle &=~ ES_NUMBER ; else m_dwStyle |= ES_NUMBER ; } //password char else if ( strAttribName . CompareNoCase ( L \"passwordChar\" ) == 0 ) { SStringT strValueT = S_CW2T ( strValue ); m_chPasswordChar = strValueT [ 0 ]; } //enabledragdrop else if ( strAttribName . CompareNoCase ( L \"enableDragdrop\" ) == 0 ) { if ( strValue == L \"0\" ) { m_fEnableDragDrop = FALSE ; } else { m_fEnableDragDrop = TRUE ; } if ( ! bLoading ) { OnEnableDragDrop ( ! ( m_dwStyle & ES_READONLY ) & m_fEnableDragDrop ); } } //auto Sel else if ( strAttribName . CompareNoCase ( L \"autoSel\" ) == 0 ) { if ( strValue == L \"0\" ) { m_fAutoSel = FALSE ; } else { m_fAutoSel = TRUE ; } } else { hRet = __super :: DefAttributeProc ( strAttribName , strValue , bLoading ); } if ( ! bLoading ) { m_pTxtHost -> GetTextService () -> OnTxPropertyBitsChange ( dwMask , dwBit ); hRet = TRUE ; } return hRet ; } \u53ef\u4ee5\u770b\u5230\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u5bf9\u5f88\u591a\u5c5e\u6027\u505a\u4e86\u5904\u7406\u3002 \u603b\u7ed3\uff1a \u5148\u67e5\u76ee\u6807\u5bf9\u8c61\u7684\u5c5e\u6027\u6620\u5c04\u8868\uff0c\u518d\u627e\u57fa\u7c7b\u7684\u5c5e\u6027\u6620\u5c04\u8868\uff0c\u6700\u540e\u67e5\u5bf9\u8c61\u7684 DefAttributeProc\u3002","title":"endif"},{"location":"Development/26/","text":"4.26 \u4f7f\u7528 SOUI \u7684 SMCListView \u63a7\u4ef6 \u00b6 \u5217\u8868\u63a7\u4ef6\u662f\u5ba2\u6237\u7aef\u5e94\u7528\u6700\u5e38\u7528\u7684\u63a7\u4ef6\u4e4b\u4e00\u3002\u5217\u8868\u63a7\u4ef6\u901a\u5e38\u53ea\u8d1f\u8d23\u663e\u793a\u6570\u636e\uff0c\u6700\u591a\u901a\u77e5\u4e00\u4e0b APP \u5217\u8868\u884c\u7684\u9009\u4e2d\u72b6\u6001\u53d8\u5316\u3002 \u73b0\u5728\u7684 UI \u7ecf\u5e38\u8981\u6c42\u7a0b\u5e8f\u733f\u5728\u5217\u8868\u63a7\u4ef6\u91cc\u4e0d\u5149\u663e\u793a\u5185\u5bb9\uff0c\u8fd8\u8981\u80fd\u548c\u7528\u6237\u4ea4\u4e92\uff0c\u663e\u793a\u52a8\u753b\u7b49 \u7b49\uff0c\u4f20\u7edf\u7684\u5217\u8868\u63a7\u4ef6\u5bf9\u4e8e\u8fd9\u6837\u7684\u9700\u6c42\u57fa\u672c\u662f\u65e0\u80fd\u4e3a\u529b\u4e86\u3002 Android \u5f00\u53d1\u4e2d\u5f88\u591a\u754c\u9762\u90fd\u76f4\u63a5\u91c7\u7528 ListView \u5b9e\u73b0\uff0cListView \u4e2d\u6bcf\u4e00\u4e2a Item \u4e2d\u90fd\u53ef\u4ee5\u5bb9 \u7eb3\u5176\u5b83\u63a7\u4ef6\uff0c\u8fd9\u6837\u7684\u8bbe\u8ba1\u4f7f\u5f97\u5728\u8868\u9879\u4e2d\u7684\u4ea4\u4e92\u548c\u5728\u4e3b\u9762\u677f\u4e0a\u4ea4\u4e92\u4e00\u6837\u7b80\u5355\u3002 \u867d\u7136\u5728\u5217\u8868\u9879\u4e2d\u5bb9\u7eb3\u5176\u5b83\u63a7\u4ef6\u5e76\u4e0d\u662f\u4ec0\u4e48\u65b0\u7684\u601d\u60f3\uff0c\u8003\u8651\u5230\u5217\u8868\u4e2d\u7684\u6570\u636e\u91cf\u662f\u4e0d\u786e\u5b9a\u7684\uff0c \u5982\u679c\u7ed9\u6bcf\u4e00\u4e2a\u8868\u9879\u7684\u5206\u914d\u4e00\u4e2a\u5bb9\u5668\u7a97\u53e3\uff0c\u7cfb\u7edf\u7684\u5185\u5b58\u5360\u7528\u53ca\u6548\u7387\u90fd\u6210\u95ee\u9898\u3002 \u8fd8\u597d Andriod \u5f00\u6e90\uff0c\u7b80\u5355\u770b\u4e00\u4e0b Android \u91cc ListView \u63a7\u4ef6\u7684\u6e90\u4ee3\u7801\u5c31\u53ef\u4ee5\u53d1\u73b0\uff0c Android \u5b9e\u73b0\u7684 ListView \u5173\u952e\u5728\u4e8e\u5bb9\u5668\u7a97\u53e3\u7684\u91cd\u7528\u3002 \u501f\u9274 Andriod ListView \u63a7\u4ef6\u7684\u601d\u60f3\uff0c\u5728 SOUI \u4e2d\u4e5f\u5b9e\u73b0\u4e86\u5bf9\u5e94\u7684 ListView \u63a7\u4ef6\u3002\u4f46\u662f ListView \u53ea\u6709\u4e00\u5217\uff0c\u663e\u793a\u663e\u793a\u590d\u6742\u5185\u5bb9\u95ee\u9898\u4e0d\u5927\uff0c\u4f46\u662f\u4e0d\u80fd\u8c03\u6574\u5217\u5bbd\u7b49\uff0c\u548c\u4e00\u4e2a ListCtrl \u7684\u529f\u80fd\u8fd8\u662f\u6709\u4e9b\u5dee\u8ddd\u3002 \u591a\u5217\u5217\u8868\u548c\u5355\u5217\u8868\u6700\u5927\u7684\u533a\u522b\u5728\u4e8e\u591a\u4e86\u4e00\u4e2a\u8868\u5934\uff0c\u6838\u5fc3\u7684\u4e1c\u897f\u5e76\u6ca1\u6709\u533a\u522b\uff0c\u7ecf\u8fc7\u8fd1 3 \u5929\u7684 \u7f16\u7801\u8c03\u8bd5\uff0c\u7ec8\u4e8e\u5b8c\u6210\u4e86\u8fd9\u4e2a\u9769\u547d\u6027\u7684\u63a7\u4ef6\uff08\u81f3\u5c11\u6211\u8ba4\u4e3a\u662f Windows UI \u4e0a\u9769\u547d\u6027\u7684\uff09\u3002 \u5148\u770b\u4e0b\u6548\u679c\uff1a SMCListView \u63a7\u4ef6\u7684\u4f7f\u7528\uff1a XML \u914d\u7f6e\uff1a \u8981\u4f7f\u7528\u8fd9\u4e2a\u5217\u8868\u63a7\u4ef6\uff0c\u9996\u5148\u5e94\u8be5\u5728 XML \u4e2d\u5b9a\u4e49\u8be5\u63a7\u4ef6\u7684\u4f4d\u7f6e\u53ca\u5c5e\u6027\uff0c\u53c2\u8003\u4e0b\u9762\u6458\u81ea demo \u7684\u4ee3\u7801\uff1a <mclistview name= \"mclv_test\" colorBkgnd= \"#ffffff\" pos= \"10,10,-10,-10\" headerHeight= \"30\" > <header align= \"center\" sortSkin= \"skin_lcex_header_arrow\" itemSkin= \"skin_lcex_header\" itemSwapEnable= \"1\" fixWidth= \"0\" font= \"underline:0,adding:-3\" sortHeader= \"1\" colorBkgnd= \"#ffffff\" > <items> <item width= \"480\" > \u8f6f\u4ef6\u540d\u79f0 </item> <item width= \"95\" > \u8f6f\u4ef6\u8bc4\u5206 </item> <item width= \"100\" > \u5927\u5c0f </item> <item width= \"100\" > \u5b89\u88c5\u65f6\u95f4 </item> <item width= \"100\" > \u4f7f\u7528\u9891\u7387 </item> <item width= \"100\" > \u64cd\u4f5c </item> </items> </header> <template itemHeight= \"80\" colorHover= \"#cccccc\" colorSelected= \"#0000ff\" id= \"30000\" > <window name= \"col1\" > <img name= \"img_icon\" skin= \"skin_icon6\" pos= \"10,8,@64,@64\" /> <text name= \"txt_name\" pos= \"[5,16\" font= \"bold:1,adding:-1\" > \u706b\u72d0\u6d4f \u89c8\u5668 </text> <text name= \"txt_desc\" pos= \"{0,36,-10,-10\" font= \"bold:1,adding:- 4\" dotted= \"1\" > \u901f\u5ea6\u6700\u5feb\u7684\u6d4f\u89c8\u5668 </text> <text name= \"txt_index\" pos= \"|0,|0\" offset= \"-0.5,-0.5\" font= \"adding:10\" colorText= \"#ff000088\" > 10 </text> </window> <window name= \"col2\" > <ratingbar name= \"rating_score\" starSkin= \"skin_star1\" starNum= \"5\" value= \"3.5\" pos= \"10,16\" /> <text name= \"txt_score\" pos= \"15,36,50,-16\" font= \"adding:- 5\" > 8.5 \u5206 </text> <link pos= \"[5,36,@30,-16\" cursor= \"hand\" colorText= \"#1e78d5\" href= \"www.163.com\" font= \"adding:-5\" > \u6295\u7968 </link> </window> <window name= \"col3\" > <text name= \"txt_size\" pos= \"0,26,-0,-26\" font= \"adding:-4\" align= \"center\" > 85.92M </text> </window> <window name= \"col4\" > <text name= \"txt_installtime\" pos= \"0,26,-0,-26\" font= \"adding:-4\" align= \"center\" > 2015-01-09 </text> </window> <window name= \"col5\" > <text name= \"txt_usetime\" pos= \"0,26,-0,-26\" font= \"adding:-4\" align= \"center\" > \u4eca\u5929 </text> <animateimg pos= \"|0,|0\" offset= \"-0.5,-0.5\" skin= \"skin_busy\" name= \"ani_test\" tip= \"animateimg is used here\" msgTransparent= \"0\" /> </window> <window name= \"col6\" > <imgbtn animate= \"1\" pos= \"|-35,|-14\" font= \"adding:-3\" align= \"center\" skin= \"skin_install\" name= \"btn_uninstall\" > \u5378\u8f7d </imgbtn> </window> </template> </mclistview> ``` mclistview \u6709\u4e00\u4e2a\u5c5e\u6027 headerHeight\uff0c\u8be5\u5c5e\u6027\u5b9a\u4e49\u8868\u5934\u7684\u663e\u793a\u9ad8\u5ea6\u3002 \u8282\u70b9\u4e0b\u6709\u4e00\u4e2a header \u63a7\u4ef6\uff0c\u7528\u6765\u5b9a\u4e49\u8868\u5934\u63a7\u4ef6\u7684\u6837\u5f0f\uff0c\u90fd\u5f88\u7b80\u5355\uff0c\u81ea\u5df1\u770b XML\u3002 \u6700\u5173\u952e\u7684\u5728\u4e8e\u4e0b\u9762\u7684 template\uff08\u6a21\u677f\uff09\u8282\u70b9\uff0c\u8be5 XML \u8282\u70b9\u7528\u6765\u5b9a\u4e49\u5982\u4f55\u663e\u793a\u5217\u8868\u9879\u3002 \u6a21\u677f\u5185\u6837\u5f0f\u7684\u5b9a\u4e49\u5176\u5b9e\u5e76\u6ca1\u6709\u7279\u522b\u7684\u89c4\u5b9a\uff0c\u56e0\u4e3a\u6700\u540e\u5982\u4f55\u89e3\u6790\u8fd9\u4e2a\u6a21\u677f\u662f\u7531 APP \u51b3\u5b9a\u7684\uff0c \u4f46\u63a8\u8350\u4f7f\u7528\u4e0a\u9762\u7684\u6837\u5f0f\uff1atemplate \u8282\u70b9\u4e0b\u4e3a\u6bcf\u4e00\u5217\u5b9a\u4e49\u4e00\u4e2a window \u8282\u70b9\uff0c\u53ea\u9700\u8981\u6307\u5b9a \u4e00\u4e2a name \u5c5e\u6027\uff08\u5f53\u7136\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5176\u5b83\u7684\u7a97\u53e3\u5c5e\u6027\uff0c\u5e03\u5c40\u5c5e\u6027\u65e0\u6548\uff09\u3002\u5728\u8be5 window \u8282\u70b9 \u4e0b\u53ef\u4ee5\u5b9a\u4e49\u4efb\u610f\u7684\u5176\u5b83\u63a7\u4ef6\u3002 \u4ee3\u7801\u7f16\u5199\uff1a \u548c listview \u63a7\u4ef6\u4e00\u6837\uff0cmclistview \u4e5f\u9700\u8981 XML \u548c\u4ee3\u7801\u914d\u5408\u624d\u80fd\u6b63\u786e\u663e\u793a\u6570\u636e\u3002 \u8981\u4f7f\u7528 mclistview\uff0c\u9996\u5148\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u6570\u636e\u9002\u914d\u5668\uff08IMcAdapter\uff0c\u7ee7\u627f\u81ea SListView \u4e2d \u5b9e\u73b0\u7684 IAdapter)\uff0c\u8fd8\u662f\u5148\u770b demo \u4e2d\u7684\u5b9e\u73b0\uff1a ```cpp class CTestMcAdapterFix : public SMcAdapterBase { public: struct SOFTINFO { wchar_t * pszSkinName; wchar_t * pszName; wchar_t * pszDesc; float fScore; DWORD dwSize; wchar_t * pszInstallTime; wchar_t * pszUseTime; }; static SOFTINFO s_info[]; public: CTestMcAdapterFix() { } virtual int getCount() { return 12340; } SStringT getSizeText(DWORD dwSize) { int num1=dwSize/(1 < <20 ); dwSize -= num1 *(1<<20); int num2 = dwSize*100/(1<<20); return SStringT().Format(_T(\"%d.%02dM\"),num1,num2); } virtual void getView(int position, SWindow * pItem,pugi::xml_node xmlTemplate) { if(pItem- > GetChildrenCount()==0) { pItem->InitFromXml(xmlTemplate); } int dataSize = 7; SOFTINFO *psi = s_info+position%dataSize; pItem->FindChildByName(L\"img_icon\")->SetAttribute(L\"skin\",psi->pszSkinName); pItem->FindChildByName(L\"txt_name\")->SetWindowText(S_CW2T(psi->pszName)); pItem->FindChildByName(L\"txt_desc\")->SetWindowText(S_CW2T(psi->pszDesc)); pItem->FindChildByName(L\"txt_score\")->SetWindowText(SStringT().Format(_T(\"%1 .2f \u5206\"),psi->fScore)); pItem->FindChildByName(L\"txt_installtime\")->SetWindowText(S_CW2T(psi->pszIns tallTime)); pItem->FindChildByName(L\"txt_usetime\")->SetWindowText(S_CW2T(psi->pszUseTime )); pItem->FindChildByName(L\"txt_size\")->SetWindowText(getSizeText(psi->dwSize)) ; pItem->FindChildByName2 <SRatingBar> (L\"rating_score\")->SetValue(psi->fScore/2 ); pItem->FindChildByName(L\"txt_index\")->SetWindowText(SStringT().Format(_T(\" \u7b2c%d \u884c\"),position)); SButton *pBtnUninstall = pItem->FindChildByName2 <SButton> (L\"btn_uninstall\"); pBtnUninstall->SetUserData(position); pBtnUninstall->GetEventSet()->subscribeEvent(EVT_CMD,Subscriber( & CTestMcAdap terFix::OnButtonClick,this)); } bool OnButtonClick(EventArgs *pEvt) { SButton *pBtn = sobj_cast <SButton> (pEvt->sender); int iItem = pBtn->GetUserData(); SMessageBox(NULL,SStringT().Format(_T(\"button of %d item was clicked\"),iItem),_T(\"uninstall\"),MB_OK); return true; } SStringW GetColumnName(int iCol) const{ return SStringW().Format(L\"col%d\",iCol+1); } struct SORTCTX { int iCol; SHDSORTFLAG stFlag; }; bool OnSort(int iCol,SHDSORTFLAG * stFlags,int nCols) { if(iCol==5) //\u6700\u540e\u4e00\u5217\u201c\u64cd\u4f5c\u201d\u4e0d\u652f\u6301\u6392\u5e8f return false; SHDSORTFLAG stFlag = stFlags[iCol]; switch(stFlag) { case ST_NULL:stFlag = ST_UP;break; case ST_DOWN:stFlag = ST_UP;break; case ST_UP:stFlag = ST_DOWN;break; } for(int i=0;i <nCols ;i++) { stFlags[i]=ST_NULL; } stFlags[iCol]=stFlag; SORTCTX ctx= {iCol,stFlag}; qsort_s(s_info,7,sizeof(SOFTINFO),SortCmp,&ctx); return true; } static int __cdecl SortCmp(void *context,const void * p1,const void * p2) { SORTCTX * pctx = (SORTCTX*)context; const SOFTINFO * pSI1= (const SOFTINFO*)p1; const SOFTINFO * pSI2= (const SOFTINFO*)p2; int nRet = 0; switch(pctx- > iCol) { case 0://name nRet = wcscmp(pSI1->pszName,pSI2->pszName); break; case 1://score { float fCmp = (pSI1->fScore - pSI2->fScore); if(fabs(fCmp) <0.0000001 ) nRet = 0; else if(fCmp > 0.0f) nRet = 1; else nRet = -1; } break; case 2://size nRet = (int)(pSI1->dwSize - pSI2->dwSize); break; case 3://install time nRet = wcscmp(pSI1->pszInstallTime,pSI2->pszInstallTime); break; case 4://user time nRet = wcscmp(pSI1->pszUseTime,pSI2->pszUseTime); break; } if(pctx->stFlag == ST_UP) nRet = -nRet; return nRet; } }; CTestMcAdapterFix::SOFTINFO CTestMcAdapterFix::s_info[] = { { L\"skin_icon1\", L\"\u9c81\u5927\u5e08\", L\"\u9c81\u5927\u5e08\u662f\u4e00\u6b3e\u4e13\u4e1a\u7684\u786c\u4ef6\u68c0\u6d4b\uff0c\u9a71\u52a8\u5b89\u88c5\u5de5\u5177\", 5.4f, 15*(1 < <20 ), L\"2015-8-5\", L\"\u4eca\u5929\" }, { L\"skin_icon2\", L\"PhotoShop\", L\"\u5f3a\u5927\u7684\u56fe\u7247\u5904\u7406\u5de5\u5177\", 9.0f, 150*(1<<20), L\"2015-8-5\", L\"\u4eca\u5929\" }, { L\"skin_icon3\", L\"QQ7.0\", L\"\u817e\u8baf\u516c\u53f8\u51fa\u54c1\u7684\u5373\u65f6\u804a\u5929\u5de5\u5177\", 8.0f, 40*(1<<20), L\"2015-8-5\", L\"\u4eca\u5929\" }, { L\"skin_icon4\", L\"Visual Studio 2008\", L\"Microsoft \u516c\u53f8\u7684\u7a0b\u5e8f\u5f00\u53d1\u5957\u4ef6\", 9.0f, 40*(1<<20), L\"2015-8-5\", L\"\u4eca\u5929\" }, { L\"skin_icon5\", L\"YY8\", L\"YY \u8bed\u97f3\", 9.0f, 20*(1<<20), L\"2015-8-5\", L\"\u4eca\u5929\" }, { L\"skin_icon6\", L\"\u706b\u72d0\u6d4f\u89c8\u5668\", L\"\u901f\u5ea6\u6700\u5feb\u7684\u6d4f\u89c8\u5668\", 8.5f, 35*(1<<20), L\"2015-8-5\", L\"\u4eca\u5929\" }, { L\"skin_icon7\", L\"\u8fc5\u96f7\", L\"\u8fc5\u96f7\u4e0b\u8f7d\u8f6f\u4ef6\", 7.3f, 17*(1<<20), L\"2015-8-5\", L\"\u4eca\u5929\" } }; \u6ce8\u610f CTestMcAdapterFix::getView \u865a\u51fd\u6570\uff0c\u4e0a\u9762\u63d0\u5230\u7684 template \u4f1a\u901a\u8fc7\u8be5\u51fd\u6570\u7684\u53c2\u6570 pugi::xml_node xmlTemplate \u4f20\u9012\u8fc7\u6765\u3002 \u5728 getView \u4e2d\uff0c\u9996\u5148\u9700\u8981\u5224\u65ad\u8868\u9879\u5bb9\u5668\u7684\u5b50\u7a97\u53e3\u662f\u4e0d\u662f\u5df2\u7ecf\u88ab\u521d\u59cb\u5316\u8fc7\uff0c\u5982\u679c\u6ca1\u6709\u5c31\u6267\u884c InitFromXml \u5982\u4e0b\uff1a if ( pItem -> GetChildrenCount () == 0 ) { pItem -> InitFromXml ( xmlTemplate ); } \u5728\u5b50\u7a97\u53e3\u521d\u59cb\u5316\u5b8c\u6210\u540e\uff0c\u8fd8\u9700\u8981\u4ece\u6570\u636e\u8868\u4e2d\u83b7\u53d6\u5bf9\u5e94\u9879\u7684\u6570\u636e\u586b\u5145\u5230\u63a7\u4ef6\u4e2d\u663e\u793a\uff1a int dataSize = 7 ; SOFTINFO * psi = s_info + position % dataSize ; pItem -> FindChildByName ( L \"img_icon\" ) -> SetAttribute ( L \"skin\" , psi -> pszSkinName ); pItem -> FindChildByName ( L \"txt_name\" ) -> SetWindowText ( S_CW2T ( psi -> pszName )); pItem -> FindChildByName ( L \"txt_desc\" ) -> SetWindowText ( S_CW2T ( psi -> pszDesc )); pItem -> FindChildByName ( L \"txt_score\" ) -> SetWindowText ( SStringT (). Format ( _T ( \"%1 .2f \u5206 \"),psi->fScore)); pItem -> FindChildByName ( L \"txt_installtime\" ) -> SetWindowText ( S_CW2T ( psi -> pszIns tallTime )); pItem -> FindChildByName ( L \"txt_usetime\" ) -> SetWindowText ( S_CW2T ( psi -> pszUseTime )); pItem -> FindChildByName ( L \"txt_size\" ) -> SetWindowText ( getSizeText ( psi -> dwSize )) ; pItem -> FindChildByName2 < SRatingBar > ( L \"rating_score\" ) -> SetValue ( psi -> fScore / 2 ); pItem -> FindChildByName ( L \"txt_index\" ) -> SetWindowText ( SStringT (). Format ( _T ( \" \u7b2c % d \u884c \"),position)); \u548c\u4e3b\u9762\u677f\u4e0a\u7684\u63a7\u4ef6\u54cd\u5e94\u4e0d\u540c\uff0c\u8981\u54cd\u5e94\u8868\u9879\u4e2d\u63a7\u4ef6\u7684\u4e8b\u4ef6\uff0c\u6ca1\u6709\u4e8b\u4ef6\u6620\u5c04\u8868\u53ef\u4ee5\u4f7f\u7528\uff0c\u53ef\u80fd \u5728 IMcAdapter \u7684\u5b9e\u73b0\u4e2d\u4f7f\u7528\u63a7\u4ef6\u7684 GetEventSet()->subscribeEvent \u65b9\u6cd5\u6765\u54cd\u5e94\uff1a SButton * pBtnUninstall = pItem -> FindChildByName2 < SButton > ( L \"btn_uninstall\" ); pBtnUninstall -> SetUserData ( position ); pBtnUninstall -> GetEventSet () -> subscribeEvent ( EVT_CMD , Subscriber ( & CTestMcAdap terFix :: OnButtonClick , this )); \u9664\u4e86 getView \u8fd9\u4e2a\u65b9\u6cd5\u5916\uff0c\u76f8\u5bf9\u4e8e IAdapter\uff0cIMcAdapter \u8fd8\u9700\u8981\u5b9e\u73b0\u53e6\u5916\u4e24\u4e2a\u975e\u5e38\u91cd \u8981\u7684\u65b9\u6cd5\uff1a interface IMcAdapter : public IAdapter { //\u83b7\u53d6\u5217\u540d virtual SStringW GetColumnName ( int iCol ) const PURE ; //\u6392\u5e8f\u63a5\u53e3 // int iCol:\u6392\u5e8f\u5217 // SHDSORTFLAG * stFlags [in, out]:\u5f53\u524d\u5217\u6392\u5e8f\u6807\u5fd7 // int nCols:\u603b\u5217\u6570,stFlags \u6570\u7ec4\u957f\u5ea6 virtual bool OnSort ( int iCol , SHDSORTFLAG * stFlags , int nCols ) PURE ; }; \u5b9e\u73b0 GetColumnName \u65b9\u6cd5\u6765\u83b7\u53d6\u6bcf\u4e00\u5217\u5bf9\u5e94\u7684\u5b50\u7a97\u53e3\u540d\u79f0\uff0cSMcListView \u901a\u8fc7\u5b83\u6765\u786e \u5b9e template \u4e2d\u7684\u5b50\u7a97\u53e3\u54ea\u4e00\u4e2a\u5e94\u8be5\u663e\u793a\u5728\u4ec0\u4e48\u4f4d\u7f6e\uff0c\u8fd4\u56de\u5728 template \u4e2d\u5b9a\u4e49\u7684\u5b50\u8282\u70b9\u7684 name \u5373\u53ef\u3002 \u5b9e\u73b0 OnSort \u6765\u5904\u7406\u8868\u5934\u70b9\u51fb\u4e8b\u4ef6\uff0c\u4ee5\u786e\u5b9e\u5982\u4f55\u5bf9\u6570\u636e\u6392\u5e8f\u3002 \u81f3\u6b64\uff0c\u8fd9\u4e2a\u8d85\u7ea7\u5217\u8868\u63a7\u4ef6\u7684\u4f7f\u7528\u5c31\u5b8c\u6210\u4e86\u3002","title":"4.26 \u4f7f\u7528 SOUI \u7684 SMCListView \u63a7\u4ef6"},{"location":"Development/26/#426-soui-smclistview","text":"\u5217\u8868\u63a7\u4ef6\u662f\u5ba2\u6237\u7aef\u5e94\u7528\u6700\u5e38\u7528\u7684\u63a7\u4ef6\u4e4b\u4e00\u3002\u5217\u8868\u63a7\u4ef6\u901a\u5e38\u53ea\u8d1f\u8d23\u663e\u793a\u6570\u636e\uff0c\u6700\u591a\u901a\u77e5\u4e00\u4e0b APP \u5217\u8868\u884c\u7684\u9009\u4e2d\u72b6\u6001\u53d8\u5316\u3002 \u73b0\u5728\u7684 UI \u7ecf\u5e38\u8981\u6c42\u7a0b\u5e8f\u733f\u5728\u5217\u8868\u63a7\u4ef6\u91cc\u4e0d\u5149\u663e\u793a\u5185\u5bb9\uff0c\u8fd8\u8981\u80fd\u548c\u7528\u6237\u4ea4\u4e92\uff0c\u663e\u793a\u52a8\u753b\u7b49 \u7b49\uff0c\u4f20\u7edf\u7684\u5217\u8868\u63a7\u4ef6\u5bf9\u4e8e\u8fd9\u6837\u7684\u9700\u6c42\u57fa\u672c\u662f\u65e0\u80fd\u4e3a\u529b\u4e86\u3002 Android \u5f00\u53d1\u4e2d\u5f88\u591a\u754c\u9762\u90fd\u76f4\u63a5\u91c7\u7528 ListView \u5b9e\u73b0\uff0cListView \u4e2d\u6bcf\u4e00\u4e2a Item \u4e2d\u90fd\u53ef\u4ee5\u5bb9 \u7eb3\u5176\u5b83\u63a7\u4ef6\uff0c\u8fd9\u6837\u7684\u8bbe\u8ba1\u4f7f\u5f97\u5728\u8868\u9879\u4e2d\u7684\u4ea4\u4e92\u548c\u5728\u4e3b\u9762\u677f\u4e0a\u4ea4\u4e92\u4e00\u6837\u7b80\u5355\u3002 \u867d\u7136\u5728\u5217\u8868\u9879\u4e2d\u5bb9\u7eb3\u5176\u5b83\u63a7\u4ef6\u5e76\u4e0d\u662f\u4ec0\u4e48\u65b0\u7684\u601d\u60f3\uff0c\u8003\u8651\u5230\u5217\u8868\u4e2d\u7684\u6570\u636e\u91cf\u662f\u4e0d\u786e\u5b9a\u7684\uff0c \u5982\u679c\u7ed9\u6bcf\u4e00\u4e2a\u8868\u9879\u7684\u5206\u914d\u4e00\u4e2a\u5bb9\u5668\u7a97\u53e3\uff0c\u7cfb\u7edf\u7684\u5185\u5b58\u5360\u7528\u53ca\u6548\u7387\u90fd\u6210\u95ee\u9898\u3002 \u8fd8\u597d Andriod \u5f00\u6e90\uff0c\u7b80\u5355\u770b\u4e00\u4e0b Android \u91cc ListView \u63a7\u4ef6\u7684\u6e90\u4ee3\u7801\u5c31\u53ef\u4ee5\u53d1\u73b0\uff0c Android \u5b9e\u73b0\u7684 ListView \u5173\u952e\u5728\u4e8e\u5bb9\u5668\u7a97\u53e3\u7684\u91cd\u7528\u3002 \u501f\u9274 Andriod ListView \u63a7\u4ef6\u7684\u601d\u60f3\uff0c\u5728 SOUI \u4e2d\u4e5f\u5b9e\u73b0\u4e86\u5bf9\u5e94\u7684 ListView \u63a7\u4ef6\u3002\u4f46\u662f ListView \u53ea\u6709\u4e00\u5217\uff0c\u663e\u793a\u663e\u793a\u590d\u6742\u5185\u5bb9\u95ee\u9898\u4e0d\u5927\uff0c\u4f46\u662f\u4e0d\u80fd\u8c03\u6574\u5217\u5bbd\u7b49\uff0c\u548c\u4e00\u4e2a ListCtrl \u7684\u529f\u80fd\u8fd8\u662f\u6709\u4e9b\u5dee\u8ddd\u3002 \u591a\u5217\u5217\u8868\u548c\u5355\u5217\u8868\u6700\u5927\u7684\u533a\u522b\u5728\u4e8e\u591a\u4e86\u4e00\u4e2a\u8868\u5934\uff0c\u6838\u5fc3\u7684\u4e1c\u897f\u5e76\u6ca1\u6709\u533a\u522b\uff0c\u7ecf\u8fc7\u8fd1 3 \u5929\u7684 \u7f16\u7801\u8c03\u8bd5\uff0c\u7ec8\u4e8e\u5b8c\u6210\u4e86\u8fd9\u4e2a\u9769\u547d\u6027\u7684\u63a7\u4ef6\uff08\u81f3\u5c11\u6211\u8ba4\u4e3a\u662f Windows UI \u4e0a\u9769\u547d\u6027\u7684\uff09\u3002 \u5148\u770b\u4e0b\u6548\u679c\uff1a SMCListView \u63a7\u4ef6\u7684\u4f7f\u7528\uff1a XML \u914d\u7f6e\uff1a \u8981\u4f7f\u7528\u8fd9\u4e2a\u5217\u8868\u63a7\u4ef6\uff0c\u9996\u5148\u5e94\u8be5\u5728 XML \u4e2d\u5b9a\u4e49\u8be5\u63a7\u4ef6\u7684\u4f4d\u7f6e\u53ca\u5c5e\u6027\uff0c\u53c2\u8003\u4e0b\u9762\u6458\u81ea demo \u7684\u4ee3\u7801\uff1a <mclistview name= \"mclv_test\" colorBkgnd= \"#ffffff\" pos= \"10,10,-10,-10\" headerHeight= \"30\" > <header align= \"center\" sortSkin= \"skin_lcex_header_arrow\" itemSkin= \"skin_lcex_header\" itemSwapEnable= \"1\" fixWidth= \"0\" font= \"underline:0,adding:-3\" sortHeader= \"1\" colorBkgnd= \"#ffffff\" > <items> <item width= \"480\" > \u8f6f\u4ef6\u540d\u79f0 </item> <item width= \"95\" > \u8f6f\u4ef6\u8bc4\u5206 </item> <item width= \"100\" > \u5927\u5c0f </item> <item width= \"100\" > \u5b89\u88c5\u65f6\u95f4 </item> <item width= \"100\" > \u4f7f\u7528\u9891\u7387 </item> <item width= \"100\" > \u64cd\u4f5c </item> </items> </header> <template itemHeight= \"80\" colorHover= \"#cccccc\" colorSelected= \"#0000ff\" id= \"30000\" > <window name= \"col1\" > <img name= \"img_icon\" skin= \"skin_icon6\" pos= \"10,8,@64,@64\" /> <text name= \"txt_name\" pos= \"[5,16\" font= \"bold:1,adding:-1\" > \u706b\u72d0\u6d4f \u89c8\u5668 </text> <text name= \"txt_desc\" pos= \"{0,36,-10,-10\" font= \"bold:1,adding:- 4\" dotted= \"1\" > \u901f\u5ea6\u6700\u5feb\u7684\u6d4f\u89c8\u5668 </text> <text name= \"txt_index\" pos= \"|0,|0\" offset= \"-0.5,-0.5\" font= \"adding:10\" colorText= \"#ff000088\" > 10 </text> </window> <window name= \"col2\" > <ratingbar name= \"rating_score\" starSkin= \"skin_star1\" starNum= \"5\" value= \"3.5\" pos= \"10,16\" /> <text name= \"txt_score\" pos= \"15,36,50,-16\" font= \"adding:- 5\" > 8.5 \u5206 </text> <link pos= \"[5,36,@30,-16\" cursor= \"hand\" colorText= \"#1e78d5\" href= \"www.163.com\" font= \"adding:-5\" > \u6295\u7968 </link> </window> <window name= \"col3\" > <text name= \"txt_size\" pos= \"0,26,-0,-26\" font= \"adding:-4\" align= \"center\" > 85.92M </text> </window> <window name= \"col4\" > <text name= \"txt_installtime\" pos= \"0,26,-0,-26\" font= \"adding:-4\" align= \"center\" > 2015-01-09 </text> </window> <window name= \"col5\" > <text name= \"txt_usetime\" pos= \"0,26,-0,-26\" font= \"adding:-4\" align= \"center\" > \u4eca\u5929 </text> <animateimg pos= \"|0,|0\" offset= \"-0.5,-0.5\" skin= \"skin_busy\" name= \"ani_test\" tip= \"animateimg is used here\" msgTransparent= \"0\" /> </window> <window name= \"col6\" > <imgbtn animate= \"1\" pos= \"|-35,|-14\" font= \"adding:-3\" align= \"center\" skin= \"skin_install\" name= \"btn_uninstall\" > \u5378\u8f7d </imgbtn> </window> </template> </mclistview> ``` mclistview \u6709\u4e00\u4e2a\u5c5e\u6027 headerHeight\uff0c\u8be5\u5c5e\u6027\u5b9a\u4e49\u8868\u5934\u7684\u663e\u793a\u9ad8\u5ea6\u3002 \u8282\u70b9\u4e0b\u6709\u4e00\u4e2a header \u63a7\u4ef6\uff0c\u7528\u6765\u5b9a\u4e49\u8868\u5934\u63a7\u4ef6\u7684\u6837\u5f0f\uff0c\u90fd\u5f88\u7b80\u5355\uff0c\u81ea\u5df1\u770b XML\u3002 \u6700\u5173\u952e\u7684\u5728\u4e8e\u4e0b\u9762\u7684 template\uff08\u6a21\u677f\uff09\u8282\u70b9\uff0c\u8be5 XML \u8282\u70b9\u7528\u6765\u5b9a\u4e49\u5982\u4f55\u663e\u793a\u5217\u8868\u9879\u3002 \u6a21\u677f\u5185\u6837\u5f0f\u7684\u5b9a\u4e49\u5176\u5b9e\u5e76\u6ca1\u6709\u7279\u522b\u7684\u89c4\u5b9a\uff0c\u56e0\u4e3a\u6700\u540e\u5982\u4f55\u89e3\u6790\u8fd9\u4e2a\u6a21\u677f\u662f\u7531 APP \u51b3\u5b9a\u7684\uff0c \u4f46\u63a8\u8350\u4f7f\u7528\u4e0a\u9762\u7684\u6837\u5f0f\uff1atemplate \u8282\u70b9\u4e0b\u4e3a\u6bcf\u4e00\u5217\u5b9a\u4e49\u4e00\u4e2a window \u8282\u70b9\uff0c\u53ea\u9700\u8981\u6307\u5b9a \u4e00\u4e2a name \u5c5e\u6027\uff08\u5f53\u7136\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5176\u5b83\u7684\u7a97\u53e3\u5c5e\u6027\uff0c\u5e03\u5c40\u5c5e\u6027\u65e0\u6548\uff09\u3002\u5728\u8be5 window \u8282\u70b9 \u4e0b\u53ef\u4ee5\u5b9a\u4e49\u4efb\u610f\u7684\u5176\u5b83\u63a7\u4ef6\u3002 \u4ee3\u7801\u7f16\u5199\uff1a \u548c listview \u63a7\u4ef6\u4e00\u6837\uff0cmclistview \u4e5f\u9700\u8981 XML \u548c\u4ee3\u7801\u914d\u5408\u624d\u80fd\u6b63\u786e\u663e\u793a\u6570\u636e\u3002 \u8981\u4f7f\u7528 mclistview\uff0c\u9996\u5148\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u6570\u636e\u9002\u914d\u5668\uff08IMcAdapter\uff0c\u7ee7\u627f\u81ea SListView \u4e2d \u5b9e\u73b0\u7684 IAdapter)\uff0c\u8fd8\u662f\u5148\u770b demo \u4e2d\u7684\u5b9e\u73b0\uff1a ```cpp class CTestMcAdapterFix : public SMcAdapterBase { public: struct SOFTINFO { wchar_t * pszSkinName; wchar_t * pszName; wchar_t * pszDesc; float fScore; DWORD dwSize; wchar_t * pszInstallTime; wchar_t * pszUseTime; }; static SOFTINFO s_info[]; public: CTestMcAdapterFix() { } virtual int getCount() { return 12340; } SStringT getSizeText(DWORD dwSize) { int num1=dwSize/(1 < <20 ); dwSize -= num1 *(1<<20); int num2 = dwSize*100/(1<<20); return SStringT().Format(_T(\"%d.%02dM\"),num1,num2); } virtual void getView(int position, SWindow * pItem,pugi::xml_node xmlTemplate) { if(pItem- > GetChildrenCount()==0) { pItem->InitFromXml(xmlTemplate); } int dataSize = 7; SOFTINFO *psi = s_info+position%dataSize; pItem->FindChildByName(L\"img_icon\")->SetAttribute(L\"skin\",psi->pszSkinName); pItem->FindChildByName(L\"txt_name\")->SetWindowText(S_CW2T(psi->pszName)); pItem->FindChildByName(L\"txt_desc\")->SetWindowText(S_CW2T(psi->pszDesc)); pItem->FindChildByName(L\"txt_score\")->SetWindowText(SStringT().Format(_T(\"%1 .2f \u5206\"),psi->fScore)); pItem->FindChildByName(L\"txt_installtime\")->SetWindowText(S_CW2T(psi->pszIns tallTime)); pItem->FindChildByName(L\"txt_usetime\")->SetWindowText(S_CW2T(psi->pszUseTime )); pItem->FindChildByName(L\"txt_size\")->SetWindowText(getSizeText(psi->dwSize)) ; pItem->FindChildByName2 <SRatingBar> (L\"rating_score\")->SetValue(psi->fScore/2 ); pItem->FindChildByName(L\"txt_index\")->SetWindowText(SStringT().Format(_T(\" \u7b2c%d \u884c\"),position)); SButton *pBtnUninstall = pItem->FindChildByName2 <SButton> (L\"btn_uninstall\"); pBtnUninstall->SetUserData(position); pBtnUninstall->GetEventSet()->subscribeEvent(EVT_CMD,Subscriber( & CTestMcAdap terFix::OnButtonClick,this)); } bool OnButtonClick(EventArgs *pEvt) { SButton *pBtn = sobj_cast <SButton> (pEvt->sender); int iItem = pBtn->GetUserData(); SMessageBox(NULL,SStringT().Format(_T(\"button of %d item was clicked\"),iItem),_T(\"uninstall\"),MB_OK); return true; } SStringW GetColumnName(int iCol) const{ return SStringW().Format(L\"col%d\",iCol+1); } struct SORTCTX { int iCol; SHDSORTFLAG stFlag; }; bool OnSort(int iCol,SHDSORTFLAG * stFlags,int nCols) { if(iCol==5) //\u6700\u540e\u4e00\u5217\u201c\u64cd\u4f5c\u201d\u4e0d\u652f\u6301\u6392\u5e8f return false; SHDSORTFLAG stFlag = stFlags[iCol]; switch(stFlag) { case ST_NULL:stFlag = ST_UP;break; case ST_DOWN:stFlag = ST_UP;break; case ST_UP:stFlag = ST_DOWN;break; } for(int i=0;i <nCols ;i++) { stFlags[i]=ST_NULL; } stFlags[iCol]=stFlag; SORTCTX ctx= {iCol,stFlag}; qsort_s(s_info,7,sizeof(SOFTINFO),SortCmp,&ctx); return true; } static int __cdecl SortCmp(void *context,const void * p1,const void * p2) { SORTCTX * pctx = (SORTCTX*)context; const SOFTINFO * pSI1= (const SOFTINFO*)p1; const SOFTINFO * pSI2= (const SOFTINFO*)p2; int nRet = 0; switch(pctx- > iCol) { case 0://name nRet = wcscmp(pSI1->pszName,pSI2->pszName); break; case 1://score { float fCmp = (pSI1->fScore - pSI2->fScore); if(fabs(fCmp) <0.0000001 ) nRet = 0; else if(fCmp > 0.0f) nRet = 1; else nRet = -1; } break; case 2://size nRet = (int)(pSI1->dwSize - pSI2->dwSize); break; case 3://install time nRet = wcscmp(pSI1->pszInstallTime,pSI2->pszInstallTime); break; case 4://user time nRet = wcscmp(pSI1->pszUseTime,pSI2->pszUseTime); break; } if(pctx->stFlag == ST_UP) nRet = -nRet; return nRet; } }; CTestMcAdapterFix::SOFTINFO CTestMcAdapterFix::s_info[] = { { L\"skin_icon1\", L\"\u9c81\u5927\u5e08\", L\"\u9c81\u5927\u5e08\u662f\u4e00\u6b3e\u4e13\u4e1a\u7684\u786c\u4ef6\u68c0\u6d4b\uff0c\u9a71\u52a8\u5b89\u88c5\u5de5\u5177\", 5.4f, 15*(1 < <20 ), L\"2015-8-5\", L\"\u4eca\u5929\" }, { L\"skin_icon2\", L\"PhotoShop\", L\"\u5f3a\u5927\u7684\u56fe\u7247\u5904\u7406\u5de5\u5177\", 9.0f, 150*(1<<20), L\"2015-8-5\", L\"\u4eca\u5929\" }, { L\"skin_icon3\", L\"QQ7.0\", L\"\u817e\u8baf\u516c\u53f8\u51fa\u54c1\u7684\u5373\u65f6\u804a\u5929\u5de5\u5177\", 8.0f, 40*(1<<20), L\"2015-8-5\", L\"\u4eca\u5929\" }, { L\"skin_icon4\", L\"Visual Studio 2008\", L\"Microsoft \u516c\u53f8\u7684\u7a0b\u5e8f\u5f00\u53d1\u5957\u4ef6\", 9.0f, 40*(1<<20), L\"2015-8-5\", L\"\u4eca\u5929\" }, { L\"skin_icon5\", L\"YY8\", L\"YY \u8bed\u97f3\", 9.0f, 20*(1<<20), L\"2015-8-5\", L\"\u4eca\u5929\" }, { L\"skin_icon6\", L\"\u706b\u72d0\u6d4f\u89c8\u5668\", L\"\u901f\u5ea6\u6700\u5feb\u7684\u6d4f\u89c8\u5668\", 8.5f, 35*(1<<20), L\"2015-8-5\", L\"\u4eca\u5929\" }, { L\"skin_icon7\", L\"\u8fc5\u96f7\", L\"\u8fc5\u96f7\u4e0b\u8f7d\u8f6f\u4ef6\", 7.3f, 17*(1<<20), L\"2015-8-5\", L\"\u4eca\u5929\" } }; \u6ce8\u610f CTestMcAdapterFix::getView \u865a\u51fd\u6570\uff0c\u4e0a\u9762\u63d0\u5230\u7684 template \u4f1a\u901a\u8fc7\u8be5\u51fd\u6570\u7684\u53c2\u6570 pugi::xml_node xmlTemplate \u4f20\u9012\u8fc7\u6765\u3002 \u5728 getView \u4e2d\uff0c\u9996\u5148\u9700\u8981\u5224\u65ad\u8868\u9879\u5bb9\u5668\u7684\u5b50\u7a97\u53e3\u662f\u4e0d\u662f\u5df2\u7ecf\u88ab\u521d\u59cb\u5316\u8fc7\uff0c\u5982\u679c\u6ca1\u6709\u5c31\u6267\u884c InitFromXml \u5982\u4e0b\uff1a if ( pItem -> GetChildrenCount () == 0 ) { pItem -> InitFromXml ( xmlTemplate ); } \u5728\u5b50\u7a97\u53e3\u521d\u59cb\u5316\u5b8c\u6210\u540e\uff0c\u8fd8\u9700\u8981\u4ece\u6570\u636e\u8868\u4e2d\u83b7\u53d6\u5bf9\u5e94\u9879\u7684\u6570\u636e\u586b\u5145\u5230\u63a7\u4ef6\u4e2d\u663e\u793a\uff1a int dataSize = 7 ; SOFTINFO * psi = s_info + position % dataSize ; pItem -> FindChildByName ( L \"img_icon\" ) -> SetAttribute ( L \"skin\" , psi -> pszSkinName ); pItem -> FindChildByName ( L \"txt_name\" ) -> SetWindowText ( S_CW2T ( psi -> pszName )); pItem -> FindChildByName ( L \"txt_desc\" ) -> SetWindowText ( S_CW2T ( psi -> pszDesc )); pItem -> FindChildByName ( L \"txt_score\" ) -> SetWindowText ( SStringT (). Format ( _T ( \"%1 .2f \u5206 \"),psi->fScore)); pItem -> FindChildByName ( L \"txt_installtime\" ) -> SetWindowText ( S_CW2T ( psi -> pszIns tallTime )); pItem -> FindChildByName ( L \"txt_usetime\" ) -> SetWindowText ( S_CW2T ( psi -> pszUseTime )); pItem -> FindChildByName ( L \"txt_size\" ) -> SetWindowText ( getSizeText ( psi -> dwSize )) ; pItem -> FindChildByName2 < SRatingBar > ( L \"rating_score\" ) -> SetValue ( psi -> fScore / 2 ); pItem -> FindChildByName ( L \"txt_index\" ) -> SetWindowText ( SStringT (). Format ( _T ( \" \u7b2c % d \u884c \"),position)); \u548c\u4e3b\u9762\u677f\u4e0a\u7684\u63a7\u4ef6\u54cd\u5e94\u4e0d\u540c\uff0c\u8981\u54cd\u5e94\u8868\u9879\u4e2d\u63a7\u4ef6\u7684\u4e8b\u4ef6\uff0c\u6ca1\u6709\u4e8b\u4ef6\u6620\u5c04\u8868\u53ef\u4ee5\u4f7f\u7528\uff0c\u53ef\u80fd \u5728 IMcAdapter \u7684\u5b9e\u73b0\u4e2d\u4f7f\u7528\u63a7\u4ef6\u7684 GetEventSet()->subscribeEvent \u65b9\u6cd5\u6765\u54cd\u5e94\uff1a SButton * pBtnUninstall = pItem -> FindChildByName2 < SButton > ( L \"btn_uninstall\" ); pBtnUninstall -> SetUserData ( position ); pBtnUninstall -> GetEventSet () -> subscribeEvent ( EVT_CMD , Subscriber ( & CTestMcAdap terFix :: OnButtonClick , this )); \u9664\u4e86 getView \u8fd9\u4e2a\u65b9\u6cd5\u5916\uff0c\u76f8\u5bf9\u4e8e IAdapter\uff0cIMcAdapter \u8fd8\u9700\u8981\u5b9e\u73b0\u53e6\u5916\u4e24\u4e2a\u975e\u5e38\u91cd \u8981\u7684\u65b9\u6cd5\uff1a interface IMcAdapter : public IAdapter { //\u83b7\u53d6\u5217\u540d virtual SStringW GetColumnName ( int iCol ) const PURE ; //\u6392\u5e8f\u63a5\u53e3 // int iCol:\u6392\u5e8f\u5217 // SHDSORTFLAG * stFlags [in, out]:\u5f53\u524d\u5217\u6392\u5e8f\u6807\u5fd7 // int nCols:\u603b\u5217\u6570,stFlags \u6570\u7ec4\u957f\u5ea6 virtual bool OnSort ( int iCol , SHDSORTFLAG * stFlags , int nCols ) PURE ; }; \u5b9e\u73b0 GetColumnName \u65b9\u6cd5\u6765\u83b7\u53d6\u6bcf\u4e00\u5217\u5bf9\u5e94\u7684\u5b50\u7a97\u53e3\u540d\u79f0\uff0cSMcListView \u901a\u8fc7\u5b83\u6765\u786e \u5b9e template \u4e2d\u7684\u5b50\u7a97\u53e3\u54ea\u4e00\u4e2a\u5e94\u8be5\u663e\u793a\u5728\u4ec0\u4e48\u4f4d\u7f6e\uff0c\u8fd4\u56de\u5728 template \u4e2d\u5b9a\u4e49\u7684\u5b50\u8282\u70b9\u7684 name \u5373\u53ef\u3002 \u5b9e\u73b0 OnSort \u6765\u5904\u7406\u8868\u5934\u70b9\u51fb\u4e8b\u4ef6\uff0c\u4ee5\u786e\u5b9e\u5982\u4f55\u5bf9\u6570\u636e\u6392\u5e8f\u3002 \u81f3\u6b64\uff0c\u8fd9\u4e2a\u8d85\u7ea7\u5217\u8868\u63a7\u4ef6\u7684\u4f7f\u7528\u5c31\u5b8c\u6210\u4e86\u3002","title":"4.26 \u4f7f\u7528 SOUI \u7684 SMCListView \u63a7\u4ef6"},{"location":"Development/3/","text":"4.3 \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8d44\u6e90\u7684\u7ec4\u7ec7 \u00b6 \u4e00\u4e2a\u57fa\u4e8e SOUI \u5f00\u53d1\u7684\u5e94\u7528\u7a0b\u5e8f\u901a\u5e38\u8d44\u6e90\u5206\u4e3a\u4e24\u90e8\u5206\uff1a \u25c6 \u63a7\u4ef6\u9ed8\u8ba4\u7684\u7cfb\u7edf\u8d44\u6e90\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e3b\u9898(theme)\u8d44\u6e90\u3002 \u25c6 \u5e94\u7528\u7a0b\u5e8f\u81ea\u5b9a\u4e49\u7684\u8d44\u6e90 4.3.1 \u63a7\u4ef6\u9ed8\u8ba4\u7684\u7cfb\u7edf\u8d44\u6e90 \u7cfb\u7edf\u8d44\u6e90\u53c8\u5206\u4e3a 3 \u90e8\u5206\uff1a \u25a0 \u63a7\u4ef6\u9ed8\u8ba4\u7684\u76ae\u80a4(Skin)\uff1a SOUI \u4e2d\u5f88\u591a\u63a7\u4ef6\u90fd\u5fc5\u987b\u8981\u5b9a\u4e49\u4e00\u4e2a\u76ae\u80a4(ISkinObj,\u79f0\u4e4b\u4e3a\u7ed8\u56fe\u5bf9\u8c61\u66f4\u597d\u89e3\u7406)\uff0c\u4f8b\u5982\u7ed8\u5236 checkbox\uff0cradiobox\uff0ccombobox \u7b49\u63a7\u4ef6\u51fa\u51fa\u73b0\u7684\u4f4d\u56fe\u90e8\u5206\u3002\u5982\u4f55\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u4e86 \u8fd9\u4e9b\u63a7\u4ef6\uff0c\u5219\u5fc5\u987b\u4e3a\u5b83\u4eec\u5b9a\u4e49\u8fd9\u4e9b\u76ae\u80a4\u8d44\u6e90\u3002\u4e3a\u4e86\u7b80\u5316\u754c\u9762\u914d\u7f6e\uff0c\u6211\u7edf\u4e00\u5c06\u8fd9\u4e9b\u8d44\u6e90\u8fdb\u884c \u547d\u540d\uff0c\u5e76\u6253\u5305\u5230\u4e00\u8d77\uff08\u53c2\u89c1 trunk\\soui-sys-resource\\theme_sys_res\\sys_xml_skin.xml\uff09\u3002 \u4e0b\u9762\u662f\u7cfb\u7edf\u4e2d\u4f7f\u7528\u5b9a\u4e49\u7684\u547d\u540d ISkinObj: const wchar_t * BUILDIN_SKIN_NAMES [] = { L \"_skin.sys.checkbox\" , L \"_skin.sys.radio\" , L \"_skin.sys.focuscheckbox\" , L \"_skin.sys.focusradio\" , L \"_skin.sys.btn.normal\" , L \"_skin.sys.scrollbar\" , L \"_skin.sys.border\" , L \"_skin.sys.dropbtn\" , L \"_skin.sys.tree.toggle\" , L \"_skin.sys.tree.checkbox\" , L \"_skin.sys.tab.page\" , L \"_skin.sys.header\" , L \"_skin.sys.split.vert\" , L \"_skin.sys.split.horz\" , L \"_skin.sys.prog.bkgnd\" , L \"_skin.sys.prog.bar\" , L \"_skin.sys.slider.thumb\" , L \"_skin.sys.btn.close\" , L \"_skin.sys.btn.minimize\" , L \"_skin.sys.btn.maxmize\" , L \"_skin.sys.btn.restore\" , L \"_skin.sys.menu.check\" , L \"_skin.sys.menu.sep\" , L \"_skin.sys.menu.border\" , L \"_skin.sys.menu.skin\" , L \"_skin.sys.icons\" , L \"_skin.sys.wnd.bkgnd\" }; \u5982\u679c\u7a0b\u5e8f\u4e2d\u6ca1\u6709\u4f7f\u7528\u5230\u7279\u5b9a\u63a7\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u5728\u7cfb\u7edf\u8d44\u6e90\u4e2d\u63d0\u4f9b\u5bf9\u5e94\u7684 ISkinObj\u3002 \u25a0 \u7cfb\u7edf\u4f7f\u7528\u7684 MsgBox \u5e03\u5c40\u6a21\u677f\uff1a MsgBox \u662f\u5e94\u7528\u7a0b\u5e8f\u5e38\u7528\u7684\u529f\u80fd\u3002SOUI \u901a\u8fc7\u63d0\u4f9b\u4e00\u4e2a MSGBOX \u7684 XML \u5e03\u5c40\u6a21\u677f\u6765\u5b9e \u73b0\u3002\u5982\u679c\u9700\u8981\u4fee\u6539 MsgBox \u7684\u6837\u5f0f\uff0c\u53ea\u9700\u8981\u4fee\u6539\u8fd9\u4e2a XML\u3002 <SOUI title= \"mesagebox\" width= \"200\" height= \"100\" appwin= \"0\" frameSize= \"40,30,10,80\" minSize= \"300,100\" resize= \"0\" translucent= \"1\" trCtx= \"messagebox\" > <style> <class name= \"normalbtn\" skin= \"_skin.sys.btn.normal\" font= \"\" colorText= \"#385e8b\" colorTextDisable= \"#91a7c0\" textMode= \"25\" cursor= \"hand\" margin-x= \"0\" /> </style> <root skin= \"_skin.sys.wnd.bkgnd\" > <caption id= \"101\" pos= \"0,0,-0,29\" > <text pos= \"11,9\" class= \"cls_txt_red\" name= \"msgtitle\" > title </text> <imgbtn id= \"2\" skin= \"_skin.sys.btn.close\" pos= \"-45,0\" tip= \"close\" /> </caption> <window pos= \"5,30,-5,-50\" > <icon name= \"msgicon\" pos= \"0,0,32,32\" display= \"0\" /> <text name= \"msgtext\" pos= \"[0,0\" colorText= \"#0000FF\" multilines= \"1\" maxWidth= \"300\" /> </window> <tabctrl name= \"btnSwitch\" pos= \"0,-50,-0,-0\" tabHeight= \"0\" > <page> <button pos= \"|-50,10,|50,-10\" name= \"button1st\" class= \"normalbtn\" > button1 </button> </page> <page> <button pos= \"|-100,10,|-10,-10\" name= \"button1st\" class= \"normalbtn\" > button1 </button> <button pos= \"|10,10,|100,-10\" name= \"button2nd\" class= \"normalbtn\" > button2 </button> </page> <page> <button pos= \"|-140,10,|-50,-10\" name= \"button1st\" class= \"normalbtn\" > button1 </button> <button pos= \"|-45,10,|45,-10\" name= \"button2nd\" class= \"normalbtn\" > button2 </button> <button pos= \"|50,10,|140,-10\" name= \"button3rd\" class= \"normalbtn\" > button3 </button> </page> </tabctrl> </root> </SOUI> \u4e0a\u9762\u662f SOUI \u9ed8\u8ba4\u63d0\u4f9b\u7684\u6a21\u677f\u3002 \u5728\u8fd9\u4e2a\u6a21\u677f\u4e2d\uff0c\u53ea\u63d0\u4f9b\u4e86\u5fc5\u987b\u7684\u547d\u540d\u5bf9\u8c61\u3002\u5982\u679c\u8981\u4fee\u6539\u8fd9\u4e2a\u6a21\u677f\uff0c\u8fd9\u4e9b\u547d\u540d\u5bf9\u8c61\u4e0d\u80fd\u7f3a \u5c11\uff0c\u4e0d\u8fc7\u5e03\u5c40\u4f4d\u7f6e\u53ef\u4ee5\u4efb\u610f\u8c03\u6574\u3002 \u25a0 Edit \u63a7\u4ef6\u4f7f\u7528\u7684\u53f3\u952e\u83dc\u5355\u5b9a\u4e49 XML\uff1a edit \u63a7\u4ef6\u7684\u83dc\u5355\u76f8\u5bf9\u56fa\u5b9a\uff0c\u56e0\u6b64\u6211\u4eec\u4e5f\u91c7\u7528\u7cfb\u7edf\u8d44\u6e90\u7684\u5f62\u5f0f\u63d0\u4f9b\u4e00\u4e2a\u9884\u5b9a\u4e49\u7684\u53f3\u952e\u83dc\u5355\u5b9a \u4e49\u3002 <editmenu trCtx= \"editmenu\" iconSkin= \"_skin.sys.icons\" itemHeight= \"26\" iconMargin= \"4\" textMargin= \"8\" > <item id= \"1\" icon= \"3\" > cut </item> <item id= \"2\" icon= \"4\" > copy </item> <item id= \"3\" icon= \"5\" > paste </item> <item id= \"4\" > delete </item> <sep/> <item id= \"5\" > select all </item> </editmenu> \u548c\u524d\u9762\u4e24\u4e2a\u4e0d\u540c\uff0c\u83dc\u5355\u8d44\u6e90\u6bcf\u4e00\u4e2a item \u5fc5\u987b\u5305\u542b\u4e00\u4e2a id\uff0c\u53d6\u503c\u4ece 1-5,\u83dc\u5355\u9879\u7684\u4f4d\u7f6e\u53ef\u4ee5 \u4efb\u610f\u3002 4.3.1 \u5e94\u7528\u7a0b\u5e8f\u81ea\u5b9a\u4e49\u8d44\u6e90 \u5f88\u663e\u7136\uff0c\u7cfb\u7edf\u8d44\u6e90\u63d0\u4f9b\u7684\u6837\u5f0f\u4f7f\u5f97\u5e94\u7528\u4e2d\u6bcf\u4e00\u4e2a\u540c\u7c7b\u63a7\u4ef6\u957f\u5f97\u90fd\u4e00\u6837\u3002\u4f46\u662f\u5f88\u591a\u65f6\u5019\u6211\u4eec \u4f1a\u5e0c\u671b\u4e24\u4e2a\u529f\u80fd\u76f8\u4f3c\u7684\u63a7\u4ef6\u6709\u4e0d\u4e00\u6837\u7684\u957f\u76f8\uff0c\u8fd9\u5c31\u9700\u8981\u4f7f\u7528\u7528\u6237\u81ea\u5b9a\u4e49\u8d44\u6e90\u3002 \u7528\u6237\u81ea\u5b9a\u4e49\u8d44\u6e90\u548c\u7cfb\u7edf\u8d44\u6e90\u4e00\u6837\uff0c\u53ea\u4e0d\u8fc7\u5b83\u53ef\u4ee5\u5305\u542b\u66f4\u591a\u7c7b\u578b\uff08\u4efb\u610f\u7c7b\u578b\uff09\uff0c\u8d44\u6e90\u4e5f\u53ef\u4ee5 \u4efb\u610f\u547d\u540d\uff08\u53ea\u8981\u4e0d\u548c\u7cfb\u7edf\u8d44\u6e90\u51b2\u7a81\uff09\u3002 \u4e0b\u9762\u4e3a demo \u4e2d\u4f7f\u7528\u7684\u81ea\u5b9a\u4e49\u8d44\u6e90(uires.idx)\uff1a <?xml version=\"1.0\" encoding=\"utf-8\"?> <resource> <UIDEF> <file name= \"xml_init\" path= \"xml\\init.xml\" /> </UIDEF> <ICON> <file name= \"LOGO\" path= \"image\\img_logo.ico\" /> </ICON> <CURSOR> <file name= \"ANI_ARROW\" path= \"image\\021.ani\" /> <file name= \"CUR_TST\" path= \"image\\camera_capture.cur\" /> </CURSOR> <LAYOUT> <file name= \"maindlg\" path= \"xml\\dlg_main.xml\" /> <file name= \"menu_test\" path= \"xml\\menu_test.xml\" /> <file name= \"page_layout\" path= \"xml\\page_layout.xml\" /> <file name= \"page_treebox\" path= \"xml\\page_treebox.xml\" /> <file name= \"page_treectrl\" path= \"xml\\page_treectrl.xml\" /> <file name= \"page_misc\" path= \"xml\\page_misc.xml\" /> <file name= \"page_webkit\" path= \"xml\\page_webkit.xml\" /> <file name= \"page_about\" path= \"xml\\page_about.xml\" /> </LAYOUT> <IMGX> <file name= \"png_page_icons\" path= \"image\\page_icons.png\" /> <file name= \"png_small_icons\" path= \"image\\small_icons.png\" /> <file name= \"webbtn_back\" path= \"image\\webbtn_back.png\" /> <file name= \"webbtn_forward\" path= \"image\\webbtn_forward.png\" /> <file name= \"webbtn_refresh\" path= \"image\\webbtn_refresh.png\" /> <file name= \"png_treeicon\" path= \"image\\TreeIcon.png\" /> <file name= \"png_menu_border\" path= \"image\\menuborder.png\" /> <file name= \"png_vscroll\" path= \"image\\vscrollbar.png\" /> <file name= \"png_tab_left\" path= \"image\\tab_left.png\" /> <file name= \"png_tab_left_splitter\" path= \"image\\tab_left_splitter.png\" /> <file name= \"png_tab_main\" path= \"image\\tab_main.png\" /> <file name= \"btn_menu\" path= \"image\\btn_menu.png\" /> </IMGX> <GIF> <file name= \"gif_horse\" path= \"image\\horse.gif\" /> <file name= \"gif_penguin\" path= \"image\\penguin.gif\" /> </GIF> <rtf> <file name= \"rtf_test\" path= \"rtf\\RTF \u6d4b\u8bd5.rtf\" /> </rtf> <script> <file name= \"lua_test\" path= \"lua\\test.lua\" /> </script> <translator> <file name= \"lang_cn\" path= \"translation files\\lang_cn.xml\" /> </translator> </resource> \u4e0d\u7ba1\u662f\u7cfb\u7edf\u8d44\u6e90\u8fd8\u662f\u7528\u6237\u8d44\u6e90\u90fd\u7531\u8d44\u6e90\u7ba1\u7406\u6a21\u5757\u7ba1\u7406\u3002 \u5b9e\u9645\u4e0a\u8fd9\u4e24\u79cd\u8d44\u6e90\u53ef\u4ee5\u5408\u5e76\u5230\u4e00\u4e2a\u8d44\u6e90\u5305\u4e2d\u4ea4\u7ed9\u7cfb\u7edf\u7ba1\u7406\u3002\u6709\u5fc3\u4eba\u53ef\u80fd\u6ce8\u610f\u5230\u4e86\u9879\u76ee\u4e2d\u4f7f \u7528\u7684\u7cfb\u7edf\u8d44\u6e90\u4f7f\u7528\u7684\u662f\u4e00\u4e2a\u8d44\u6e90 DLL\uff0c\u5e76\u4e14\u6ca1\u6709 uires.idx \u6587\u4ef6\u3002\u6b63\u662f\u56e0\u4e3a\u4f7f\u7528\u4e86\u8d44\u6e90 DLL \u8fd9\u4e00\u5f62\u5f0f\uff0c\u624d\u53ef\u4ee5\u4e0d\u63d0\u4f9b uires.idx \u6587\u4ef6\uff0c\u56e0\u4e3a PE \u8d44\u6e90\u672c\u8eab\u5df2\u7ecf\u6709\u4e86\u5206\u7c7b\u547d\u540d\uff08\u6bcf\u4e00\u4e2a\u8d44 \u6e90\u90fd\u5728\u4e00\u4e2a\u7c7b\u578b\u4e0b\uff09\u3002 DEMO \u4e2d\u4f7f\u7528\u7cfb\u7edf\u8d44\u6e90\u548c\u7528\u6237\u8d44\u6e90 SApplication * theApp = new SApplication ( pRenderFactory , hInstance ); //\u5b9a\u4e49\u4e00\u4eba\u4e2a\u8d44\u6e90\u63d0\u4f9b\u5bf9\u8c61,SOUI \u7cfb\u7edf\u4e2d\u5b9e\u73b0\u4e86 3 \u79cd\u8d44\u6e90\u52a0\u8f7d\u65b9\u5f0f\uff0c\u5206\u522b\u662f\u4ece\u6587\u4ef6\u52a0\u8f7d\uff0c\u4ece EXE \u7684\u8d44\u6e90\u52a0\u8f7d\u53ca\u4ece ZIP \u538b\u7f29\u5305\u52a0\u8f7d CAutoRefPtr < IResProvider > pResProvider ; #if (RES_TYPE == 0) //\u4ece\u6587\u4ef6\u52a0\u8f7d CreateResProvider ( RES_FILE ,( IObjRef ** ) & pResProvider ); if ( ! pResProvider -> Init (( LPARAM ) _T ( \"uires\" ), 0 )) { SASSERT ( 0 ); return 1 ; } #elif (RES_TYPE==1) //\u4ece EXE \u8d44\u6e90\u52a0\u8f7d CreateResProvider ( RES_PE ,( IObjRef ** ) & pResProvider ); pResProvider -> Init (( WPARAM ) hInstance , 0 ); #elif (RES_TYPE==2) //\u4ece ZIP \u5305\u52a0\u8f7d bLoaded = pComMgr -> CreateResProvider_ZIP (( IObjRef ** ) & pResProvider ); SASSERT_FMT ( bLoaded , _T ( \"load interface [%s] failed ! \"),_T(\" resprovider_zip \")); ZIPRES_PARAM param ; param . ZipFile ( pRenderFactory , _T ( \"uires.zip\" ), \"souizip\" ); bLoaded = pResProvider -> Init (( WPARAM ) & param , 0 ); SASSERT ( bLoaded ); #endif //\u5c06\u521b\u5efa\u7684 IResProvider \u4ea4\u7ed9 SApplication \u5bf9\u8c61 theApp -> AddResProvider ( pResProvider ); //\u52a0\u8f7d\u7cfb\u7edf\u8d44\u6e90 HMODULE hSysResource = LoadLibrary ( SYS_NAMED_RESOURCE ); if ( hSysResource ) { CAutoRefPtr < IResProvider > sysSesProvider ; CreateResProvider ( RES_PE ,( IObjRef ** ) & sysSesProvider ); sysSesProvider -> Init (( WPARAM ) hSysResource , 0 ); theApp -> LoadSystemNamedResource ( sysSesProvider ); } //\u52a0\u8f7d\u5168\u5c40\u8d44\u6e90\u63cf\u8ff0 XML theApp -> Init ( _T ( \"xml_init\" )); \u53ef\u4ee5\u770b\u5230\u8fd9\u91cc\u6839\u636e\u9884\u5b9a\u4e49\u5b8f\uff1aRES_TYPE \u63d0\u4f9b\u4e86 3 \u79cd\u53c2\u8003\u8d44\u6e90\u52a0\u8f7d\u5f62\u5f0f\u6765\u52a0\u8f7d\u7528\u6237\u81ea\u5b9a\u4e49 \u8d44\u6e90\u3002\u7136\u540e\u518d\u91c7\u7528 SResProviderPE \u7684\u8d44\u6e90\u52a0\u8f7d\u5668\u4ece\u7cfb\u7edf\u8d44\u6e90 DLL \u4e2d\u52a0\u8f7d\u7cfb\u7edf\u8d44\u6e90\u3002 \u52a0\u8f7d\u7cfb\u7edf\u8d44\u6e90\u4e00\u4e2a\u5173\u952e\u6b65\u9aa4\u5728\u4e8e\u8c03\u7528: theApp -> LoadSystemNamedResource ( sysSesProvider ); \u8fd9\u4e2a\u51fd\u6570\u4ece\u7cfb\u7edf\u8d44\u6e90\u52a0\u8f7d\u5668\u4e2d\u8bfb\u53d6\u90a3\u4e9b\u547d\u540d\u7684\u7cfb\u7edf\u8d44\u6e90\u3002 \u6240\u6709\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210\u540e\u8c03\u7528\uff1a //\u52a0\u8f7d\u5168\u5c40\u8d44\u6e90\u63cf\u8ff0 XML theApp -> Init ( _T ( \"xml_init\" )); \u6765\u521d\u59cb\u5316\u8d44\u6e90\u4e2d\u5b9a\u4e49\u7684\u5168\u5c40 Skin,Style,ObjAttr \u5bf9\u8c61\u3002 \u5927\u5bb6\u53ef\u4ee5\u60f3\u4e00\u60f3\u600e\u4e48\u6837\u628a\u8fd9\u4e24\u79cd\u8d44\u6e90\u4f7f\u7528\u4e00\u4e2a\u8d44\u6e90\u52a0\u8f7d\u5668\u6765\u5b8c\u6210\u3002","title":"4.3 \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8d44\u6e90\u7684\u7ec4\u7ec7"},{"location":"Development/3/#43","text":"\u4e00\u4e2a\u57fa\u4e8e SOUI \u5f00\u53d1\u7684\u5e94\u7528\u7a0b\u5e8f\u901a\u5e38\u8d44\u6e90\u5206\u4e3a\u4e24\u90e8\u5206\uff1a \u25c6 \u63a7\u4ef6\u9ed8\u8ba4\u7684\u7cfb\u7edf\u8d44\u6e90\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e3b\u9898(theme)\u8d44\u6e90\u3002 \u25c6 \u5e94\u7528\u7a0b\u5e8f\u81ea\u5b9a\u4e49\u7684\u8d44\u6e90 4.3.1 \u63a7\u4ef6\u9ed8\u8ba4\u7684\u7cfb\u7edf\u8d44\u6e90 \u7cfb\u7edf\u8d44\u6e90\u53c8\u5206\u4e3a 3 \u90e8\u5206\uff1a \u25a0 \u63a7\u4ef6\u9ed8\u8ba4\u7684\u76ae\u80a4(Skin)\uff1a SOUI \u4e2d\u5f88\u591a\u63a7\u4ef6\u90fd\u5fc5\u987b\u8981\u5b9a\u4e49\u4e00\u4e2a\u76ae\u80a4(ISkinObj,\u79f0\u4e4b\u4e3a\u7ed8\u56fe\u5bf9\u8c61\u66f4\u597d\u89e3\u7406)\uff0c\u4f8b\u5982\u7ed8\u5236 checkbox\uff0cradiobox\uff0ccombobox \u7b49\u63a7\u4ef6\u51fa\u51fa\u73b0\u7684\u4f4d\u56fe\u90e8\u5206\u3002\u5982\u4f55\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u4e86 \u8fd9\u4e9b\u63a7\u4ef6\uff0c\u5219\u5fc5\u987b\u4e3a\u5b83\u4eec\u5b9a\u4e49\u8fd9\u4e9b\u76ae\u80a4\u8d44\u6e90\u3002\u4e3a\u4e86\u7b80\u5316\u754c\u9762\u914d\u7f6e\uff0c\u6211\u7edf\u4e00\u5c06\u8fd9\u4e9b\u8d44\u6e90\u8fdb\u884c \u547d\u540d\uff0c\u5e76\u6253\u5305\u5230\u4e00\u8d77\uff08\u53c2\u89c1 trunk\\soui-sys-resource\\theme_sys_res\\sys_xml_skin.xml\uff09\u3002 \u4e0b\u9762\u662f\u7cfb\u7edf\u4e2d\u4f7f\u7528\u5b9a\u4e49\u7684\u547d\u540d ISkinObj: const wchar_t * BUILDIN_SKIN_NAMES [] = { L \"_skin.sys.checkbox\" , L \"_skin.sys.radio\" , L \"_skin.sys.focuscheckbox\" , L \"_skin.sys.focusradio\" , L \"_skin.sys.btn.normal\" , L \"_skin.sys.scrollbar\" , L \"_skin.sys.border\" , L \"_skin.sys.dropbtn\" , L \"_skin.sys.tree.toggle\" , L \"_skin.sys.tree.checkbox\" , L \"_skin.sys.tab.page\" , L \"_skin.sys.header\" , L \"_skin.sys.split.vert\" , L \"_skin.sys.split.horz\" , L \"_skin.sys.prog.bkgnd\" , L \"_skin.sys.prog.bar\" , L \"_skin.sys.slider.thumb\" , L \"_skin.sys.btn.close\" , L \"_skin.sys.btn.minimize\" , L \"_skin.sys.btn.maxmize\" , L \"_skin.sys.btn.restore\" , L \"_skin.sys.menu.check\" , L \"_skin.sys.menu.sep\" , L \"_skin.sys.menu.border\" , L \"_skin.sys.menu.skin\" , L \"_skin.sys.icons\" , L \"_skin.sys.wnd.bkgnd\" }; \u5982\u679c\u7a0b\u5e8f\u4e2d\u6ca1\u6709\u4f7f\u7528\u5230\u7279\u5b9a\u63a7\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u5728\u7cfb\u7edf\u8d44\u6e90\u4e2d\u63d0\u4f9b\u5bf9\u5e94\u7684 ISkinObj\u3002 \u25a0 \u7cfb\u7edf\u4f7f\u7528\u7684 MsgBox \u5e03\u5c40\u6a21\u677f\uff1a MsgBox \u662f\u5e94\u7528\u7a0b\u5e8f\u5e38\u7528\u7684\u529f\u80fd\u3002SOUI \u901a\u8fc7\u63d0\u4f9b\u4e00\u4e2a MSGBOX \u7684 XML \u5e03\u5c40\u6a21\u677f\u6765\u5b9e \u73b0\u3002\u5982\u679c\u9700\u8981\u4fee\u6539 MsgBox \u7684\u6837\u5f0f\uff0c\u53ea\u9700\u8981\u4fee\u6539\u8fd9\u4e2a XML\u3002 <SOUI title= \"mesagebox\" width= \"200\" height= \"100\" appwin= \"0\" frameSize= \"40,30,10,80\" minSize= \"300,100\" resize= \"0\" translucent= \"1\" trCtx= \"messagebox\" > <style> <class name= \"normalbtn\" skin= \"_skin.sys.btn.normal\" font= \"\" colorText= \"#385e8b\" colorTextDisable= \"#91a7c0\" textMode= \"25\" cursor= \"hand\" margin-x= \"0\" /> </style> <root skin= \"_skin.sys.wnd.bkgnd\" > <caption id= \"101\" pos= \"0,0,-0,29\" > <text pos= \"11,9\" class= \"cls_txt_red\" name= \"msgtitle\" > title </text> <imgbtn id= \"2\" skin= \"_skin.sys.btn.close\" pos= \"-45,0\" tip= \"close\" /> </caption> <window pos= \"5,30,-5,-50\" > <icon name= \"msgicon\" pos= \"0,0,32,32\" display= \"0\" /> <text name= \"msgtext\" pos= \"[0,0\" colorText= \"#0000FF\" multilines= \"1\" maxWidth= \"300\" /> </window> <tabctrl name= \"btnSwitch\" pos= \"0,-50,-0,-0\" tabHeight= \"0\" > <page> <button pos= \"|-50,10,|50,-10\" name= \"button1st\" class= \"normalbtn\" > button1 </button> </page> <page> <button pos= \"|-100,10,|-10,-10\" name= \"button1st\" class= \"normalbtn\" > button1 </button> <button pos= \"|10,10,|100,-10\" name= \"button2nd\" class= \"normalbtn\" > button2 </button> </page> <page> <button pos= \"|-140,10,|-50,-10\" name= \"button1st\" class= \"normalbtn\" > button1 </button> <button pos= \"|-45,10,|45,-10\" name= \"button2nd\" class= \"normalbtn\" > button2 </button> <button pos= \"|50,10,|140,-10\" name= \"button3rd\" class= \"normalbtn\" > button3 </button> </page> </tabctrl> </root> </SOUI> \u4e0a\u9762\u662f SOUI \u9ed8\u8ba4\u63d0\u4f9b\u7684\u6a21\u677f\u3002 \u5728\u8fd9\u4e2a\u6a21\u677f\u4e2d\uff0c\u53ea\u63d0\u4f9b\u4e86\u5fc5\u987b\u7684\u547d\u540d\u5bf9\u8c61\u3002\u5982\u679c\u8981\u4fee\u6539\u8fd9\u4e2a\u6a21\u677f\uff0c\u8fd9\u4e9b\u547d\u540d\u5bf9\u8c61\u4e0d\u80fd\u7f3a \u5c11\uff0c\u4e0d\u8fc7\u5e03\u5c40\u4f4d\u7f6e\u53ef\u4ee5\u4efb\u610f\u8c03\u6574\u3002 \u25a0 Edit \u63a7\u4ef6\u4f7f\u7528\u7684\u53f3\u952e\u83dc\u5355\u5b9a\u4e49 XML\uff1a edit \u63a7\u4ef6\u7684\u83dc\u5355\u76f8\u5bf9\u56fa\u5b9a\uff0c\u56e0\u6b64\u6211\u4eec\u4e5f\u91c7\u7528\u7cfb\u7edf\u8d44\u6e90\u7684\u5f62\u5f0f\u63d0\u4f9b\u4e00\u4e2a\u9884\u5b9a\u4e49\u7684\u53f3\u952e\u83dc\u5355\u5b9a \u4e49\u3002 <editmenu trCtx= \"editmenu\" iconSkin= \"_skin.sys.icons\" itemHeight= \"26\" iconMargin= \"4\" textMargin= \"8\" > <item id= \"1\" icon= \"3\" > cut </item> <item id= \"2\" icon= \"4\" > copy </item> <item id= \"3\" icon= \"5\" > paste </item> <item id= \"4\" > delete </item> <sep/> <item id= \"5\" > select all </item> </editmenu> \u548c\u524d\u9762\u4e24\u4e2a\u4e0d\u540c\uff0c\u83dc\u5355\u8d44\u6e90\u6bcf\u4e00\u4e2a item \u5fc5\u987b\u5305\u542b\u4e00\u4e2a id\uff0c\u53d6\u503c\u4ece 1-5,\u83dc\u5355\u9879\u7684\u4f4d\u7f6e\u53ef\u4ee5 \u4efb\u610f\u3002 4.3.1 \u5e94\u7528\u7a0b\u5e8f\u81ea\u5b9a\u4e49\u8d44\u6e90 \u5f88\u663e\u7136\uff0c\u7cfb\u7edf\u8d44\u6e90\u63d0\u4f9b\u7684\u6837\u5f0f\u4f7f\u5f97\u5e94\u7528\u4e2d\u6bcf\u4e00\u4e2a\u540c\u7c7b\u63a7\u4ef6\u957f\u5f97\u90fd\u4e00\u6837\u3002\u4f46\u662f\u5f88\u591a\u65f6\u5019\u6211\u4eec \u4f1a\u5e0c\u671b\u4e24\u4e2a\u529f\u80fd\u76f8\u4f3c\u7684\u63a7\u4ef6\u6709\u4e0d\u4e00\u6837\u7684\u957f\u76f8\uff0c\u8fd9\u5c31\u9700\u8981\u4f7f\u7528\u7528\u6237\u81ea\u5b9a\u4e49\u8d44\u6e90\u3002 \u7528\u6237\u81ea\u5b9a\u4e49\u8d44\u6e90\u548c\u7cfb\u7edf\u8d44\u6e90\u4e00\u6837\uff0c\u53ea\u4e0d\u8fc7\u5b83\u53ef\u4ee5\u5305\u542b\u66f4\u591a\u7c7b\u578b\uff08\u4efb\u610f\u7c7b\u578b\uff09\uff0c\u8d44\u6e90\u4e5f\u53ef\u4ee5 \u4efb\u610f\u547d\u540d\uff08\u53ea\u8981\u4e0d\u548c\u7cfb\u7edf\u8d44\u6e90\u51b2\u7a81\uff09\u3002 \u4e0b\u9762\u4e3a demo \u4e2d\u4f7f\u7528\u7684\u81ea\u5b9a\u4e49\u8d44\u6e90(uires.idx)\uff1a <?xml version=\"1.0\" encoding=\"utf-8\"?> <resource> <UIDEF> <file name= \"xml_init\" path= \"xml\\init.xml\" /> </UIDEF> <ICON> <file name= \"LOGO\" path= \"image\\img_logo.ico\" /> </ICON> <CURSOR> <file name= \"ANI_ARROW\" path= \"image\\021.ani\" /> <file name= \"CUR_TST\" path= \"image\\camera_capture.cur\" /> </CURSOR> <LAYOUT> <file name= \"maindlg\" path= \"xml\\dlg_main.xml\" /> <file name= \"menu_test\" path= \"xml\\menu_test.xml\" /> <file name= \"page_layout\" path= \"xml\\page_layout.xml\" /> <file name= \"page_treebox\" path= \"xml\\page_treebox.xml\" /> <file name= \"page_treectrl\" path= \"xml\\page_treectrl.xml\" /> <file name= \"page_misc\" path= \"xml\\page_misc.xml\" /> <file name= \"page_webkit\" path= \"xml\\page_webkit.xml\" /> <file name= \"page_about\" path= \"xml\\page_about.xml\" /> </LAYOUT> <IMGX> <file name= \"png_page_icons\" path= \"image\\page_icons.png\" /> <file name= \"png_small_icons\" path= \"image\\small_icons.png\" /> <file name= \"webbtn_back\" path= \"image\\webbtn_back.png\" /> <file name= \"webbtn_forward\" path= \"image\\webbtn_forward.png\" /> <file name= \"webbtn_refresh\" path= \"image\\webbtn_refresh.png\" /> <file name= \"png_treeicon\" path= \"image\\TreeIcon.png\" /> <file name= \"png_menu_border\" path= \"image\\menuborder.png\" /> <file name= \"png_vscroll\" path= \"image\\vscrollbar.png\" /> <file name= \"png_tab_left\" path= \"image\\tab_left.png\" /> <file name= \"png_tab_left_splitter\" path= \"image\\tab_left_splitter.png\" /> <file name= \"png_tab_main\" path= \"image\\tab_main.png\" /> <file name= \"btn_menu\" path= \"image\\btn_menu.png\" /> </IMGX> <GIF> <file name= \"gif_horse\" path= \"image\\horse.gif\" /> <file name= \"gif_penguin\" path= \"image\\penguin.gif\" /> </GIF> <rtf> <file name= \"rtf_test\" path= \"rtf\\RTF \u6d4b\u8bd5.rtf\" /> </rtf> <script> <file name= \"lua_test\" path= \"lua\\test.lua\" /> </script> <translator> <file name= \"lang_cn\" path= \"translation files\\lang_cn.xml\" /> </translator> </resource> \u4e0d\u7ba1\u662f\u7cfb\u7edf\u8d44\u6e90\u8fd8\u662f\u7528\u6237\u8d44\u6e90\u90fd\u7531\u8d44\u6e90\u7ba1\u7406\u6a21\u5757\u7ba1\u7406\u3002 \u5b9e\u9645\u4e0a\u8fd9\u4e24\u79cd\u8d44\u6e90\u53ef\u4ee5\u5408\u5e76\u5230\u4e00\u4e2a\u8d44\u6e90\u5305\u4e2d\u4ea4\u7ed9\u7cfb\u7edf\u7ba1\u7406\u3002\u6709\u5fc3\u4eba\u53ef\u80fd\u6ce8\u610f\u5230\u4e86\u9879\u76ee\u4e2d\u4f7f \u7528\u7684\u7cfb\u7edf\u8d44\u6e90\u4f7f\u7528\u7684\u662f\u4e00\u4e2a\u8d44\u6e90 DLL\uff0c\u5e76\u4e14\u6ca1\u6709 uires.idx \u6587\u4ef6\u3002\u6b63\u662f\u56e0\u4e3a\u4f7f\u7528\u4e86\u8d44\u6e90 DLL \u8fd9\u4e00\u5f62\u5f0f\uff0c\u624d\u53ef\u4ee5\u4e0d\u63d0\u4f9b uires.idx \u6587\u4ef6\uff0c\u56e0\u4e3a PE \u8d44\u6e90\u672c\u8eab\u5df2\u7ecf\u6709\u4e86\u5206\u7c7b\u547d\u540d\uff08\u6bcf\u4e00\u4e2a\u8d44 \u6e90\u90fd\u5728\u4e00\u4e2a\u7c7b\u578b\u4e0b\uff09\u3002 DEMO \u4e2d\u4f7f\u7528\u7cfb\u7edf\u8d44\u6e90\u548c\u7528\u6237\u8d44\u6e90 SApplication * theApp = new SApplication ( pRenderFactory , hInstance ); //\u5b9a\u4e49\u4e00\u4eba\u4e2a\u8d44\u6e90\u63d0\u4f9b\u5bf9\u8c61,SOUI \u7cfb\u7edf\u4e2d\u5b9e\u73b0\u4e86 3 \u79cd\u8d44\u6e90\u52a0\u8f7d\u65b9\u5f0f\uff0c\u5206\u522b\u662f\u4ece\u6587\u4ef6\u52a0\u8f7d\uff0c\u4ece EXE \u7684\u8d44\u6e90\u52a0\u8f7d\u53ca\u4ece ZIP \u538b\u7f29\u5305\u52a0\u8f7d CAutoRefPtr < IResProvider > pResProvider ; #if (RES_TYPE == 0) //\u4ece\u6587\u4ef6\u52a0\u8f7d CreateResProvider ( RES_FILE ,( IObjRef ** ) & pResProvider ); if ( ! pResProvider -> Init (( LPARAM ) _T ( \"uires\" ), 0 )) { SASSERT ( 0 ); return 1 ; } #elif (RES_TYPE==1) //\u4ece EXE \u8d44\u6e90\u52a0\u8f7d CreateResProvider ( RES_PE ,( IObjRef ** ) & pResProvider ); pResProvider -> Init (( WPARAM ) hInstance , 0 ); #elif (RES_TYPE==2) //\u4ece ZIP \u5305\u52a0\u8f7d bLoaded = pComMgr -> CreateResProvider_ZIP (( IObjRef ** ) & pResProvider ); SASSERT_FMT ( bLoaded , _T ( \"load interface [%s] failed ! \"),_T(\" resprovider_zip \")); ZIPRES_PARAM param ; param . ZipFile ( pRenderFactory , _T ( \"uires.zip\" ), \"souizip\" ); bLoaded = pResProvider -> Init (( WPARAM ) & param , 0 ); SASSERT ( bLoaded ); #endif //\u5c06\u521b\u5efa\u7684 IResProvider \u4ea4\u7ed9 SApplication \u5bf9\u8c61 theApp -> AddResProvider ( pResProvider ); //\u52a0\u8f7d\u7cfb\u7edf\u8d44\u6e90 HMODULE hSysResource = LoadLibrary ( SYS_NAMED_RESOURCE ); if ( hSysResource ) { CAutoRefPtr < IResProvider > sysSesProvider ; CreateResProvider ( RES_PE ,( IObjRef ** ) & sysSesProvider ); sysSesProvider -> Init (( WPARAM ) hSysResource , 0 ); theApp -> LoadSystemNamedResource ( sysSesProvider ); } //\u52a0\u8f7d\u5168\u5c40\u8d44\u6e90\u63cf\u8ff0 XML theApp -> Init ( _T ( \"xml_init\" )); \u53ef\u4ee5\u770b\u5230\u8fd9\u91cc\u6839\u636e\u9884\u5b9a\u4e49\u5b8f\uff1aRES_TYPE \u63d0\u4f9b\u4e86 3 \u79cd\u53c2\u8003\u8d44\u6e90\u52a0\u8f7d\u5f62\u5f0f\u6765\u52a0\u8f7d\u7528\u6237\u81ea\u5b9a\u4e49 \u8d44\u6e90\u3002\u7136\u540e\u518d\u91c7\u7528 SResProviderPE \u7684\u8d44\u6e90\u52a0\u8f7d\u5668\u4ece\u7cfb\u7edf\u8d44\u6e90 DLL \u4e2d\u52a0\u8f7d\u7cfb\u7edf\u8d44\u6e90\u3002 \u52a0\u8f7d\u7cfb\u7edf\u8d44\u6e90\u4e00\u4e2a\u5173\u952e\u6b65\u9aa4\u5728\u4e8e\u8c03\u7528: theApp -> LoadSystemNamedResource ( sysSesProvider ); \u8fd9\u4e2a\u51fd\u6570\u4ece\u7cfb\u7edf\u8d44\u6e90\u52a0\u8f7d\u5668\u4e2d\u8bfb\u53d6\u90a3\u4e9b\u547d\u540d\u7684\u7cfb\u7edf\u8d44\u6e90\u3002 \u6240\u6709\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210\u540e\u8c03\u7528\uff1a //\u52a0\u8f7d\u5168\u5c40\u8d44\u6e90\u63cf\u8ff0 XML theApp -> Init ( _T ( \"xml_init\" )); \u6765\u521d\u59cb\u5316\u8d44\u6e90\u4e2d\u5b9a\u4e49\u7684\u5168\u5c40 Skin,Style,ObjAttr \u5bf9\u8c61\u3002 \u5927\u5bb6\u53ef\u4ee5\u60f3\u4e00\u60f3\u600e\u4e48\u6837\u628a\u8fd9\u4e24\u79cd\u8d44\u6e90\u4f7f\u7528\u4e00\u4e2a\u8d44\u6e90\u52a0\u8f7d\u5668\u6765\u5b8c\u6210\u3002","title":"4.3 \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8d44\u6e90\u7684\u7ec4\u7ec7"},{"location":"Development/4/","text":"4.4 \u5728 SOUI \u4e2d\u7528\u4e5d\u5bab\u683c\u62c9\u4f38\u65b9\u5f0f\u663e\u793a\u4e00\u4e2a\u56fe\u7247\u8d44\u6e90 \u00b6 SOUI \u7684\u521d\u5b66\u8005\u521a\u5f00\u59cb\u53ef\u80fd\u96be\u4ee5\u641e\u6e05\u695a\u5728 SOUI \u4e2d\u663e\u793a\u4e00\u4e2a\u56fe\u7247\u8d44\u6e90\u7684\u6d41\u7a0b\uff0c\u8fd9\u91cc\u505a\u4e00\u4e2a \u7b80\u5355\u7684\u793a\u8303\u3002 \u9996\u5148\u6211\u4eec\u51c6\u5907\u597d\u4e00\u5f20\u56fe\uff0c\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\u3002 \u7b2c\u4e00\u6b65\uff0c\u6211\u4eec\u9996\u5148\u628a\u8fd9\u4e2a\u56fe\u7247\u6587\u4ef6\u590d\u5236\u5230 demo \u7684 uires \u76ee\u5f55\u4e0b\uff0c\u65b0\u5efa\u4e00\u4e2a\u76ee\u5f55 jpg,\u4e0b\u9762 \u53ea\u6709\u8fd9\u4e00\u4e2a\u6587\u4ef6 9.jpg \u7b2c\u4e8c\u6b65\uff0c\u6211\u4eec\u9700\u8981\u5728 uires.idx \u4e2d\u5f15\u5165\u8be5\u56fe\u7247\u8d44\u6e90 <jpg> <file name= \"girl\" path= \"jpg\\9.jpg\" /> </jpg> \u6211\u4eec\u7ed9\u8fd9\u4e2a\u8d44\u6e90\u547d\u540d\u4e3a\"girl\"\u3002 \u7b2c\u4e09\u6b65\uff0c\u6211\u4eec\u5728\u5168\u5c40\u6216\u8005\u7a97\u53e3\u5c40\u90e8\u7684 skin \u7ed3\u70b9\u4e2d\u5b9a\u4e49\u4e00\u4e2a imgframe \u5bf9\u8c61\u3002\u8fd9\u91cc\u5b9a\u4e49\u5728\u4e3b \u7a97\u53e3\u7684\u5c40\u90e8 skin \u4e2d\u3002 ```xml ``` \u6ce8\u610f\u4e0a\u9762\u4ee3\u7801\u4e2d\u5bf9 girl \u7684\u5f15\u7528\uff0c\u6211\u4eec\u4fdd\u7559 x \u53ca y \u65b9\u5411\u5404 150 \u4e2a\u70b9\u4e0d\u62c9\u4f38\u3002 \u7b2c\u56db\u6b65\uff0c\u5728 UI \u4e2d\u5b9a\u4e49\u4e00\u4e2a img \u63a7\u4ef6\u5bf9\u8c61\u6765\u663e\u793a\u8be5\u56fe\u7247\u3002 xml <page title=\"jpg:girl\"> <img pos=\"0,0,-0,-0\" skin=\"skin_girl\"/> </page> <page title=\"jpg:girl\"> <img pos=\"0,0,-0,-0\" skin=\"skin_girl\"/> </page> \u5927\u529f\u544a\u6210\uff01 \u6211\u4eec\u8fd0\u884c\u4e00\u4e0b\u7a0b\u5e8f\u770b\u770b\u6548\u679c\u3002 \u4e0b\u9762\u662f\u7f29\u5c0f\u72b6\u6001\uff1a \u518d\u770b\u770b\u653e\u5927\u4e00\u70b9\u7684\u72b6\u6001\uff1a \u8fd9\u6837\u6548\u679c\u770b\u4e0a\u53bb\u597d\u4e9b\u4e86\u3002 \u5168\u90e8\u5de5\u4f5c\u5c31\u662f\u4fee\u6539 XML \u6587\u4ef6\uff0c\u4e0d\u9700\u8981\u6d89\u53ca\u4e00\u884c C++\u4ee3\u7801\uff0c\u5373\u53ef\u5b8c\u6210\u4e00\u4e2a\u56fe\u7247\u7684\u663e\u793a\u3002 \u4ece\u6587\u4ef6\u4e2d\u52a0\u8f7d\u56fe\u7247\u57fa\u672c\u7c7b\u4f3c\uff0c\u53ef\u4ee5\u53c2\u8003 demo \u4e2d\u4ece\u6587\u4ef6\u4e2d\u52a0\u8f7d GIF \u52a8\u753b\u7684\u4f8b\u5b50.","title":"4.4 \u5728 SOUI \u4e2d\u7528\u4e5d\u5bab\u683c\u62c9\u4f38\u65b9\u5f0f\u663e\u793a\u4e00\u4e2a\u56fe\u7247\u8d44\u6e90"},{"location":"Development/4/#44-soui","text":"SOUI \u7684\u521d\u5b66\u8005\u521a\u5f00\u59cb\u53ef\u80fd\u96be\u4ee5\u641e\u6e05\u695a\u5728 SOUI \u4e2d\u663e\u793a\u4e00\u4e2a\u56fe\u7247\u8d44\u6e90\u7684\u6d41\u7a0b\uff0c\u8fd9\u91cc\u505a\u4e00\u4e2a \u7b80\u5355\u7684\u793a\u8303\u3002 \u9996\u5148\u6211\u4eec\u51c6\u5907\u597d\u4e00\u5f20\u56fe\uff0c\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\u3002 \u7b2c\u4e00\u6b65\uff0c\u6211\u4eec\u9996\u5148\u628a\u8fd9\u4e2a\u56fe\u7247\u6587\u4ef6\u590d\u5236\u5230 demo \u7684 uires \u76ee\u5f55\u4e0b\uff0c\u65b0\u5efa\u4e00\u4e2a\u76ee\u5f55 jpg,\u4e0b\u9762 \u53ea\u6709\u8fd9\u4e00\u4e2a\u6587\u4ef6 9.jpg \u7b2c\u4e8c\u6b65\uff0c\u6211\u4eec\u9700\u8981\u5728 uires.idx \u4e2d\u5f15\u5165\u8be5\u56fe\u7247\u8d44\u6e90 <jpg> <file name= \"girl\" path= \"jpg\\9.jpg\" /> </jpg> \u6211\u4eec\u7ed9\u8fd9\u4e2a\u8d44\u6e90\u547d\u540d\u4e3a\"girl\"\u3002 \u7b2c\u4e09\u6b65\uff0c\u6211\u4eec\u5728\u5168\u5c40\u6216\u8005\u7a97\u53e3\u5c40\u90e8\u7684 skin \u7ed3\u70b9\u4e2d\u5b9a\u4e49\u4e00\u4e2a imgframe \u5bf9\u8c61\u3002\u8fd9\u91cc\u5b9a\u4e49\u5728\u4e3b \u7a97\u53e3\u7684\u5c40\u90e8 skin \u4e2d\u3002 ```xml ``` \u6ce8\u610f\u4e0a\u9762\u4ee3\u7801\u4e2d\u5bf9 girl \u7684\u5f15\u7528\uff0c\u6211\u4eec\u4fdd\u7559 x \u53ca y \u65b9\u5411\u5404 150 \u4e2a\u70b9\u4e0d\u62c9\u4f38\u3002 \u7b2c\u56db\u6b65\uff0c\u5728 UI \u4e2d\u5b9a\u4e49\u4e00\u4e2a img \u63a7\u4ef6\u5bf9\u8c61\u6765\u663e\u793a\u8be5\u56fe\u7247\u3002 xml <page title=\"jpg:girl\"> <img pos=\"0,0,-0,-0\" skin=\"skin_girl\"/> </page> <page title=\"jpg:girl\"> <img pos=\"0,0,-0,-0\" skin=\"skin_girl\"/> </page> \u5927\u529f\u544a\u6210\uff01 \u6211\u4eec\u8fd0\u884c\u4e00\u4e0b\u7a0b\u5e8f\u770b\u770b\u6548\u679c\u3002 \u4e0b\u9762\u662f\u7f29\u5c0f\u72b6\u6001\uff1a \u518d\u770b\u770b\u653e\u5927\u4e00\u70b9\u7684\u72b6\u6001\uff1a \u8fd9\u6837\u6548\u679c\u770b\u4e0a\u53bb\u597d\u4e9b\u4e86\u3002 \u5168\u90e8\u5de5\u4f5c\u5c31\u662f\u4fee\u6539 XML \u6587\u4ef6\uff0c\u4e0d\u9700\u8981\u6d89\u53ca\u4e00\u884c C++\u4ee3\u7801\uff0c\u5373\u53ef\u5b8c\u6210\u4e00\u4e2a\u56fe\u7247\u7684\u663e\u793a\u3002 \u4ece\u6587\u4ef6\u4e2d\u52a0\u8f7d\u56fe\u7247\u57fa\u672c\u7c7b\u4f3c\uff0c\u53ef\u4ee5\u53c2\u8003 demo \u4e2d\u4ece\u6587\u4ef6\u4e2d\u52a0\u8f7d GIF \u52a8\u753b\u7684\u4f8b\u5b50.","title":"4.4 \u5728 SOUI \u4e2d\u7528\u4e5d\u5bab\u683c\u62c9\u4f38\u65b9\u5f0f\u663e\u793a\u4e00\u4e2a\u56fe\u7247\u8d44\u6e90"},{"location":"Development/7/","text":"4.7 \u5728 SOUI \u4e2d\u4f7f\u7528\u6709\u7a97\u53e3\u53e5\u67c4\u7684\u5b50\u7a97\u53e3 \u00b6 \u65e0\u8bba\u4e00\u4e2a DirectUI \u7cfb\u7edf\u63d0\u4f9b\u7684 DUI \u63a7\u4ef6\u591a\u4e48\u4e30\u5bcc\uff0c\u603b\u4f1a\u6709\u4e9b\u60c5\u51b5\u4e0b\u7528\u6237\u9700\u8981\u5728 DUI \u7a97\u53e3 \u4e0a\u653e\u7f6e\u6709\u7a97\u53e3\u53e5\u67c4\u7684\u5b50\u7a97\u53e3\u3002 \u4e3a\u4e86\u548c\u65e0\u7a97\u53e3\u53e5\u67c4\u7684\u5b50\u7a97\u53e3\u76f8\u533a\u522b\uff0c\u8fd9\u91cc\u5c06\u6709\u7a97\u53e3\u53e5\u67c4\u7684\u5b50\u7a97\u53e3\u79f0\u4e4b\u4e3a\u771f\u7a97\u53e3\u3002 \u6bcf\u4e00\u4e2a\u4f7f\u7528 SOUI \u521b\u5efa\u7684\u754c\u9762\u90fd\u662f\u4ece SHostWnd \u6d3e\u751f\u51fa\u6765\u7684\u3002SHostWnd \u672c\u8eab\u5c31\u662f\u4e00\u4e2a \u6709\u7a97\u53e3\u53e5\u67c4\u7684\u771f\u7a97\u53e3\u3002 \u56e0\u6b64\u548c\u4e00\u822c\u7684 win32 \u7f16\u7a0b\u4e00\u6837\uff0c\u7528\u6237\u53ef\u4ee5\u7b80\u5355\u7684\u81ea\u5df1\u4ee5 SHostWnd.m_hWnd \u4e3a\u7236\u7a97\u53e3\u521b \u5efa\u5404\u79cd\u771f\u5b50\u7a97\u53e3\u3002\u7136\u540e\u548c win32 \u4e00\u6837\uff0c\u54cd\u5e94 resize \u7b49\u6d88\u606f\u81ea\u5df1\u7ba1\u7406\u5b50\u7a97\u53e3\u7684\u4f4d\u7f6e\u53ca\u663e \u793a\u3002 \u5f88\u663e\u7136\uff0c\u8fd9\u6837\u5904\u7406\u5c06\u4e0d\u80fd\u6709\u6548\u7684\u5229\u7528 SOUI \u63d0\u4f9b\u7684\u5f3a\u5927\u7684\u5e03\u5c40\u53ca\u5b50\u7a97\u53e3\u7ba1\u7406\u529f\u80fd\u3002 \u4e3a\u4e86\u80fd\u591f\u66f4\u6709\u6548\u7684\u7ba1\u7406\u771f\u7a97\u53e3\uff0c\u5728 SOUI \u7cfb\u7edf\u4e2d\u63d0\u4f9b\u4e86\u4e00\u4e2a\u63a7\u4ef6\uff1aSRealWnd\u3002 SRealWnd \u6d3e\u751f\u81ea SWindow\uff0c\u56e0\u6b64\u5b83\u80fd\u591f\u5b9e\u73b0\u548c SWindow \u4e00\u6837\u7684\u5e03\u5c40\u529f\u80fd\uff0c\u5e76\u88ab SOUI \u7cfb\u7edf\u7ba1\u7406\u7a97\u53e3\u7684\u5404\u79cd\u72b6\u6001\uff1a\u5982 size,visible \u7b49\u3002 \u8981\u4f7f\u7528 SReaWnd \u6765\u7ba1\u7406\u5b50\u7a97\u53e3\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u63a5\u53e3\uff1aIRealWndHandler IRealWndHandler \u7684\u5b9a\u4e49\uff1a /** * @struct IRealWndHandler * @brief * * Describe */ struct IRealWndHandler : public IObjRef { /** * SRealWnd::OnRealWndCreate * @brief \u7a97\u53e3\u521b\u5efa * @param SRealWnd *pRealWnd -- \u7a97\u53e3\u6307\u9488 * * Describe \u7a97\u53e3\u521b\u5efa */ virtual HWND OnRealWndCreate ( SRealWnd * pRealWnd ) = NULL ; /** * SRealWnd::OnRealWndDestroy * @brief \u9500\u6bc1\u7a97\u53e3 * @param SRealWnd *pRealWnd -- \u7a97\u53e3\u6307\u9488 * * Describe \u9500\u6bc1\u7a97\u53e3 */ virtual void OnRealWndDestroy ( SRealWnd * pRealWnd ) = NULL ; /** * SRealWnd::OnRealWndInit * @brief \u521d\u59cb\u5316\u7a97\u53e3 * @param SRealWnd *pRealWnd -- \u7a97\u53e3\u6307\u9488 * @return BOOL -- FALSE:\u4ea4\u7531\u7cfb\u7edf\u5904\u7406\uff0cTRUE:\u7528\u6237\u5904\u7406 * * Describe \u521d\u59cb\u5316\u7a97\u53e3 */ virtual BOOL OnRealWndInit ( SRealWnd * pRealWnd ) = NULL ; /** * SRealWnd::OnRealWndSize * @brief \u8c03\u6574\u7a97\u53e3\u5927\u5c0f * @param SRealWnd *pRealWnd -- \u7a97\u53e3\u6307\u9488 * @return BOOL -- FALSE\uff1a\u4ea4\u7531 SOUI \u5904\u7406; TRUE:\u7528\u6237\u7ba1\u7406\u7a97\u53e3\u7684\u79fb\u52a8 * * Describe \u8c03\u6574\u7a97\u53e3\u5927\u5c0f */ virtual BOOL OnRealWndSize ( SRealWnd * pRealWnd ) = NULL ; }; \u53ef\u4ee5\u770b\u5230\u8fd9\u91cc\u4e00\u5171\u6709 4 \u4e2a\u63a5\u53e3\uff0c\u5176\u4e2d OnRealWndInit \u662f OnRealWndSize \u4e3a\u771f\u7a97\u53e3\u521d\u59cb \u5316\u53ca\u4f4d\u7f6e\u8c03\u6574\u7684\u56de\u8c03\uff0c\u4e00\u822c\u53ef\u4ee5\u4e0d\u5904\u7406\uff0c\u5176\u5b83 2 \u4e2a\u63a5\u53e3\u5219\u662f\u7ba1\u7406\u771f\u7a97\u53e3\u7684\u521b\u5efa\u53ca\u9500\u6bc1\uff0c\u56e0 \u6b64\u5fc5\u987b\u6709\u5b9e\u73b0\u3002 \u63a5\u53e3\u5b9e\u73b0\u793a\u4f8b\uff1a \u771f\u7a97\u53e3\u7684\u5177\u4f53\u4f7f\u7528\u65b9\u6cd5\u53ef\u4ee5\u53c2\u8003 SOUI \u4ee3\u7801\u4e2d samples \u76ee\u5f55\u4e0b\u7684 mfc.demo\u3002 \u8fd9\u91cc\u628a\u4ee3\u7801\u5b9e\u73b0\u5e16\u51fa\u6765\uff1a SouiRealWndHandler.h #pragma once #include <unknown/obj-ref-impl.hpp> namespace SOUI { class CSouiRealWndHandler : public TObjRefImpl2 < IRealWndHandler , CSouiRealWndHandler > { public : CSouiRealWndHandler ( void ); ~ CSouiRealWndHandler ( void ); /** * SRealWnd::OnRealWndCreate * @brief \u521b\u5efa\u771f\u7a97\u53e3 * @param SRealWnd * pRealWnd -- \u7a97\u53e3\u6307\u9488 * @return HWND -- \u521b\u5efa\u51fa\u6765\u7684\u771f\u7a97\u53e3\u53e5\u67c4 * Describe */ virtual HWND OnRealWndCreate ( SRealWnd * pRealWnd ); /** * SRealWnd::OnRealWndDestroy * @brief \u9500\u6bc1\u7a97\u53e3 * @param SRealWnd *pRealWnd -- \u7a97\u53e3\u6307\u9488 * * Describe \u9500\u6bc1\u7a97\u53e3 */ virtual void OnRealWndDestroy ( SRealWnd * pRealWnd ); /** * SRealWnd::OnRealWndInit * @brief \u521d\u59cb\u5316\u7a97\u53e3 * @param SRealWnd *pRealWnd -- \u7a97\u53e3\u6307\u9488 * * Describe \u521d\u59cb\u5316\u7a97\u53e3 */ virtual BOOL OnRealWndInit ( SRealWnd * pRealWnd ); /** * SRealWnd::OnRealWndSize * @brief \u8c03\u6574\u7a97\u53e3\u5927\u5c0f * @param SRealWnd *pRealWnd -- \u7a97\u53e3\u6307\u9488 * @return BOOL -- TRUE:\u7528\u6237\u7ba1\u7406\u7a97\u53e3\u7684\u79fb\u52a8\uff1bFALSE\uff1a\u4ea4\u7531 SOUI \u81ea\u5df1\u7ba1\u7406\u3002 * Describe \u8c03\u6574\u7a97\u53e3\u5927\u5c0f, \u4ece pRealWnd \u4e2d\u83b7\u5f97\u7a97\u53e3\u4f4d\u7f6e\u3002 */ virtual BOOL OnRealWndSize ( SRealWnd * pRealWnd ); }; } SouiRealWndHandler.cpp: #include \"StdAfx.h\" #include \"SouiRealWndHandler.h\" namespace SOUI { CSouiRealWndHandler :: CSouiRealWndHandler ( void ) { } CSouiRealWndHandler ::~ CSouiRealWndHandler ( void ) { } HWND CSouiRealWndHandler :: OnRealWndCreate ( SRealWnd * pRealWnd ) { const SRealWndParam & param = pRealWnd -> GetRealWndParam (); if ( param . m_strClassName == _T ( \"button\" )) { //\u53ea\u5b9e\u73b0\u4e86 button \u7684\u521b\u5efa //\u5206\u914d\u4e00\u4e2a MFC CButton \u5bf9\u8c61 CButton * pbtn = new CButton ; //\u521b\u5efa CButton \u7a97\u53e3,\u6ce8\u610f\u4f7f\u7528 pRealWnd->GetContainer()->GetHostHwnd()\u4f5c \u4e3a CButton \u7684\u7236\u7a97\u53e3 //\u628a pRealWnd->GetID()\u4f5c\u4e3a\u771f\u7a97\u53e3\u7684 ID pbtn -> Create ( param . m_strWindowName , WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON , :: CRect ( 0 , 0 , 0 , 0 ), CWnd :: FromHandle ( pRealWnd -> GetContainer () -> GetHostHwnd ()), pRealWnd -> GetID ()); //\u628a pbtn \u7684\u6307\u9488\u653e\u5230 SRealWnd \u7684 Data \u4e2d\u4fdd\u5b58\uff0c\u4ee5\u4fbf\u5728\u7a97\u53e3 destroy \u65f6\u91ca\u653e pbtn \u5bf9 \u8c61\u3002 pRealWnd -> SetData ( pbtn ); //\u8fd4\u56de\u6210\u529f\u521b\u5efa\u540e\u7684\u7a97\u53e3\u53e5\u67c4 return pbtn -> m_hWnd ; } else { return 0 ; } } void CSouiRealWndHandler :: OnRealWndDestroy ( SRealWnd * pRealWnd ) { const SRealWndParam & param = pRealWnd -> GetRealWndParam (); if ( param . m_strClassName == _T ( \"button\" )) { //\u9500\u6bc1\u771f\u7a97\u53e3\uff0c\u91ca\u653e\u7a97\u53e3\u5360\u7528\u7684\u5185\u5b58 CButton * pbtn = ( CButton * ) pRealWnd -> GetData (); if ( pbtn ) { pbtn -> DestroyWindow (); delete pbtn ; } } } //\u4e0d\u5904\u7406\uff0c\u8fd4\u56de FALSE BOOL CSouiRealWndHandler :: OnRealWndSize ( SRealWnd * pRealWnd ) { return FALSE ; } //\u4e0d\u5904\u7406\uff0c\u8fd4\u56de FALSE BOOL CSouiRealWndHandler :: OnRealWndInit ( SRealWnd * pRealWnd ) { return FALSE ; } } \u6574\u4f53\u4e0a\u4ee3\u7801\u5f88\u7b80\u5355\uff0c\u914d\u4e0a\u6ce8\u91ca\uff0c\u5e94\u8be5\u4e00\u770b\u5c31\u61c2\u3002 XML \u914d\u7f6e\uff1a <SOUI title= \"DUI-DEMO\" width= \"600\" height= \"400\" appwin= \"0\" ncRect= \"5,5,5,5\" resize= \"1\" translucent= \"0\" > <root skin= \"skin.bkframe\" cache= \"1\" > <caption pos= \"0,0,-0,29\" > <text pos= \"11,9\" > %title% ver:%ver% </text> <imgbtn id= \"1\" name= \"btn_close\" skin= \"skin.btnclose\" pos= \"-45,0\" tip= \"close\" animate= \"0\" /> </caption> <window pos= \"0,29,-0,-0\" > <realwnd pos= \"10,10,-10,-10\" name= \"mfcbtn\" wndclass= \"button\" id= \"100\" wndname= \"MFC Button\" /> </window> </root> </SOUI> \u5728 XML \u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u4e00\u4e2a realwnd \u7684\u6807\u7b7e\uff0c\u8be5\u6807\u7b7e\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u5c5e\u6027\uff1awndclass\uff0c IRealWndHandler \u901a\u8fc7\u8be5\u5c5e\u6027\u6765\u5224\u65ad\u5e94\u8be5\u521b\u5efa\u4e00\u4e2a\u4ec0\u4e48\u6837\u7684\u771f\u7a97\u53e3\u3002 \u8fd0\u884c\u6548\u679c\uff1a \u4e0a\u9762\u7ea2\u6846\u4e2d\u7684\u6309\u94ae\u5373\u4e3a\u4f7f\u7528 realwnd \u6807\u7b7e\u521b\u5efa\u7684 MFC Button\u3002 \u771f\u7a97\u53e3\u7684\u6d88\u606f\u54cd\u5e94\uff1a \u7531\u4e8e\u771f\u7a97\u53e3\u662f SOUI \u4e3b\u7a97\u53e3\u7684\u5b50\u7a97\u53e3\uff0c\u56e0\u6b64\u771f\u7a97\u53e3\u7684\u6d88\u606f\u53ef\u4ee5\u5728 SOUI \u4e3b\u7a97\u53e3\u7684\u6d88\u606f\u6620\u5c04 \u8868\u4e2d\u5904\u7406\uff08\u6ce8\u610f\uff1a\u8fd9\u91cc\u4e0d\u662f SOUI \u63a7\u4ef6\u7684\u4e8b\u4ef6\u6620\u5c04\u8868\uff09\u3002 \u5982\uff1a #pragma once class CRealWndDlg : public SOUI :: SHostDialog { public : CRealWndDlg ( void ); ~ CRealWndDlg ( void ); //\u54cd\u5e94 MFC.button \u7684\u6309\u4e0b\u6d88\u606f, nID==100 \u4e3a\u5728 XML \u4e2d\u6307\u5b9a\u7684 realwnd \u7684 id \u5c5e\u6027\u3002 void OnBtnClick ( UINT uNotifyCode , int nID , HWND wndCtl ) { if ( uNotifyCode == BN_CLICKED && nID == 100 ) { SOUI :: SMessageBox ( m_hWnd , _T ( \"the real mfc button is clicked ! \"),_T(\" mfc . demo \"),MB_OK|MB_ICONEXCLAMATION); } } //\u6d88\u606f\u6620\u5c04\u8868 BEGIN_MSG_MAP_EX ( CMainDlg ) MSG_WM_COMMAND ( OnBtnClick ) CHAIN_MSG_MAP ( SOUI :: SHostDialog ) REFLECT_NOTIFICATIONS_EX () END_MSG_MAP () }; \u7ed3\u675f\u8bed\uff1a \u5f88\u663e\u7136\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u521b\u5efa\u51fa\u5404\u79cd\u7c7b\u578b\u7684\u5176\u5b83\u7a97\u53e3\u3002 \u7a97\u53e3\u521b\u5efa\u51fa\u6765\u540e\uff0c\u7cfb\u7edf\u5c31\u4f1a\u81ea\u52a8\u7ba1\u7406\u7a97\u53e3\u72b6\u6001\u3002 \u6700\u540e\uff0c\u8981\u8bb0\u4f4f\u4e00\u6761\uff1a\u6709\u771f\u7a97\u53e3\u65f6\uff0cSOUI \u4e3b\u7a97\u53e3\u4e0d\u80fd\u8bbe\u7f6e translucent=\"1\"\u8fd9\u4e00\u5c5e\u6027\u3002\u56e0 \u4e3a\u4efb\u4f55\u5b50\u7a97\u53e3\u5728\u534a\u900f\u660e\u7a97\u53e3\u4e0a\u90fd\u4e0d\u80fd\u6b63\u5e38\u663e\u793a\u3002\u8fd9\u4e00\u6761\u4e5f\u9002\u7528\u4e8e\u5305\u542b IE \u63a7\u4ef6\u7684\u7a97\u53e3\u3002","title":"4.7 \u5728 SOUI \u4e2d\u4f7f\u7528\u6709\u7a97\u53e3\u53e5\u67c4\u7684\u5b50\u7a97\u53e3"},{"location":"Development/7/#47-soui","text":"\u65e0\u8bba\u4e00\u4e2a DirectUI \u7cfb\u7edf\u63d0\u4f9b\u7684 DUI \u63a7\u4ef6\u591a\u4e48\u4e30\u5bcc\uff0c\u603b\u4f1a\u6709\u4e9b\u60c5\u51b5\u4e0b\u7528\u6237\u9700\u8981\u5728 DUI \u7a97\u53e3 \u4e0a\u653e\u7f6e\u6709\u7a97\u53e3\u53e5\u67c4\u7684\u5b50\u7a97\u53e3\u3002 \u4e3a\u4e86\u548c\u65e0\u7a97\u53e3\u53e5\u67c4\u7684\u5b50\u7a97\u53e3\u76f8\u533a\u522b\uff0c\u8fd9\u91cc\u5c06\u6709\u7a97\u53e3\u53e5\u67c4\u7684\u5b50\u7a97\u53e3\u79f0\u4e4b\u4e3a\u771f\u7a97\u53e3\u3002 \u6bcf\u4e00\u4e2a\u4f7f\u7528 SOUI \u521b\u5efa\u7684\u754c\u9762\u90fd\u662f\u4ece SHostWnd \u6d3e\u751f\u51fa\u6765\u7684\u3002SHostWnd \u672c\u8eab\u5c31\u662f\u4e00\u4e2a \u6709\u7a97\u53e3\u53e5\u67c4\u7684\u771f\u7a97\u53e3\u3002 \u56e0\u6b64\u548c\u4e00\u822c\u7684 win32 \u7f16\u7a0b\u4e00\u6837\uff0c\u7528\u6237\u53ef\u4ee5\u7b80\u5355\u7684\u81ea\u5df1\u4ee5 SHostWnd.m_hWnd \u4e3a\u7236\u7a97\u53e3\u521b \u5efa\u5404\u79cd\u771f\u5b50\u7a97\u53e3\u3002\u7136\u540e\u548c win32 \u4e00\u6837\uff0c\u54cd\u5e94 resize \u7b49\u6d88\u606f\u81ea\u5df1\u7ba1\u7406\u5b50\u7a97\u53e3\u7684\u4f4d\u7f6e\u53ca\u663e \u793a\u3002 \u5f88\u663e\u7136\uff0c\u8fd9\u6837\u5904\u7406\u5c06\u4e0d\u80fd\u6709\u6548\u7684\u5229\u7528 SOUI \u63d0\u4f9b\u7684\u5f3a\u5927\u7684\u5e03\u5c40\u53ca\u5b50\u7a97\u53e3\u7ba1\u7406\u529f\u80fd\u3002 \u4e3a\u4e86\u80fd\u591f\u66f4\u6709\u6548\u7684\u7ba1\u7406\u771f\u7a97\u53e3\uff0c\u5728 SOUI \u7cfb\u7edf\u4e2d\u63d0\u4f9b\u4e86\u4e00\u4e2a\u63a7\u4ef6\uff1aSRealWnd\u3002 SRealWnd \u6d3e\u751f\u81ea SWindow\uff0c\u56e0\u6b64\u5b83\u80fd\u591f\u5b9e\u73b0\u548c SWindow \u4e00\u6837\u7684\u5e03\u5c40\u529f\u80fd\uff0c\u5e76\u88ab SOUI \u7cfb\u7edf\u7ba1\u7406\u7a97\u53e3\u7684\u5404\u79cd\u72b6\u6001\uff1a\u5982 size,visible \u7b49\u3002 \u8981\u4f7f\u7528 SReaWnd \u6765\u7ba1\u7406\u5b50\u7a97\u53e3\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u63a5\u53e3\uff1aIRealWndHandler IRealWndHandler \u7684\u5b9a\u4e49\uff1a /** * @struct IRealWndHandler * @brief * * Describe */ struct IRealWndHandler : public IObjRef { /** * SRealWnd::OnRealWndCreate * @brief \u7a97\u53e3\u521b\u5efa * @param SRealWnd *pRealWnd -- \u7a97\u53e3\u6307\u9488 * * Describe \u7a97\u53e3\u521b\u5efa */ virtual HWND OnRealWndCreate ( SRealWnd * pRealWnd ) = NULL ; /** * SRealWnd::OnRealWndDestroy * @brief \u9500\u6bc1\u7a97\u53e3 * @param SRealWnd *pRealWnd -- \u7a97\u53e3\u6307\u9488 * * Describe \u9500\u6bc1\u7a97\u53e3 */ virtual void OnRealWndDestroy ( SRealWnd * pRealWnd ) = NULL ; /** * SRealWnd::OnRealWndInit * @brief \u521d\u59cb\u5316\u7a97\u53e3 * @param SRealWnd *pRealWnd -- \u7a97\u53e3\u6307\u9488 * @return BOOL -- FALSE:\u4ea4\u7531\u7cfb\u7edf\u5904\u7406\uff0cTRUE:\u7528\u6237\u5904\u7406 * * Describe \u521d\u59cb\u5316\u7a97\u53e3 */ virtual BOOL OnRealWndInit ( SRealWnd * pRealWnd ) = NULL ; /** * SRealWnd::OnRealWndSize * @brief \u8c03\u6574\u7a97\u53e3\u5927\u5c0f * @param SRealWnd *pRealWnd -- \u7a97\u53e3\u6307\u9488 * @return BOOL -- FALSE\uff1a\u4ea4\u7531 SOUI \u5904\u7406; TRUE:\u7528\u6237\u7ba1\u7406\u7a97\u53e3\u7684\u79fb\u52a8 * * Describe \u8c03\u6574\u7a97\u53e3\u5927\u5c0f */ virtual BOOL OnRealWndSize ( SRealWnd * pRealWnd ) = NULL ; }; \u53ef\u4ee5\u770b\u5230\u8fd9\u91cc\u4e00\u5171\u6709 4 \u4e2a\u63a5\u53e3\uff0c\u5176\u4e2d OnRealWndInit \u662f OnRealWndSize \u4e3a\u771f\u7a97\u53e3\u521d\u59cb \u5316\u53ca\u4f4d\u7f6e\u8c03\u6574\u7684\u56de\u8c03\uff0c\u4e00\u822c\u53ef\u4ee5\u4e0d\u5904\u7406\uff0c\u5176\u5b83 2 \u4e2a\u63a5\u53e3\u5219\u662f\u7ba1\u7406\u771f\u7a97\u53e3\u7684\u521b\u5efa\u53ca\u9500\u6bc1\uff0c\u56e0 \u6b64\u5fc5\u987b\u6709\u5b9e\u73b0\u3002 \u63a5\u53e3\u5b9e\u73b0\u793a\u4f8b\uff1a \u771f\u7a97\u53e3\u7684\u5177\u4f53\u4f7f\u7528\u65b9\u6cd5\u53ef\u4ee5\u53c2\u8003 SOUI \u4ee3\u7801\u4e2d samples \u76ee\u5f55\u4e0b\u7684 mfc.demo\u3002 \u8fd9\u91cc\u628a\u4ee3\u7801\u5b9e\u73b0\u5e16\u51fa\u6765\uff1a SouiRealWndHandler.h #pragma once #include <unknown/obj-ref-impl.hpp> namespace SOUI { class CSouiRealWndHandler : public TObjRefImpl2 < IRealWndHandler , CSouiRealWndHandler > { public : CSouiRealWndHandler ( void ); ~ CSouiRealWndHandler ( void ); /** * SRealWnd::OnRealWndCreate * @brief \u521b\u5efa\u771f\u7a97\u53e3 * @param SRealWnd * pRealWnd -- \u7a97\u53e3\u6307\u9488 * @return HWND -- \u521b\u5efa\u51fa\u6765\u7684\u771f\u7a97\u53e3\u53e5\u67c4 * Describe */ virtual HWND OnRealWndCreate ( SRealWnd * pRealWnd ); /** * SRealWnd::OnRealWndDestroy * @brief \u9500\u6bc1\u7a97\u53e3 * @param SRealWnd *pRealWnd -- \u7a97\u53e3\u6307\u9488 * * Describe \u9500\u6bc1\u7a97\u53e3 */ virtual void OnRealWndDestroy ( SRealWnd * pRealWnd ); /** * SRealWnd::OnRealWndInit * @brief \u521d\u59cb\u5316\u7a97\u53e3 * @param SRealWnd *pRealWnd -- \u7a97\u53e3\u6307\u9488 * * Describe \u521d\u59cb\u5316\u7a97\u53e3 */ virtual BOOL OnRealWndInit ( SRealWnd * pRealWnd ); /** * SRealWnd::OnRealWndSize * @brief \u8c03\u6574\u7a97\u53e3\u5927\u5c0f * @param SRealWnd *pRealWnd -- \u7a97\u53e3\u6307\u9488 * @return BOOL -- TRUE:\u7528\u6237\u7ba1\u7406\u7a97\u53e3\u7684\u79fb\u52a8\uff1bFALSE\uff1a\u4ea4\u7531 SOUI \u81ea\u5df1\u7ba1\u7406\u3002 * Describe \u8c03\u6574\u7a97\u53e3\u5927\u5c0f, \u4ece pRealWnd \u4e2d\u83b7\u5f97\u7a97\u53e3\u4f4d\u7f6e\u3002 */ virtual BOOL OnRealWndSize ( SRealWnd * pRealWnd ); }; } SouiRealWndHandler.cpp: #include \"StdAfx.h\" #include \"SouiRealWndHandler.h\" namespace SOUI { CSouiRealWndHandler :: CSouiRealWndHandler ( void ) { } CSouiRealWndHandler ::~ CSouiRealWndHandler ( void ) { } HWND CSouiRealWndHandler :: OnRealWndCreate ( SRealWnd * pRealWnd ) { const SRealWndParam & param = pRealWnd -> GetRealWndParam (); if ( param . m_strClassName == _T ( \"button\" )) { //\u53ea\u5b9e\u73b0\u4e86 button \u7684\u521b\u5efa //\u5206\u914d\u4e00\u4e2a MFC CButton \u5bf9\u8c61 CButton * pbtn = new CButton ; //\u521b\u5efa CButton \u7a97\u53e3,\u6ce8\u610f\u4f7f\u7528 pRealWnd->GetContainer()->GetHostHwnd()\u4f5c \u4e3a CButton \u7684\u7236\u7a97\u53e3 //\u628a pRealWnd->GetID()\u4f5c\u4e3a\u771f\u7a97\u53e3\u7684 ID pbtn -> Create ( param . m_strWindowName , WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON , :: CRect ( 0 , 0 , 0 , 0 ), CWnd :: FromHandle ( pRealWnd -> GetContainer () -> GetHostHwnd ()), pRealWnd -> GetID ()); //\u628a pbtn \u7684\u6307\u9488\u653e\u5230 SRealWnd \u7684 Data \u4e2d\u4fdd\u5b58\uff0c\u4ee5\u4fbf\u5728\u7a97\u53e3 destroy \u65f6\u91ca\u653e pbtn \u5bf9 \u8c61\u3002 pRealWnd -> SetData ( pbtn ); //\u8fd4\u56de\u6210\u529f\u521b\u5efa\u540e\u7684\u7a97\u53e3\u53e5\u67c4 return pbtn -> m_hWnd ; } else { return 0 ; } } void CSouiRealWndHandler :: OnRealWndDestroy ( SRealWnd * pRealWnd ) { const SRealWndParam & param = pRealWnd -> GetRealWndParam (); if ( param . m_strClassName == _T ( \"button\" )) { //\u9500\u6bc1\u771f\u7a97\u53e3\uff0c\u91ca\u653e\u7a97\u53e3\u5360\u7528\u7684\u5185\u5b58 CButton * pbtn = ( CButton * ) pRealWnd -> GetData (); if ( pbtn ) { pbtn -> DestroyWindow (); delete pbtn ; } } } //\u4e0d\u5904\u7406\uff0c\u8fd4\u56de FALSE BOOL CSouiRealWndHandler :: OnRealWndSize ( SRealWnd * pRealWnd ) { return FALSE ; } //\u4e0d\u5904\u7406\uff0c\u8fd4\u56de FALSE BOOL CSouiRealWndHandler :: OnRealWndInit ( SRealWnd * pRealWnd ) { return FALSE ; } } \u6574\u4f53\u4e0a\u4ee3\u7801\u5f88\u7b80\u5355\uff0c\u914d\u4e0a\u6ce8\u91ca\uff0c\u5e94\u8be5\u4e00\u770b\u5c31\u61c2\u3002 XML \u914d\u7f6e\uff1a <SOUI title= \"DUI-DEMO\" width= \"600\" height= \"400\" appwin= \"0\" ncRect= \"5,5,5,5\" resize= \"1\" translucent= \"0\" > <root skin= \"skin.bkframe\" cache= \"1\" > <caption pos= \"0,0,-0,29\" > <text pos= \"11,9\" > %title% ver:%ver% </text> <imgbtn id= \"1\" name= \"btn_close\" skin= \"skin.btnclose\" pos= \"-45,0\" tip= \"close\" animate= \"0\" /> </caption> <window pos= \"0,29,-0,-0\" > <realwnd pos= \"10,10,-10,-10\" name= \"mfcbtn\" wndclass= \"button\" id= \"100\" wndname= \"MFC Button\" /> </window> </root> </SOUI> \u5728 XML \u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u4e00\u4e2a realwnd \u7684\u6807\u7b7e\uff0c\u8be5\u6807\u7b7e\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u5c5e\u6027\uff1awndclass\uff0c IRealWndHandler \u901a\u8fc7\u8be5\u5c5e\u6027\u6765\u5224\u65ad\u5e94\u8be5\u521b\u5efa\u4e00\u4e2a\u4ec0\u4e48\u6837\u7684\u771f\u7a97\u53e3\u3002 \u8fd0\u884c\u6548\u679c\uff1a \u4e0a\u9762\u7ea2\u6846\u4e2d\u7684\u6309\u94ae\u5373\u4e3a\u4f7f\u7528 realwnd \u6807\u7b7e\u521b\u5efa\u7684 MFC Button\u3002 \u771f\u7a97\u53e3\u7684\u6d88\u606f\u54cd\u5e94\uff1a \u7531\u4e8e\u771f\u7a97\u53e3\u662f SOUI \u4e3b\u7a97\u53e3\u7684\u5b50\u7a97\u53e3\uff0c\u56e0\u6b64\u771f\u7a97\u53e3\u7684\u6d88\u606f\u53ef\u4ee5\u5728 SOUI \u4e3b\u7a97\u53e3\u7684\u6d88\u606f\u6620\u5c04 \u8868\u4e2d\u5904\u7406\uff08\u6ce8\u610f\uff1a\u8fd9\u91cc\u4e0d\u662f SOUI \u63a7\u4ef6\u7684\u4e8b\u4ef6\u6620\u5c04\u8868\uff09\u3002 \u5982\uff1a #pragma once class CRealWndDlg : public SOUI :: SHostDialog { public : CRealWndDlg ( void ); ~ CRealWndDlg ( void ); //\u54cd\u5e94 MFC.button \u7684\u6309\u4e0b\u6d88\u606f, nID==100 \u4e3a\u5728 XML \u4e2d\u6307\u5b9a\u7684 realwnd \u7684 id \u5c5e\u6027\u3002 void OnBtnClick ( UINT uNotifyCode , int nID , HWND wndCtl ) { if ( uNotifyCode == BN_CLICKED && nID == 100 ) { SOUI :: SMessageBox ( m_hWnd , _T ( \"the real mfc button is clicked ! \"),_T(\" mfc . demo \"),MB_OK|MB_ICONEXCLAMATION); } } //\u6d88\u606f\u6620\u5c04\u8868 BEGIN_MSG_MAP_EX ( CMainDlg ) MSG_WM_COMMAND ( OnBtnClick ) CHAIN_MSG_MAP ( SOUI :: SHostDialog ) REFLECT_NOTIFICATIONS_EX () END_MSG_MAP () }; \u7ed3\u675f\u8bed\uff1a \u5f88\u663e\u7136\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u521b\u5efa\u51fa\u5404\u79cd\u7c7b\u578b\u7684\u5176\u5b83\u7a97\u53e3\u3002 \u7a97\u53e3\u521b\u5efa\u51fa\u6765\u540e\uff0c\u7cfb\u7edf\u5c31\u4f1a\u81ea\u52a8\u7ba1\u7406\u7a97\u53e3\u72b6\u6001\u3002 \u6700\u540e\uff0c\u8981\u8bb0\u4f4f\u4e00\u6761\uff1a\u6709\u771f\u7a97\u53e3\u65f6\uff0cSOUI \u4e3b\u7a97\u53e3\u4e0d\u80fd\u8bbe\u7f6e translucent=\"1\"\u8fd9\u4e00\u5c5e\u6027\u3002\u56e0 \u4e3a\u4efb\u4f55\u5b50\u7a97\u53e3\u5728\u534a\u900f\u660e\u7a97\u53e3\u4e0a\u90fd\u4e0d\u80fd\u6b63\u5e38\u663e\u793a\u3002\u8fd9\u4e00\u6761\u4e5f\u9002\u7528\u4e8e\u5305\u542b IE \u63a7\u4ef6\u7684\u7a97\u53e3\u3002","title":"4.7 \u5728 SOUI \u4e2d\u4f7f\u7528\u6709\u7a97\u53e3\u53e5\u67c4\u7684\u5b50\u7a97\u53e3"},{"location":"Development/8/","text":"4.8 SOUI \u4e2d\u63a7\u4ef6\u4e8b\u4ef6\u7684\u54cd\u5e94 \u00b6 SOUI \u4e2d\u63d0\u4f9b\u4e86\u5927\u90e8\u5206\u5e38\u7528\u7684 win32 \u6807\u51c6\u63a7\u4ef6\u7684\u5b9e\u73b0\uff0c\u5982 pushbutton, checkbox, radiobox, edit, richedit, listbox, combobox, treectrl, listctrl (report), hotkeyctrl \u7b49\u3002 \u5927\u90e8\u5206\u63a7\u4ef6\u5728\u63a5\u6536\u7528\u6237\u8f93\u5165\u540e\uff0c\u4f1a\u53d1\u751f\u72b6\u6001\u7684\u6539\u53d8\uff0c\u5e76\u4ee5\u4e8b\u4ef6\u7684\u5f62\u5f0f\u4f20\u9012\u7ed9 UI \u7684\u6240\u6709\u8005\u3002 \u5728 SOUI \u4e2d\u63d0\u4f9b\u4e86\u4e24\u79cd\u5904\u7406\u4e8b\u4ef6\u7684\u65b9\u5f0f\uff1a 4.8.1 \u5728 SHostWnd \u7684\u6d3e\u751f\u7c7b\u4e2d\u91cd\u8f7d virtual BOOL SHostWnd::_HandleEvent ( SOUI :: EventArgs * pEvt ){ return FALSE ;} \u4e3a\u4e86\u66f4\u65b9\u4fbf\u7684\u5904\u7406\u4e8b\u4ef6\uff0cSOUI \u63d0\u4f9b\u4e86\u4e00\u7ec4\u5b8f\u6765\u6784\u9020\u8fd9\u4e2a\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u4ece\u800c\u63d0\u4f9b\u4e00\u79cd\u7c7b \u4f3c\u6d88\u606f\u6620\u5c04\u7684\u4e8b\u4ef6\u5904\u7406\u5f62\u5f0f\u3002 \u5982 demo \u7684 CMainDlg \u4e2d\u7684\u5b9e\u73b0\uff1a //UI \u63a7\u4ef6\u7684\u4e8b\u4ef6\u53ca\u54cd\u5e94\u51fd\u6570\u6620\u5c04\u8868 EVENT_MAP_BEGIN () EVENT_ID_COMMAND ( 1 , OnClose ) EVENT_ID_COMMAND ( 2 , OnMaximize ) EVENT_ID_COMMAND ( 3 , OnRestore ) EVENT_ID_COMMAND ( 5 , OnMinimize ) EVENT_NAME_CONTEXTMENU ( L \"edit_1140\" , OnEditMenu ) EVENT_NAME_COMMAND ( L \"btn_msgbox\" , OnBtnMsgBox ) EVENT_NAME_COMMAND ( L \"btnSelectGif\" , OnBtnSelectGIF ) EVENT_NAME_COMMAND ( L \"btn_menu\" , OnBtnMenu ) EVENT_NAME_COMMAND ( L \"btn_webkit_go\" , OnBtnWebkitGo ) EVENT_NAME_COMMAND ( L \"btn_webkit_back\" , OnBtnWebkitBackward ) EVENT_NAME_COMMAND ( L \"btn_webkit_fore\" , OnBtnWebkitForeward ) EVENT_NAME_COMMAND ( L \"btn_webkit_refresh\" , OnBtnWebkitRefresh ) EVENT_NAME_COMMAND ( L \"btn_hidetst\" , OnBtnHideTest ) EVENT_NAME_COMMAND ( L \"btn_insert_gif\" , OnBtnInsertGif2RE ) EVENT_MAP_END () ``` \u4e0a\u9762\u7684 EVENT_MAP_BEGIN () \u548c EVENT_MAP_END () \u7ed3\u5408\u6784\u9020\u51fa\u4e00\u4e2a _HandleEvent \u51fd\u6570 \u7684\u5b9e\u73b0\uff0c\u5177\u4f53\u53ef\u4ee5\u81ea\u5df1\u5c55\u5f00\u8fd9\u4e24\u4e2a\u5b8f\u67e5\u770b\u4ee3\u7801\u3002 \u540c\u65f6 SOUI \u4e5f\u63d0\u4f9b\u4e86\u4e00\u7ec4\u89e3\u6790 SOUI :: EventArgs * pEvt \u7684\u5b8f\uff0c\u5982\u4e0a\u4f8b\u4e2d\u7684 EVENT_NAME_COMMAND , EVENT_ID_COMMAND \u7b49\u3002 \u5e2e\u52a9\u7528\u6237\u76f4\u63a5\u4ece\u63a7\u4ef6\u7684 name \u6216\u8005 ID \u5c5e\u6027\u6620\u5c04\u5230\u6d88\u606f\u54cd\u5e94\u51fd\u6570\u3002 \u8fd9\u79cd\u4e8b\u4ef6\u54cd\u5e94\u65b9\u5f0f\u6700\u5927\u7684\u597d\u5904\u662f\u80fd\u591f\u96c6\u4e2d\u5904\u7406\u4e8b\u4ef6\u7684\u5206\u53d1\uff0c\u65b9\u4fbf\u9605\u8bfb\u4ee3\u7801\uff0c\u540c\u65f6\u4e5f\u548c\u4f20\u7edf \u7684 MFC \uff0c WTL \u7684\u7f16\u7a0b\u98ce\u683c\u7c7b\u4f3c\uff0c\u964d\u4f4e\u7528\u6237\u7684\u5b66\u4e60\u6210\u672c\u3002 4.8.2 \u91c7\u7528\u4e8b\u4ef6\u8ba2\u9605\u7684\u65b9\u5f0f\u54cd\u5e94\u63a7\u4ef6\u4e8b\u4ef6 \u867d\u7136\u4e8b\u4ef6\u6620\u5c04\u8868\u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u5355\u6709\u6548\u7684\u4e8b\u4ef6\u54cd\u5e94\u673a\u5236\uff0c\u7531\u4e8e\u4e8b\u4ef6\u6620\u5c04\u8868\u662f\u4e00\u79cd\u7f16\u8bd1\u671f\u5f62\u6210 \u7684\u9759\u6001\u7684\u6620\u5c04\u8868\uff0c\u5bf9\u4e8e\u5728\u8fd0\u884c\u671f\u52a8\u6001\u521b\u5efa\u7684\u63a7\u4ef6\u7684\u4e8b\u4ef6\u54cd\u5e94\u5c31\u65e0\u80fd\u4e3a\u529b\u4e86\u3002 \u5728 MFC \u4e2d\uff0c\u7a0b\u5e8f\u5458\u901a\u8fc7\u8981\u91cd\u8f7d\u7a97\u53e3\u7c7b\u7684 DefWindowProc \u6765\u5904\u7406\u8fd0\u884c\u671f\u95f4\u52a8\u6001\u521b\u5efa\u7684\u63a7 \u4ef6\u53d1\u6765\u7684\u6d88\u606f\u3002 \u8fd9\u79cd\u65b9\u5f0f\u7075\u6d3b\u6027\u591f\u4e86\uff0c\u4f46\u662f\u4e0d\u591f\u4f18\u96c5\uff0c\u8981\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u505a\u5927\u91cf\u7684 swich \u5206\u679d\uff0c\u5bfc\u81f4\u8fd9\u4e2a\u5904 \u7406\u51fd\u6570\u5f88\u96be\u7ef4\u62a4\u3002 \u8bbe\u8ba1\u6a21\u5f0f\u91cc\u7684\u89c2\u5bdf\u8005\u6a21\u5f0f\u53ef\u4ee5\u6bd4\u8f83\u597d\u7684\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002 \u4e3a\u4e9b\u5728 SOUI \u4e2d\u6211\u63d0\u4f9b\u4e86\u4e00\u79cd\u4e8b\u4ef6\u8ba2\u9605\u7684\u4e8b\u4ef6\u5904\u7406\u6a21\u5f0f\u3002 \u6211\u4eec\u5148\u770b\u4e00\u4e0b demo \u4e2d\u600e\u6837\u5904\u7406\u5217\u8868\u63a7\u4ef6\u7684\u8868\u5934\u70b9\u51fb\u6765\u6267\u884c\u6392\u5e8f\u64cd\u4f5c\uff1a ``` cpp void CMainDlg :: InitListCtrl () { //\u627e\u5230\u5217\u8868\u63a7\u4ef6 SListCtrl * pList = FindChildByName2 < SListCtrl > ( L \"lc_test\" ); if ( pList ) { //\u5217\u8868\u63a7\u4ef6\u7684\u552f\u4e00\u5b50\u63a7\u4ef6\u5373\u4e3a\u8868\u5934\u63a7\u4ef6 SWindow * pHeader = pList -> GetWindow ( GSW_FIRSTCHILD ); //\u5411\u8868\u5934\u63a7\u4ef6\u8ba2\u9605\u8868\u660e\u70b9\u51fb\u4e8b\u4ef6\uff0c\u5e76\u628a\u5b83\u548c OnListHeaderClick \u51fd\u6570\u76f8\u8fde\u3002 pHeader -> GetEventSet () -> subscribeEvent ( EVT_HEADER_CLICK , Subscriber ( & CMainDlg :: OnListHeaderClick , this )); //\u7701\u7565\u5217\u8868\u521d\u59cb\u5316\u4ee3\u7801 } } //\u8868\u5934\u70b9\u51fb\u4e8b\u4ef6\u5904\u7406\u51fd\u6570 bool CMainDlg :: OnListHeaderClick ( EventArgs * pEvtBase ) { //\u4e8b\u4ef6\u5bf9\u8c61\u5f3a\u5236\u8f6c\u6362 EventHeaderClick * pEvt = ( EventHeaderClick * ) pEvtBase ; SHeaderCtrl * pHeader = ( SHeaderCtrl * ) pEvt -> sender ; //\u4ece\u8868\u5934\u63a7\u4ef6\u83b7\u5f97\u5217\u8868\u63a7\u4ef6\u5bf9\u8c61 SListCtrl * pList = ( SListCtrl * ) pHeader -> GetParent (); //\u5217\u8868\u6570\u636e\u6392\u5e8f SHDITEM hditem ; hditem . mask = SHDI_ORDER ; pHeader -> GetItem ( pEvt -> iItem , & hditem ); pList -> SortItems ( funCmpare , & hditem . iOrder ); return true ; } \u901a\u8fc7\u4e8b\u4ef6\u8ba2\u9605\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u65b9\u4fbf\u7684\u5c06\u4e00\u4e2a\u63a7\u4ef6\u7684\u4e8b\u4ef6\u5173\u8054\u5230\u4e00\u4e2a\u5904\u7406\u51fd\u6570\u4e0a\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5 \u968f\u65f6\u53d6\u6d88\u8ba2\u9605\u3002 \u540c\u65f6\u4e8b\u4ef6\u8ba2\u9605\u4e5f\u662f\u5728\u811a\u672c\u4e2d\u54cd\u5e94\u63a7\u4ef6\u4e8b\u4ef6\u7684\u552f\u4e00\u65b9\u5f0f\uff08\u5173\u4e8e\u5728 SOUI \u4e2d\u4f7f\u7528 LUA \u811a\u672c\u5c06\u5728 \u540e\u7eed\u8bb2\u89e3\uff09\u3002","title":"4.8 SOUI \u4e2d\u63a7\u4ef6\u4e8b\u4ef6\u7684\u54cd\u5e94"},{"location":"Development/8/#48-soui","text":"SOUI \u4e2d\u63d0\u4f9b\u4e86\u5927\u90e8\u5206\u5e38\u7528\u7684 win32 \u6807\u51c6\u63a7\u4ef6\u7684\u5b9e\u73b0\uff0c\u5982 pushbutton, checkbox, radiobox, edit, richedit, listbox, combobox, treectrl, listctrl (report), hotkeyctrl \u7b49\u3002 \u5927\u90e8\u5206\u63a7\u4ef6\u5728\u63a5\u6536\u7528\u6237\u8f93\u5165\u540e\uff0c\u4f1a\u53d1\u751f\u72b6\u6001\u7684\u6539\u53d8\uff0c\u5e76\u4ee5\u4e8b\u4ef6\u7684\u5f62\u5f0f\u4f20\u9012\u7ed9 UI \u7684\u6240\u6709\u8005\u3002 \u5728 SOUI \u4e2d\u63d0\u4f9b\u4e86\u4e24\u79cd\u5904\u7406\u4e8b\u4ef6\u7684\u65b9\u5f0f\uff1a 4.8.1 \u5728 SHostWnd \u7684\u6d3e\u751f\u7c7b\u4e2d\u91cd\u8f7d virtual BOOL SHostWnd::_HandleEvent ( SOUI :: EventArgs * pEvt ){ return FALSE ;} \u4e3a\u4e86\u66f4\u65b9\u4fbf\u7684\u5904\u7406\u4e8b\u4ef6\uff0cSOUI \u63d0\u4f9b\u4e86\u4e00\u7ec4\u5b8f\u6765\u6784\u9020\u8fd9\u4e2a\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u4ece\u800c\u63d0\u4f9b\u4e00\u79cd\u7c7b \u4f3c\u6d88\u606f\u6620\u5c04\u7684\u4e8b\u4ef6\u5904\u7406\u5f62\u5f0f\u3002 \u5982 demo \u7684 CMainDlg \u4e2d\u7684\u5b9e\u73b0\uff1a //UI \u63a7\u4ef6\u7684\u4e8b\u4ef6\u53ca\u54cd\u5e94\u51fd\u6570\u6620\u5c04\u8868 EVENT_MAP_BEGIN () EVENT_ID_COMMAND ( 1 , OnClose ) EVENT_ID_COMMAND ( 2 , OnMaximize ) EVENT_ID_COMMAND ( 3 , OnRestore ) EVENT_ID_COMMAND ( 5 , OnMinimize ) EVENT_NAME_CONTEXTMENU ( L \"edit_1140\" , OnEditMenu ) EVENT_NAME_COMMAND ( L \"btn_msgbox\" , OnBtnMsgBox ) EVENT_NAME_COMMAND ( L \"btnSelectGif\" , OnBtnSelectGIF ) EVENT_NAME_COMMAND ( L \"btn_menu\" , OnBtnMenu ) EVENT_NAME_COMMAND ( L \"btn_webkit_go\" , OnBtnWebkitGo ) EVENT_NAME_COMMAND ( L \"btn_webkit_back\" , OnBtnWebkitBackward ) EVENT_NAME_COMMAND ( L \"btn_webkit_fore\" , OnBtnWebkitForeward ) EVENT_NAME_COMMAND ( L \"btn_webkit_refresh\" , OnBtnWebkitRefresh ) EVENT_NAME_COMMAND ( L \"btn_hidetst\" , OnBtnHideTest ) EVENT_NAME_COMMAND ( L \"btn_insert_gif\" , OnBtnInsertGif2RE ) EVENT_MAP_END () ``` \u4e0a\u9762\u7684 EVENT_MAP_BEGIN () \u548c EVENT_MAP_END () \u7ed3\u5408\u6784\u9020\u51fa\u4e00\u4e2a _HandleEvent \u51fd\u6570 \u7684\u5b9e\u73b0\uff0c\u5177\u4f53\u53ef\u4ee5\u81ea\u5df1\u5c55\u5f00\u8fd9\u4e24\u4e2a\u5b8f\u67e5\u770b\u4ee3\u7801\u3002 \u540c\u65f6 SOUI \u4e5f\u63d0\u4f9b\u4e86\u4e00\u7ec4\u89e3\u6790 SOUI :: EventArgs * pEvt \u7684\u5b8f\uff0c\u5982\u4e0a\u4f8b\u4e2d\u7684 EVENT_NAME_COMMAND , EVENT_ID_COMMAND \u7b49\u3002 \u5e2e\u52a9\u7528\u6237\u76f4\u63a5\u4ece\u63a7\u4ef6\u7684 name \u6216\u8005 ID \u5c5e\u6027\u6620\u5c04\u5230\u6d88\u606f\u54cd\u5e94\u51fd\u6570\u3002 \u8fd9\u79cd\u4e8b\u4ef6\u54cd\u5e94\u65b9\u5f0f\u6700\u5927\u7684\u597d\u5904\u662f\u80fd\u591f\u96c6\u4e2d\u5904\u7406\u4e8b\u4ef6\u7684\u5206\u53d1\uff0c\u65b9\u4fbf\u9605\u8bfb\u4ee3\u7801\uff0c\u540c\u65f6\u4e5f\u548c\u4f20\u7edf \u7684 MFC \uff0c WTL \u7684\u7f16\u7a0b\u98ce\u683c\u7c7b\u4f3c\uff0c\u964d\u4f4e\u7528\u6237\u7684\u5b66\u4e60\u6210\u672c\u3002 4.8.2 \u91c7\u7528\u4e8b\u4ef6\u8ba2\u9605\u7684\u65b9\u5f0f\u54cd\u5e94\u63a7\u4ef6\u4e8b\u4ef6 \u867d\u7136\u4e8b\u4ef6\u6620\u5c04\u8868\u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u5355\u6709\u6548\u7684\u4e8b\u4ef6\u54cd\u5e94\u673a\u5236\uff0c\u7531\u4e8e\u4e8b\u4ef6\u6620\u5c04\u8868\u662f\u4e00\u79cd\u7f16\u8bd1\u671f\u5f62\u6210 \u7684\u9759\u6001\u7684\u6620\u5c04\u8868\uff0c\u5bf9\u4e8e\u5728\u8fd0\u884c\u671f\u52a8\u6001\u521b\u5efa\u7684\u63a7\u4ef6\u7684\u4e8b\u4ef6\u54cd\u5e94\u5c31\u65e0\u80fd\u4e3a\u529b\u4e86\u3002 \u5728 MFC \u4e2d\uff0c\u7a0b\u5e8f\u5458\u901a\u8fc7\u8981\u91cd\u8f7d\u7a97\u53e3\u7c7b\u7684 DefWindowProc \u6765\u5904\u7406\u8fd0\u884c\u671f\u95f4\u52a8\u6001\u521b\u5efa\u7684\u63a7 \u4ef6\u53d1\u6765\u7684\u6d88\u606f\u3002 \u8fd9\u79cd\u65b9\u5f0f\u7075\u6d3b\u6027\u591f\u4e86\uff0c\u4f46\u662f\u4e0d\u591f\u4f18\u96c5\uff0c\u8981\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u505a\u5927\u91cf\u7684 swich \u5206\u679d\uff0c\u5bfc\u81f4\u8fd9\u4e2a\u5904 \u7406\u51fd\u6570\u5f88\u96be\u7ef4\u62a4\u3002 \u8bbe\u8ba1\u6a21\u5f0f\u91cc\u7684\u89c2\u5bdf\u8005\u6a21\u5f0f\u53ef\u4ee5\u6bd4\u8f83\u597d\u7684\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002 \u4e3a\u4e9b\u5728 SOUI \u4e2d\u6211\u63d0\u4f9b\u4e86\u4e00\u79cd\u4e8b\u4ef6\u8ba2\u9605\u7684\u4e8b\u4ef6\u5904\u7406\u6a21\u5f0f\u3002 \u6211\u4eec\u5148\u770b\u4e00\u4e0b demo \u4e2d\u600e\u6837\u5904\u7406\u5217\u8868\u63a7\u4ef6\u7684\u8868\u5934\u70b9\u51fb\u6765\u6267\u884c\u6392\u5e8f\u64cd\u4f5c\uff1a ``` cpp void CMainDlg :: InitListCtrl () { //\u627e\u5230\u5217\u8868\u63a7\u4ef6 SListCtrl * pList = FindChildByName2 < SListCtrl > ( L \"lc_test\" ); if ( pList ) { //\u5217\u8868\u63a7\u4ef6\u7684\u552f\u4e00\u5b50\u63a7\u4ef6\u5373\u4e3a\u8868\u5934\u63a7\u4ef6 SWindow * pHeader = pList -> GetWindow ( GSW_FIRSTCHILD ); //\u5411\u8868\u5934\u63a7\u4ef6\u8ba2\u9605\u8868\u660e\u70b9\u51fb\u4e8b\u4ef6\uff0c\u5e76\u628a\u5b83\u548c OnListHeaderClick \u51fd\u6570\u76f8\u8fde\u3002 pHeader -> GetEventSet () -> subscribeEvent ( EVT_HEADER_CLICK , Subscriber ( & CMainDlg :: OnListHeaderClick , this )); //\u7701\u7565\u5217\u8868\u521d\u59cb\u5316\u4ee3\u7801 } } //\u8868\u5934\u70b9\u51fb\u4e8b\u4ef6\u5904\u7406\u51fd\u6570 bool CMainDlg :: OnListHeaderClick ( EventArgs * pEvtBase ) { //\u4e8b\u4ef6\u5bf9\u8c61\u5f3a\u5236\u8f6c\u6362 EventHeaderClick * pEvt = ( EventHeaderClick * ) pEvtBase ; SHeaderCtrl * pHeader = ( SHeaderCtrl * ) pEvt -> sender ; //\u4ece\u8868\u5934\u63a7\u4ef6\u83b7\u5f97\u5217\u8868\u63a7\u4ef6\u5bf9\u8c61 SListCtrl * pList = ( SListCtrl * ) pHeader -> GetParent (); //\u5217\u8868\u6570\u636e\u6392\u5e8f SHDITEM hditem ; hditem . mask = SHDI_ORDER ; pHeader -> GetItem ( pEvt -> iItem , & hditem ); pList -> SortItems ( funCmpare , & hditem . iOrder ); return true ; } \u901a\u8fc7\u4e8b\u4ef6\u8ba2\u9605\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u65b9\u4fbf\u7684\u5c06\u4e00\u4e2a\u63a7\u4ef6\u7684\u4e8b\u4ef6\u5173\u8054\u5230\u4e00\u4e2a\u5904\u7406\u51fd\u6570\u4e0a\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5 \u968f\u65f6\u53d6\u6d88\u8ba2\u9605\u3002 \u540c\u65f6\u4e8b\u4ef6\u8ba2\u9605\u4e5f\u662f\u5728\u811a\u672c\u4e2d\u54cd\u5e94\u63a7\u4ef6\u4e8b\u4ef6\u7684\u552f\u4e00\u65b9\u5f0f\uff08\u5173\u4e8e\u5728 SOUI \u4e2d\u4f7f\u7528 LUA \u811a\u672c\u5c06\u5728 \u540e\u7eed\u8bb2\u89e3\uff09\u3002","title":"4.8 SOUI \u4e2d\u63a7\u4ef6\u4e8b\u4ef6\u7684\u54cd\u5e94"},{"location":"Development/9/","text":"4.9 SOUI \u591a\u8bed\u8a00\u7ffb\u8bd1\u673a\u5236 \u00b6 \u4e3a UI \u5728\u4e0d\u540c\u5730\u533a\u663e\u793a\u4e0d\u540c\u7684\u8bed\u8a00\u662f\u4ea7\u54c1\u56fd\u9645\u5316\u7684\u4e00\u4e2a\u91cd\u8981\u8981\u6c42\u3002 \u5728 SOUI \u4e2d\u5b9e\u73b0\u4e86\u4e00\u5957\u7c7b\u4f3c QT \u7684\u591a\u8bed\u8a00\u7ffb\u8bd1\u673a\u5236\uff1a\u5e03\u5c40 XML \u4e0d\u9700\u8981\u8c03\u6574\uff0c\u7a0b\u5e8f\u4ee3\u7801\u4e5f\u4e0d \u9700\u8981\u8c03\u6574\uff0c\u53ea\u9700\u8981\u4e3a\u4e0d\u540c\u5730\u533a\u7684\u7528\u6237\u63d0\u4f9b\u4e0d\u540c\u7684\u8bed\u8a00\u7ffb\u8bd1\u6587\u4ef6\u5373\u53ef\u3002 \u5728 SOUI \u4e2d\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86\u4e00\u4e2a\u4f7f\u7528\u660e\u6587 XML \u7684\u8bed\u8a00\u7ffb\u8bd1\u6a21\u5757\uff1atranslator.dll \u4e3a\u4e86\u4f7f\u7528\u591a\u8bed\u8a00\u7ffb\u8bd1\uff0c\u9996\u5148\u9700\u8981\u51c6\u5907\u4e00\u4e2a\u8bed\u8a00\u7ffb\u8bd1\u7684 XML \u6587\u4ef6\u3002demo \u4e2d\u4f7f\u7528\u7684\u7ffb\u8bd1\u6587 \u4ef6\u5982\u4e0b: <?xml version=\"1.0\" encoding=\"utf-8\"?> <language name= \"ch\" guid= \"{0DAEDE3C-6B94-4a81-9A55-C304FDD69D98}\" > <context> <!--\u6ca1\u6709\u4e0a\u4e0b\u6587\u7684\u7ffb\u8bd1--> </context> <context name= \"editmenu\" > <message> <source> copy </source> <translation> \u590d\u5236 </translation> </message> <message> <source> cut </source> <translation> \u526a\u5207 </translation> </message> <message> <source> paste </source> <translation> \u7c98\u8d34 </translation> </message> </context> <context name= \"messagebox\" > <message> <source> ok </source> <translation> \u786e\u5b9a </translation> </message> <message> <source> cancel </source> <translation> \u53d6\u6d88 </translation> </message> <message> <source> retry </source> <translation> \u91cd\u8bd5 </translation> </message> </context> <context name= \"dlg_main\" > <message> <source> close </source> <translation> \u5173\u95ed\u7a97\u53e3 </translation> </message> </context> </language> \u53ef\u4ee5\u770b\u5230\u8be5 XML \u4e2d\u6709\u4e00\u4e2a language \u7684\u6839\u8282\u70b9\uff0c\u8be5\u8282\u70b9\u6709\u4e24\u4e2a\u5c5e\u6027\uff1aname \u548c guid\uff0c\u8fd9 \u4e24\u4e2a\u5c5e\u6027\u90fd\u662f\u7528\u6765\u6807\u8bc6\u8be5\u7ffb\u8bd1\u6587\u4ef6\u7684\u3002 \u5728 language \u8282\u70b9\u4e0b\uff0c\u6709\u591a\u4e2a context \u8282\u70b9\uff0c\u6bcf\u4e2a context \u8282\u70b9\u6709\u4e00\u4e2a name \u5c5e\u6027\uff08\u53ef\u4ee5 \u4e3a\u7a7a\uff09\uff0c\u5bf9\u5e94\u4e00\u4e2a\u7ffb\u8bd1\u4e0a\u4e0b\u6587\u3002 \u6bcf\u4e00\u4e2a context \u4e0b\u6709\u4e0d\u540c\u6570\u91cf\u7684 message \u7ed3\u70b9\uff0c\u6bcf\u4e2a message \u53c8\u6709\u4e24\u4e2a\u5b50\u8282\u70b9\uff1a source \u548c translation\u3002 source \u5bf9\u5e94\u9700\u8981\u7ffb\u8bd1\u7684\u6587\u5b57\uff0c\u800c translation \u5219\u5bf9\u5e94\u7ffb\u8bd1\u540e\u7684\u6587\u5b57\u3002 \u8981\u4f7f\u7528\u8fd9\u4e2a\u8bed\u8a00\u7ffb\u8bd1\u6587\u4ef6\uff0c\u9996\u5148\u9700\u8981\u4ece translator.dll \u4e2d\u521b\u5efa\u4e00\u4e2a SOUI::ITranslatorMgr \u5bf9\u8c61\uff0c\u5e76\u5c06\u8be5\u5bf9\u8c61\u4ea4\u7ed9 SOUI::SApplication \u7ba1\u7406\u3002 \u518d\u4ece ItranslatorMgr \u5bf9\u8c61\u521b\u5efa SOUI::ITranslator \u5bf9\u8c61\uff0c\u5e76\u5c06 Itranslator \u5bf9\u8c61\u6dfb\u52a0\u5230 ItranslatorMgr \u7ba1\u7406\u7684\u7ffb\u8bd1\u5217\u8868\u4e2d\u3002 \u6700\u540e\u8fd8\u8981\u4e3a ITranslator \u5bf9\u8c61\u52a0\u8f7d\u7ffb\u8bd1\u6570\u636e\u6e90\uff08\u4e5f\u5c31\u662f\u524d\u9762\u63d0\u4f9b\u7684 XML \u6587\u4ef6\uff09\u3002 \u4e0b\u9762\u662f demo \u4e2d\u4f7f\u7528\u548c\u8bed\u8a00\u7ffb\u8bd1\u76f8\u5173\u7684\u4ee3\u7801\uff08\u89c1_tWinMain \u51fd\u6570\uff09 SApplication * theApp = new SApplication ( pRenderFactory , hInstance ); //SOUI APP CAutoRefPtr < ITranslatorMgr > transMgr ; //\u591a\u8bed\u8a00\u7ffb\u8bd1\u6a21\u5757\uff0c\u7531 translator.dll \u63d0\u4f9b transLoader . CreateInstance ( \"translator.dll\" ,( IObjRef ** ) & transMgr ); // if ( trans ) { //\u52a0\u8f7d\u8bed\u8a00\u7ffb\u8bd1\u5305 theApp -> SetTranslator ( transMgr ); pugi :: xml_document xmlLang ; if ( theApp -> LoadXmlDocment ( xmlLang , _T ( \"lang_cn\" ), _T ( \"translator\" ))) { CAutoRefPtr < ITranslator > langCN ; transMgr -> CreateTranslator ( & langCN ); langCN -> Load ( & xmlLang . child ( L \"language\" ), 1 ); //1=LD_XML transMgr -> InstallTranslator ( langCN ); } } \u6211\u4eec\u5148\u770b\u4e00\u4e0b editmemu \u7684 XML\uff1a <editmenu trCtx= \"editmenu\" iconSkin= \"_skin.sys.icons\" itemHeight= \"26\" iconMargin= \"4\" textMargin= \"8\" > <item id= \"1\" icon= \"3\" > cut </item> <item id= \"2\" icon= \"4\" > copy </item> <item id= \"3\" icon= \"5\" > paste </item> <item id= \"4\" > delete </item> <sep/> <item id= \"5\" > select all </item> </editmenu> \u5728\u8fd9\u4e2a XML \u4e2d\uff0c\u6839\u8282\u70b9\u6709\u4e00\u4e2a\u5c5e\u6027 trCtx\uff0c\u4ee3\u8868\u7ffb\u8bd1\u4e0a\u4e0b\u6587\uff0c\u5bf9\u5e94\u8bed\u8a00\u7ffb\u8bd1\u6587\u4ef6\u4e2d\u7684 context \u4e2d\u7684 name \u5c5e\u6027\u3002 \u5728\u8fd9\u4e2a menu \u5b9a\u4e49\u4e2d\uff0c\u6240\u6709\u7684\u83dc\u5355\u9879\u7684\u6587\u5b57\u5168\u662f\u82f1\u6587\u3002\u5176\u4e2d\u524d\u9762 3 \u9879\uff1acut, copy and paste \u5728\u8bed\u8a00\u7ffb\u8bd1\u6587\u4ef6\u4e2d\u6709\u5bf9\u5e94\u7684\u7ffb\u8bd1\u9879\u3002 \u4e0b\u56fe\u4e3a\u7a0b\u5e8f\u8fd0\u884c\u65f6 edit \u7684\u53f3\u952e\u83dc\u5355\u663e\u793a\u7ed3\u679c\uff1a \u4e0a\u9762\u6f14\u793a\u7684\u662f\u83dc\u5355\u8d44\u6e90\u7684\u8bed\u8a00\u7ffb\u8bd1\uff0c\u5e03\u5c40 XML \u4e2d\u7684\u6587\u5b57\u7684\u7ffb\u8bd1\u57fa\u672c\u4e00\u6837\uff0c\u53ea\u9700\u8981\u4e3a\u5e03\u5c40 \u7684\u6839\u7ed3\u70b9\u5b9a\u4e49\u4e00\u4e2a\u7ffb\u8bd1\u4e0a\u4e0b\u6587(trCtx)\uff08\u6ca1\u6709\u5b9a\u4e49\u65f6\u5219\u4ece\u6ca1\u6709\u6307\u5b9a name \u5c5e\u6027\u7684 context \u91cc \u67e5\u627e\u7ffb\u8bd1\u7ed3\u679c\uff09\u3002 \u53ef\u4ee5\u53c2\u89c1 demo \u7684\"close\u201d\u6309\u7167\u7684 tooltip \u7684\u7ffb\u8bd1\u3002 \u4e0d\u7ba1\u662f\u83dc\u5355 XML \u8fd8\u662f\u5e03\u5c40 XML\uff0c\u5b83\u4eec\u90fd\u662f\u9759\u6001\u7684\uff0c\u7ecf\u8fc7\u8bbe\u8ba1\u9700\u8981\u4f7f\u7528\u4ee3\u7801\u5f80 UI \u6dfb\u52a0\u65b0 \u7684\u6587\u5b57\uff0c\u540c\u6837\u4e5f\u9700\u8981\u7ffb\u8bd1\uff0c\u8fd9\u4e2a\u65f6\u5019\u5982\u4f55\u5904\u7406\uff1f \u5176\u5b9e\u770b\u4e00\u4e0b\u9759\u6001\u8d44\u6e90\u7ffb\u8bd1\u7684\u4ee3\u7801\u5c31\u77e5\u9053\uff0c\u8981\u5b9e\u73b0\u8bed\u8a00\u7ffb\u8bd1\uff0c\u9700\u8981\u4e3a\u6bcf\u4e00\u53e5\u5f85\u7ffb\u8bd1\u7684\u6587\u5b57\u8c03 \u7528\u4e00\u4e2a\u51fd\u6570\uff1a SApplication :: getSingleton (). GetTranslator () -> tr ( const SStringW & strSrc , const SStringW & strCtx ) \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u7b49\u7ffb\u8bd1\u5b57\u7b26\u4e32\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u7ffb\u8bd1\u4e0a\u4e0b\u6587\u3002 \u8003\u8651\u5230\u8bed\u53e5\u592a\u957f\uff0c\u7cfb\u7edf\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5b8f\uff1a #define TR(p1,p2) SApplication :: getSingleton (). GetTranslator () -> tr ( p1 , p2 ) \u8fd9\u6837\u7528 TR \u5c31\u53ef\u4ee5\u5b9e\u73b0\u6587\u5b57\u7ffb\u8bd1\u4e86\u3002","title":"4.9 SOUI \u591a\u8bed\u8a00\u7ffb\u8bd1\u673a\u5236"},{"location":"Development/9/#49-soui","text":"\u4e3a UI \u5728\u4e0d\u540c\u5730\u533a\u663e\u793a\u4e0d\u540c\u7684\u8bed\u8a00\u662f\u4ea7\u54c1\u56fd\u9645\u5316\u7684\u4e00\u4e2a\u91cd\u8981\u8981\u6c42\u3002 \u5728 SOUI \u4e2d\u5b9e\u73b0\u4e86\u4e00\u5957\u7c7b\u4f3c QT \u7684\u591a\u8bed\u8a00\u7ffb\u8bd1\u673a\u5236\uff1a\u5e03\u5c40 XML \u4e0d\u9700\u8981\u8c03\u6574\uff0c\u7a0b\u5e8f\u4ee3\u7801\u4e5f\u4e0d \u9700\u8981\u8c03\u6574\uff0c\u53ea\u9700\u8981\u4e3a\u4e0d\u540c\u5730\u533a\u7684\u7528\u6237\u63d0\u4f9b\u4e0d\u540c\u7684\u8bed\u8a00\u7ffb\u8bd1\u6587\u4ef6\u5373\u53ef\u3002 \u5728 SOUI \u4e2d\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86\u4e00\u4e2a\u4f7f\u7528\u660e\u6587 XML \u7684\u8bed\u8a00\u7ffb\u8bd1\u6a21\u5757\uff1atranslator.dll \u4e3a\u4e86\u4f7f\u7528\u591a\u8bed\u8a00\u7ffb\u8bd1\uff0c\u9996\u5148\u9700\u8981\u51c6\u5907\u4e00\u4e2a\u8bed\u8a00\u7ffb\u8bd1\u7684 XML \u6587\u4ef6\u3002demo \u4e2d\u4f7f\u7528\u7684\u7ffb\u8bd1\u6587 \u4ef6\u5982\u4e0b: <?xml version=\"1.0\" encoding=\"utf-8\"?> <language name= \"ch\" guid= \"{0DAEDE3C-6B94-4a81-9A55-C304FDD69D98}\" > <context> <!--\u6ca1\u6709\u4e0a\u4e0b\u6587\u7684\u7ffb\u8bd1--> </context> <context name= \"editmenu\" > <message> <source> copy </source> <translation> \u590d\u5236 </translation> </message> <message> <source> cut </source> <translation> \u526a\u5207 </translation> </message> <message> <source> paste </source> <translation> \u7c98\u8d34 </translation> </message> </context> <context name= \"messagebox\" > <message> <source> ok </source> <translation> \u786e\u5b9a </translation> </message> <message> <source> cancel </source> <translation> \u53d6\u6d88 </translation> </message> <message> <source> retry </source> <translation> \u91cd\u8bd5 </translation> </message> </context> <context name= \"dlg_main\" > <message> <source> close </source> <translation> \u5173\u95ed\u7a97\u53e3 </translation> </message> </context> </language> \u53ef\u4ee5\u770b\u5230\u8be5 XML \u4e2d\u6709\u4e00\u4e2a language \u7684\u6839\u8282\u70b9\uff0c\u8be5\u8282\u70b9\u6709\u4e24\u4e2a\u5c5e\u6027\uff1aname \u548c guid\uff0c\u8fd9 \u4e24\u4e2a\u5c5e\u6027\u90fd\u662f\u7528\u6765\u6807\u8bc6\u8be5\u7ffb\u8bd1\u6587\u4ef6\u7684\u3002 \u5728 language \u8282\u70b9\u4e0b\uff0c\u6709\u591a\u4e2a context \u8282\u70b9\uff0c\u6bcf\u4e2a context \u8282\u70b9\u6709\u4e00\u4e2a name \u5c5e\u6027\uff08\u53ef\u4ee5 \u4e3a\u7a7a\uff09\uff0c\u5bf9\u5e94\u4e00\u4e2a\u7ffb\u8bd1\u4e0a\u4e0b\u6587\u3002 \u6bcf\u4e00\u4e2a context \u4e0b\u6709\u4e0d\u540c\u6570\u91cf\u7684 message \u7ed3\u70b9\uff0c\u6bcf\u4e2a message \u53c8\u6709\u4e24\u4e2a\u5b50\u8282\u70b9\uff1a source \u548c translation\u3002 source \u5bf9\u5e94\u9700\u8981\u7ffb\u8bd1\u7684\u6587\u5b57\uff0c\u800c translation \u5219\u5bf9\u5e94\u7ffb\u8bd1\u540e\u7684\u6587\u5b57\u3002 \u8981\u4f7f\u7528\u8fd9\u4e2a\u8bed\u8a00\u7ffb\u8bd1\u6587\u4ef6\uff0c\u9996\u5148\u9700\u8981\u4ece translator.dll \u4e2d\u521b\u5efa\u4e00\u4e2a SOUI::ITranslatorMgr \u5bf9\u8c61\uff0c\u5e76\u5c06\u8be5\u5bf9\u8c61\u4ea4\u7ed9 SOUI::SApplication \u7ba1\u7406\u3002 \u518d\u4ece ItranslatorMgr \u5bf9\u8c61\u521b\u5efa SOUI::ITranslator \u5bf9\u8c61\uff0c\u5e76\u5c06 Itranslator \u5bf9\u8c61\u6dfb\u52a0\u5230 ItranslatorMgr \u7ba1\u7406\u7684\u7ffb\u8bd1\u5217\u8868\u4e2d\u3002 \u6700\u540e\u8fd8\u8981\u4e3a ITranslator \u5bf9\u8c61\u52a0\u8f7d\u7ffb\u8bd1\u6570\u636e\u6e90\uff08\u4e5f\u5c31\u662f\u524d\u9762\u63d0\u4f9b\u7684 XML \u6587\u4ef6\uff09\u3002 \u4e0b\u9762\u662f demo \u4e2d\u4f7f\u7528\u548c\u8bed\u8a00\u7ffb\u8bd1\u76f8\u5173\u7684\u4ee3\u7801\uff08\u89c1_tWinMain \u51fd\u6570\uff09 SApplication * theApp = new SApplication ( pRenderFactory , hInstance ); //SOUI APP CAutoRefPtr < ITranslatorMgr > transMgr ; //\u591a\u8bed\u8a00\u7ffb\u8bd1\u6a21\u5757\uff0c\u7531 translator.dll \u63d0\u4f9b transLoader . CreateInstance ( \"translator.dll\" ,( IObjRef ** ) & transMgr ); // if ( trans ) { //\u52a0\u8f7d\u8bed\u8a00\u7ffb\u8bd1\u5305 theApp -> SetTranslator ( transMgr ); pugi :: xml_document xmlLang ; if ( theApp -> LoadXmlDocment ( xmlLang , _T ( \"lang_cn\" ), _T ( \"translator\" ))) { CAutoRefPtr < ITranslator > langCN ; transMgr -> CreateTranslator ( & langCN ); langCN -> Load ( & xmlLang . child ( L \"language\" ), 1 ); //1=LD_XML transMgr -> InstallTranslator ( langCN ); } } \u6211\u4eec\u5148\u770b\u4e00\u4e0b editmemu \u7684 XML\uff1a <editmenu trCtx= \"editmenu\" iconSkin= \"_skin.sys.icons\" itemHeight= \"26\" iconMargin= \"4\" textMargin= \"8\" > <item id= \"1\" icon= \"3\" > cut </item> <item id= \"2\" icon= \"4\" > copy </item> <item id= \"3\" icon= \"5\" > paste </item> <item id= \"4\" > delete </item> <sep/> <item id= \"5\" > select all </item> </editmenu> \u5728\u8fd9\u4e2a XML \u4e2d\uff0c\u6839\u8282\u70b9\u6709\u4e00\u4e2a\u5c5e\u6027 trCtx\uff0c\u4ee3\u8868\u7ffb\u8bd1\u4e0a\u4e0b\u6587\uff0c\u5bf9\u5e94\u8bed\u8a00\u7ffb\u8bd1\u6587\u4ef6\u4e2d\u7684 context \u4e2d\u7684 name \u5c5e\u6027\u3002 \u5728\u8fd9\u4e2a menu \u5b9a\u4e49\u4e2d\uff0c\u6240\u6709\u7684\u83dc\u5355\u9879\u7684\u6587\u5b57\u5168\u662f\u82f1\u6587\u3002\u5176\u4e2d\u524d\u9762 3 \u9879\uff1acut, copy and paste \u5728\u8bed\u8a00\u7ffb\u8bd1\u6587\u4ef6\u4e2d\u6709\u5bf9\u5e94\u7684\u7ffb\u8bd1\u9879\u3002 \u4e0b\u56fe\u4e3a\u7a0b\u5e8f\u8fd0\u884c\u65f6 edit \u7684\u53f3\u952e\u83dc\u5355\u663e\u793a\u7ed3\u679c\uff1a \u4e0a\u9762\u6f14\u793a\u7684\u662f\u83dc\u5355\u8d44\u6e90\u7684\u8bed\u8a00\u7ffb\u8bd1\uff0c\u5e03\u5c40 XML \u4e2d\u7684\u6587\u5b57\u7684\u7ffb\u8bd1\u57fa\u672c\u4e00\u6837\uff0c\u53ea\u9700\u8981\u4e3a\u5e03\u5c40 \u7684\u6839\u7ed3\u70b9\u5b9a\u4e49\u4e00\u4e2a\u7ffb\u8bd1\u4e0a\u4e0b\u6587(trCtx)\uff08\u6ca1\u6709\u5b9a\u4e49\u65f6\u5219\u4ece\u6ca1\u6709\u6307\u5b9a name \u5c5e\u6027\u7684 context \u91cc \u67e5\u627e\u7ffb\u8bd1\u7ed3\u679c\uff09\u3002 \u53ef\u4ee5\u53c2\u89c1 demo \u7684\"close\u201d\u6309\u7167\u7684 tooltip \u7684\u7ffb\u8bd1\u3002 \u4e0d\u7ba1\u662f\u83dc\u5355 XML \u8fd8\u662f\u5e03\u5c40 XML\uff0c\u5b83\u4eec\u90fd\u662f\u9759\u6001\u7684\uff0c\u7ecf\u8fc7\u8bbe\u8ba1\u9700\u8981\u4f7f\u7528\u4ee3\u7801\u5f80 UI \u6dfb\u52a0\u65b0 \u7684\u6587\u5b57\uff0c\u540c\u6837\u4e5f\u9700\u8981\u7ffb\u8bd1\uff0c\u8fd9\u4e2a\u65f6\u5019\u5982\u4f55\u5904\u7406\uff1f \u5176\u5b9e\u770b\u4e00\u4e0b\u9759\u6001\u8d44\u6e90\u7ffb\u8bd1\u7684\u4ee3\u7801\u5c31\u77e5\u9053\uff0c\u8981\u5b9e\u73b0\u8bed\u8a00\u7ffb\u8bd1\uff0c\u9700\u8981\u4e3a\u6bcf\u4e00\u53e5\u5f85\u7ffb\u8bd1\u7684\u6587\u5b57\u8c03 \u7528\u4e00\u4e2a\u51fd\u6570\uff1a SApplication :: getSingleton (). GetTranslator () -> tr ( const SStringW & strSrc , const SStringW & strCtx ) \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u7b49\u7ffb\u8bd1\u5b57\u7b26\u4e32\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u7ffb\u8bd1\u4e0a\u4e0b\u6587\u3002 \u8003\u8651\u5230\u8bed\u53e5\u592a\u957f\uff0c\u7cfb\u7edf\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5b8f\uff1a #define TR(p1,p2) SApplication :: getSingleton (). GetTranslator () -> tr ( p1 , p2 ) \u8fd9\u6837\u7528 TR \u5c31\u53ef\u4ee5\u5b9e\u73b0\u6587\u5b57\u7ffb\u8bd1\u4e86\u3002","title":"4.9 SOUI \u591a\u8bed\u8a00\u7ffb\u8bd1\u673a\u5236"},{"location":"Others/1/","text":"7.1 \u8c08\u8c08 SOUI \u4e0e WTL \u00b6 \u5982\u679c\u4f60\u60f3\u4f7f\u7528 SOUI \u6700\u597d\u6709\u70b9 WTL \u57fa\u7840\uff0c\u4e00\u70b9\u70b9\u5c31\u884c\u4e86\u3002 SOUI \u4e0d\u4f9d\u8d56\u4e8e WTL\uff0c\u4f46\u662f SOUI \u7684\u7f16\u7801\u98ce\u683c\u57fa\u672c\u548c WTL \u4e00\u6837\u7684\uff1aSOUI \u6284\u88ad\u4e86 WTL \u7684 \u6d88\u606f\u5904\u7406\u5f62\u5f0f\uff0cSOUI \u7684\u4e8b\u4ef6\u5904\u7406\u4e5f\u662f\u6a21\u4eff\u4e86 WTL \u7684\u6d88\u606f\u6620\u5c04\u5b8f\u3002 \u6284\u88ad WTL \u7684\u6d88\u606f\u5904\u7406\u5f62\u5f0f\u8868\u73b0\u5728\u4e24\u4e2a\u5c42\u6b21\uff1a 1\u3001\u5728 SWindow \u53ca\u5176\u6d3e\u751f\u7c7b\u4e2d\u5904\u7406\u6d88\u606f\u4f7f\u7528 WTL \u57fa\u672c\u4e00\u81f4\u7684\u6d88\u606f\u6620\u5c04\u5b8f\uff1a SOUI_MSG_MAP_BEGIN () MSG_WM_PAINT_EX ( OnPaint ) MSG_WM_DESTROY ( OnDestroy ) MSG_WM_LBUTTONDOWN ( OnLButtonDown ) MSG_WM_MOUSEMOVE ( OnMouseMove ) MSG_WM_MOUSELEAVE ( OnMouseLeave ) MSG_WM_KEYDOWN ( OnKeyDown ) SOUI_MSG_MAP_END () ``` \u4e0a\u9762\u662f\u4e00\u4e2a SOUI \u63a7\u4ef6\u4e2d\u5904\u7406\u6d88\u606f\u6620\u5c04\u7684\u6620\u5c04\u8868\uff0c\u9664\u4e86 SOUI_MSG_MAP_BEGIN / END () \u548c WTL \u6709\u70b9\u533a\u522b\u5916\uff0c\u4e2d\u95f4\u7684\u5b8f\u57fa\u672c\u662f\u4e00\u6837\u7684\u3002\u4e0d\u540c\u5728\u4e8e SOUI \u4e2d WM_PAINT \u6d88\u606f\u7684\u53c2\u6570 \u4e0d\u662f HDC \uff0c\u800c\u4e14 IRenderTarget \uff0c\u6240\u4ee5\u4f7f\u7528 SOUI \u6269\u5c55\u7684\u6620\u5c04\u5b8f\uff1a MSG_WM_PAINT_EX \u6765\u5904\u7406\u3002 2 \u3001\u5728 CSimpleWnd \u7684\u6d3e\u751f\u7c7b\uff08\u5305\u62ec SHostWnd , SHostDialog \uff09\u4e2d\u76f4\u63a5\u4f7f\u7528 WTL \u7684\u6d88 \u606f\u6620\u5c04\u5b8f\u5904\u7406\u771f\u7a97\u53e3\u6d88\u606f\uff1a ``` cpp //HOST \u6d88\u606f\u53ca\u54cd\u5e94\u51fd\u6570\u6620\u5c04\u8868 BEGIN_MSG_MAP_EX ( CMainDlg ) MSG_WM_CREATE ( OnCreate ) MSG_WM_INITDIALOG ( OnInitDialog ) MSG_WM_DESTROY ( OnDestory ) MSG_WM_CLOSE ( OnClose ) MSG_WM_SIZE ( OnSize ) MSG_WM_COMMAND ( OnCommand ) MSG_WM_SHOWWINDOW ( OnShowWindow ) CHAIN_MSG_MAP ( SHostWnd ) REFLECT_NOTIFICATIONS_EX () END_MSG_MAP () \u7531\u4e8e SWindow \u7684\u6d88\u606f\u6765\u81ea SHostWnd \u7684\u6d88\u606f\u5206\u53d1\uff0c\u5982\u679c\u5728 SHostWnd \u6216\u8005 SHostDialog \u7684\u6d3e\u751f\u7c7b\u4e2d\u5904\u7406\u4e86\u4e00\u4e2a\u6d88\u606f\uff0c\u5982\u679c\u6ca1\u6709\u5c06\u8be5\u6d88\u606f\u4ea4\u7ed9 SHostWnd \u7ee7\u7eed\u5904 \u7406\uff0c\u53ef\u80fd\u5bfc\u81f4 SOUI \u4e0d\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002 \u6ca1\u6709 WTL \u4f7f\u7528\u7ecf\u5386\u7684\u670b\u53cb\u53ef\u80fd\u60f3\u77e5\u9053\u5982\u4f55\u5c06\u4e00\u4e2a\u6d88\u606f\u4ea4\u7ed9 SHostWnd \u7ee7\u7eed\u5904\u7406\u3002\u5f53\u7528\u6237 \u5728\u81ea\u5df1\u7684\u6d88\u606f\u6620\u5c04\u8868\u4e2d\u589e\u52a0\u4e00\u4e2a\u6d88\u606f\u5904\u7406\u51fd\u6570\uff0c\u800c\u4e14\u662f\u63d2\u5165\u5728\u6620\u5c04\u8868\u7684 CHAIN_MSG_MAP(SHostWnd)\u524d\uff08\u4e5f\u5e94\u8be5\u5728\u6b64\u4e4b\u524d\uff0c\u5426\u5219\u5f88\u53ef\u80fd\u5c31\u6536\u4e0d\u5230\u6d88\u606f\uff09\uff0c\u9ed8\u8ba4 \u60c5\u51b5\u4e0b\u4f1a\u81ea\u52a8\u6807\u5fd7\u8be5\u6d88\u606f\u5df2\u7ecf\u88ab\u5904\u7406\u4e86\uff0c\u5982\u6b64\u4e00\u6765\u5c31\u4e0d\u4f1a\u7ee7\u7eed\u4ea4\u7ed9 SHostWnd \u5904\u7406\uff0c\u89e3 \u51b3\u529e\u6cd5\u5f88\u7b80\u5355\uff0c\u5728\u4f60\u7684\u6d88\u606f\u5904\u7406\u51fd\u6570\u4e2d\u589e\u52a0\u4e00\u884c\uff1a SetMsgHandled ( FALSE ); \u6709\u4e86\u8fd9\u4e00\u884c\uff0c\u4f60\u5c31\u4e0d\u7528\u62c5\u5fc3\u4f60\u7684\u6d88\u606f\u5904\u7406\u5f71\u54cd\u5230 SHostWnd \u7684\u5904\u7406\u4e86\u3002 \u5f88\u591a\u670b\u53cb\u5728\u4f7f\u7528 SOUI \u65f6\u5904\u7406\u81ea\u5df1\u7684 Timer\uff0c\u7ed3\u679c\u5bfc\u81f4 SOUI \u4e2d\u7684\u52a8\u753b\u4e0d\u52a8\u4e86\uff0c\u5c31\u662f\u56e0\u4e3a \u8fd9\u4e2a\u539f\u56e0\uff1aSOUI \u5185\u90e8\u9700\u8981\u5904\u7406\u81ea\u5df1\u7684\u5b9a\u65f6\u5668\u6d88\u606f\uff0c\u4f46\u5b83\u88ab\u6700\u5916\u5c42\u7684\u6d88\u606f\u6620\u5c04\u8868\u622a\u65ad\u4e86\u3002 \u57fa\u672c\u4e0a\u4f1a\u4e0a\u9762\u8fd9\u6837\u4e00\u70b9 WTL \u76f8\u5173\u7684\u77e5\u8bc6\u5c31\u53ef\u4ee5\u73a9\u8f6c SOUI \u4e86\u3002","title":"7.1 \u8c08\u8c08 SOUI \u4e0e WTL"},{"location":"Others/1/#71-soui-wtl","text":"\u5982\u679c\u4f60\u60f3\u4f7f\u7528 SOUI \u6700\u597d\u6709\u70b9 WTL \u57fa\u7840\uff0c\u4e00\u70b9\u70b9\u5c31\u884c\u4e86\u3002 SOUI \u4e0d\u4f9d\u8d56\u4e8e WTL\uff0c\u4f46\u662f SOUI \u7684\u7f16\u7801\u98ce\u683c\u57fa\u672c\u548c WTL \u4e00\u6837\u7684\uff1aSOUI \u6284\u88ad\u4e86 WTL \u7684 \u6d88\u606f\u5904\u7406\u5f62\u5f0f\uff0cSOUI \u7684\u4e8b\u4ef6\u5904\u7406\u4e5f\u662f\u6a21\u4eff\u4e86 WTL \u7684\u6d88\u606f\u6620\u5c04\u5b8f\u3002 \u6284\u88ad WTL \u7684\u6d88\u606f\u5904\u7406\u5f62\u5f0f\u8868\u73b0\u5728\u4e24\u4e2a\u5c42\u6b21\uff1a 1\u3001\u5728 SWindow \u53ca\u5176\u6d3e\u751f\u7c7b\u4e2d\u5904\u7406\u6d88\u606f\u4f7f\u7528 WTL \u57fa\u672c\u4e00\u81f4\u7684\u6d88\u606f\u6620\u5c04\u5b8f\uff1a SOUI_MSG_MAP_BEGIN () MSG_WM_PAINT_EX ( OnPaint ) MSG_WM_DESTROY ( OnDestroy ) MSG_WM_LBUTTONDOWN ( OnLButtonDown ) MSG_WM_MOUSEMOVE ( OnMouseMove ) MSG_WM_MOUSELEAVE ( OnMouseLeave ) MSG_WM_KEYDOWN ( OnKeyDown ) SOUI_MSG_MAP_END () ``` \u4e0a\u9762\u662f\u4e00\u4e2a SOUI \u63a7\u4ef6\u4e2d\u5904\u7406\u6d88\u606f\u6620\u5c04\u7684\u6620\u5c04\u8868\uff0c\u9664\u4e86 SOUI_MSG_MAP_BEGIN / END () \u548c WTL \u6709\u70b9\u533a\u522b\u5916\uff0c\u4e2d\u95f4\u7684\u5b8f\u57fa\u672c\u662f\u4e00\u6837\u7684\u3002\u4e0d\u540c\u5728\u4e8e SOUI \u4e2d WM_PAINT \u6d88\u606f\u7684\u53c2\u6570 \u4e0d\u662f HDC \uff0c\u800c\u4e14 IRenderTarget \uff0c\u6240\u4ee5\u4f7f\u7528 SOUI \u6269\u5c55\u7684\u6620\u5c04\u5b8f\uff1a MSG_WM_PAINT_EX \u6765\u5904\u7406\u3002 2 \u3001\u5728 CSimpleWnd \u7684\u6d3e\u751f\u7c7b\uff08\u5305\u62ec SHostWnd , SHostDialog \uff09\u4e2d\u76f4\u63a5\u4f7f\u7528 WTL \u7684\u6d88 \u606f\u6620\u5c04\u5b8f\u5904\u7406\u771f\u7a97\u53e3\u6d88\u606f\uff1a ``` cpp //HOST \u6d88\u606f\u53ca\u54cd\u5e94\u51fd\u6570\u6620\u5c04\u8868 BEGIN_MSG_MAP_EX ( CMainDlg ) MSG_WM_CREATE ( OnCreate ) MSG_WM_INITDIALOG ( OnInitDialog ) MSG_WM_DESTROY ( OnDestory ) MSG_WM_CLOSE ( OnClose ) MSG_WM_SIZE ( OnSize ) MSG_WM_COMMAND ( OnCommand ) MSG_WM_SHOWWINDOW ( OnShowWindow ) CHAIN_MSG_MAP ( SHostWnd ) REFLECT_NOTIFICATIONS_EX () END_MSG_MAP () \u7531\u4e8e SWindow \u7684\u6d88\u606f\u6765\u81ea SHostWnd \u7684\u6d88\u606f\u5206\u53d1\uff0c\u5982\u679c\u5728 SHostWnd \u6216\u8005 SHostDialog \u7684\u6d3e\u751f\u7c7b\u4e2d\u5904\u7406\u4e86\u4e00\u4e2a\u6d88\u606f\uff0c\u5982\u679c\u6ca1\u6709\u5c06\u8be5\u6d88\u606f\u4ea4\u7ed9 SHostWnd \u7ee7\u7eed\u5904 \u7406\uff0c\u53ef\u80fd\u5bfc\u81f4 SOUI \u4e0d\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002 \u6ca1\u6709 WTL \u4f7f\u7528\u7ecf\u5386\u7684\u670b\u53cb\u53ef\u80fd\u60f3\u77e5\u9053\u5982\u4f55\u5c06\u4e00\u4e2a\u6d88\u606f\u4ea4\u7ed9 SHostWnd \u7ee7\u7eed\u5904\u7406\u3002\u5f53\u7528\u6237 \u5728\u81ea\u5df1\u7684\u6d88\u606f\u6620\u5c04\u8868\u4e2d\u589e\u52a0\u4e00\u4e2a\u6d88\u606f\u5904\u7406\u51fd\u6570\uff0c\u800c\u4e14\u662f\u63d2\u5165\u5728\u6620\u5c04\u8868\u7684 CHAIN_MSG_MAP(SHostWnd)\u524d\uff08\u4e5f\u5e94\u8be5\u5728\u6b64\u4e4b\u524d\uff0c\u5426\u5219\u5f88\u53ef\u80fd\u5c31\u6536\u4e0d\u5230\u6d88\u606f\uff09\uff0c\u9ed8\u8ba4 \u60c5\u51b5\u4e0b\u4f1a\u81ea\u52a8\u6807\u5fd7\u8be5\u6d88\u606f\u5df2\u7ecf\u88ab\u5904\u7406\u4e86\uff0c\u5982\u6b64\u4e00\u6765\u5c31\u4e0d\u4f1a\u7ee7\u7eed\u4ea4\u7ed9 SHostWnd \u5904\u7406\uff0c\u89e3 \u51b3\u529e\u6cd5\u5f88\u7b80\u5355\uff0c\u5728\u4f60\u7684\u6d88\u606f\u5904\u7406\u51fd\u6570\u4e2d\u589e\u52a0\u4e00\u884c\uff1a SetMsgHandled ( FALSE ); \u6709\u4e86\u8fd9\u4e00\u884c\uff0c\u4f60\u5c31\u4e0d\u7528\u62c5\u5fc3\u4f60\u7684\u6d88\u606f\u5904\u7406\u5f71\u54cd\u5230 SHostWnd \u7684\u5904\u7406\u4e86\u3002 \u5f88\u591a\u670b\u53cb\u5728\u4f7f\u7528 SOUI \u65f6\u5904\u7406\u81ea\u5df1\u7684 Timer\uff0c\u7ed3\u679c\u5bfc\u81f4 SOUI \u4e2d\u7684\u52a8\u753b\u4e0d\u52a8\u4e86\uff0c\u5c31\u662f\u56e0\u4e3a \u8fd9\u4e2a\u539f\u56e0\uff1aSOUI \u5185\u90e8\u9700\u8981\u5904\u7406\u81ea\u5df1\u7684\u5b9a\u65f6\u5668\u6d88\u606f\uff0c\u4f46\u5b83\u88ab\u6700\u5916\u5c42\u7684\u6d88\u606f\u6620\u5c04\u8868\u622a\u65ad\u4e86\u3002 \u57fa\u672c\u4e0a\u4f1a\u4e0a\u9762\u8fd9\u6837\u4e00\u70b9 WTL \u76f8\u5173\u7684\u77e5\u8bc6\u5c31\u53ef\u4ee5\u73a9\u8f6c SOUI \u4e86\u3002","title":"7.1 \u8c08\u8c08 SOUI \u4e0e WTL"},{"location":"Others/2/","text":"7.2 \u5728 SOUI \u4e2d\u975e\u534a\u900f\u660e\u7a97\u53e3\u5982\u4f55\u5b9e\u73b0\u5706\u89d2\u7a97\u53e3\uff1f \u00b6 \u5982\u679c SOUI \u7684\u5bbf\u4e3b\u7a97\u53e3\u6ca1\u6709\u5305\u542b\u5b50\u7a97\u53e3\uff0c\u76f4\u63a5\u4f7f\u7528\u7a97\u53e3\u7684\u534a\u900f\u660e\u5c5e\u6027\uff1atranslucent=1 \u5c31 \u53ef\u4ee5\u89e3\u51b3\u4e86\uff0c\u6574\u4e2a\u7a97\u53e3\u5f62\u72b6\u5b8c\u5168\u7531\u80cc\u666f\u56fe\u51b3\u5b9a\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5b8c\u7f8e\u7684\u5706\u89d2\u3002 \u7136\u540e\u7a97\u53e3\u534a\u900f\u660e\u65f6\uff0c\u7a97\u53e3\u4e2d\u7684\u5b50\u7a97\u53e3(\u975e SWindow)\u5c31\u4e0d\u80fd\u6b63\u5e38\u663e\u793a\uff0c\u6240\u4ee5\u6709\u65f6\u5019\u4e0d\u5f97\u4e0d\u4f7f \u7528 translucent=0\uff0c\u8fd9\u65f6\u7a97\u53e3\u5c31\u6210\u4e86\u65b9\u5f62\u3002 \u5b9e\u9645\u4e0a\u8fd9\u4e2a\u95ee\u9898\u5df2\u7ecf\u548c SOUI \u6ca1\u6709\u4ec0\u4e48\u5173\u7cfb\u4e86\uff0c\u4f60\u7684\u95ee\u9898\u53d8\u6210\u4e86\u7a97\u53e3\u5982\u4f55\u505a\u5706\u89d2\uff0c\u8fd8\u4e0d\u662f \u5728 SOUI \u4e2d\u7a97\u53e3\u5982\u4f55\u505a\u5706\u89d2\u3002 \u7f51\u4e0a\u4e00\u641c\u7d22\u4e00\u5927\u5806\uff0c\u53ef\u60dc\u7ecf\u5e38\u6709\u4eba\u8981\u95ee\u3002 \u7ed9\u7a97\u53e3\u505a\u5706\u89d2\u6216\u8005\u5f02\u5f62\u597d\u50cf\u53ea\u6709\u4e00\u4e2a\u529e\u6cd5\uff1aSetWindowRgn\uff0c\u81ea\u5df1\u521b\u5efa\u4e00\u4e2a HRGN\uff0c\u518d \u8c03\u7528\u8fd9\u4e2a API \u5c31\u53ef\u4ee5\u4e86\uff0c\u5173\u952e\u95ee\u9898\u662f\u5728\u7a97\u53e3\u5927\u5c0f\u53d8\u5316\u65f6\u6ce8\u610f\u91cd\u65b0\u8bbe\u7f6e\u3002 \u597d\u4eba\u505a\u5230\u5e95\uff0c\u8fd9\u91cc\u5e16\u4e00\u4efd\u4e13\u4e1a\u505a\u5706\u89d2\u7684\u4ee3\u7801\uff1a template < class T > class CWHRoundRectFrameHelper { protected : SIZE m_sizeWnd ; void OnSize ( UINT nType , CSize size ) { T * pT = static_cast < T *> ( this ); if ( nType == SIZE_MINIMIZED ) return ; if ( size == m_sizeWnd ) return ; CRect rcWindow , rcClient ; CRgn rgnWindow , rgnMinus , rgnAdd ; pT -> CSimpleWnd :: GetWindowRect ( rcWindow ); pT -> CSimpleWnd :: GetClientRect ( rcClient ); pT -> CSimpleWnd :: ClientToScreen ( rcClient ); rcClient . OffsetRect ( - rcWindow . TopLeft ()); rgnWindow . CreateRectRgn ( rcClient . left , rcClient . top + 2 , rcClient . right , rcClient . bottom - 2 ); rgnAdd . CreateRectRgn ( rcClient . left + 2 , rcClient . top , rcClient . right - 2 , rcClient . top + 1 ); rgnWindow . CombineRgn ( rgnAdd , RGN_OR ); rgnAdd . OffsetRgn ( 0 , rcClient . Height () - 1 ); rgnWindow . CombineRgn ( rgnAdd , RGN_OR ); rgnAdd . SetRectRgn ( rcClient . left + 1 , rcClient . top + 1 , rcClient . right - 1 , rcClient . top + 2 ); rgnWindow . CombineRgn ( rgnAdd , RGN_OR ); rgnAdd . OffsetRgn ( 0 , rcClient . Height () - 3 ); rgnWindow . CombineRgn ( rgnAdd , RGN_OR ); pT -> CSimpleWnd :: SetWindowRgn ( rgnWindow ); pT -> SetMsgHandled ( FALSE ); m_sizeWnd = size ; } public : BOOL ProcessWindowMessage ( HWND hWnd , UINT uMsg , WPARAM wParam , LPARAM lParam , LRESULT & lResult , DWORD dwMsgMapID = 0 ) { BOOL bHandled = TRUE ; switch ( dwMsgMapID ) { case 0 : if ( uMsg == WM_SIZE ) { OnSize (( UINT ) wParam , _WTYPES_NS :: CSize ( GET_X_LPARAM ( lParam ), GET_Y_LPARAM ( lParam ))); lResult = 0 ; } break ; } return FALSE ; } }; \u8fd9\u662f\u4e00\u4e2a\u6a21\u677f\u7c7b\uff0c\u4e0b\u9762\u7ed9\u4e00\u4e2a SOUI \u4e2d\u4f7f\u7528\u7684\u793a\u4f8b\u4ee3\u7801\uff1a class CFuckDialog : public SHostDialog , public CWHRoundRectFrameHelper < CFuckDialog > { //xxxxx //HOST \u6d88\u606f\u53ca\u54cd\u5e94\u51fd\u6570\u6620\u5c04\u8868 BEGIN_MSG_MAP_EX ( CMainDlg ) CHAIN_MSG_MAP ( CWHRoundRectFrameHelper < CFuckDialog > ) //\u91cd\u8981 CHAIN_MSG_MAP ( SHostDialog ) REFLECT_NOTIFICATIONS_EX () END_MSG_MAP () //xxxx }; \u8fd9\u6837\u4f60\u7684 Dialog \u5c31\u6709\u5706\u89d2\u4e86\u3002","title":"7.2 \u5728 SOUI \u4e2d\u975e\u534a\u900f\u660e\u7a97\u53e3\u5982\u4f55\u5b9e\u73b0\u5706\u89d2\u7a97\u53e3\uff1f"},{"location":"Others/2/#72-soui","text":"\u5982\u679c SOUI \u7684\u5bbf\u4e3b\u7a97\u53e3\u6ca1\u6709\u5305\u542b\u5b50\u7a97\u53e3\uff0c\u76f4\u63a5\u4f7f\u7528\u7a97\u53e3\u7684\u534a\u900f\u660e\u5c5e\u6027\uff1atranslucent=1 \u5c31 \u53ef\u4ee5\u89e3\u51b3\u4e86\uff0c\u6574\u4e2a\u7a97\u53e3\u5f62\u72b6\u5b8c\u5168\u7531\u80cc\u666f\u56fe\u51b3\u5b9a\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5b8c\u7f8e\u7684\u5706\u89d2\u3002 \u7136\u540e\u7a97\u53e3\u534a\u900f\u660e\u65f6\uff0c\u7a97\u53e3\u4e2d\u7684\u5b50\u7a97\u53e3(\u975e SWindow)\u5c31\u4e0d\u80fd\u6b63\u5e38\u663e\u793a\uff0c\u6240\u4ee5\u6709\u65f6\u5019\u4e0d\u5f97\u4e0d\u4f7f \u7528 translucent=0\uff0c\u8fd9\u65f6\u7a97\u53e3\u5c31\u6210\u4e86\u65b9\u5f62\u3002 \u5b9e\u9645\u4e0a\u8fd9\u4e2a\u95ee\u9898\u5df2\u7ecf\u548c SOUI \u6ca1\u6709\u4ec0\u4e48\u5173\u7cfb\u4e86\uff0c\u4f60\u7684\u95ee\u9898\u53d8\u6210\u4e86\u7a97\u53e3\u5982\u4f55\u505a\u5706\u89d2\uff0c\u8fd8\u4e0d\u662f \u5728 SOUI \u4e2d\u7a97\u53e3\u5982\u4f55\u505a\u5706\u89d2\u3002 \u7f51\u4e0a\u4e00\u641c\u7d22\u4e00\u5927\u5806\uff0c\u53ef\u60dc\u7ecf\u5e38\u6709\u4eba\u8981\u95ee\u3002 \u7ed9\u7a97\u53e3\u505a\u5706\u89d2\u6216\u8005\u5f02\u5f62\u597d\u50cf\u53ea\u6709\u4e00\u4e2a\u529e\u6cd5\uff1aSetWindowRgn\uff0c\u81ea\u5df1\u521b\u5efa\u4e00\u4e2a HRGN\uff0c\u518d \u8c03\u7528\u8fd9\u4e2a API \u5c31\u53ef\u4ee5\u4e86\uff0c\u5173\u952e\u95ee\u9898\u662f\u5728\u7a97\u53e3\u5927\u5c0f\u53d8\u5316\u65f6\u6ce8\u610f\u91cd\u65b0\u8bbe\u7f6e\u3002 \u597d\u4eba\u505a\u5230\u5e95\uff0c\u8fd9\u91cc\u5e16\u4e00\u4efd\u4e13\u4e1a\u505a\u5706\u89d2\u7684\u4ee3\u7801\uff1a template < class T > class CWHRoundRectFrameHelper { protected : SIZE m_sizeWnd ; void OnSize ( UINT nType , CSize size ) { T * pT = static_cast < T *> ( this ); if ( nType == SIZE_MINIMIZED ) return ; if ( size == m_sizeWnd ) return ; CRect rcWindow , rcClient ; CRgn rgnWindow , rgnMinus , rgnAdd ; pT -> CSimpleWnd :: GetWindowRect ( rcWindow ); pT -> CSimpleWnd :: GetClientRect ( rcClient ); pT -> CSimpleWnd :: ClientToScreen ( rcClient ); rcClient . OffsetRect ( - rcWindow . TopLeft ()); rgnWindow . CreateRectRgn ( rcClient . left , rcClient . top + 2 , rcClient . right , rcClient . bottom - 2 ); rgnAdd . CreateRectRgn ( rcClient . left + 2 , rcClient . top , rcClient . right - 2 , rcClient . top + 1 ); rgnWindow . CombineRgn ( rgnAdd , RGN_OR ); rgnAdd . OffsetRgn ( 0 , rcClient . Height () - 1 ); rgnWindow . CombineRgn ( rgnAdd , RGN_OR ); rgnAdd . SetRectRgn ( rcClient . left + 1 , rcClient . top + 1 , rcClient . right - 1 , rcClient . top + 2 ); rgnWindow . CombineRgn ( rgnAdd , RGN_OR ); rgnAdd . OffsetRgn ( 0 , rcClient . Height () - 3 ); rgnWindow . CombineRgn ( rgnAdd , RGN_OR ); pT -> CSimpleWnd :: SetWindowRgn ( rgnWindow ); pT -> SetMsgHandled ( FALSE ); m_sizeWnd = size ; } public : BOOL ProcessWindowMessage ( HWND hWnd , UINT uMsg , WPARAM wParam , LPARAM lParam , LRESULT & lResult , DWORD dwMsgMapID = 0 ) { BOOL bHandled = TRUE ; switch ( dwMsgMapID ) { case 0 : if ( uMsg == WM_SIZE ) { OnSize (( UINT ) wParam , _WTYPES_NS :: CSize ( GET_X_LPARAM ( lParam ), GET_Y_LPARAM ( lParam ))); lResult = 0 ; } break ; } return FALSE ; } }; \u8fd9\u662f\u4e00\u4e2a\u6a21\u677f\u7c7b\uff0c\u4e0b\u9762\u7ed9\u4e00\u4e2a SOUI \u4e2d\u4f7f\u7528\u7684\u793a\u4f8b\u4ee3\u7801\uff1a class CFuckDialog : public SHostDialog , public CWHRoundRectFrameHelper < CFuckDialog > { //xxxxx //HOST \u6d88\u606f\u53ca\u54cd\u5e94\u51fd\u6570\u6620\u5c04\u8868 BEGIN_MSG_MAP_EX ( CMainDlg ) CHAIN_MSG_MAP ( CWHRoundRectFrameHelper < CFuckDialog > ) //\u91cd\u8981 CHAIN_MSG_MAP ( SHostDialog ) REFLECT_NOTIFICATIONS_EX () END_MSG_MAP () //xxxx }; \u8fd9\u6837\u4f60\u7684 Dialog \u5c31\u6709\u5706\u89d2\u4e86\u3002","title":"7.2 \u5728 SOUI \u4e2d\u975e\u534a\u900f\u660e\u7a97\u53e3\u5982\u4f55\u5b9e\u73b0\u5706\u89d2\u7a97\u53e3\uff1f"},{"location":"Others/3/","text":"7.4 \u4e00\u79cd\u9ad8\u6548\u7684\u53ef\u53d8\u884c\u9ad8\u5217\u8868\u884c\u5b9a\u4f4d\u7b97\u6cd5 \u00b6 \u5217\u8868\u63a7\u4ef6\u662f\u6570\u636e\u663e\u793a\u65f6\u4f7f\u7528\u7684\u4e00\u79cd\u5e38\u7528\u7684\u63a7\u4ef6\u3002 \u4e00\u822c\u60c5\u51b5\u4e0b\u5217\u8868\u4e2d\u7684\u884c\u662f\u7b49\u9ad8\u7684\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u65e0\u8bba\u5217\u8868\u5305\u542b\u591a\u5c11\u884c\uff0c\u90fd\u80fd\u591f\u5728 O(1)\u7684\u65f6\u95f4 \u5b9a\u4f4d\u5230\u6307\u5b9a\u884c\u3002 \u4f46\u662f\u5f53\u663e\u793a\u7684\u5185\u5bb9\u683c\u5f0f\u4e0d\u4e00\u81f4\u65f6\uff0c\u4f7f\u7528\u76f8\u7b49\u7684\u884c\u9ad8\u53ef\u80fd\u5c31\u610f\u5473\u7740\u663e\u793a\u7a7a\u95f4\u7684\u6d6a\u8d39\uff0c\u4e5f\u610f\u5473 \u8bf4\u7528\u6237\u9700\u8981\u66f4\u591a\u7684\u6eda\u52a8\u64cd\u4f5c\uff0c\u5f71\u54cd\u7528\u6237\u4f53\u9a8c\u3002 \u8981\u5b9e\u73b0\u4e00\u4e2a\u652f\u6301\u53ef\u53d8\u884c\u9ad8\u7684\u5217\u8868\u63a7\u4ef6\uff0c\u9996\u5148\u8981\u89e3\u51b3\u7684\u95ee\u9898\u5c31\u662f\u5feb\u901f\u5b9a\u4f4d\u5217\u8868\u884c\u3002 \u5047\u5b9a\u4e00\u4e2a\u5217\u8868\u4e2d\u7684\u8868\u9879\u6309\u7167\u4e0b\u9762\u7684\u9ad8\u5ea6\u6392\u5217\uff1a 1,2,3,1,2,3,1,2,3,1,2,3,4,5 \u53ef\u4ee5\u77e5\u9053\u603b\u9ad8\u5ea6\u4e3a\uff1a33 \u7a0b\u5e8f\u5458\u9700\u8981\u89e3\u51b3\u4ece\u4e00\u4e2a\u968f\u673a\u7684[0,32]\u7684\u503c(x)\u5b9a\u4f4d\u5230\u54ea\u4e00\u884c\u7684\u95ee\u9898\u3002 \u5f53\u7136\u6700\u7b80\u5355\u7684\u529e\u6cd5\u5c31\u662f\u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\u9010\u884c\u7684\u6570\uff0c\u76f4\u5230\u6570\u5230\u7684\u90a3\u4e00\u884c\u6b63\u597d\u5305\u542b x\uff0c\u53ef\u4ee5\u77e5\u9053 \u8fd9\u4e2a\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(n)\u3002 \u5f53 n \u5f88\u5927\u65f6\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u57fa\u672c\u4e0a\u4e0d\u53ef\u884c\u3002 \u4e00\u884c\u4e00\u884c\u7684\u6570\u663e\u7136\u662f\u5f88\u6d6a\u8d39\u65f6\u95f4\u7684\uff0c\u89e3\u51b3\u7684\u529e\u6cd5\u5c31\u662f\u4e00\u6bb5\u4e00\u6bb5\u7684\u6570\u3002 \u8981\u5b9e\u73b0\u5206\u6bb5\u6570\uff0c\u4e00\u4e2a\u524d\u63d0\u5c31\u662f\u6211\u4eec\u9700\u8981\u4e3a\u8fd9\u4e9b\u6570\u636e\u63d0\u524d\u5efa\u7acb\u597d\u7d22\u5f15\u8868\u3002\u5bf9\u4e8e\u4e0a\u9762\u5e8f\u5217\u5047\u5b9a \u4ee5 3 \u4e2a\u5143\u7d20\u4e00\u7ec4\u4e3a\u5355\u4f4d\u5efa\u7acb\u7d22\u5f15\u8868\u5c31\u53ef\u4ee5\u83b7\u5f97:(6),(6),(6),(6),(9)\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u8981\u5b9a\u4f4d\u4e00 \u884c\uff0c\u6211\u4eec\u6700\u591a\u9700\u8981\u6570 5+3 \u6b21\u5c31\u80fd\u627e\u5230\u4e00\u884c\u3002 \u5bf9\u4e8e\u6570\u636e\u91cf\u6bd4\u8f83\u5c11\u7684\u60c5\u51b5\uff0c\u53ef\u80fd\u4e0a\u8ff0\u5206\u7ec4\u65b9\u6cd5\u5c31\u80fd\u89e3\u51b3\u95ee\u9898\u4e86\u3002 \u4f46\u662f\u5bf9\u4e8e\u6570\u636e\u91cf\u66f4\u5927\u7684\u60c5\u51b5\u5982\u4f55\u5904\u7406\u5462\uff1f\u65b9\u6cd5\u5f88\u7b80\u5355\uff0c\u90a3\u5c31\u662f\u5206\u7ec4\u518d\u5206\u7ec4\uff0c\u76f4\u5230\u6700\u540e\u6240\u6709 \u7684\u5206\u7ec4\u6570\u636e\u5f62\u6210\u4e00\u68f5\u7d22\u5f15\u6811\u3002\u6811\u4e0a\u6bcf\u4e00\u4e2a\u7ed3\u70b9\u4ee3\u8868\u8be5\u7ed3\u70b9\u4e0b\u6240\u6709\u5b50\u8282\u70b9\u7684\u9ad8\u5ea6\u548c\u3002 \u901a\u8fc7\u6784\u9020\u7d22\u5f15\u6811\uff0c\u65e0\u8bba\u591a\u5c11\u6570\u636e\u91cf\uff0c\u90fd\u53ef\u4ee5\u5728 O(log(n))\u7684\u65f6\u95f4\u5b9a\u4f4d\u5230\u4efb\u610f\u884c\u3002 \u53e6\u5916\uff0c\u5bf9\u4e8e\u5927\u91cf\u6570\u636e\uff0c\u6211\u4eec\u53ef\u80fd\u5728\u521d\u59cb\u5316\u7684\u65f6\u5019\u5e76\u4e0d\u77e5\u9053\u603b\u6570\u6709\u591a\u5c11\uff0c\u800c\u662f\u5728\u663e\u793a\u5230\u54ea\u4e00 \u884c\u65f6\u518d\u901a\u8fc7\u8ba1\u7b97\u83b7\u5f97\u3002 \u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u9700\u8981\u52a8\u6001\u66f4\u65b0\u7d22\u5f15\u6811\u3002\u66f4\u65b0\u8fc7\u7a0b\u4e5f\u5f88\u7b80\u5355\uff0c\u5f53\u4e00\u884c\u66f4\u65b0\u9ad8\u5ea6\u65f6\uff0c\u53ea\u9700 \u8981\u627e\u5230\u8be5\u884c\u6240\u5728\u7684\u53f6\u8282\u70b9\uff0c\u66f4\u65b0\u53f6\u8282\u70b9\u9ad8\u5ea6\uff0c\u518d\u9010\u7ea7\u66f4\u65b0\u7236\u8282\u70b9\u5373\u53ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u540c\u6837\u662f O(log(n))\u3002 \u5177\u4f53\u5b9e\u73b0\u53ef\u4ee5\u53c2\u8003 SOUI \u7684 ListView \u4e2d\u7528\u4e8e\u53ef\u53d8\u884c\u9ad8\u652f\u6301\u7684\u7c7b\uff1a SListViewItemLocatorFlex","title":"7.4 \u4e00\u79cd\u9ad8\u6548\u7684\u53ef\u53d8\u884c\u9ad8\u5217\u8868\u884c\u5b9a\u4f4d\u7b97\u6cd5"},{"location":"Others/3/#74","text":"\u5217\u8868\u63a7\u4ef6\u662f\u6570\u636e\u663e\u793a\u65f6\u4f7f\u7528\u7684\u4e00\u79cd\u5e38\u7528\u7684\u63a7\u4ef6\u3002 \u4e00\u822c\u60c5\u51b5\u4e0b\u5217\u8868\u4e2d\u7684\u884c\u662f\u7b49\u9ad8\u7684\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u65e0\u8bba\u5217\u8868\u5305\u542b\u591a\u5c11\u884c\uff0c\u90fd\u80fd\u591f\u5728 O(1)\u7684\u65f6\u95f4 \u5b9a\u4f4d\u5230\u6307\u5b9a\u884c\u3002 \u4f46\u662f\u5f53\u663e\u793a\u7684\u5185\u5bb9\u683c\u5f0f\u4e0d\u4e00\u81f4\u65f6\uff0c\u4f7f\u7528\u76f8\u7b49\u7684\u884c\u9ad8\u53ef\u80fd\u5c31\u610f\u5473\u7740\u663e\u793a\u7a7a\u95f4\u7684\u6d6a\u8d39\uff0c\u4e5f\u610f\u5473 \u8bf4\u7528\u6237\u9700\u8981\u66f4\u591a\u7684\u6eda\u52a8\u64cd\u4f5c\uff0c\u5f71\u54cd\u7528\u6237\u4f53\u9a8c\u3002 \u8981\u5b9e\u73b0\u4e00\u4e2a\u652f\u6301\u53ef\u53d8\u884c\u9ad8\u7684\u5217\u8868\u63a7\u4ef6\uff0c\u9996\u5148\u8981\u89e3\u51b3\u7684\u95ee\u9898\u5c31\u662f\u5feb\u901f\u5b9a\u4f4d\u5217\u8868\u884c\u3002 \u5047\u5b9a\u4e00\u4e2a\u5217\u8868\u4e2d\u7684\u8868\u9879\u6309\u7167\u4e0b\u9762\u7684\u9ad8\u5ea6\u6392\u5217\uff1a 1,2,3,1,2,3,1,2,3,1,2,3,4,5 \u53ef\u4ee5\u77e5\u9053\u603b\u9ad8\u5ea6\u4e3a\uff1a33 \u7a0b\u5e8f\u5458\u9700\u8981\u89e3\u51b3\u4ece\u4e00\u4e2a\u968f\u673a\u7684[0,32]\u7684\u503c(x)\u5b9a\u4f4d\u5230\u54ea\u4e00\u884c\u7684\u95ee\u9898\u3002 \u5f53\u7136\u6700\u7b80\u5355\u7684\u529e\u6cd5\u5c31\u662f\u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\u9010\u884c\u7684\u6570\uff0c\u76f4\u5230\u6570\u5230\u7684\u90a3\u4e00\u884c\u6b63\u597d\u5305\u542b x\uff0c\u53ef\u4ee5\u77e5\u9053 \u8fd9\u4e2a\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(n)\u3002 \u5f53 n \u5f88\u5927\u65f6\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u57fa\u672c\u4e0a\u4e0d\u53ef\u884c\u3002 \u4e00\u884c\u4e00\u884c\u7684\u6570\u663e\u7136\u662f\u5f88\u6d6a\u8d39\u65f6\u95f4\u7684\uff0c\u89e3\u51b3\u7684\u529e\u6cd5\u5c31\u662f\u4e00\u6bb5\u4e00\u6bb5\u7684\u6570\u3002 \u8981\u5b9e\u73b0\u5206\u6bb5\u6570\uff0c\u4e00\u4e2a\u524d\u63d0\u5c31\u662f\u6211\u4eec\u9700\u8981\u4e3a\u8fd9\u4e9b\u6570\u636e\u63d0\u524d\u5efa\u7acb\u597d\u7d22\u5f15\u8868\u3002\u5bf9\u4e8e\u4e0a\u9762\u5e8f\u5217\u5047\u5b9a \u4ee5 3 \u4e2a\u5143\u7d20\u4e00\u7ec4\u4e3a\u5355\u4f4d\u5efa\u7acb\u7d22\u5f15\u8868\u5c31\u53ef\u4ee5\u83b7\u5f97:(6),(6),(6),(6),(9)\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u8981\u5b9a\u4f4d\u4e00 \u884c\uff0c\u6211\u4eec\u6700\u591a\u9700\u8981\u6570 5+3 \u6b21\u5c31\u80fd\u627e\u5230\u4e00\u884c\u3002 \u5bf9\u4e8e\u6570\u636e\u91cf\u6bd4\u8f83\u5c11\u7684\u60c5\u51b5\uff0c\u53ef\u80fd\u4e0a\u8ff0\u5206\u7ec4\u65b9\u6cd5\u5c31\u80fd\u89e3\u51b3\u95ee\u9898\u4e86\u3002 \u4f46\u662f\u5bf9\u4e8e\u6570\u636e\u91cf\u66f4\u5927\u7684\u60c5\u51b5\u5982\u4f55\u5904\u7406\u5462\uff1f\u65b9\u6cd5\u5f88\u7b80\u5355\uff0c\u90a3\u5c31\u662f\u5206\u7ec4\u518d\u5206\u7ec4\uff0c\u76f4\u5230\u6700\u540e\u6240\u6709 \u7684\u5206\u7ec4\u6570\u636e\u5f62\u6210\u4e00\u68f5\u7d22\u5f15\u6811\u3002\u6811\u4e0a\u6bcf\u4e00\u4e2a\u7ed3\u70b9\u4ee3\u8868\u8be5\u7ed3\u70b9\u4e0b\u6240\u6709\u5b50\u8282\u70b9\u7684\u9ad8\u5ea6\u548c\u3002 \u901a\u8fc7\u6784\u9020\u7d22\u5f15\u6811\uff0c\u65e0\u8bba\u591a\u5c11\u6570\u636e\u91cf\uff0c\u90fd\u53ef\u4ee5\u5728 O(log(n))\u7684\u65f6\u95f4\u5b9a\u4f4d\u5230\u4efb\u610f\u884c\u3002 \u53e6\u5916\uff0c\u5bf9\u4e8e\u5927\u91cf\u6570\u636e\uff0c\u6211\u4eec\u53ef\u80fd\u5728\u521d\u59cb\u5316\u7684\u65f6\u5019\u5e76\u4e0d\u77e5\u9053\u603b\u6570\u6709\u591a\u5c11\uff0c\u800c\u662f\u5728\u663e\u793a\u5230\u54ea\u4e00 \u884c\u65f6\u518d\u901a\u8fc7\u8ba1\u7b97\u83b7\u5f97\u3002 \u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u9700\u8981\u52a8\u6001\u66f4\u65b0\u7d22\u5f15\u6811\u3002\u66f4\u65b0\u8fc7\u7a0b\u4e5f\u5f88\u7b80\u5355\uff0c\u5f53\u4e00\u884c\u66f4\u65b0\u9ad8\u5ea6\u65f6\uff0c\u53ea\u9700 \u8981\u627e\u5230\u8be5\u884c\u6240\u5728\u7684\u53f6\u8282\u70b9\uff0c\u66f4\u65b0\u53f6\u8282\u70b9\u9ad8\u5ea6\uff0c\u518d\u9010\u7ea7\u66f4\u65b0\u7236\u8282\u70b9\u5373\u53ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u540c\u6837\u662f O(log(n))\u3002 \u5177\u4f53\u5b9e\u73b0\u53ef\u4ee5\u53c2\u8003 SOUI \u7684 ListView \u4e2d\u7528\u4e8e\u53ef\u53d8\u884c\u9ad8\u652f\u6301\u7684\u7c7b\uff1a SListViewItemLocatorFlex","title":"7.4 \u4e00\u79cd\u9ad8\u6548\u7684\u53ef\u53d8\u884c\u9ad8\u5217\u8868\u884c\u5b9a\u4f4d\u7b97\u6cd5"},{"location":"Overview/10/","text":"1\u3001\u6982\u8ff0 \u00b6 \u524d\u8a00 \u00b6 \u8c08\u8c08 UI \u795e\u5668-SOUI \u5728 Windows \u5e73\u53f0\u4e0a\u5f00\u53d1\u5ba2\u6237\u7aef\u4ea7\u54c1\u662f\u4e00\u4e2a\u975e\u5e38\u75db\u82e6\u7684\u8fc7\u7a0b\uff0c\u7279\u522b\u662f\u8fd8\u8981\u7528 C++\u7684\u65f6\u5019\u3002 \u5c3d\u7ba1\u5f88\u591a\u8bed\u8a00\u5f88\u591a\u65b9\u6cd5\u90fd\u53ef\u4ee5\u5f00\u53d1 Windows \u684c\u9762\u7a0b\u5e8f\uff0c\u76ee\u524d\u56fd\u5185\u6d41\u884c\u7684\u5ba2\u6237\u7aef\u4ea7\u54c1\u90fd\u662f C++\u5f00\u53d1\u7684\uff0c\u6bd4\u5982 QQ\uff0cYY \u8bed\u97f3\uff0c\u8fc5\u96f7\u7b49\u3002 \u5feb\u901f\uff0c\u7a33\u5b9a\u662f\u6211\u8ba4\u4e3a\u7684\u5e94\u7528\u8f6f\u4ef6\u5f00\u53d1\u6846\u67b6\u6700\u57fa\u672c\u7684\u8981\u6c42\uff0c\u5bf9\u4e8e UI \u8fd8\u6709\u4e24\u4e2a\u8981\u6c42\u5c31\u662f\u754c\u9762 \u7f8e\u89c2\uff0c\u914d\u7f6e\u7075\u6d3b\u3002 C++\u8bed\u8a00\u6ee1\u8db3\u4e86\u5feb\u901f\u7684\u8981\u6c42\uff0c\u4f20\u7edf\u7684\u5ba2\u6237\u7aef\u8f6f\u4ef6\u5f00\u53d1\u6846\u67b6\u5982 MFC\uff0cWTL \u7b49\u6ee1\u8db3\u4e86\u7a33\u5b9a\u7684 \u8981\u6c42\u3002\u7136\u800c\u754c\u9762\u7f8e\u89c2\uff0c\u914d\u7f6e\u7075\u6d3b\u662f MFC\uff0cWTL \u8fd9\u6837\u7684\u5f00\u53d1\u6846\u67b6\u6240\u4e0d\u80fd\u6ee1\u8db3\u7684\u3002 \u817e\u8baf\u662f\u505a\u5ba2\u6237\u7aef\u53d1\u5bb6\u7684\uff0c\u4ed6\u4eec\u7684 UI \u7ecf\u9a8c\u79ef\u7d2f\u975e\u5e38\u597d\uff0c\u6709\u81ea\u5df1\u4e13\u95e8\u7684 UI \u6846\u67b6\uff1b\u8fc5\u96f7\u6709\u4e00\u4e2a \u4e13\u4e1a\u7684\u56e2\u961f\u5f00\u53d1\u81ea\u5df1\u7684 UI \u6846\u67b6\uff1b\u7136\u800c\u5927\u591a\u6570\u516c\u53f8\u53ea\u5e0c\u671b\u6709\u4e00\u4e2a\u80fd\u591f\u5feb\u901f\u5b8c\u6210\u9879\u76ee\u5f00\u53d1\u7684 UI \u5e93\u6765\u4f7f\u7528\uff0c\u5b83\u4eec\u6ca1\u6709\u4e13\u4e1a\u7684\u56e2\u961f\u6765\u7ef4\u62a4 UI \u5e93\u3002\u56fd\u4f01\u6709\u94b1\u4efb\u6027\uff0c\u6240\u4ee5\u6210\u5c31\u4e86 UIPower\uff1a \u4e00\u4e2a\u5546\u4e1a\u5316\u7684 DirectUI \u5e93\uff08\u5177\u4f53\u600e\u4e48\u6837\u4e0d\u597d\u8bf4\uff0c\u4f18\u70b9\u5728\u4e8e\u6709\u4eba\u7ed9\u4f60\u670d\u52a1\uff09\uff0c\u4e00\u822c\u7684\u5c0f\u516c \u53f8\u6ca1\u6709\u8c01\u613f\u610f\u5f53\u8fd9\u4e2a\u51a4\u5927\u5934\u3002\u8fd9\u5c31\u662f Duilib \u8fd9\u6837\u4e00\u4e2a\u7b80\u5355\u5230\u7b80\u964b\u7684 UI \u5e93\uff08\u8bf7\u539f\u8c05\u6211\u8fd9\u6837 \u8bf4\uff09\u4e3a\u4ec0\u4e48\u8fd9\u6837\u6d41\u884c\u7684\u539f\u56e0\uff08\u767e\u5ea6\u4e00\u4e0b Duilib \u5c31\u77e5\u9053\u5b83\u6709\u591a\u5c11\u4eba\u5728\u7528\uff09\u3002 Duilib \u57fa\u672c\u6ee1\u8db3\u4e86\u754c\u9762\u7f8e\u89c2 \uff0c\u914d\u7f6e\u7075\u6d3b\u7684\u9700\u6c42\uff0c\u7136\u800c\u7531\u4e8e\u6846\u67b6\u672c\u8eab\u7684\u9650\u5236\uff0c\u8981\u5b9e\u73b0\u590d\u6742\u7684 \u6548\u679c\u5c06\u4e0d\u53ef\u907f\u514d\u7684\u9047\u5230\u5404\u79cd\u5751\u3002\u597d\u5728 Duilib \u4ee3\u7801\u91cf\u5f88\u5c11\uff0c\u968f\u4fbf\u4e00\u4e2a\u6709\u7ecf\u9a8c\u7684 UI \u5f00\u53d1\u5de5\u7a0b \u5e08\u90fd\u80fd\u591f\u76f8\u5bf9\u5bb9\u6613\u7684\u4f7f\u7528\u5e76\u4fee\u6539\u5b83\uff0c\u6240\u4ee5\u5728\u4e00\u822c\u7684\u5e94\u7528\u4e2d\u4f7f\u7528\u5e76\u4e0d\u4f1a\u6709\u592a\u5927\u7684\u95ee\u9898\uff0c\u8fd9\u4e5f \u5e94\u8be5\u662f\u4e3a\u4ec0\u4e48\u4f1a\u6709\u90a3\u4e48\u591a\u7684 Duilib \u53d8\u79cd\u7684\u539f\u56e0\uff1a\u6bcf\u4e00\u4e2a\u4f7f\u7528\u5b83\u7684\u516c\u53f8\u6216\u8005\u4e2a\u4eba\u90fd\u4f1a\u6709\u4e00\u4efd \u72ec\u4e00\u65e0\u4e8c\u7684\u526f\u672c\u3002 \u5176\u5b9e\u4e0a\u9762\u6211\u8fd8\u6f0f\u4e86\u8bf4 QT\uff0c QT \u5728\u56fd\u5916\u6709\u4e13\u4e1a\u7684\u56e2\u961f\u7ef4\u62a4\uff0c\u6587\u6863\u4e5f\u5f88\u597d\uff0c\u4f46\u81f3\u5c11\u6709\u4e24\u4e2a\u7f3a \u70b9\uff1a1\u3001\u5b83\u662f\u8de8\u5e73\u53f0\u7684\uff0c\u8de8\u5e73\u53f0\u5373\u662f\u4f18\u70b9\uff0c\u4e5f\u662f\u7f3a\u70b9\uff0c\u4e3a\u4e86\u5b9e\u73b0\u8de8\u5e73\u53f0\uff0c\u5f88\u591a\u65f6\u5019\u9700\u8981\u505a \u51fa\u53d6\u820d\uff0c\u5c31\u7b97\u62bd\u8c61\u7684 100\uff05\u7684\u5b8c\u7f8e\uff0c\u5b83\u4e5f\u4e0d\u53ef\u907f\u514d\u7684\u5e26\u6765\u4f53\u79ef\u5e9e\u5927\uff1b2\u3001\u4ee3\u7801\u91cf\u592a\u5927\uff0c\u666e \u901a\u4eba\u5f88\u96be\u9a7e\u9a6d\uff1a\u5c31\u7b97\u662f\u770b\u61c2\u90fd\u4e0d\u5bb9\u6613\uff0c\u66f4\u522b\u8bf4\u4fee\u6539\u4e86\uff0c\u8fd9\u6837\u7684\u7ed3\u679c\u5c31\u662f\u4e00\u65e6\u5728\u4f7f\u7528\u4e2d\u9047\u5230 \u95ee\u9898\u4f60\u552f\u4e00\u7684\u9009\u62e9\u5c31\u662f\u63d0\u4ea4 BUG \u7ed9 QT \u5f00\u53d1\u5c0f\u7ec4\u7b49\u5f85\u8865\u4e01\uff08\u8981\u77e5\u9053\u4e0d\u5b58\u5728\u6ca1\u6709 BUG \u7684\u4ea7 \u54c1\uff09\u3002 SOUI \u662f\u4ec0\u4e48\uff1f SOUI \u662f\u4e00\u5957\u548c Duilib \u7c7b\u4f3c\u7684\u5f00\u6e90 C++ UI \u5f00\u53d1\u6846\u67b6\u3002\u5b83\u7684\u7956\u5b97\u662f\u91d1\u5c71\u536b\u58eb\u5f00\u6e90\u7248\u672c\u4e2d \u4f7f\u7528\u7684 UI \u5e93 Bkwin\uff0c\u4e4b\u540e\u7531\u542f\u7a0b\u8f6f\u4ef6\uff08\u4e5f\u5c31\u662f\u6211\u4e86\uff09\u5f00\u53d1\u7ef4\u62a4\u5347\u7ea7\u4e3a Duiengine\uff0c\u6700\u540e \u5386\u7ecf\u591a\u6b21\u91cd\u6784\u6539\u540d\u4e3a SOUI\uff0c\u5bd3\u610f\u201c\u7626 UI\u201d\uff0c\u201cUI, just so so!\u201d\u3002\u4f7f\u7528 MIT \u5f00\u6e90\u534f\u8bae\uff0c\u516c \u53f8\u3001\u4e2a\u4eba\u517c\u53ef\u514d\u8d39\u4f5c\u7528\uff0c\u53ea\u9700\u8981\u53d1\u5e03\u65f6\u5e26\u4e0a SOUI \u7684 license\u3002 SOUI \u4ee3\u7801\u7684\u83b7\u53d6 SVN\uff1a http://code.taobao.org/svn/soui2/trunk \u4e0d\u8981\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00\u8be5\u7f51\u5740\uff0c\u53ea\u80fd \u4f7f\u7528 SVN \u5ba2\u6237\u7aef\u7b7e\u51fa\u3002 GIT\uff1a https://github.com/setoutsoft/soui SOUI \u754c\u9762\u6548\u679c SOUI \u7684\u7279\u70b9 \u4f7f\u7528\u5c42\uff1a\u9ad8\u901f\uff0c\u7a33\u5b9a\uff0c\u7f8e\u89c2\uff0c\u53ef\u914d\u7f6e \u4ee3\u7801\u5c42\uff1a\u7cbe\u5fc3\u8bbe\u8ba1\uff0c\u6a21\u5757\u4f4e\u8026\u5408\uff0c\u63d2\u4ef6\u5316\u8bbe\u8ba1\uff0c\u5bf9\u8c61\u53ef\u9760\u7684\u547d\u4ee4\u5468\u671f\u7ba1\u7406\uff0c\u7c7b\u4f3c WTL \u7684 \u7f16\u7801\u65b9\u5f0f\uff0c\u73b0\u4ee3\u5316\u7684\u4e8b\u4ef6\u5904\u7406\u6a21\u578b\u53ca\u4f18\u5f02\u7684\u6269\u5c55\u80fd\u529b\u3002 \u4ee3\u7801\u91cf\uff1a\u6838\u5fc3\u6a21\u5757\u4ee3\u7801\u91cf 4W+\uff0c\u7f16\u8bd1\u540e DLL Release \u7248\u672c\u5728 900K \u5de6\u53f3\u3002\u5f97\u76ca\u4e8e\u7cbe\u5fc3\u7ec4 \u7ec7\u7684\u4ee3\u7801\u6846\u67b6\uff0c\u867d\u7136\u4ee3\u7801\u91cf\u8f83 Duilib \u8fd9\u6837\u7684 UI \u5e93\u6709\u6bd4\u8f83\u5927\u7684\u63d0\u9ad8\uff08\u6838\u5fc3\u6846\u67b6\u66f4\u5b8c\u5584\uff0c\u63a7 \u4ef6\u66f4\u591a\uff0c\u6ce8\u91ca\u91cf\u66f4\u5927\uff09\uff0c\u4f46\u662f\u9605\u8bfb\u4ee3\u7801\u8fd8\u662f\u5f88\u8f7b\u677e\u7684\uff08\u5927\u91cf\u5b9e\u9645\u7528\u6237\u7684\u4eb2\u8eab\u4f53\u9a8c\uff09\u3002 \u9ad8\u901f\u4e3b\u8981\u4f53\u73b0\u5728 3 \u4e2a\u65b9\u9762\uff1a 1\u3001\u6846\u67b6\u8bbe\u8ba1\u6241\u5e73\u5316\uff0c\u5c42\u6b21\u7b80\u5355\uff08\u548c QT \u76f8\u6bd4\uff09\uff1a\u4ece\u5bbf\u4e3b\u7a97\u53e3\u6536\u5230\u6d88\u606f\u5230\u63a7\u4ef6\u54cd\u5e94\u6d88\u606f\u53ea\u6709 \u4e00\u4e2a\u4e2d\u95f4\u5c42\u3002 2\u3001\u7b80\u5355\u6709\u6548\u7684\u5237\u65b0\u7b56\u7565\uff1a\u901a\u8fc7\u5bf9\u526a\u88c1\u533a\u53ca\u5237\u65b0\u65f6\u673a\u7684\u6709\u8f83\u63a7\u5236\uff0c \u80fd\u6709\u6548\u7684\u63d0\u9ad8\u5237\u65b0\u6548 \u7387\u3002 3\u3001\u9ad8\u6548\u7684\u6e32\u67d3\u5f15\u64ce\uff1a\u901a\u8fc7 \u5c06\u6e32\u67d3\u5f15\u64ce\u63a5\u53e3\u5316\uff0c\u6210\u529f\u7684\u5c06 skia \u6e32\u67d3\u5f15\u64ce\u5f15\u5165\u5230 SOUI \u4e2d\uff0cSkia \u662f Google \u7684 Chrome \u7684\u6e32\u67d3\u5f15\u64ce\uff0cChrome \u6bd4 IE \u6e32\u67d3\u901f\u5ea6\u5feb\uff0cSkia \u529f\u4e0d\u53ef \u6ca1\u3002 \u7a33\u5b9a\u6027\u65b9\u9762\uff0cSOUI \u8131\u80ce\u4e8e Bkwin\uff0c\u518d\u7ecf\u8fc7\u672c\u4eba\u7684\u4e0d\u65ad\u7cbe\u5fc3\u91cd\u6784\uff0c\u5df2\u7ecf\u5728\u591a\u4e2a\u5927\u91cf\u7528\u6237\u7684 \u4ea7\u54c1\u4e2d\u5e94\u7528\uff0c\u5305\u62ec\u6700\u8fd1\u5f00\u53d1\u7684\u745e\u96ea\u533b\u751f\u5ba2\u6237\u7aef\uff0c\u591a\u73a9\u9b54\u76d2 2.0, Dota2 \u6e38\u620f\u76d2\u5b50\u53ca\u591a\u73a9\u591a \u4e2a\u6e38\u620f\u76d2\u5b50\u4e2d\u4f7f\u7528\uff0c \u53ca\u767e\u5ea6\u4e91\u7ba1\u5bb6\u7684\u5927\u90e8\u5206\u754c\u9762\u3002 \u767e\u5ea6\u4e91\u7ba1\u5bb6\u636e\u8bf4\u6700\u521d\u4f7f\u7528\u7684\u662f\u817e\u8baf QQ \u754c\u9762\u5e93\u7684\u65e9\u671f\u7248\u672c\uff08\u65e0\u4ece\u8003\u8bc1\uff09\uff0c\u7136\u800c QQ \u754c\u9762\u5e93 \u5927\u91cf\u4f7f\u7528 COM \u6280\u672f\uff0c\u6269\u5c55\u975e\u5e38\u9ebb\u70e6\uff0c\u4f7f\u7528\u5f88\u662f\u4e0d\u4fbf\uff0c\u5728\u540e\u7eed\u7684 UI \u9700\u6c42\u4e2d\u5f00\u59cb\u5927\u91cf\u4f7f\u7528 SOUI \u7684\u524d\u8eab DuiEngine\u3002 \u7f8e\u89c2\u65b9\u9762\uff0cSOUI \u539f\u751f\u652f\u6301 Alpha \u901a\u9053\uff0c\u80fd\u591f\u5b9e\u73b0\u5404\u79cd\u534a\u900f\u660e\u6548\u679c\uff0c\u5305\u62ec\u4e3b\u7a97\u4f53\u534a\u900f\u660e\uff0c DUI \u7a97\u53e3\u534a\u900f\u660e\uff0cDUI \u7a97\u53e3\u6a21\u4eff LayeredWindow\uff08\u5206\u5c42\u7a97\u53e3\uff09\u6548\u679c\u7b49\uff0c\u8f7b\u677e\u5b9e\u73b0\u5404\u79cd\u5f02 \u5f62\u6548\u679c\u3002 \u53ef\u914d\u7f6e\u65b9\u9762\uff0cSOUI \u4e2d\u6240\u6709 UI \u8d44\u6e90\u90fd\u91c7\u7528 XML \u63cf\u8ff0\uff0c\u8c03\u6574 UI \u6548\u679c\u4e00\u822c\u53ea\u9700\u8981\u4fee\u6539 XML \u8d44\u6e90\u5373\u53ef\u5b8c\u6210\u3002 \u8bf4\u5230\u4ee3\u7801\u5c42\u7684\u8bbe\u8ba1\u5f88\u96be\u7528\u8bed\u8a00\u63cf\u8ff0\uff0c\u53ea\u6709\u4eb2\u81ea\u9605\u8bfb\u4ee3\u7801\u65b9\u80fd\u7406\u89e3\u3002\u4e3a\u5927\u90e8\u5206\u9700\u8981\u5728\u5916\u90e8 \uff08APP \u5c42\uff09\u7ecf\u5e38\u5f15\u7528\u7684 UI \u76f8\u5173\u5bf9\u8c61\u63d0\u4f9b\u5f15\u7528\u8ba1\u6570\u8bbe\u8ba1\u80fd\u591f\u6709\u6548\u51cf\u5c11 C++\u5f00\u53d1\u4e2d\u5e38\u89c1\u7684\u91ce \u6307\u9488\u95ee\u9898\uff0c\u8fd9\u4e00\u70b9\u8fd8\u662f\u5f88\u597d\u4f53\u4f1a\uff0c\u540c\u65f6\u7cfb\u7edf\u4e2d\u4e5f\u91cd\u70b9\u89e3\u51b3\u4e86\u5982\u6d88\u606f\u5206\u53d1\u7684\u5206\u5c42\u8bbe\u8ba1\uff0c\u7a97\u53e3 \u5bf9\u8c61\u7684\u6d88\u606f\u91cd\u5165\u7b49\u5f71\u54cd UI \u4f7f\u7528\u4f53\u9a8c\u7684\u5173\u952e\u6027\u95ee\u9898\u3002 \uf0b7 SOUI \u4eae\u70b9 \u5bbd\u6cdb\u7684\u8bf4 SOUI \u591a\u597d\u5927\u5bb6\u5e76\u6ca1\u76f4\u89c2\u7684\u611f\u89c9\uff0c\u4e0b\u9762\u4ece\u4e00\u4e9b\u5177\u4f53\u7684\u70b9\u6765\u4ecb\u7ecd SOUI\u3002 \u754c\u9762\u5e03\u5c40 \u4e5f\u8bb8\u521d\u5b66\u8005\u5bf9\u4e8e SOUI \u7684\u5e03\u5c40\u8fd8\u4e0d\u592a\u9002\u5e94\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u90a3\u4e9b\u4e60\u60ef\u4e86 Duilib \u7684\u5e03\u5c40\u65b9\u5f0f\u7684\u670b \u53cb\u3002\u4e8b\u5b9e\u4e0a SOUI \u7684\u5e03\u5c40\u5e94\u8be5\u662f\u6700\u63a5\u8fd1\u7a0b\u5e8f\u601d\u7ef4\u7684\u5e03\u5c40\u65b9\u5f0f\u3002\u524d\u6bb5\u65f6\u95f4\u5f00\u53d1 Android\uff0c\u4ec5 \u4ec5\u662f\u5b83\u7684 5 \u5927 Layout \u5c31\u80fd\u8ba9\u4eba\u5d29\u6e83\uff0c\u800c\u4e14\u4e0d\u540c\u7684 layout \u5bf9\u5e94\u7684\u5e03\u5c40\u5c5e\u6027\u8fd8\u4e0d\u4e00\u6837\u3002 SOUI \u7684\u5e03\u5c40\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u6709\u4e24\u4e2a\u5e03\u5c40\u5c5e\u6027\uff1apos + offset\uff0c\u5177\u4f53\u53c2\u8003\u535a\u5ba2\uff1a http://www.cnblogs.com/setoutsoft/p/3925952.html \u901a\u5e38\u4f7f\u7528\u4e00\u4e2a pos \u5c5e\u6027\u5c31\u89e3\u51b3\u5e03\u5c40\u95ee\u9898\u4e86\uff0cpos \u5728 XML \u4e2d\u4f7f\u7528\"x1,y1,x2,y2\"\u8fd9\u6837\u7684 4 \u4e2a\u5750\u6807\u5b9a\u4e49\u4e00\u4e2a\u63a7\u4ef6\u5728\u7236\u7a97\u53e3\u4e2d\u7684\u76f8\u5bf9\u4f4d\u7f6e\uff0c\u800c offset \u5219\u5b9a\u4e49\u901a\u8fc7 pos \u8ba1\u7b97\u51fa\u6765\u7684\u4f4d\u7f6e \u540e\u5728 X\uff0cY \u4e24\u4e2a\u65b9\u5411\u9700\u8981\u53e0\u52a0\u7684\u504f\u79fb\uff0c\u504f\u79fb\u503c\u9700\u8981\u4e58\u4e0a\u7a97\u53e3\u5927\u5c0f\u3002 \u4f8b\u5982\u4e0b\u9762\u8fd9\u4e2a\u9700\u6c42\uff1a \u53ea\u77e5\u9053\u7a97\u53e3\u9700\u8981\u9760\u53f3\u4e0b\u89d2\uff0c\u4e0d\u77e5\u9053\u7a97\u53e3\u5927\u5c0f\u7684\u60c5\u51b5\uff0c\u5728 SOUI \u4e2d\u53ea\u9700\u8981\u4f7f\u7528\u5c5e\u6027 pos=\u201c- 20,-30\u201d offset=\"-1,-1\"\u5373\u53ef\u3002 \u6e32\u67d3\u6d41\u7a0b \u4e00\u4e2a UI \u4e2d\u7684\u754c\u9762\u5143\u7d20\u6700\u540e\u4f1a\u901a\u8fc7\u5404\u7ea7\u5b50\u7a97\u53e3\u5f62\u6210\u4e00\u4e2a\u6811\u72b6\u7ed3\u6784\u3002\u4e00\u822c\u7684\u6e32\u67d3\u6d41\u7a0b\u81ea\u7136\u662f \u4ece\u6839\u8282\u70b9\u4e00\u5c42\u4e00\u5c42\u7684\u76f4\u5230\u6e32\u67d3\u5b8c\u6210\u6240\u6709\u53f6\u7ed3\u70b9\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5f88\u7b80\u5355\uff0c\u53ef\u80fd\u5f88\u591a UI \u5e93\u4e5f\u5c31\u505a \u5230\u8fd9\u4e2a\u5c42\u6b21\uff08\u4f8b\u5982 DuiLib\uff09\u3002\u4f46\u662f\u5bf9\u4e8e\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684 UI \u5e93\u4ec5\u505a\u5230\u8fd9\u4e2a\u5c42\u6b21\u662f\u4e0d\u591f\u7684\uff0c\u4e3e \u4f8b\u6765\u8bf4\uff1a\u4e00\u4e2a\u753b\u7b14\u7a0b\u5e8f\u9700\u8981\u5728 OnMouseMove \u91cc\u9762\u7ed8\u5236\u65b0\u62fe\u53d6\u7684\u7ebf\u6761\uff0c\u672c\u80fd\u7684\u505a\u6cd5\u662f\u83b7 \u53d6\u7a97\u53e3\u753b\u5e03\uff0c\u7ed8\u5236\u5b8c\u6210\u540e\u518d\u63d0\u4ea4\u753b\u5e03\uff08\u7c7b\u4f3c Windows API: GetDC and ReleaseDC\uff09\uff0c\u800c\u4e0d\u662f\u6bcf\u4e00\u6b21\u7ed8\u5236\u53ea\u80fd\u8bf7\u6c42\u5bbf\u4e3b\u5237\u65b0\uff08\u8bf7\u6c42\u5bbf\u4e3b\u7acb\u5373\u5237\u65b0\u4f9d\u8d56\u4e8e\u7cfb\u7edf\u5bf9 UpdateWindow \u8fd9\u4e2a API \u7684\u54cd\u5e94\u901f\u5ea6\uff09\u3002 \u56e0\u6b64\u4e00\u4e2a\u6210\u719f\u7684 UI \u5f15\u64ce\u6709\u5fc5\u8981\u5b9e\u73b0 GetDC \u53ca ReleaseDC \u8fd9\u6837\u7684\u63a5\u53e3\u3002\u548c\u57fa\u4e8e HWND \u7684\u7a97\u53e3\u83b7\u53d6 HDC \u4e0d\u540c\uff0c\u5728\u4e00\u5957 DirectUI \u7cfb\u7edf\u4e2d\u5b9e\u73b0 GetDC \u53ca ReleaseDC \u8981\u66f4\u52a0\u590d \u6742\uff1a\u6700\u5173\u952e\u7684\u95ee\u9898\u5728\u4e8e\u83b7\u53d6\u524d\u7ed8\u5236\u7a97\u53e3\u7684\u80cc\u666f\uff0c\u4ee5\u53ca\u63d0\u4ea4\u540e\u7ed8\u5236\u7a97\u53e3\u7684\u524d\u666f\uff0c\u8981\u5b9e\u73b0\u7a97\u53e3 \u80cc\u666f\u524d\u666f\u7684\u5206\u5f00\u7ed8\u5236\u53c8\u9700\u8981\u7cfb\u7edf\u63d0\u4f9b\u7ed8\u5236\u5728\u6307\u5b9a Z-Order \u8303\u56f4\u5185\u7684\u7a97\u53e3\u7684\u80fd\u529b\uff0c\u5f53\u7136\u524d\u63d0 \u662f\u7cfb\u7edf\u4e2d\u6709 Z-Order \u8fd9\u6837\u7684\u6982\u5ff5\u3002 \u5c31\u7b97\u5b9e\u73b0\u4e86\u7a97\u53e3\u7684\u80cc\u666f\u4e0e\u524d\u666f\u7684\u5206\u522b\u7ed8\u5236\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684 UI \u5f15\u64ce\u53ef\u80fd\u8fd8\u662f\u4e0d\u591f\u7684\u3002 \u56e0\u4e3a\u6709\u4e9b\u65f6\u5019\u4e00\u4e2a\u7a97\u53e3\u4e2d\u7684\u5185\u5bb9\u662f\u4e0d\u9700\u8981\u548c\u80cc\u666f\u6df7\u5408\u7684\uff0c\u7a97\u53e3\u5237\u65b0\u7684\u65f6\u5019\u7ed8\u5236\u80cc\u666f\u662f\u6ca1\u6709 \u610f\u4e49\u7684\uff08\u5982\u89c6\u9891\u64ad\u653e\u7a97\u53e3\uff09\uff0c\u5c31\u662f\u9700\u8981\u53e6\u4e00\u79cd\u6280\u672f\uff1a\u7a97\u53e3\u7684\u8de8\u5c42\u6e32\u67d3\uff08\u4e0d\u77e5\u9053\u8fd9\u6837\u547d\u540d\u662f \u4e0d\u662f\u5408\u9002\uff09\u3002\u5f53\u4e00\u4e2a\u89c6\u9891\u7a97\u53e3\u9700\u8981\u5237\u65b0\u7684\u65f6\u5019\uff0c\u5b83\u7684\u5237\u65b0\u6d41\u7a0b\u548c\u57fa\u672c\u7684\u5237\u65b0\u6d41\u7a0b\u662f\u4e0d\u4e00\u6837 \u7684\uff0c\u6e32\u67d3\u65f6\u5b83\u4f1a\u8df3\u8fc7\u5b83\u7684\u6240\u6709\u7236\u7a97\u53e3\u76f4\u63a5\u5230\u8fd9\u4e2a\u7a97\u53e3\u5c42\u6765\uff0c\u4ece\u800c\u5927\u5927\u52a0\u901f\u6e32\u67d3\u8fc7\u7a0b\u3002 \u5206\u5c42\u7a97\u53e3 Windows \u7684\u5206\u5c42\u7a97\u53e3\u662f Windows 2000 \u63d0\u4f9b\u7684\u4e00\u9879\u91cd\u8981\u66f4\u65b0\u3002\u82f9\u679c\u7cfb\u7edf\u7684 UI \u5f88\u6f02\u4eae\uff0c \u6709\u4e86\u5206\u5c42\u7a97\u53e3\uff0cWindows \u7cfb\u7edf\u4e0a\u5f00\u53d1\u7684\u5e94\u7528\u4e5f\u53ef\u4ee5\u540c\u6837\u6f02\u4eae\u3002 \u8fd9\u91cc\u8bf4\u7684\u5206\u5c42\u7a97\u53e3\u6709\u4e24\u4e2a\u5c42\u6b21\uff1a\u4e00\u4e2a\u662f DirectUI \u7684\u5bbf\u4e3b\u7a97\u53e3\u4e2d\u4f7f\u7528\u5206\u5c42\u7a97\u53e3\u6280\u672f\uff1b\u53e6\u4e00 \u5c42\u662f\u5728 DirectUI \u7684 DUI \u7a97\u53e3\u7cfb\u7edf\u5185\u90e8\u5b9e\u73b0\u5206\u5c42\u7a97\u53e3\u6280\u672f\u3002 \u4f7f\u7528\u5206\u5c42\u7a97\u53e3\u6280\u672f\u542c\u8d77\u6765\u6bd4\u8f83\u7b80\u5355\uff0c\u4e0d\u5c31\u662f\u8bbe\u8ba1\u4e00\u4e2a WS_EX_LAYEREDWINDOW \u5c5e\u6027 \u518d\u4f7f\u7528 UpdateLayeredWindow(EX)\u66f4\u65b0\u7a97\u53e3\u5417\uff1f\uff01\u5982\u679c SOUI \u53ea\u8fbe\u5230\u8fd9\u4e2a\u5c42\u6b21\uff0c\u90a3\u548c codeproject \u4e0a\u968f\u4fbf\u627e\u4e00\u4e2a demo \u4e5f\u6ca1\u6709\u4ec0\u4e48\u533a\u522b\u3002 \u9996\u5148\u8981\u641e\u6e05\u695a\uff0cSOUI \u662f\u4e00\u5957 DirectUI \u7cfb\u7edf\uff0c\u800c\u4e0d\u662f Demo\uff0c\u56e0\u6b64\u5b83\u4e0d\u80fd\u505c\u7559\u5728\u52a0\u8f7d\u4e00 \u4e2a 32 \u4f4d PNG \u56fe\u7247\u5e76\u663e\u793a\u51fa\u6765\u8fd9\u6837\u7684\u5c42\u6b21\u4e0a\u3002\u5b83\u5fc5\u987b\u8981\u80fd\u591f\u8ba9\u7528\u6237\u80fd\u591f\u8c03\u7528\u5404\u79cd\u7ed8\u5236\u56fe \u5f62\uff0c\u56fe\u50cf\uff0c\u6587\u5b57\u7684 API \u6765\u7ec4\u5408\u51fa\u4e00\u4e2a\u6700\u7ec8\u9700\u8981\u5448\u73b0\u7684 32 \u4f4d\u4f4d\u56fe\u3002\u8fd9\u4e00\u70b9\u8981\u6c42\u770b\u8d77\u6765\u7b80 \u5355\uff0c\u5728 Windows \u7cfb\u7edf\u4e0a\u5b9e\u73b0\u8d77\u6765\u5e76\u4e0d\u7b80\u5355\uff0c\u56e0\u4e3a Windows \u4e0a\u6700\u57fa\u672c\u7684\u7ed8\u5236 API \uff08GDI\uff09\u90fd\u662f\u4e0d\u652f\u6301 alpha \u901a\u9053\u7684\u3002\u6709\u4e00\u4e2a\u7b80\u5355\u7684\u9009\u62e9\uff1aGDIPlus\u3002\u7136\u800c GDIPlus \u6709\u4e00 \u4e2a\u6bdb\u75c5\u5c31\u662f\u901f\u5ea6\u592a\u6162\uff0c\u8fd9\u5bf9\u4e8e\u4e00\u4e2a\u901a\u7528\u7684 UI \u5f15\u64ce\u6765\u8bf4\uff0c\u5168\u90e8\u4f9d\u8d56 GDIPlus \u57fa\u672c\u4e0a\u5c31\u5ba3\u5224 \u4e86\u8fd9\u4e2a\u5f15\u64ce\u7684\u6b7b\u5211\u3002\u5728 SOUI \u4e2d\u91c7\u7528\u6e32\u67d3\u5f15\u64ce\u62bd\u8c61\u7684\u65b9\u6cd5\u5b9e\u73b0\u4e86\u4e24\u79cd\u6e32\u67d3\u5f15\u64ce\uff1aSkia + GDI\u3002\u524d\u9762\u4e0d\u662f\u8bf4 GDI \u4e0d\u652f\u6301 Alpha \u901a\u8fc7\u4e0d\u80fd\u7528\u5417\uff1f\u6ca1\u9519\uff0c\u76f4\u63a5\u7528 GDI \u51fd\u6570\u662f\u4e0d\u884c\u7684\uff0c \u6211\u4eec\u9700\u8981\u9002\u5f53\u7684\u6539\u9020\uff08\u5177\u4f53\u65b9\u6cd5\u53c2\u89c1\u4ee3\u7801\uff09\u3002 \u89e3\u51b3\u4e86\u7ed8\u5236\u65b9\u6cd5\uff0c\u8981\u66f4\u65b0\u5230\u7a97\u53e3\u4e2d\u663e\u793a\u4e5f\u8fd8\u662f\u6709\u6280\u5de7\u7684\u3002\u6709\u4eba\u53ef\u80fd\u77e5\u9053\uff0c\u4f7f\u7528 UpdateLayeredWindow \u8fd9\u4e2a API \u66f4\u65b0\u7684\u7a97\u53e3\u5c06\u6536\u4e0d\u5230 WM_PAINT \u6d88\u606f\u3002\u7531\u4e8e\u5728\u534a\u900f \u660e\u7a97\u53e3\u4e2d\u4e0d\u80fd\u76f4\u63a5\u652f\u6301\u6709\u7a97\u53e3\u53e5\u67c4\u7684\u5b50\u7a97\u53e3\u7684\u663e\u793a\uff08\u5982 IE \u63a7\u4ef6\uff09\uff0cSOUI \u8fd8\u5fc5\u987b\u4e3a\u90a3\u4e9b\u9700 \u8981\u5bb9\u7eb3\u7a97\u53e3\u53e5\u67c4\u5b50\u7a97\u53e3\u7684\u60c5\u51b5\u63d0\u4f9b\u652f\u6301\uff0c\u5373\u901a\u8fc7\u914d\u7f6e\u540c\u65f6\u652f\u6301\u534a\u900f\u660e\u7a97\u53e3\u4e0e\u4e0d\u900f\u660e\u7a97\u53e3\u3002 \u4f46\u662f\u6211\u4e0d\u613f\u610f\u4e3a\u4e24\u79cd\u4e0d\u540c\u7684\u6700\u7ec8\u4f4d\u56fe\u5448\u73b0\u6a21\u578b\u63d0\u4f9b\u4e24\u5957\u4e0d\u540c\u7684\u673a\u5236\u3002\u89e3\u51b3\u7684\u529e\u6cd5\u5f88\u7b80\u5355\uff0c \u901a\u8fc7\u4e3a\u534a\u900f\u660e\u7c7b\u578b\u7684\u7a97\u53e3\u8bbe\u8ba1\u4e00\u4e2a\u8f85\u52a9\u7a97\u53e3\uff0c\u4f7f\u7528\u5b83\u6765\u63a5\u6536 WM_PAINT \u6d88\u606f\uff0c\u6536\u5230\u8be5\u6d88 \u606f\u65f6\u8c03\u7528 UpdateLayeredWindow \u66f4\u65b0\u7a97\u53e3\u3002\u6ce8\uff1a \u8fd9\u4e2a\u6280\u672f\u662f\u5b66\u4e60\u53e6\u4e00\u5957 UI \u5e93 MetalBone \u5b9e\u73b0\u7684\u3002 \u8bb2\u5b8c\u4e86\u4f7f\u7528\u5bbf\u4e3b\u7a97\u53e3\u5206\u5c42\u7a97\u53e3\uff0c\u4e0b\u9762\u8bb2\u8bb2 DUI \u7a97\u53e3\u7684\u5206\u5c42\u7a97\u53e3\u6280\u672f\u7684\u5b9e\u73b0\u3002 \u4f7f\u7528\u5206\u5c42\u7a97\u53e3\u6280\u672f\u80fd\u591f\u4f7f UI \u6548\u679c\u66f4\u6f02\u4eae\uff0c\u5173\u952e\u6280\u672f\u5c31\u5728\u8fd9\u4e2a\u5c42\u3002\u5c42\u662f\u4ec0\u4e48\uff1f\u5c42\u662f\u4e00\u7ec4\u7a97 \u53e3\u7684\u7ed8\u5236\u5bb9\u5668\uff0c\u5b83\u5c06\u8be5\u5c42\u4e0b\u6240\u6709\u5b50\u7a97\u53e3\u7684\u7ed8\u5236\u5185\u5bb9\u7ed8\u5236\u5230\u4e00\u4e2a\u72ec\u7acb\u7684\u7f13\u51b2\u533a\u4e0a\uff0c \u6700\u540e\u518d\u4e00 \u8d77\u7ed8\u5236\u5230\u5206\u5c42\u7a97\u53e3\u7684\u4e0a\u4e00\u5c42\u7ed8\u5236\u7f13\u51b2\u533a\u4e2d\u3002\u5982\u4e0b\u56fe\uff1a A\u3001B\u3001B1\u3001B2\u3001C \u4e3a DUI \u7cfb\u7edf\u4e2d 5 \u4e2a DUI \u7a97\u53e3\u3002\u5176\u4e2d\uff0cB\u3001B1\u3001B2 \u662f\u540c\u4e00\u4e2a\u6e32\u67d3\u5c42\u3002 \u4e5f\u5c31\u662f\u8bf4\u8bbe\u8ba1\u9700\u8981\u5b83\u4eec\u5148\u7ed8\u5236\u597d\u540e\u518d\u548c A\uff0cC \u505a\u878d\u5408\u3002 \u7c7b\u4f3c\u7684\u9700\u6c42\u5bf9\u4e8e\u4e00\u4e2a\u6f02\u4eae\u7684 UI \u6765 \u8bf4\u53ef\u80fd\u4f1a\u5f88\u5e38\u89c1\u3002\u5982\u679c\u5728 UI \u5f15\u64ce\u4e2d\u6ca1\u6709\u5c42\u7684\u6982\u5ff5\u662f\u4e0d\u53ef\u80fd\u5b9e\u73b0\u7684\u3002\u5982\u679c\u4e0d\u9700\u8981\u5b9e\u73b0\u524d\u9762 \u63d0\u5230\u7684\u80cc\u666f\u548c\u524d\u666f\u5206\u522b\u6e32\u67d3\u7684\u60c5\u51b5\uff0c\u5b9e\u73b0\u4f1a\u5c42\u7a97\u53e3\u5176\u5b9e\u4e5f\u4e0d\u96be\uff0c\u53ea\u9700\u8981\u5728\u6e32\u67d3\u5230 B \u7a97\u53e3\u65f6 \u521b\u5efa\u4e00\u4e2a\u7f13\u51b2\u533a\uff0c\u628a\u4ece B \u5f00\u59cb\u7684\u5185\u5bb9\u6e32\u67d3\u5230\u8fd9\u4e2a\u7f13\u51b2\u533a\uff0c\u5b8c\u6210\u540e\u518d\u56de\u5230\u6b63\u5e38\u6e32\u67d3\u6d41\u7a0b\uff0c\u5c31 \u50cf\u6ca1\u6709 B1\u3001B2 \u4e00\u6837\u3002\u4f46\u662f SOUI \u662f\u652f\u6301\u80cc\u666f\u524d\u666f\u5206\u522b\u6e32\u67d3\u7684\uff0c\u5b9e\u73b0\u8fd9\u4e2a\u8fc7\u7a0b\u7684\u4ee3\u7801\u903b\u8f91 \u5c31\u53ef\u80fd\u5f88\u590d\u6742\u4e86\uff08\u53ef\u4ee5\u81ea\u5df1\u60f3\u8c61\u4e00\u4e0b\uff09\u3002 \u975e\u5ba2\u6237\u533a HWND \u7684\u975e\u5ba2\u6237\u533a\u7528\u6765\u7ed8\u5236\u6eda\u52a8\u6761\u53ca\u8fb9\u6846\u53ca\u6807\u9898\u680f\uff0c\u83dc\u5355\u680f\u3002\u5ba2\u6237\u533a\u662f\u7528\u6237\u7ed8\u5236\u7684\u5e38\u89c4\u533a \u57df\uff0c\u5728\u8bbe\u8ba1\u4e0a\u5c06\u7a97\u53e3\u7684\u663e\u793a\u533a\u57df\u5212\u5206\u4e3a\u5ba2\u6237\u533a\u548c\u975e\u5ba2\u6237\u533a\uff0c\u6709\u5229\u4e8e\u7528\u6237\u5728\u91cd\u5199\u5ba2\u6237\u533a\u7684\u7ed8 \u5236\u4ee3\u7801\u65f6\u4e0d\u88ab\u975e\u5ba2\u6237\u533a\u5e72\u6270\uff0c\u4e5f\u6709\u5229\u4e8e\u4ee3\u7801\u7684\u590d\u7528\u3002 \u5728 DuiLib \u4e2d\uff0c\u4e00\u4e2a\u63a7\u4ef6\u5982 Richedit \u9700\u8981\u663e\u793a\u6eda\u52a8\u6761\uff0c\u5b83\u9700\u8981\u7ed9\u8fd9\u4e2a\u63a7\u4ef6\u7ec4\u5408\u4e24\u4e2a\u6eda\u52a8\u6761 \u63a7\u4ef6\u3002\u8fd9\u79cd\u65b9\u5f0f\u867d\u7136\u770b\u4e0a\u53bb\u6ca1\u6709\u4ec0\u4e48\u5927\u7684\u95ee\u9898\uff0c\u5982\u679c\u7531\u4e8e\u7a97\u53e3\u4e2d\u5185\u5bb9\u7684\u53d8\u5316\u9700\u8981\u52a8\u6001\u663e\u793a \u9690\u85cf\u6eda\u52a8\u6761\u65f6\u53ef\u80fd\u4f1a\u5f88\u9ebb\u70e6\uff0c\u81f3\u5c11\u5b83\u4f1a\u5f15\u8d77\u7a97\u53e3\u5e03\u5c40\u7cfb\u7edf\u7684\u91cd\u6392\uff0c\u56e0\u4e3a\u6eda\u52a8\u6761\u663e\u793a\u548c\u9690\u85cf \u65f6\u63a7\u4ef6\u7684\u5ba2\u6237\u533a\u5927\u5c0f\u662f\u53d8\u5316\u7684\u3002 \u800c\u5728 SOUI \u7cfb\u7edf\u4e2d\uff0c\u6eda\u52a8\u6761\u548c HWND \u4e00\u6837\uff0c\u7528\u6237\u6839\u672c\u4e0d\u9700\u8981\u5173\u5fc3\uff0c\u56e0\u4e3a\u5185\u90e8\u5df2\u7ecf\u81ea\u52a8\u5904 \u7406\u597d\u4e86\u6eda\u52a8\u6761\uff0c\u4e5f\u4e0d\u4f1a\u5f15\u8d77\u5e03\u5c40\u7cfb\u7edf\u7684\u91cd\u6392\u3002 \u8d44\u6e90\u52a0\u8f7d \u4e00\u822c\u6765\u8bf4 SOUI \u4e2d\u5f15\u7528\u7684\u6240\u6709\u8d44\u6e90\u90fd\u5728 XML \u4e2d\u63cf\u8ff0\u3002\u521a\u5165\u95e8\u7684\u670b\u53cb\u901a\u5e38\u53cd\u6620 SOUI \u4e2d\u4f7f \u7528\u8d44\u6e90\u7684\u65b9\u5f0f\u4e0d\u5982 DuiLib \u76f4\u63a5\uff0c\u5f88\u96be\u5165\u95e8\u3002\u4f46\u662f\u4e00\u65e6\u771f\u6b63\u7406\u89e3\u4e86 SOUI \u7684\u8fd9\u79cd\u8d44\u6e90\u7ec4\u7ec7 \u65b9\u5f0f\u4e00\u5b9a\u4f1a\u66f4\u559c\u6b22 SOUI\u3002 SOUI \u63d0\u4f9b 3 \u79cd\u8d44\u6e90\u52a0\u8f7d\u65b9\u5f0f\uff1a\u6587\u4ef6\uff0cPE \u8d44\u6e90\uff0cZIP \u5305\u3002 \u9996\u5148 SOUI \u7684\u8d44\u6e90\u5305\u5fc5\u987b\u63d0\u4f9b\u4e00\u4e2a\u6587\u4ef6\u7d22\u5f15\u8868\uff0c\u5bf9\u4e8e\u4f7f\u7528 PE \u8d44\u6e90\u7684\u8d44\u6e90\u5305\uff0c\u7d22\u5f15\u8868\u5c31\u662f \u8d44\u6e90\u7684\u7c7b\u578b\u53ca ID\uff0c\u800c\u5bf9\u4e8e\u76f4\u63a5\u4f7f\u7528\u6587\u4ef6\u6216\u8005 ZIP \u5305\u7684\u8d44\u6e90\uff0c\u7d22\u5f15\u8868\u5219\u662f\u4e00\u4e2a XML \u6587\u4ef6\u3002 \u5728\u7d22\u5f15\u8868\u4e2d\uff0c\u5b9a\u4e49\u6bcf\u4e00\u4e2a\u8d44\u6e90\u7684 type \u53ca name \u4e24\u4e2a KEY\uff0cSOUI \u754c\u9762\u5e03\u5c40\u4e2d\u53ea\u80fd\u4f7f\u7528 type \u548c name \u4e24\u4e2a key \u6765\u5f15\u7528\u8d44\u6e90\u3002 \u7528\u6237\u53ea\u9700\u8981\u51c6\u5907\u4e00\u5957\u6587\u4ef6\u8d44\u6e90\uff0c\u5982\u679c\u9700\u8981\u5c06\u8d44\u6e90\u7f16\u8bd1\u5230 PE \u6587\u4ef6\u4e2d\uff0c\u7cfb\u7edf\u63d0\u4f9b\u4e00\u4e2a\u5de5\u5177\u76f4 \u63a5\u4ece\u6587\u4ef6\u8d44\u6e90\u7684\u7d22\u5f15 XML \u8f6c\u6362\u6210 rc \u7f16\u8bd1\u5668\u53ef\u4ee5\u8bc6\u522b\u7684 rc \u6587\u4ef6\uff1b\u800c\u5982\u679c\u7528\u6237\u9700\u8981\u4f7f\u7528 ZIP \u8d44\u6e90\u5305\uff0c\u5219\u53ea\u9700\u8981\u4f7f\u7528\u4e00\u4e2a ZIP \u5de5\u5177\u5982 rar, 7z \u5c06\u8d44\u6e90\u6587\u4ef6\u5939\u6253\u5305\u5373\u53ef\uff08\u63a8\u8350\u4f7f\u7528 7z \u6253 \u5305\u8d44\u6e90\uff0cSOUI \u5185\u81ea\u5e26\u7684 zlib 1.2.5 \u80fd\u591f\u8bc6\u522b 7z \u6253\u5305\u7684\u5e26\u5bc6\u7801\u7684 zip \u5305\uff0c\u4f46\u4e0d\u80fd\u8bc6\u522b rar \u6253\u5305\u7684\u5e26\u5bc6\u7801\u7684 zip \u5305\u3002 \u7a97\u53e3\u52a8\u753b\u6539\u8fdb \u4e00\u822c\u60c5\u51b5\u4e0b\u6211\u4eec\u63a8\u8350\u4f7f\u7528\u7a97\u53e3\u5b9a\u65f6\u5668\u6765\u521b\u5efa\u52a8\u753b\u3002\u4f7f\u7528\u7a97\u53e3\u5b9a\u65f6\u5668\u521b\u5efa\u52a8\u753b\u7684\u597d\u5904\u662f\u5b9a\u65f6 \u5668\u548c UI \u662f\u540c\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u800c SOUI \u4e0d\u652f\u6301\u591a\u7ebf\u7a0b\u540c\u6b65\u66f4\u65b0 UI\uff08\u4e8b\u5b9e\u4e0a\u4e00\u822c\u7684 DirectUI \u5e93 \u90fd\u4e0d\u63a8\u8350\u5728\u5de5\u4f5c\u7ebf\u7a0b\u4e2d\u64cd\u4f5c UI\uff0c\u5982 Android\uff09\u3002\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u5982\u679c\u4e3a\u6bcf\u4e00\u4e2a DUI \u7a97\u53e3 \u521b\u5efa\u5f88\u591a\u5b9a\u65f6\u5668\uff0c\u90a3\u4e48\u7cfb\u7edf\u7684\u6d88\u606f\u961f\u5217\u4e2d\u5c06\u5145\u6ee1\u5b9a\u65f6\u5668\u6d88\u606f\uff0c\u4e25\u91cd\u65f6\u53ef\u80fd\u5927\u5927\u964d\u4f4e UI \u6027 \u80fd\u3002 \u89e3\u51b3\u65b9\u6848\uff1a\u5728\u4e3b\u7a97\u53e3\u4e2d\u521b\u5efa\u4e00\u4e2a 10ms \u95f4\u9694\u7684\u5b9a\u65f6\u5668\uff0c\u9700\u8981\u5904\u7406\u52a8\u753b\u7684\u7a97\u53e3\u5411\u7cfb\u7edf\u6ce8\u518c\u4f7f \u7528\u8be5\u5b9a\u65f6\u5668\uff0c\u52a8\u753b\u8bb0\u5f55\u4e0b\u4e00\u6b21\u52a8\u753b\u9700\u8981\u7b49\u5f85\u7684\u65f6\u95f4\uff0c\u4f7f\u7528\u8be5\u7edf\u4e00\u7684\u5b9a\u65f6\u5668\u8ba1\u6570\u3002 \u6211\u4eec\u770b\u4e00\u4e0b\u9762 DEMO \u4e2d\u663e\u793a\u5927\u91cf\u52a8\u753b\u8868\u60c5\u65f6 SOUI \u7684\u6548\u7387\uff1a \u8fd9\u4e00 CPU \u5360\u7528\u7387\u751a\u81f3\u6bd4 QQ \u4e2d\u540c\u6837\u60c5\u51b5\u4e0b\u8fd8\u4f4e\u3002 \u5bb9\u5668\u5206\u5c42 \u4ec0\u4e48\u53eb\u5bb9\u5668\u5206\u5c42\uff1f\u5728 DirectUI \u4e2d\u6240\u6709\u7684 DUI \u7a97\u53e3\u90fd\u5fc5\u987b\u751f\u5b58\u5728\u4e00\u4e2a\u5bb9\u5668\u4e2d\u3002DUI \u7a97\u53e3\u7684 \u7ed8\u5236\u8bf7\u6c42\u7b49\u6700\u7ec8\u9700\u8981\u7531\u8fd9\u4e2a\u5bb9\u5668\u6765\u5b9e\u73b0\u3002\u5728\u5bb9\u5668\u4e0d\u5206\u5c42\u7684\u60c5\u51b5\u4e0b\uff0c\u6240\u6709 DUI \u7a97\u53e3\u5728\u5bb9\u5668\u4e2d \u7684\u7269\u7406\u5750\u6807\u90fd\u662f\u4ece(0,0)\u5f00\u59cb\u3002\u8fd9\u6837\u6709\u4ec0\u4e48\u95ee\u9898\u5462\uff1f\u5982\u679c\u8981\u5728\u5217\u8868\u63a7\u4ef6\u7684\u5217\u8868\u9879\u4e2d\u4f7f\u7528 DUI \u63a7\u4ef6\u5c31\u4f1a\u53d8\u5f97\u975e\u5e38\u9ebb\u70e6\uff0c\u56e0\u4e3a\u5728\u7a97\u53e3\u6eda\u52a8\u65f6\u4f60\u53ef\u80fd\u4e0d\u5f97\u4e0d\u540c\u65f6\u66f4\u65b0\u6240\u6709\u8fd9\u4e9b\u63a7\u4ef6\u7684\u5750 \u6807\u3002 \u6709\u4e86\u7a97\u53e3\u5c42\u7684\u6982\u5ff5\u5c31\u4e0d\u4e00\u6837\u4e86\uff0c\u6bcf\u73cd\u4e0a\u5217\u8868\u9879\u662f\u4e00\u4e2a\u65b0\u7684\u5bb9\u5668\uff0c\u65e0\u8bba\u5217\u8868\u9879\u663e\u793a\u5728\u54ea\uff0c\u5217 \u8868\u9879\u4e2d\u7684\u63a7\u4ef6\uff08\u5bb9\u5668\u4e2d\u7684\u63a7\u4ef6\uff09\u7684\u5750\u6807\u90fd\u4e0d\u9700\u8981\u8c03\u6574\u3002\u56e0\u4e3a\u6709\u4e86\u5bb9\u5668\u5206\u5c42\uff0c\u5728 SOUI \u4e2d\u5b9e \u73b0\u5305\u542b\u5b50\u63a7\u4ef6\u7684\u5217\u8868\u53d8\u5f97\u975e\u5e38\u7b80\u5355\uff08\u53c2\u8003\u4e0b\u8282\uff1a\u9ad8\u6027\u80fd\u5217\u8868\u63a7\u4ef6\uff09\u3002 \u9ad8\u6027\u80fd\u5217\u8868\u63a7\u4ef6 Windows \u7cfb\u7edf\u4e2d\u63d0\u4f9b\u7684\u5217\u8868\u63a7\u4ef6\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u80fd\u6ee1\u8db3\u7b80\u5355\u7684\u6570\u636e\u663e\u793a\u9700\u6c42\u3002\u6ce8\u610f\uff0c\u662f\u663e \u793a\u3002\u7136\u800c\u73b0\u5728\u7684 UI \u9700\u6c42\u4e2d\u7ecf\u5e38\u51fa\u73b0\u90a3\u79cd\u5373\u65f6\u4fee\u6539\u5217\u8868\u63a7\u4ef6\u5185\u5bb9\u7684\u60c5\u51b5\uff0c\u4f60\u5c06\u4e0d\u5f97\u4e0d\u82b1\u5927 \u91cf\u7684\u65f6\u95f4\u5bf9\u5217\u8868\u63a7\u4ef6\u8fdb\u884c\u81ea\u7ed8\uff0c\u800c\u6548\u679c\u53ea\u80fd\u8bf4\u52c9\u5f3a\u3002 \u901a\u8fc7\u7814\u7a76 Android \u7cfb\u7edf\u4e2d\u63d0\u4f9b\u7684\u5217\u8868\u63a7\u4ef6\u7684\u4ee3\u7801\uff0c\u501f\u9274 Android \u4e2d ListView \u7684\u601d\u60f3\uff0c SOUI \u5b9e\u73b0\u4e86\u4e00\u5957\u9ad8\u6027\u80fd\u7684\u5217\u8868\u63a7\u4ef6 SListView \u53ca SMcListView\u3002 SListView \u53ca SMcListView \u90fd\u662f\u57fa\u4e8e\u865a\u8868\u6280\u672f\uff0c\u540c\u65f6\u53ea\u521b\u5efa\u5f53\u524d\u6b63\u5728\u663e\u793a\u7684\u53ca\u90e8\u5206\u5907\u7528 \u7684\u5217\u8868\u9879\u5bb9\u5668\uff0c\u5c06\u8d44\u6e90\u5360\u7528\u7f29\u5c0f\u5230\u6700\u5c11\u3002\u540c\u65f6 ListView \u5728\u6eda\u52a8\u65f6\u80fd\u591f\u9ad8\u6548\u5237\u65b0\uff0c\u5b9e\u73b0\u4e86 \u6d77\u91cf\u6570\u636e\u7684\u9ad8\u6027\u80fd\u663e\u793a\u53ca\u66f4\u65b0\u3002 \u5b9e\u73b0\u8fd9\u4e2a\u9ad8\u6027\u80fd\u5217\u8868\u63a7\u4ef6\u7684\u5173\u952e\u6709\u4e24\u70b9\uff1a \u9996\u5148\u662f SOUI \u4e2d\u5b9e\u73b0\u7684\u5bb9\u5668\u5c42\u7684\u6982\u5ff5\uff0c\u4f7f\u5f97\u5217\u8868\u4f4d\u4f4d\u7f6e\u53d8\u5316\u65f6\uff0c\u5bb9\u5668\u5185\u90e8\u7684\u63a7\u4ef6\u4e0d\u9700\u8981\u8c03 \u6574\u5750\u6807\u3002 \u5176\u6b21\u5c31\u662f\u5bb9\u5668\u6570\u636e\u7684\u5145\u5206\u91cd\u7528\u3002 \u6ce8\uff1a\u4e0a\u9762\u5217\u8868\u4e2d\u53ea\u6d4b\u8bd5\u4e86 7W \u884c\u6570\u636e\uff0c\u5b9e\u9645\u4e0a listview \u4e2d\u663e\u793a\u7684\u6570\u636e\u91cf\u591a\u5c11\u5b8c\u5168\u4e0d\u5f71\u54cd UI \u6027\u80fd\uff0c\u4eb2\u6d4b 700W \u884c\u6570\u636e\u548c 7W \u884c\u6548\u679c\u4e00\u6837\u3002 \u65e0\u7a97\u53e3 Richedit Edit \u63a7\u4ef6\u662f UI \u4e2d\u6700\u5e38\u7528\u7684\u63a7\u4ef6\u4e4b\u4e00\u3002\u5728\u5141\u8bb8\u5b58\u5728\u5b50\u7a97\u53e3\u53e5\u67c4\u7684\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edf Edit \u63a7\u4ef6\u5df2 \u7ecf\u80fd\u591f\u5f88\u597d\u7684\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\u3002\u7136\u800c\u5728\u4e0d\u5141\u8bb8\u5b50\u7a97\u53e3\u53e5\u67c4\u7684\u60c5\u51b5\u4e0b\uff0c\u5b9e\u73b0\u4e00\u4e2a Edit \u63a7\u4ef6\u4f1a \u975e\u5e38\u9ebb\u70e6\u3002 \u5f53\u7136\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u9009\u62e9\u81ea\u5df1\u53bb\u91cd\u65b0\u5b9e\u73b0\u4e00\u5957 edit\uff0cEdit \u4e5f\u8bb8\u8fd8\u53ef\u884c\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u8981\u5b9e\u73b0\u4e00\u4e2a Richedit \u57fa\u672c\u4e0d\u53ef\u884c\u3002 \u597d\u5728\u5b9e\u73b0 Richedit \u7684\u6a21\u5757 riched20.dll \u4e2d\u628a UI \u548c\u903b\u8f91\u5206\u79bb\u5f00 \u6765\uff0c\u5373\u53ef\u4ee5\u7528\u5b83\u76f4\u63a5\u521b\u5efa\u6709\u7a97\u53e3\u7684 Richedit\uff0c\u4e5f\u53ef\u4ee5\u7528\u5b83\u6765\u521b\u5efa\u63d0\u4f9b\u65e0\u7a97\u53e3 Richedit \u7684 ITextServices \u63a5\u53e3\u3002\u7136\u800c\u5373\u4f7f\u662f\u8fd9\u6837\uff0c\u7a0b\u5e8f\u5458\u9700\u8981\u4e3a ITextServices \u5b9e\u73b0\u4e00\u4e2a ITextHost \u63a5\u53e3\u3002\u5c3d\u7ba1 MSDN \u4e0a\u6709\u76f8\u5173\u7684\u6587\u6863\u53ca\u793a\u4f8b\uff0c\u4f46\u662f\u6839\u636e\u5b83\u4eec\u63d0\u4f9b\u7684\u8fd9\u4e9b\u8d44\u6599\u5b9e \u73b0\u7684\u6548\u679c\u5f88\u4e0d\u7406\u60f3\u3002\u5fc5\u7adf\u53ea\u662f Demo\uff0c\u4e0d\u662f\u5b8c\u6574\u7684\u4ee3\u7801\uff0c\u5b83\u4e0d\u80fd\u6f14\u793a\u5f00\u53d1\u4e2d\u53ef\u80fd\u9047\u5230\u7684\u6bcf \u4e00\u4e2a\u7ec6\u8282\u3002\u7136\u800c\u6070\u597d\u662f\u8fd9\u4e9b\u7ec6\u8282\u662f\u5f71\u54cd UI \u7528\u6237\u4f53\u9a8c\u7684\u5173\u952e\u3002 \u6240\u4ee5\u6211\u4eec\u9700\u8981\u53e6\u8f9f\u8e4a\u5f84\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u6211\u89e3\u51b3\u8fd9\u4e9b\u7ec6\u8282\uff0c\u5173\u952e\u5728\u4e8e\u7406\u89e3\u5b83\u4eec\u7684\u903b\u8f91\u3002 SOUI \u7684\u529e\u6cd5\u662f\u627e\u5230 riched20.dll \u7684\u6e90\u4ee3\u7801\u3002\u597d\u5728\u7f51\u7edc\u4e0a\u6d41\u4f20\u7740\u4e00\u4efd\u4ece WinCE \u6e90\u4ee3\u7801\u4e2d \u5206\u79bb\u51fa\u6765\u7684 Riched20.dll \u7684\u6e90\u4ee3\u7801\uff0c\u867d\u7136\u7528\u5b83\u7f16\u8bd1\u51fa\u6765\u7684 Richedit \u6709\u5f88\u591a BUG\uff0c\u4f46\u5229 \u7528\u5b83\u53ef\u4ee5\u8ba9\u6211\u4eec\u66f4\u597d\u7684\u7406\u89e3\u5404\u79cd\u7ec6\u8282\u3002\u5927\u5bb6\u53ef\u4ee5\u6d4b\u8bd5 SOUI \u4e2d\u7684 Edit\uff0c\u6548\u679c\u5e94\u8be5\u662f\u5404\u79cd\u7c7b \u4f3c\u5e93\u4e2d\u6700\u597d\u7684\u4e00\u4e2a\u4e4b\u4e00\u3002 XML+LUA \u90e8\u5206\u6a21\u5757\u5728 SOUI \u4e2d\u91c7\u7528\u4e86\u63a5\u53e3\u5316\u8bbe\u8ba1\uff0c\u5982\u524d\u9762\u63d0\u5230\u7684\u6e32\u67d3\u5f15\u64ce\uff0c\u4ee5\u53ca\u540e\u9762\u8981\u8bf4\u7684\u591a\u8bed\u8a00 \u7ffb\u8bd1\uff0c\u4ee5\u53ca\u8fd9\u91cc\u8981\u8bf4\u7684\u811a\u672c\u6a21\u5757\u3002 \u811a\u672c\u8bed\u8a00\u65b9\u4fbf\u7075\u6d3b\uff0c\u66f4\u65b0\u7b80\u5355\uff0cLUA \u811a\u672c\u8fd8\u6709\u9ad8\u6548\u7684\u7279\u70b9\u3002\u548c WEB \u7684 HTML+JS \u7c7b\u4f3c\uff0c SOUI \u5b9e\u73b0\u4e86 XML+LUA \u7684 UI \u5f00\u53d1\u89e3\u51b3\u65b9\u6848\u3002XML \u5b9e\u73b0 UI \u5e03\u5c40\uff0cLUA \u5b9e\u73b0\u903b\u8f91\u63a7\u5236\u3002 \u5b9e\u73b0\u65b9\u6cd5\uff1a \u5728 XML \u4e2d\u4f7f\u7528 <script> \u6807\u7b7e\u58f0\u660e UI \u4e2d\u9700\u8981\u811a\u672c\u652f\u6301\u3002 \u901a\u8fc7 XML \u521b\u5efa UI \u65f6\u81ea\u52a8\u4ece\u811a\u672c\u6a21\u5757\u4e3a\u8be5 UI \u5b9e\u4f8b\u5316\u811a\u672c\u5bf9\u8c61\u3002 \u91c7\u7528 lua_tinker \u81ea\u52a8\u5bfc\u51fa C++\u7c7b\u5230 LUA \u811a\u672c\u7a7a\u95f4\uff0c\u5305\u542b\u63a7\u4ef6\u5bf9\u8c61\uff0c\u53ca\u63a7\u4ef6\u4e8b\u4ef6\u5bf9\u8c61\u3002 \u5728 LUA \u811a\u672c\u4e2d\u5904\u7406\u4e8b\u4ef6\u54cd\u5e94\u3002 \u591a\u8bed\u8a00\u7ffb\u8bd1 \u591a\u8bed\u8a00\u7ffb\u8bd1\u5bf9\u4e8e\u9700\u8981\u56fd\u9645\u5316\u7684\u5e94\u7528\u6765\u8bf4\u53ef\u80fd\u975e\u5e38\u91cd\u8981\u3002SOUI \u901a\u8fc7\u4e00\u4e2a\u8bed\u8a00\u7ffb\u8bd1\u63a5\u53e3\u6765\u6267 \u884c\u7279\u5b9a\u4e0a\u4e0b\u6587\u7684\u591a\u8bed\u8a00\u7ffb\u8bd1\u5e76\u4e14\u5b9e\u73b0\u4e86\u4e00\u4e2a\u7c7b\u4f3c QT \u8bed\u8a00\u7ffb\u8bd1\u529f\u80fd\u7684\u57fa\u672c XML \u7684\u8bed\u8a00\u7ffb\u8bd1 \u6a21\u5757\u3002\u7528\u6237\u53ea\u9700\u8981\u6309\u7167 Demo \u4e2d\u7684\u8bed\u8a00\u7ffb\u8bd1\u6587\u4ef6\u7684\u7ec4\u7ec7\u65b9\u5f0f\u7ec4\u7ec7\u7ffb\u8bd1 XML \u5c31\u53ef\u4ee5\u4e86\u3002 String \u53ca\u5176\u5b83\u57fa\u4e8e\u6a21\u677f\u7684\u96c6\u5408\u5bf9\u8c61\u7684\u53c2\u6570\u4f20\u9012 \u7531\u4e8e String \u901a\u5e38\u8981\u540c\u65f6\u652f\u6301 char \u53ca wchar_t \u8fd9\u4e24\u79cd\u5b57\u7b26\u7c7b\u578b\uff0c\u901a\u5e38 String \u5728\u4e00\u4e2a\u7c7b\u5e93 \u90fd\u90fd\u662f\u4ee5\u6a21\u677f\u5f62\u5f0f\u5b58\u5728\uff0c\u6bd4\u5982 WTL\uff0cATL\uff0c\uff08MFC \u592a\u4e45\u4e0d\u7528\uff0c\u8bb0\u4e0d\u6e05\u4e86\uff09\u3002\u4f7f\u7528\u6a21\u677f\u5b9e \u73b0\u7684\u5bf9\u8c61\u6709\u4e00\u4e2a\u7279\u70b9\uff0c\u90a3\u5c31\u662f\u4ee3\u7801\u4f1a\u7f16\u8bd1\u5230\u4f7f\u7528\u5b83\u7684\u6a21\u5757\u4e2d\u3002\u5982\u6b64\u4e00\u6765\uff0c\u5982\u679c\u5728\u8fd9\u4e9b\u6a21\u677f \u7c7b\u4e2d\u76f4\u63a5\u8c03\u7528 malloc, new \u7b49\u5185\u5b58\u5206\u914d\u51fd\u6570\u65f6\u4f1a\u5728\u8c03\u7528\u6a21\u5757\u7684\u5806\u4e0a\u5206\u914d\u5185\u5b58\uff0c\u76f8\u5e94\u5730\uff0c\u5185 \u5b58\u7684\u7ffb\u8bd1\u4e5f\u9700\u8981\u5728\u8c03\u7528\u8005\u6a21\u5757\u4e2d\u6267\u884c\u3002 \u8fd9\u6709\u4ec0\u4e48\u95ee\u9898\u5462\uff1f\u6700\u5927\u7684\u95ee\u9898\u83ab\u8fc7\u4e8e\u8fd9\u6837\u7684\u5bf9\u8c61\u4e0d\u5b9c\u5728\u4e0d\u540c\u7684\u6a21\u5757\u4e4b\u95f4\u6bd4\u53c2\u6570\u8fdb\u884c\u4f20\u9012 \uff08\u5f53\u7136\uff0cconst \u53c2\u6570\u662f\u6ca1\u95ee\u9898\u7684\uff09\u3002\u5982\u679c\u4e00\u4e2a\u8fd9\u6837\u7684\u5bf9\u8c61\u5728 A \u6a21\u5757\u4e2d\u5206\u914d\u7684\u5185\u5b58\u5230 B \u6a21\u5757 \u4e2d\u88ab\u7ffb\u8bd1\uff0c\u7ed3\u679c\u53ea\u6709\u5d29\u6e83\u3002\uff08\u5982\u679c\u6240\u6709\u6a21\u5757\u91c7\u7528 MD \u65b9\u5f0f\u52a8\u6001\u94fe\u63a5 VS \u7684\u8fd0\u884c\u5e93\u662f\u6ca1\u6709\u95ee \u9898\u7684\uff09 \u5f88\u591a\u5c0f\u8f6f\u4ef6\u662f\u4e0d\u5e0c\u671b\u91c7\u7528 MD \u7f16\u8bd1\u7684\uff0c\u56e0\u4e3a\u8fd9\u6837\u7684\u8bdd\u4e3a\u4e86\u786e\u4fdd\u7a0b\u5e8f\u7684\u6b63\u5e38\u8fd0\u884c\uff0c\u8fd8\u9700\u8981\u5e26 \u4e0a VS \u4e2d\u76f8\u5bf9\u5e94\u7684\u8fd0\u884c\u5e93\uff0c\u5c3d\u7ba1\u4f53\u79ef\u4e0d\u5927\uff0c\u4f46\u4e5f\u9ebb\u70e6\u3002 SOUI \u4e2d\u91c7\u7528\u4e86\u4e00\u70b9\u6280\u5de7\uff0c\u6240\u6709\u4e0a\u8ff0\u6a21\u677f\u7c7b\u90fd\u5728\u4e00\u4e2a\u72ec\u7acb\u7684\u6a21\u5757\u4e2d\u5b9e\u73b0\uff0c\u540c\u65f6\u6539\u5199\u4e86\u8fd9\u4e9b \u7c7b\u4e2d\u7684\u5185\u5b58\u5206\u914d\u53ca\u91ca\u653e\u4ee3\u7801\u3002\u5c06\u5b83\u4eec\u91cd\u4f4d\u5411\u5230\u8be5\u6a21\u5757\u4e2d\u7684\u4e24\u4e2a\u5185\u5b58\u5206\u914d\u91ca\u653e\u65b9\u6cd5\u3002\u7ecf\u8fc7\u8fd9 \u6837\u5904\u7406\u540e\uff0c\u4e0d\u7ba1\u8fd9\u4e9b\u6a21\u677f\u7c7b\u5728\u54ea\u4e00\u4e2a\u6a21\u5757\u4e2d\u5b9e\u4f8b\u5316\uff0c\u5b83\u4eec\u8981\u5728\u5806\u4e0a\u7533\u8bf7\u53ca\u7ffb\u8bd1\u5185\u5b58\u65f6\u90fd\u662f \u5728\u8fd9\u4e2a\u72ec\u7acb\u6a21\u5757\u4e2d\u3002\u901a\u8fc7\u8fd9\u4e2a\u7b80\u5355\u7684\u6280\u672f\u6709\u6548\u7684\u89e3\u51b3\u4e86\u8fd9\u4e9b\u6a21\u677f\u5bf9\u8c61\u4e0d\u80fd\u5728\u4e0d\u540c\u6a21\u5757\u4e4b\u95f4 \u4f20\u9012\u53c2\u6570\u7684\u95ee\u9898\u3002 \u5148\u8fdb\u7684\u4e8b\u4ef6\u5904\u7406\u6a21\u578b SOUI \u540c\u65f6\u652f\u6301\u7c7b\u4f3c WTL \u6d88\u606f\u6620\u5c04\u8868\u65b9\u5f0f\u7684\u4e8b\u4ef6\u6620\u5c04\u8868\u6765\u54cd\u5e94\u4e8b\u4ef6\uff0c\u4e5f\u652f\u6301\u65b0\u5f0f\u4e8b\u4ef6\u8ba2\u9605 \u7684\u65b9\u5f0f\u54cd\u5e94\u4e8b\u4ef6\u3002\u4e8b\u4ef6\u6620\u5c04\u8868\u5904\u7406\u4e8b\u4ef6\u7684\u4f18\u70b9\u5728\u4e8e\u80fd\u591f\u89c4\u8303\u5316\u7684\u628a\u6240\u6709\u4e8b\u4ef6\u5904\u7406\u65b9\u6cd5\u5728\u4ee3 \u7801\u6c34\u5e73\u96c6\u4e2d\u5230\u4e00\u8d77\uff0c\u65b9\u4fbf\u4ee3\u7801\u7684\u9605\u8bfb\uff1b\u800c\u4e8b\u4ef6\u8ba2\u9605\u5219\u63d0\u4f9b\u4e86\u4e8b\u4ef6\u7684\u52a8\u6001\u5904\u7406\u80fd\u529b\uff0c\u80fd\u591f\u5728 \u4efb\u610f\u65f6\u523b\u7075\u6d3b\u7684\u54cd\u5e94\u4e0d\u540c\u63a7\u4ef6\u53d1\u51fa\u7684\u4e8b\u4ef6\u3002 \u7ed3\u675f\u8bed \u9664\u4e0a\u8ff0\u4eae\u70b9\uff0c\u6211\u76f8\u4fe1\u8fd8\u6709\u5f88\u591a\u7ec6\u8282\u7684\u5904\u7406\u90fd\u4f53\u73b0\u4e86 SOUI \u7684\u5de5\u5320\u7cbe\u795e\uff0c\u76f8\u4fe1\u7528\u5fc3\u7684\u670b\u53cb\u4e00 \u5b9a\u53ef\u4ee5\u5728\u9605\u8bfb\u53ca\u4f7f\u7528\u4ee3\u7801\u7684\u8fc7\u7a0b\u4e2d\u66f4\u6df1\u7684\u4f53\u4f1a\u5230\u3002SOUI \u662f\u542f\u7a0b\u8f6f\u4ef6\u5386\u65f6 5 \u5e74\u5fc3\u8840\u7684\u7ed3 \u6676\uff0c\u91cd\u590d\u4e00\u4e0b\u6211\u4ee5\u524d\u505a\u300a\u542f\u7a0b\u8f93\u5165\u4e4b\u661f\u300b\u65f6\u8bf4\u7684\u90a3\u53e5\u8bdd\uff1a\u56e0\u4e3a\u52aa\u529b\uff0c\u6240\u4ee5\u7f8e\u4e3d\uff01 \u5e0c\u671b\u80fd\u591f\u4e3a\u60a8\u80fd\u591f\u559c\u6b22\u3002","title":"1\u3001\u6982\u8ff0"},{"location":"Overview/10/#1","text":"","title":"1\u3001\u6982\u8ff0"},{"location":"Overview/10/#_1","text":"\u8c08\u8c08 UI \u795e\u5668-SOUI \u5728 Windows \u5e73\u53f0\u4e0a\u5f00\u53d1\u5ba2\u6237\u7aef\u4ea7\u54c1\u662f\u4e00\u4e2a\u975e\u5e38\u75db\u82e6\u7684\u8fc7\u7a0b\uff0c\u7279\u522b\u662f\u8fd8\u8981\u7528 C++\u7684\u65f6\u5019\u3002 \u5c3d\u7ba1\u5f88\u591a\u8bed\u8a00\u5f88\u591a\u65b9\u6cd5\u90fd\u53ef\u4ee5\u5f00\u53d1 Windows \u684c\u9762\u7a0b\u5e8f\uff0c\u76ee\u524d\u56fd\u5185\u6d41\u884c\u7684\u5ba2\u6237\u7aef\u4ea7\u54c1\u90fd\u662f C++\u5f00\u53d1\u7684\uff0c\u6bd4\u5982 QQ\uff0cYY \u8bed\u97f3\uff0c\u8fc5\u96f7\u7b49\u3002 \u5feb\u901f\uff0c\u7a33\u5b9a\u662f\u6211\u8ba4\u4e3a\u7684\u5e94\u7528\u8f6f\u4ef6\u5f00\u53d1\u6846\u67b6\u6700\u57fa\u672c\u7684\u8981\u6c42\uff0c\u5bf9\u4e8e UI \u8fd8\u6709\u4e24\u4e2a\u8981\u6c42\u5c31\u662f\u754c\u9762 \u7f8e\u89c2\uff0c\u914d\u7f6e\u7075\u6d3b\u3002 C++\u8bed\u8a00\u6ee1\u8db3\u4e86\u5feb\u901f\u7684\u8981\u6c42\uff0c\u4f20\u7edf\u7684\u5ba2\u6237\u7aef\u8f6f\u4ef6\u5f00\u53d1\u6846\u67b6\u5982 MFC\uff0cWTL \u7b49\u6ee1\u8db3\u4e86\u7a33\u5b9a\u7684 \u8981\u6c42\u3002\u7136\u800c\u754c\u9762\u7f8e\u89c2\uff0c\u914d\u7f6e\u7075\u6d3b\u662f MFC\uff0cWTL \u8fd9\u6837\u7684\u5f00\u53d1\u6846\u67b6\u6240\u4e0d\u80fd\u6ee1\u8db3\u7684\u3002 \u817e\u8baf\u662f\u505a\u5ba2\u6237\u7aef\u53d1\u5bb6\u7684\uff0c\u4ed6\u4eec\u7684 UI \u7ecf\u9a8c\u79ef\u7d2f\u975e\u5e38\u597d\uff0c\u6709\u81ea\u5df1\u4e13\u95e8\u7684 UI \u6846\u67b6\uff1b\u8fc5\u96f7\u6709\u4e00\u4e2a \u4e13\u4e1a\u7684\u56e2\u961f\u5f00\u53d1\u81ea\u5df1\u7684 UI \u6846\u67b6\uff1b\u7136\u800c\u5927\u591a\u6570\u516c\u53f8\u53ea\u5e0c\u671b\u6709\u4e00\u4e2a\u80fd\u591f\u5feb\u901f\u5b8c\u6210\u9879\u76ee\u5f00\u53d1\u7684 UI \u5e93\u6765\u4f7f\u7528\uff0c\u5b83\u4eec\u6ca1\u6709\u4e13\u4e1a\u7684\u56e2\u961f\u6765\u7ef4\u62a4 UI \u5e93\u3002\u56fd\u4f01\u6709\u94b1\u4efb\u6027\uff0c\u6240\u4ee5\u6210\u5c31\u4e86 UIPower\uff1a \u4e00\u4e2a\u5546\u4e1a\u5316\u7684 DirectUI \u5e93\uff08\u5177\u4f53\u600e\u4e48\u6837\u4e0d\u597d\u8bf4\uff0c\u4f18\u70b9\u5728\u4e8e\u6709\u4eba\u7ed9\u4f60\u670d\u52a1\uff09\uff0c\u4e00\u822c\u7684\u5c0f\u516c \u53f8\u6ca1\u6709\u8c01\u613f\u610f\u5f53\u8fd9\u4e2a\u51a4\u5927\u5934\u3002\u8fd9\u5c31\u662f Duilib \u8fd9\u6837\u4e00\u4e2a\u7b80\u5355\u5230\u7b80\u964b\u7684 UI \u5e93\uff08\u8bf7\u539f\u8c05\u6211\u8fd9\u6837 \u8bf4\uff09\u4e3a\u4ec0\u4e48\u8fd9\u6837\u6d41\u884c\u7684\u539f\u56e0\uff08\u767e\u5ea6\u4e00\u4e0b Duilib \u5c31\u77e5\u9053\u5b83\u6709\u591a\u5c11\u4eba\u5728\u7528\uff09\u3002 Duilib \u57fa\u672c\u6ee1\u8db3\u4e86\u754c\u9762\u7f8e\u89c2 \uff0c\u914d\u7f6e\u7075\u6d3b\u7684\u9700\u6c42\uff0c\u7136\u800c\u7531\u4e8e\u6846\u67b6\u672c\u8eab\u7684\u9650\u5236\uff0c\u8981\u5b9e\u73b0\u590d\u6742\u7684 \u6548\u679c\u5c06\u4e0d\u53ef\u907f\u514d\u7684\u9047\u5230\u5404\u79cd\u5751\u3002\u597d\u5728 Duilib \u4ee3\u7801\u91cf\u5f88\u5c11\uff0c\u968f\u4fbf\u4e00\u4e2a\u6709\u7ecf\u9a8c\u7684 UI \u5f00\u53d1\u5de5\u7a0b \u5e08\u90fd\u80fd\u591f\u76f8\u5bf9\u5bb9\u6613\u7684\u4f7f\u7528\u5e76\u4fee\u6539\u5b83\uff0c\u6240\u4ee5\u5728\u4e00\u822c\u7684\u5e94\u7528\u4e2d\u4f7f\u7528\u5e76\u4e0d\u4f1a\u6709\u592a\u5927\u7684\u95ee\u9898\uff0c\u8fd9\u4e5f \u5e94\u8be5\u662f\u4e3a\u4ec0\u4e48\u4f1a\u6709\u90a3\u4e48\u591a\u7684 Duilib \u53d8\u79cd\u7684\u539f\u56e0\uff1a\u6bcf\u4e00\u4e2a\u4f7f\u7528\u5b83\u7684\u516c\u53f8\u6216\u8005\u4e2a\u4eba\u90fd\u4f1a\u6709\u4e00\u4efd \u72ec\u4e00\u65e0\u4e8c\u7684\u526f\u672c\u3002 \u5176\u5b9e\u4e0a\u9762\u6211\u8fd8\u6f0f\u4e86\u8bf4 QT\uff0c QT \u5728\u56fd\u5916\u6709\u4e13\u4e1a\u7684\u56e2\u961f\u7ef4\u62a4\uff0c\u6587\u6863\u4e5f\u5f88\u597d\uff0c\u4f46\u81f3\u5c11\u6709\u4e24\u4e2a\u7f3a \u70b9\uff1a1\u3001\u5b83\u662f\u8de8\u5e73\u53f0\u7684\uff0c\u8de8\u5e73\u53f0\u5373\u662f\u4f18\u70b9\uff0c\u4e5f\u662f\u7f3a\u70b9\uff0c\u4e3a\u4e86\u5b9e\u73b0\u8de8\u5e73\u53f0\uff0c\u5f88\u591a\u65f6\u5019\u9700\u8981\u505a \u51fa\u53d6\u820d\uff0c\u5c31\u7b97\u62bd\u8c61\u7684 100\uff05\u7684\u5b8c\u7f8e\uff0c\u5b83\u4e5f\u4e0d\u53ef\u907f\u514d\u7684\u5e26\u6765\u4f53\u79ef\u5e9e\u5927\uff1b2\u3001\u4ee3\u7801\u91cf\u592a\u5927\uff0c\u666e \u901a\u4eba\u5f88\u96be\u9a7e\u9a6d\uff1a\u5c31\u7b97\u662f\u770b\u61c2\u90fd\u4e0d\u5bb9\u6613\uff0c\u66f4\u522b\u8bf4\u4fee\u6539\u4e86\uff0c\u8fd9\u6837\u7684\u7ed3\u679c\u5c31\u662f\u4e00\u65e6\u5728\u4f7f\u7528\u4e2d\u9047\u5230 \u95ee\u9898\u4f60\u552f\u4e00\u7684\u9009\u62e9\u5c31\u662f\u63d0\u4ea4 BUG \u7ed9 QT \u5f00\u53d1\u5c0f\u7ec4\u7b49\u5f85\u8865\u4e01\uff08\u8981\u77e5\u9053\u4e0d\u5b58\u5728\u6ca1\u6709 BUG \u7684\u4ea7 \u54c1\uff09\u3002 SOUI \u662f\u4ec0\u4e48\uff1f SOUI \u662f\u4e00\u5957\u548c Duilib \u7c7b\u4f3c\u7684\u5f00\u6e90 C++ UI \u5f00\u53d1\u6846\u67b6\u3002\u5b83\u7684\u7956\u5b97\u662f\u91d1\u5c71\u536b\u58eb\u5f00\u6e90\u7248\u672c\u4e2d \u4f7f\u7528\u7684 UI \u5e93 Bkwin\uff0c\u4e4b\u540e\u7531\u542f\u7a0b\u8f6f\u4ef6\uff08\u4e5f\u5c31\u662f\u6211\u4e86\uff09\u5f00\u53d1\u7ef4\u62a4\u5347\u7ea7\u4e3a Duiengine\uff0c\u6700\u540e \u5386\u7ecf\u591a\u6b21\u91cd\u6784\u6539\u540d\u4e3a SOUI\uff0c\u5bd3\u610f\u201c\u7626 UI\u201d\uff0c\u201cUI, just so so!\u201d\u3002\u4f7f\u7528 MIT \u5f00\u6e90\u534f\u8bae\uff0c\u516c \u53f8\u3001\u4e2a\u4eba\u517c\u53ef\u514d\u8d39\u4f5c\u7528\uff0c\u53ea\u9700\u8981\u53d1\u5e03\u65f6\u5e26\u4e0a SOUI \u7684 license\u3002 SOUI \u4ee3\u7801\u7684\u83b7\u53d6 SVN\uff1a http://code.taobao.org/svn/soui2/trunk \u4e0d\u8981\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00\u8be5\u7f51\u5740\uff0c\u53ea\u80fd \u4f7f\u7528 SVN \u5ba2\u6237\u7aef\u7b7e\u51fa\u3002 GIT\uff1a https://github.com/setoutsoft/soui SOUI \u754c\u9762\u6548\u679c SOUI \u7684\u7279\u70b9 \u4f7f\u7528\u5c42\uff1a\u9ad8\u901f\uff0c\u7a33\u5b9a\uff0c\u7f8e\u89c2\uff0c\u53ef\u914d\u7f6e \u4ee3\u7801\u5c42\uff1a\u7cbe\u5fc3\u8bbe\u8ba1\uff0c\u6a21\u5757\u4f4e\u8026\u5408\uff0c\u63d2\u4ef6\u5316\u8bbe\u8ba1\uff0c\u5bf9\u8c61\u53ef\u9760\u7684\u547d\u4ee4\u5468\u671f\u7ba1\u7406\uff0c\u7c7b\u4f3c WTL \u7684 \u7f16\u7801\u65b9\u5f0f\uff0c\u73b0\u4ee3\u5316\u7684\u4e8b\u4ef6\u5904\u7406\u6a21\u578b\u53ca\u4f18\u5f02\u7684\u6269\u5c55\u80fd\u529b\u3002 \u4ee3\u7801\u91cf\uff1a\u6838\u5fc3\u6a21\u5757\u4ee3\u7801\u91cf 4W+\uff0c\u7f16\u8bd1\u540e DLL Release \u7248\u672c\u5728 900K \u5de6\u53f3\u3002\u5f97\u76ca\u4e8e\u7cbe\u5fc3\u7ec4 \u7ec7\u7684\u4ee3\u7801\u6846\u67b6\uff0c\u867d\u7136\u4ee3\u7801\u91cf\u8f83 Duilib \u8fd9\u6837\u7684 UI \u5e93\u6709\u6bd4\u8f83\u5927\u7684\u63d0\u9ad8\uff08\u6838\u5fc3\u6846\u67b6\u66f4\u5b8c\u5584\uff0c\u63a7 \u4ef6\u66f4\u591a\uff0c\u6ce8\u91ca\u91cf\u66f4\u5927\uff09\uff0c\u4f46\u662f\u9605\u8bfb\u4ee3\u7801\u8fd8\u662f\u5f88\u8f7b\u677e\u7684\uff08\u5927\u91cf\u5b9e\u9645\u7528\u6237\u7684\u4eb2\u8eab\u4f53\u9a8c\uff09\u3002 \u9ad8\u901f\u4e3b\u8981\u4f53\u73b0\u5728 3 \u4e2a\u65b9\u9762\uff1a 1\u3001\u6846\u67b6\u8bbe\u8ba1\u6241\u5e73\u5316\uff0c\u5c42\u6b21\u7b80\u5355\uff08\u548c QT \u76f8\u6bd4\uff09\uff1a\u4ece\u5bbf\u4e3b\u7a97\u53e3\u6536\u5230\u6d88\u606f\u5230\u63a7\u4ef6\u54cd\u5e94\u6d88\u606f\u53ea\u6709 \u4e00\u4e2a\u4e2d\u95f4\u5c42\u3002 2\u3001\u7b80\u5355\u6709\u6548\u7684\u5237\u65b0\u7b56\u7565\uff1a\u901a\u8fc7\u5bf9\u526a\u88c1\u533a\u53ca\u5237\u65b0\u65f6\u673a\u7684\u6709\u8f83\u63a7\u5236\uff0c \u80fd\u6709\u6548\u7684\u63d0\u9ad8\u5237\u65b0\u6548 \u7387\u3002 3\u3001\u9ad8\u6548\u7684\u6e32\u67d3\u5f15\u64ce\uff1a\u901a\u8fc7 \u5c06\u6e32\u67d3\u5f15\u64ce\u63a5\u53e3\u5316\uff0c\u6210\u529f\u7684\u5c06 skia \u6e32\u67d3\u5f15\u64ce\u5f15\u5165\u5230 SOUI \u4e2d\uff0cSkia \u662f Google \u7684 Chrome \u7684\u6e32\u67d3\u5f15\u64ce\uff0cChrome \u6bd4 IE \u6e32\u67d3\u901f\u5ea6\u5feb\uff0cSkia \u529f\u4e0d\u53ef \u6ca1\u3002 \u7a33\u5b9a\u6027\u65b9\u9762\uff0cSOUI \u8131\u80ce\u4e8e Bkwin\uff0c\u518d\u7ecf\u8fc7\u672c\u4eba\u7684\u4e0d\u65ad\u7cbe\u5fc3\u91cd\u6784\uff0c\u5df2\u7ecf\u5728\u591a\u4e2a\u5927\u91cf\u7528\u6237\u7684 \u4ea7\u54c1\u4e2d\u5e94\u7528\uff0c\u5305\u62ec\u6700\u8fd1\u5f00\u53d1\u7684\u745e\u96ea\u533b\u751f\u5ba2\u6237\u7aef\uff0c\u591a\u73a9\u9b54\u76d2 2.0, Dota2 \u6e38\u620f\u76d2\u5b50\u53ca\u591a\u73a9\u591a \u4e2a\u6e38\u620f\u76d2\u5b50\u4e2d\u4f7f\u7528\uff0c \u53ca\u767e\u5ea6\u4e91\u7ba1\u5bb6\u7684\u5927\u90e8\u5206\u754c\u9762\u3002 \u767e\u5ea6\u4e91\u7ba1\u5bb6\u636e\u8bf4\u6700\u521d\u4f7f\u7528\u7684\u662f\u817e\u8baf QQ \u754c\u9762\u5e93\u7684\u65e9\u671f\u7248\u672c\uff08\u65e0\u4ece\u8003\u8bc1\uff09\uff0c\u7136\u800c QQ \u754c\u9762\u5e93 \u5927\u91cf\u4f7f\u7528 COM \u6280\u672f\uff0c\u6269\u5c55\u975e\u5e38\u9ebb\u70e6\uff0c\u4f7f\u7528\u5f88\u662f\u4e0d\u4fbf\uff0c\u5728\u540e\u7eed\u7684 UI \u9700\u6c42\u4e2d\u5f00\u59cb\u5927\u91cf\u4f7f\u7528 SOUI \u7684\u524d\u8eab DuiEngine\u3002 \u7f8e\u89c2\u65b9\u9762\uff0cSOUI \u539f\u751f\u652f\u6301 Alpha \u901a\u9053\uff0c\u80fd\u591f\u5b9e\u73b0\u5404\u79cd\u534a\u900f\u660e\u6548\u679c\uff0c\u5305\u62ec\u4e3b\u7a97\u4f53\u534a\u900f\u660e\uff0c DUI \u7a97\u53e3\u534a\u900f\u660e\uff0cDUI \u7a97\u53e3\u6a21\u4eff LayeredWindow\uff08\u5206\u5c42\u7a97\u53e3\uff09\u6548\u679c\u7b49\uff0c\u8f7b\u677e\u5b9e\u73b0\u5404\u79cd\u5f02 \u5f62\u6548\u679c\u3002 \u53ef\u914d\u7f6e\u65b9\u9762\uff0cSOUI \u4e2d\u6240\u6709 UI \u8d44\u6e90\u90fd\u91c7\u7528 XML \u63cf\u8ff0\uff0c\u8c03\u6574 UI \u6548\u679c\u4e00\u822c\u53ea\u9700\u8981\u4fee\u6539 XML \u8d44\u6e90\u5373\u53ef\u5b8c\u6210\u3002 \u8bf4\u5230\u4ee3\u7801\u5c42\u7684\u8bbe\u8ba1\u5f88\u96be\u7528\u8bed\u8a00\u63cf\u8ff0\uff0c\u53ea\u6709\u4eb2\u81ea\u9605\u8bfb\u4ee3\u7801\u65b9\u80fd\u7406\u89e3\u3002\u4e3a\u5927\u90e8\u5206\u9700\u8981\u5728\u5916\u90e8 \uff08APP \u5c42\uff09\u7ecf\u5e38\u5f15\u7528\u7684 UI \u76f8\u5173\u5bf9\u8c61\u63d0\u4f9b\u5f15\u7528\u8ba1\u6570\u8bbe\u8ba1\u80fd\u591f\u6709\u6548\u51cf\u5c11 C++\u5f00\u53d1\u4e2d\u5e38\u89c1\u7684\u91ce \u6307\u9488\u95ee\u9898\uff0c\u8fd9\u4e00\u70b9\u8fd8\u662f\u5f88\u597d\u4f53\u4f1a\uff0c\u540c\u65f6\u7cfb\u7edf\u4e2d\u4e5f\u91cd\u70b9\u89e3\u51b3\u4e86\u5982\u6d88\u606f\u5206\u53d1\u7684\u5206\u5c42\u8bbe\u8ba1\uff0c\u7a97\u53e3 \u5bf9\u8c61\u7684\u6d88\u606f\u91cd\u5165\u7b49\u5f71\u54cd UI \u4f7f\u7528\u4f53\u9a8c\u7684\u5173\u952e\u6027\u95ee\u9898\u3002 \uf0b7 SOUI \u4eae\u70b9 \u5bbd\u6cdb\u7684\u8bf4 SOUI \u591a\u597d\u5927\u5bb6\u5e76\u6ca1\u76f4\u89c2\u7684\u611f\u89c9\uff0c\u4e0b\u9762\u4ece\u4e00\u4e9b\u5177\u4f53\u7684\u70b9\u6765\u4ecb\u7ecd SOUI\u3002 \u754c\u9762\u5e03\u5c40 \u4e5f\u8bb8\u521d\u5b66\u8005\u5bf9\u4e8e SOUI \u7684\u5e03\u5c40\u8fd8\u4e0d\u592a\u9002\u5e94\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u90a3\u4e9b\u4e60\u60ef\u4e86 Duilib \u7684\u5e03\u5c40\u65b9\u5f0f\u7684\u670b \u53cb\u3002\u4e8b\u5b9e\u4e0a SOUI \u7684\u5e03\u5c40\u5e94\u8be5\u662f\u6700\u63a5\u8fd1\u7a0b\u5e8f\u601d\u7ef4\u7684\u5e03\u5c40\u65b9\u5f0f\u3002\u524d\u6bb5\u65f6\u95f4\u5f00\u53d1 Android\uff0c\u4ec5 \u4ec5\u662f\u5b83\u7684 5 \u5927 Layout \u5c31\u80fd\u8ba9\u4eba\u5d29\u6e83\uff0c\u800c\u4e14\u4e0d\u540c\u7684 layout \u5bf9\u5e94\u7684\u5e03\u5c40\u5c5e\u6027\u8fd8\u4e0d\u4e00\u6837\u3002 SOUI \u7684\u5e03\u5c40\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u6709\u4e24\u4e2a\u5e03\u5c40\u5c5e\u6027\uff1apos + offset\uff0c\u5177\u4f53\u53c2\u8003\u535a\u5ba2\uff1a http://www.cnblogs.com/setoutsoft/p/3925952.html \u901a\u5e38\u4f7f\u7528\u4e00\u4e2a pos \u5c5e\u6027\u5c31\u89e3\u51b3\u5e03\u5c40\u95ee\u9898\u4e86\uff0cpos \u5728 XML \u4e2d\u4f7f\u7528\"x1,y1,x2,y2\"\u8fd9\u6837\u7684 4 \u4e2a\u5750\u6807\u5b9a\u4e49\u4e00\u4e2a\u63a7\u4ef6\u5728\u7236\u7a97\u53e3\u4e2d\u7684\u76f8\u5bf9\u4f4d\u7f6e\uff0c\u800c offset \u5219\u5b9a\u4e49\u901a\u8fc7 pos \u8ba1\u7b97\u51fa\u6765\u7684\u4f4d\u7f6e \u540e\u5728 X\uff0cY \u4e24\u4e2a\u65b9\u5411\u9700\u8981\u53e0\u52a0\u7684\u504f\u79fb\uff0c\u504f\u79fb\u503c\u9700\u8981\u4e58\u4e0a\u7a97\u53e3\u5927\u5c0f\u3002 \u4f8b\u5982\u4e0b\u9762\u8fd9\u4e2a\u9700\u6c42\uff1a \u53ea\u77e5\u9053\u7a97\u53e3\u9700\u8981\u9760\u53f3\u4e0b\u89d2\uff0c\u4e0d\u77e5\u9053\u7a97\u53e3\u5927\u5c0f\u7684\u60c5\u51b5\uff0c\u5728 SOUI \u4e2d\u53ea\u9700\u8981\u4f7f\u7528\u5c5e\u6027 pos=\u201c- 20,-30\u201d offset=\"-1,-1\"\u5373\u53ef\u3002 \u6e32\u67d3\u6d41\u7a0b \u4e00\u4e2a UI \u4e2d\u7684\u754c\u9762\u5143\u7d20\u6700\u540e\u4f1a\u901a\u8fc7\u5404\u7ea7\u5b50\u7a97\u53e3\u5f62\u6210\u4e00\u4e2a\u6811\u72b6\u7ed3\u6784\u3002\u4e00\u822c\u7684\u6e32\u67d3\u6d41\u7a0b\u81ea\u7136\u662f \u4ece\u6839\u8282\u70b9\u4e00\u5c42\u4e00\u5c42\u7684\u76f4\u5230\u6e32\u67d3\u5b8c\u6210\u6240\u6709\u53f6\u7ed3\u70b9\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5f88\u7b80\u5355\uff0c\u53ef\u80fd\u5f88\u591a UI \u5e93\u4e5f\u5c31\u505a \u5230\u8fd9\u4e2a\u5c42\u6b21\uff08\u4f8b\u5982 DuiLib\uff09\u3002\u4f46\u662f\u5bf9\u4e8e\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684 UI \u5e93\u4ec5\u505a\u5230\u8fd9\u4e2a\u5c42\u6b21\u662f\u4e0d\u591f\u7684\uff0c\u4e3e \u4f8b\u6765\u8bf4\uff1a\u4e00\u4e2a\u753b\u7b14\u7a0b\u5e8f\u9700\u8981\u5728 OnMouseMove \u91cc\u9762\u7ed8\u5236\u65b0\u62fe\u53d6\u7684\u7ebf\u6761\uff0c\u672c\u80fd\u7684\u505a\u6cd5\u662f\u83b7 \u53d6\u7a97\u53e3\u753b\u5e03\uff0c\u7ed8\u5236\u5b8c\u6210\u540e\u518d\u63d0\u4ea4\u753b\u5e03\uff08\u7c7b\u4f3c Windows API: GetDC and ReleaseDC\uff09\uff0c\u800c\u4e0d\u662f\u6bcf\u4e00\u6b21\u7ed8\u5236\u53ea\u80fd\u8bf7\u6c42\u5bbf\u4e3b\u5237\u65b0\uff08\u8bf7\u6c42\u5bbf\u4e3b\u7acb\u5373\u5237\u65b0\u4f9d\u8d56\u4e8e\u7cfb\u7edf\u5bf9 UpdateWindow \u8fd9\u4e2a API \u7684\u54cd\u5e94\u901f\u5ea6\uff09\u3002 \u56e0\u6b64\u4e00\u4e2a\u6210\u719f\u7684 UI \u5f15\u64ce\u6709\u5fc5\u8981\u5b9e\u73b0 GetDC \u53ca ReleaseDC \u8fd9\u6837\u7684\u63a5\u53e3\u3002\u548c\u57fa\u4e8e HWND \u7684\u7a97\u53e3\u83b7\u53d6 HDC \u4e0d\u540c\uff0c\u5728\u4e00\u5957 DirectUI \u7cfb\u7edf\u4e2d\u5b9e\u73b0 GetDC \u53ca ReleaseDC \u8981\u66f4\u52a0\u590d \u6742\uff1a\u6700\u5173\u952e\u7684\u95ee\u9898\u5728\u4e8e\u83b7\u53d6\u524d\u7ed8\u5236\u7a97\u53e3\u7684\u80cc\u666f\uff0c\u4ee5\u53ca\u63d0\u4ea4\u540e\u7ed8\u5236\u7a97\u53e3\u7684\u524d\u666f\uff0c\u8981\u5b9e\u73b0\u7a97\u53e3 \u80cc\u666f\u524d\u666f\u7684\u5206\u5f00\u7ed8\u5236\u53c8\u9700\u8981\u7cfb\u7edf\u63d0\u4f9b\u7ed8\u5236\u5728\u6307\u5b9a Z-Order \u8303\u56f4\u5185\u7684\u7a97\u53e3\u7684\u80fd\u529b\uff0c\u5f53\u7136\u524d\u63d0 \u662f\u7cfb\u7edf\u4e2d\u6709 Z-Order \u8fd9\u6837\u7684\u6982\u5ff5\u3002 \u5c31\u7b97\u5b9e\u73b0\u4e86\u7a97\u53e3\u7684\u80cc\u666f\u4e0e\u524d\u666f\u7684\u5206\u522b\u7ed8\u5236\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684 UI \u5f15\u64ce\u53ef\u80fd\u8fd8\u662f\u4e0d\u591f\u7684\u3002 \u56e0\u4e3a\u6709\u4e9b\u65f6\u5019\u4e00\u4e2a\u7a97\u53e3\u4e2d\u7684\u5185\u5bb9\u662f\u4e0d\u9700\u8981\u548c\u80cc\u666f\u6df7\u5408\u7684\uff0c\u7a97\u53e3\u5237\u65b0\u7684\u65f6\u5019\u7ed8\u5236\u80cc\u666f\u662f\u6ca1\u6709 \u610f\u4e49\u7684\uff08\u5982\u89c6\u9891\u64ad\u653e\u7a97\u53e3\uff09\uff0c\u5c31\u662f\u9700\u8981\u53e6\u4e00\u79cd\u6280\u672f\uff1a\u7a97\u53e3\u7684\u8de8\u5c42\u6e32\u67d3\uff08\u4e0d\u77e5\u9053\u8fd9\u6837\u547d\u540d\u662f \u4e0d\u662f\u5408\u9002\uff09\u3002\u5f53\u4e00\u4e2a\u89c6\u9891\u7a97\u53e3\u9700\u8981\u5237\u65b0\u7684\u65f6\u5019\uff0c\u5b83\u7684\u5237\u65b0\u6d41\u7a0b\u548c\u57fa\u672c\u7684\u5237\u65b0\u6d41\u7a0b\u662f\u4e0d\u4e00\u6837 \u7684\uff0c\u6e32\u67d3\u65f6\u5b83\u4f1a\u8df3\u8fc7\u5b83\u7684\u6240\u6709\u7236\u7a97\u53e3\u76f4\u63a5\u5230\u8fd9\u4e2a\u7a97\u53e3\u5c42\u6765\uff0c\u4ece\u800c\u5927\u5927\u52a0\u901f\u6e32\u67d3\u8fc7\u7a0b\u3002 \u5206\u5c42\u7a97\u53e3 Windows \u7684\u5206\u5c42\u7a97\u53e3\u662f Windows 2000 \u63d0\u4f9b\u7684\u4e00\u9879\u91cd\u8981\u66f4\u65b0\u3002\u82f9\u679c\u7cfb\u7edf\u7684 UI \u5f88\u6f02\u4eae\uff0c \u6709\u4e86\u5206\u5c42\u7a97\u53e3\uff0cWindows \u7cfb\u7edf\u4e0a\u5f00\u53d1\u7684\u5e94\u7528\u4e5f\u53ef\u4ee5\u540c\u6837\u6f02\u4eae\u3002 \u8fd9\u91cc\u8bf4\u7684\u5206\u5c42\u7a97\u53e3\u6709\u4e24\u4e2a\u5c42\u6b21\uff1a\u4e00\u4e2a\u662f DirectUI \u7684\u5bbf\u4e3b\u7a97\u53e3\u4e2d\u4f7f\u7528\u5206\u5c42\u7a97\u53e3\u6280\u672f\uff1b\u53e6\u4e00 \u5c42\u662f\u5728 DirectUI \u7684 DUI \u7a97\u53e3\u7cfb\u7edf\u5185\u90e8\u5b9e\u73b0\u5206\u5c42\u7a97\u53e3\u6280\u672f\u3002 \u4f7f\u7528\u5206\u5c42\u7a97\u53e3\u6280\u672f\u542c\u8d77\u6765\u6bd4\u8f83\u7b80\u5355\uff0c\u4e0d\u5c31\u662f\u8bbe\u8ba1\u4e00\u4e2a WS_EX_LAYEREDWINDOW \u5c5e\u6027 \u518d\u4f7f\u7528 UpdateLayeredWindow(EX)\u66f4\u65b0\u7a97\u53e3\u5417\uff1f\uff01\u5982\u679c SOUI \u53ea\u8fbe\u5230\u8fd9\u4e2a\u5c42\u6b21\uff0c\u90a3\u548c codeproject \u4e0a\u968f\u4fbf\u627e\u4e00\u4e2a demo \u4e5f\u6ca1\u6709\u4ec0\u4e48\u533a\u522b\u3002 \u9996\u5148\u8981\u641e\u6e05\u695a\uff0cSOUI \u662f\u4e00\u5957 DirectUI \u7cfb\u7edf\uff0c\u800c\u4e0d\u662f Demo\uff0c\u56e0\u6b64\u5b83\u4e0d\u80fd\u505c\u7559\u5728\u52a0\u8f7d\u4e00 \u4e2a 32 \u4f4d PNG \u56fe\u7247\u5e76\u663e\u793a\u51fa\u6765\u8fd9\u6837\u7684\u5c42\u6b21\u4e0a\u3002\u5b83\u5fc5\u987b\u8981\u80fd\u591f\u8ba9\u7528\u6237\u80fd\u591f\u8c03\u7528\u5404\u79cd\u7ed8\u5236\u56fe \u5f62\uff0c\u56fe\u50cf\uff0c\u6587\u5b57\u7684 API \u6765\u7ec4\u5408\u51fa\u4e00\u4e2a\u6700\u7ec8\u9700\u8981\u5448\u73b0\u7684 32 \u4f4d\u4f4d\u56fe\u3002\u8fd9\u4e00\u70b9\u8981\u6c42\u770b\u8d77\u6765\u7b80 \u5355\uff0c\u5728 Windows \u7cfb\u7edf\u4e0a\u5b9e\u73b0\u8d77\u6765\u5e76\u4e0d\u7b80\u5355\uff0c\u56e0\u4e3a Windows \u4e0a\u6700\u57fa\u672c\u7684\u7ed8\u5236 API \uff08GDI\uff09\u90fd\u662f\u4e0d\u652f\u6301 alpha \u901a\u9053\u7684\u3002\u6709\u4e00\u4e2a\u7b80\u5355\u7684\u9009\u62e9\uff1aGDIPlus\u3002\u7136\u800c GDIPlus \u6709\u4e00 \u4e2a\u6bdb\u75c5\u5c31\u662f\u901f\u5ea6\u592a\u6162\uff0c\u8fd9\u5bf9\u4e8e\u4e00\u4e2a\u901a\u7528\u7684 UI \u5f15\u64ce\u6765\u8bf4\uff0c\u5168\u90e8\u4f9d\u8d56 GDIPlus \u57fa\u672c\u4e0a\u5c31\u5ba3\u5224 \u4e86\u8fd9\u4e2a\u5f15\u64ce\u7684\u6b7b\u5211\u3002\u5728 SOUI \u4e2d\u91c7\u7528\u6e32\u67d3\u5f15\u64ce\u62bd\u8c61\u7684\u65b9\u6cd5\u5b9e\u73b0\u4e86\u4e24\u79cd\u6e32\u67d3\u5f15\u64ce\uff1aSkia + GDI\u3002\u524d\u9762\u4e0d\u662f\u8bf4 GDI \u4e0d\u652f\u6301 Alpha \u901a\u8fc7\u4e0d\u80fd\u7528\u5417\uff1f\u6ca1\u9519\uff0c\u76f4\u63a5\u7528 GDI \u51fd\u6570\u662f\u4e0d\u884c\u7684\uff0c \u6211\u4eec\u9700\u8981\u9002\u5f53\u7684\u6539\u9020\uff08\u5177\u4f53\u65b9\u6cd5\u53c2\u89c1\u4ee3\u7801\uff09\u3002 \u89e3\u51b3\u4e86\u7ed8\u5236\u65b9\u6cd5\uff0c\u8981\u66f4\u65b0\u5230\u7a97\u53e3\u4e2d\u663e\u793a\u4e5f\u8fd8\u662f\u6709\u6280\u5de7\u7684\u3002\u6709\u4eba\u53ef\u80fd\u77e5\u9053\uff0c\u4f7f\u7528 UpdateLayeredWindow \u8fd9\u4e2a API \u66f4\u65b0\u7684\u7a97\u53e3\u5c06\u6536\u4e0d\u5230 WM_PAINT \u6d88\u606f\u3002\u7531\u4e8e\u5728\u534a\u900f \u660e\u7a97\u53e3\u4e2d\u4e0d\u80fd\u76f4\u63a5\u652f\u6301\u6709\u7a97\u53e3\u53e5\u67c4\u7684\u5b50\u7a97\u53e3\u7684\u663e\u793a\uff08\u5982 IE \u63a7\u4ef6\uff09\uff0cSOUI \u8fd8\u5fc5\u987b\u4e3a\u90a3\u4e9b\u9700 \u8981\u5bb9\u7eb3\u7a97\u53e3\u53e5\u67c4\u5b50\u7a97\u53e3\u7684\u60c5\u51b5\u63d0\u4f9b\u652f\u6301\uff0c\u5373\u901a\u8fc7\u914d\u7f6e\u540c\u65f6\u652f\u6301\u534a\u900f\u660e\u7a97\u53e3\u4e0e\u4e0d\u900f\u660e\u7a97\u53e3\u3002 \u4f46\u662f\u6211\u4e0d\u613f\u610f\u4e3a\u4e24\u79cd\u4e0d\u540c\u7684\u6700\u7ec8\u4f4d\u56fe\u5448\u73b0\u6a21\u578b\u63d0\u4f9b\u4e24\u5957\u4e0d\u540c\u7684\u673a\u5236\u3002\u89e3\u51b3\u7684\u529e\u6cd5\u5f88\u7b80\u5355\uff0c \u901a\u8fc7\u4e3a\u534a\u900f\u660e\u7c7b\u578b\u7684\u7a97\u53e3\u8bbe\u8ba1\u4e00\u4e2a\u8f85\u52a9\u7a97\u53e3\uff0c\u4f7f\u7528\u5b83\u6765\u63a5\u6536 WM_PAINT \u6d88\u606f\uff0c\u6536\u5230\u8be5\u6d88 \u606f\u65f6\u8c03\u7528 UpdateLayeredWindow \u66f4\u65b0\u7a97\u53e3\u3002\u6ce8\uff1a \u8fd9\u4e2a\u6280\u672f\u662f\u5b66\u4e60\u53e6\u4e00\u5957 UI \u5e93 MetalBone \u5b9e\u73b0\u7684\u3002 \u8bb2\u5b8c\u4e86\u4f7f\u7528\u5bbf\u4e3b\u7a97\u53e3\u5206\u5c42\u7a97\u53e3\uff0c\u4e0b\u9762\u8bb2\u8bb2 DUI \u7a97\u53e3\u7684\u5206\u5c42\u7a97\u53e3\u6280\u672f\u7684\u5b9e\u73b0\u3002 \u4f7f\u7528\u5206\u5c42\u7a97\u53e3\u6280\u672f\u80fd\u591f\u4f7f UI \u6548\u679c\u66f4\u6f02\u4eae\uff0c\u5173\u952e\u6280\u672f\u5c31\u5728\u8fd9\u4e2a\u5c42\u3002\u5c42\u662f\u4ec0\u4e48\uff1f\u5c42\u662f\u4e00\u7ec4\u7a97 \u53e3\u7684\u7ed8\u5236\u5bb9\u5668\uff0c\u5b83\u5c06\u8be5\u5c42\u4e0b\u6240\u6709\u5b50\u7a97\u53e3\u7684\u7ed8\u5236\u5185\u5bb9\u7ed8\u5236\u5230\u4e00\u4e2a\u72ec\u7acb\u7684\u7f13\u51b2\u533a\u4e0a\uff0c \u6700\u540e\u518d\u4e00 \u8d77\u7ed8\u5236\u5230\u5206\u5c42\u7a97\u53e3\u7684\u4e0a\u4e00\u5c42\u7ed8\u5236\u7f13\u51b2\u533a\u4e2d\u3002\u5982\u4e0b\u56fe\uff1a A\u3001B\u3001B1\u3001B2\u3001C \u4e3a DUI \u7cfb\u7edf\u4e2d 5 \u4e2a DUI \u7a97\u53e3\u3002\u5176\u4e2d\uff0cB\u3001B1\u3001B2 \u662f\u540c\u4e00\u4e2a\u6e32\u67d3\u5c42\u3002 \u4e5f\u5c31\u662f\u8bf4\u8bbe\u8ba1\u9700\u8981\u5b83\u4eec\u5148\u7ed8\u5236\u597d\u540e\u518d\u548c A\uff0cC \u505a\u878d\u5408\u3002 \u7c7b\u4f3c\u7684\u9700\u6c42\u5bf9\u4e8e\u4e00\u4e2a\u6f02\u4eae\u7684 UI \u6765 \u8bf4\u53ef\u80fd\u4f1a\u5f88\u5e38\u89c1\u3002\u5982\u679c\u5728 UI \u5f15\u64ce\u4e2d\u6ca1\u6709\u5c42\u7684\u6982\u5ff5\u662f\u4e0d\u53ef\u80fd\u5b9e\u73b0\u7684\u3002\u5982\u679c\u4e0d\u9700\u8981\u5b9e\u73b0\u524d\u9762 \u63d0\u5230\u7684\u80cc\u666f\u548c\u524d\u666f\u5206\u522b\u6e32\u67d3\u7684\u60c5\u51b5\uff0c\u5b9e\u73b0\u4f1a\u5c42\u7a97\u53e3\u5176\u5b9e\u4e5f\u4e0d\u96be\uff0c\u53ea\u9700\u8981\u5728\u6e32\u67d3\u5230 B \u7a97\u53e3\u65f6 \u521b\u5efa\u4e00\u4e2a\u7f13\u51b2\u533a\uff0c\u628a\u4ece B \u5f00\u59cb\u7684\u5185\u5bb9\u6e32\u67d3\u5230\u8fd9\u4e2a\u7f13\u51b2\u533a\uff0c\u5b8c\u6210\u540e\u518d\u56de\u5230\u6b63\u5e38\u6e32\u67d3\u6d41\u7a0b\uff0c\u5c31 \u50cf\u6ca1\u6709 B1\u3001B2 \u4e00\u6837\u3002\u4f46\u662f SOUI \u662f\u652f\u6301\u80cc\u666f\u524d\u666f\u5206\u522b\u6e32\u67d3\u7684\uff0c\u5b9e\u73b0\u8fd9\u4e2a\u8fc7\u7a0b\u7684\u4ee3\u7801\u903b\u8f91 \u5c31\u53ef\u80fd\u5f88\u590d\u6742\u4e86\uff08\u53ef\u4ee5\u81ea\u5df1\u60f3\u8c61\u4e00\u4e0b\uff09\u3002 \u975e\u5ba2\u6237\u533a HWND \u7684\u975e\u5ba2\u6237\u533a\u7528\u6765\u7ed8\u5236\u6eda\u52a8\u6761\u53ca\u8fb9\u6846\u53ca\u6807\u9898\u680f\uff0c\u83dc\u5355\u680f\u3002\u5ba2\u6237\u533a\u662f\u7528\u6237\u7ed8\u5236\u7684\u5e38\u89c4\u533a \u57df\uff0c\u5728\u8bbe\u8ba1\u4e0a\u5c06\u7a97\u53e3\u7684\u663e\u793a\u533a\u57df\u5212\u5206\u4e3a\u5ba2\u6237\u533a\u548c\u975e\u5ba2\u6237\u533a\uff0c\u6709\u5229\u4e8e\u7528\u6237\u5728\u91cd\u5199\u5ba2\u6237\u533a\u7684\u7ed8 \u5236\u4ee3\u7801\u65f6\u4e0d\u88ab\u975e\u5ba2\u6237\u533a\u5e72\u6270\uff0c\u4e5f\u6709\u5229\u4e8e\u4ee3\u7801\u7684\u590d\u7528\u3002 \u5728 DuiLib \u4e2d\uff0c\u4e00\u4e2a\u63a7\u4ef6\u5982 Richedit \u9700\u8981\u663e\u793a\u6eda\u52a8\u6761\uff0c\u5b83\u9700\u8981\u7ed9\u8fd9\u4e2a\u63a7\u4ef6\u7ec4\u5408\u4e24\u4e2a\u6eda\u52a8\u6761 \u63a7\u4ef6\u3002\u8fd9\u79cd\u65b9\u5f0f\u867d\u7136\u770b\u4e0a\u53bb\u6ca1\u6709\u4ec0\u4e48\u5927\u7684\u95ee\u9898\uff0c\u5982\u679c\u7531\u4e8e\u7a97\u53e3\u4e2d\u5185\u5bb9\u7684\u53d8\u5316\u9700\u8981\u52a8\u6001\u663e\u793a \u9690\u85cf\u6eda\u52a8\u6761\u65f6\u53ef\u80fd\u4f1a\u5f88\u9ebb\u70e6\uff0c\u81f3\u5c11\u5b83\u4f1a\u5f15\u8d77\u7a97\u53e3\u5e03\u5c40\u7cfb\u7edf\u7684\u91cd\u6392\uff0c\u56e0\u4e3a\u6eda\u52a8\u6761\u663e\u793a\u548c\u9690\u85cf \u65f6\u63a7\u4ef6\u7684\u5ba2\u6237\u533a\u5927\u5c0f\u662f\u53d8\u5316\u7684\u3002 \u800c\u5728 SOUI \u7cfb\u7edf\u4e2d\uff0c\u6eda\u52a8\u6761\u548c HWND \u4e00\u6837\uff0c\u7528\u6237\u6839\u672c\u4e0d\u9700\u8981\u5173\u5fc3\uff0c\u56e0\u4e3a\u5185\u90e8\u5df2\u7ecf\u81ea\u52a8\u5904 \u7406\u597d\u4e86\u6eda\u52a8\u6761\uff0c\u4e5f\u4e0d\u4f1a\u5f15\u8d77\u5e03\u5c40\u7cfb\u7edf\u7684\u91cd\u6392\u3002 \u8d44\u6e90\u52a0\u8f7d \u4e00\u822c\u6765\u8bf4 SOUI \u4e2d\u5f15\u7528\u7684\u6240\u6709\u8d44\u6e90\u90fd\u5728 XML \u4e2d\u63cf\u8ff0\u3002\u521a\u5165\u95e8\u7684\u670b\u53cb\u901a\u5e38\u53cd\u6620 SOUI \u4e2d\u4f7f \u7528\u8d44\u6e90\u7684\u65b9\u5f0f\u4e0d\u5982 DuiLib \u76f4\u63a5\uff0c\u5f88\u96be\u5165\u95e8\u3002\u4f46\u662f\u4e00\u65e6\u771f\u6b63\u7406\u89e3\u4e86 SOUI \u7684\u8fd9\u79cd\u8d44\u6e90\u7ec4\u7ec7 \u65b9\u5f0f\u4e00\u5b9a\u4f1a\u66f4\u559c\u6b22 SOUI\u3002 SOUI \u63d0\u4f9b 3 \u79cd\u8d44\u6e90\u52a0\u8f7d\u65b9\u5f0f\uff1a\u6587\u4ef6\uff0cPE \u8d44\u6e90\uff0cZIP \u5305\u3002 \u9996\u5148 SOUI \u7684\u8d44\u6e90\u5305\u5fc5\u987b\u63d0\u4f9b\u4e00\u4e2a\u6587\u4ef6\u7d22\u5f15\u8868\uff0c\u5bf9\u4e8e\u4f7f\u7528 PE \u8d44\u6e90\u7684\u8d44\u6e90\u5305\uff0c\u7d22\u5f15\u8868\u5c31\u662f \u8d44\u6e90\u7684\u7c7b\u578b\u53ca ID\uff0c\u800c\u5bf9\u4e8e\u76f4\u63a5\u4f7f\u7528\u6587\u4ef6\u6216\u8005 ZIP \u5305\u7684\u8d44\u6e90\uff0c\u7d22\u5f15\u8868\u5219\u662f\u4e00\u4e2a XML \u6587\u4ef6\u3002 \u5728\u7d22\u5f15\u8868\u4e2d\uff0c\u5b9a\u4e49\u6bcf\u4e00\u4e2a\u8d44\u6e90\u7684 type \u53ca name \u4e24\u4e2a KEY\uff0cSOUI \u754c\u9762\u5e03\u5c40\u4e2d\u53ea\u80fd\u4f7f\u7528 type \u548c name \u4e24\u4e2a key \u6765\u5f15\u7528\u8d44\u6e90\u3002 \u7528\u6237\u53ea\u9700\u8981\u51c6\u5907\u4e00\u5957\u6587\u4ef6\u8d44\u6e90\uff0c\u5982\u679c\u9700\u8981\u5c06\u8d44\u6e90\u7f16\u8bd1\u5230 PE \u6587\u4ef6\u4e2d\uff0c\u7cfb\u7edf\u63d0\u4f9b\u4e00\u4e2a\u5de5\u5177\u76f4 \u63a5\u4ece\u6587\u4ef6\u8d44\u6e90\u7684\u7d22\u5f15 XML \u8f6c\u6362\u6210 rc \u7f16\u8bd1\u5668\u53ef\u4ee5\u8bc6\u522b\u7684 rc \u6587\u4ef6\uff1b\u800c\u5982\u679c\u7528\u6237\u9700\u8981\u4f7f\u7528 ZIP \u8d44\u6e90\u5305\uff0c\u5219\u53ea\u9700\u8981\u4f7f\u7528\u4e00\u4e2a ZIP \u5de5\u5177\u5982 rar, 7z \u5c06\u8d44\u6e90\u6587\u4ef6\u5939\u6253\u5305\u5373\u53ef\uff08\u63a8\u8350\u4f7f\u7528 7z \u6253 \u5305\u8d44\u6e90\uff0cSOUI \u5185\u81ea\u5e26\u7684 zlib 1.2.5 \u80fd\u591f\u8bc6\u522b 7z \u6253\u5305\u7684\u5e26\u5bc6\u7801\u7684 zip \u5305\uff0c\u4f46\u4e0d\u80fd\u8bc6\u522b rar \u6253\u5305\u7684\u5e26\u5bc6\u7801\u7684 zip \u5305\u3002 \u7a97\u53e3\u52a8\u753b\u6539\u8fdb \u4e00\u822c\u60c5\u51b5\u4e0b\u6211\u4eec\u63a8\u8350\u4f7f\u7528\u7a97\u53e3\u5b9a\u65f6\u5668\u6765\u521b\u5efa\u52a8\u753b\u3002\u4f7f\u7528\u7a97\u53e3\u5b9a\u65f6\u5668\u521b\u5efa\u52a8\u753b\u7684\u597d\u5904\u662f\u5b9a\u65f6 \u5668\u548c UI \u662f\u540c\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u800c SOUI \u4e0d\u652f\u6301\u591a\u7ebf\u7a0b\u540c\u6b65\u66f4\u65b0 UI\uff08\u4e8b\u5b9e\u4e0a\u4e00\u822c\u7684 DirectUI \u5e93 \u90fd\u4e0d\u63a8\u8350\u5728\u5de5\u4f5c\u7ebf\u7a0b\u4e2d\u64cd\u4f5c UI\uff0c\u5982 Android\uff09\u3002\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u5982\u679c\u4e3a\u6bcf\u4e00\u4e2a DUI \u7a97\u53e3 \u521b\u5efa\u5f88\u591a\u5b9a\u65f6\u5668\uff0c\u90a3\u4e48\u7cfb\u7edf\u7684\u6d88\u606f\u961f\u5217\u4e2d\u5c06\u5145\u6ee1\u5b9a\u65f6\u5668\u6d88\u606f\uff0c\u4e25\u91cd\u65f6\u53ef\u80fd\u5927\u5927\u964d\u4f4e UI \u6027 \u80fd\u3002 \u89e3\u51b3\u65b9\u6848\uff1a\u5728\u4e3b\u7a97\u53e3\u4e2d\u521b\u5efa\u4e00\u4e2a 10ms \u95f4\u9694\u7684\u5b9a\u65f6\u5668\uff0c\u9700\u8981\u5904\u7406\u52a8\u753b\u7684\u7a97\u53e3\u5411\u7cfb\u7edf\u6ce8\u518c\u4f7f \u7528\u8be5\u5b9a\u65f6\u5668\uff0c\u52a8\u753b\u8bb0\u5f55\u4e0b\u4e00\u6b21\u52a8\u753b\u9700\u8981\u7b49\u5f85\u7684\u65f6\u95f4\uff0c\u4f7f\u7528\u8be5\u7edf\u4e00\u7684\u5b9a\u65f6\u5668\u8ba1\u6570\u3002 \u6211\u4eec\u770b\u4e00\u4e0b\u9762 DEMO \u4e2d\u663e\u793a\u5927\u91cf\u52a8\u753b\u8868\u60c5\u65f6 SOUI \u7684\u6548\u7387\uff1a \u8fd9\u4e00 CPU \u5360\u7528\u7387\u751a\u81f3\u6bd4 QQ \u4e2d\u540c\u6837\u60c5\u51b5\u4e0b\u8fd8\u4f4e\u3002 \u5bb9\u5668\u5206\u5c42 \u4ec0\u4e48\u53eb\u5bb9\u5668\u5206\u5c42\uff1f\u5728 DirectUI \u4e2d\u6240\u6709\u7684 DUI \u7a97\u53e3\u90fd\u5fc5\u987b\u751f\u5b58\u5728\u4e00\u4e2a\u5bb9\u5668\u4e2d\u3002DUI \u7a97\u53e3\u7684 \u7ed8\u5236\u8bf7\u6c42\u7b49\u6700\u7ec8\u9700\u8981\u7531\u8fd9\u4e2a\u5bb9\u5668\u6765\u5b9e\u73b0\u3002\u5728\u5bb9\u5668\u4e0d\u5206\u5c42\u7684\u60c5\u51b5\u4e0b\uff0c\u6240\u6709 DUI \u7a97\u53e3\u5728\u5bb9\u5668\u4e2d \u7684\u7269\u7406\u5750\u6807\u90fd\u662f\u4ece(0,0)\u5f00\u59cb\u3002\u8fd9\u6837\u6709\u4ec0\u4e48\u95ee\u9898\u5462\uff1f\u5982\u679c\u8981\u5728\u5217\u8868\u63a7\u4ef6\u7684\u5217\u8868\u9879\u4e2d\u4f7f\u7528 DUI \u63a7\u4ef6\u5c31\u4f1a\u53d8\u5f97\u975e\u5e38\u9ebb\u70e6\uff0c\u56e0\u4e3a\u5728\u7a97\u53e3\u6eda\u52a8\u65f6\u4f60\u53ef\u80fd\u4e0d\u5f97\u4e0d\u540c\u65f6\u66f4\u65b0\u6240\u6709\u8fd9\u4e9b\u63a7\u4ef6\u7684\u5750 \u6807\u3002 \u6709\u4e86\u7a97\u53e3\u5c42\u7684\u6982\u5ff5\u5c31\u4e0d\u4e00\u6837\u4e86\uff0c\u6bcf\u73cd\u4e0a\u5217\u8868\u9879\u662f\u4e00\u4e2a\u65b0\u7684\u5bb9\u5668\uff0c\u65e0\u8bba\u5217\u8868\u9879\u663e\u793a\u5728\u54ea\uff0c\u5217 \u8868\u9879\u4e2d\u7684\u63a7\u4ef6\uff08\u5bb9\u5668\u4e2d\u7684\u63a7\u4ef6\uff09\u7684\u5750\u6807\u90fd\u4e0d\u9700\u8981\u8c03\u6574\u3002\u56e0\u4e3a\u6709\u4e86\u5bb9\u5668\u5206\u5c42\uff0c\u5728 SOUI \u4e2d\u5b9e \u73b0\u5305\u542b\u5b50\u63a7\u4ef6\u7684\u5217\u8868\u53d8\u5f97\u975e\u5e38\u7b80\u5355\uff08\u53c2\u8003\u4e0b\u8282\uff1a\u9ad8\u6027\u80fd\u5217\u8868\u63a7\u4ef6\uff09\u3002 \u9ad8\u6027\u80fd\u5217\u8868\u63a7\u4ef6 Windows \u7cfb\u7edf\u4e2d\u63d0\u4f9b\u7684\u5217\u8868\u63a7\u4ef6\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u80fd\u6ee1\u8db3\u7b80\u5355\u7684\u6570\u636e\u663e\u793a\u9700\u6c42\u3002\u6ce8\u610f\uff0c\u662f\u663e \u793a\u3002\u7136\u800c\u73b0\u5728\u7684 UI \u9700\u6c42\u4e2d\u7ecf\u5e38\u51fa\u73b0\u90a3\u79cd\u5373\u65f6\u4fee\u6539\u5217\u8868\u63a7\u4ef6\u5185\u5bb9\u7684\u60c5\u51b5\uff0c\u4f60\u5c06\u4e0d\u5f97\u4e0d\u82b1\u5927 \u91cf\u7684\u65f6\u95f4\u5bf9\u5217\u8868\u63a7\u4ef6\u8fdb\u884c\u81ea\u7ed8\uff0c\u800c\u6548\u679c\u53ea\u80fd\u8bf4\u52c9\u5f3a\u3002 \u901a\u8fc7\u7814\u7a76 Android \u7cfb\u7edf\u4e2d\u63d0\u4f9b\u7684\u5217\u8868\u63a7\u4ef6\u7684\u4ee3\u7801\uff0c\u501f\u9274 Android \u4e2d ListView \u7684\u601d\u60f3\uff0c SOUI \u5b9e\u73b0\u4e86\u4e00\u5957\u9ad8\u6027\u80fd\u7684\u5217\u8868\u63a7\u4ef6 SListView \u53ca SMcListView\u3002 SListView \u53ca SMcListView \u90fd\u662f\u57fa\u4e8e\u865a\u8868\u6280\u672f\uff0c\u540c\u65f6\u53ea\u521b\u5efa\u5f53\u524d\u6b63\u5728\u663e\u793a\u7684\u53ca\u90e8\u5206\u5907\u7528 \u7684\u5217\u8868\u9879\u5bb9\u5668\uff0c\u5c06\u8d44\u6e90\u5360\u7528\u7f29\u5c0f\u5230\u6700\u5c11\u3002\u540c\u65f6 ListView \u5728\u6eda\u52a8\u65f6\u80fd\u591f\u9ad8\u6548\u5237\u65b0\uff0c\u5b9e\u73b0\u4e86 \u6d77\u91cf\u6570\u636e\u7684\u9ad8\u6027\u80fd\u663e\u793a\u53ca\u66f4\u65b0\u3002 \u5b9e\u73b0\u8fd9\u4e2a\u9ad8\u6027\u80fd\u5217\u8868\u63a7\u4ef6\u7684\u5173\u952e\u6709\u4e24\u70b9\uff1a \u9996\u5148\u662f SOUI \u4e2d\u5b9e\u73b0\u7684\u5bb9\u5668\u5c42\u7684\u6982\u5ff5\uff0c\u4f7f\u5f97\u5217\u8868\u4f4d\u4f4d\u7f6e\u53d8\u5316\u65f6\uff0c\u5bb9\u5668\u5185\u90e8\u7684\u63a7\u4ef6\u4e0d\u9700\u8981\u8c03 \u6574\u5750\u6807\u3002 \u5176\u6b21\u5c31\u662f\u5bb9\u5668\u6570\u636e\u7684\u5145\u5206\u91cd\u7528\u3002 \u6ce8\uff1a\u4e0a\u9762\u5217\u8868\u4e2d\u53ea\u6d4b\u8bd5\u4e86 7W \u884c\u6570\u636e\uff0c\u5b9e\u9645\u4e0a listview \u4e2d\u663e\u793a\u7684\u6570\u636e\u91cf\u591a\u5c11\u5b8c\u5168\u4e0d\u5f71\u54cd UI \u6027\u80fd\uff0c\u4eb2\u6d4b 700W \u884c\u6570\u636e\u548c 7W \u884c\u6548\u679c\u4e00\u6837\u3002 \u65e0\u7a97\u53e3 Richedit Edit \u63a7\u4ef6\u662f UI \u4e2d\u6700\u5e38\u7528\u7684\u63a7\u4ef6\u4e4b\u4e00\u3002\u5728\u5141\u8bb8\u5b58\u5728\u5b50\u7a97\u53e3\u53e5\u67c4\u7684\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edf Edit \u63a7\u4ef6\u5df2 \u7ecf\u80fd\u591f\u5f88\u597d\u7684\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\u3002\u7136\u800c\u5728\u4e0d\u5141\u8bb8\u5b50\u7a97\u53e3\u53e5\u67c4\u7684\u60c5\u51b5\u4e0b\uff0c\u5b9e\u73b0\u4e00\u4e2a Edit \u63a7\u4ef6\u4f1a \u975e\u5e38\u9ebb\u70e6\u3002 \u5f53\u7136\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u9009\u62e9\u81ea\u5df1\u53bb\u91cd\u65b0\u5b9e\u73b0\u4e00\u5957 edit\uff0cEdit \u4e5f\u8bb8\u8fd8\u53ef\u884c\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u8981\u5b9e\u73b0\u4e00\u4e2a Richedit \u57fa\u672c\u4e0d\u53ef\u884c\u3002 \u597d\u5728\u5b9e\u73b0 Richedit \u7684\u6a21\u5757 riched20.dll \u4e2d\u628a UI \u548c\u903b\u8f91\u5206\u79bb\u5f00 \u6765\uff0c\u5373\u53ef\u4ee5\u7528\u5b83\u76f4\u63a5\u521b\u5efa\u6709\u7a97\u53e3\u7684 Richedit\uff0c\u4e5f\u53ef\u4ee5\u7528\u5b83\u6765\u521b\u5efa\u63d0\u4f9b\u65e0\u7a97\u53e3 Richedit \u7684 ITextServices \u63a5\u53e3\u3002\u7136\u800c\u5373\u4f7f\u662f\u8fd9\u6837\uff0c\u7a0b\u5e8f\u5458\u9700\u8981\u4e3a ITextServices \u5b9e\u73b0\u4e00\u4e2a ITextHost \u63a5\u53e3\u3002\u5c3d\u7ba1 MSDN \u4e0a\u6709\u76f8\u5173\u7684\u6587\u6863\u53ca\u793a\u4f8b\uff0c\u4f46\u662f\u6839\u636e\u5b83\u4eec\u63d0\u4f9b\u7684\u8fd9\u4e9b\u8d44\u6599\u5b9e \u73b0\u7684\u6548\u679c\u5f88\u4e0d\u7406\u60f3\u3002\u5fc5\u7adf\u53ea\u662f Demo\uff0c\u4e0d\u662f\u5b8c\u6574\u7684\u4ee3\u7801\uff0c\u5b83\u4e0d\u80fd\u6f14\u793a\u5f00\u53d1\u4e2d\u53ef\u80fd\u9047\u5230\u7684\u6bcf \u4e00\u4e2a\u7ec6\u8282\u3002\u7136\u800c\u6070\u597d\u662f\u8fd9\u4e9b\u7ec6\u8282\u662f\u5f71\u54cd UI \u7528\u6237\u4f53\u9a8c\u7684\u5173\u952e\u3002 \u6240\u4ee5\u6211\u4eec\u9700\u8981\u53e6\u8f9f\u8e4a\u5f84\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u6211\u89e3\u51b3\u8fd9\u4e9b\u7ec6\u8282\uff0c\u5173\u952e\u5728\u4e8e\u7406\u89e3\u5b83\u4eec\u7684\u903b\u8f91\u3002 SOUI \u7684\u529e\u6cd5\u662f\u627e\u5230 riched20.dll \u7684\u6e90\u4ee3\u7801\u3002\u597d\u5728\u7f51\u7edc\u4e0a\u6d41\u4f20\u7740\u4e00\u4efd\u4ece WinCE \u6e90\u4ee3\u7801\u4e2d \u5206\u79bb\u51fa\u6765\u7684 Riched20.dll \u7684\u6e90\u4ee3\u7801\uff0c\u867d\u7136\u7528\u5b83\u7f16\u8bd1\u51fa\u6765\u7684 Richedit \u6709\u5f88\u591a BUG\uff0c\u4f46\u5229 \u7528\u5b83\u53ef\u4ee5\u8ba9\u6211\u4eec\u66f4\u597d\u7684\u7406\u89e3\u5404\u79cd\u7ec6\u8282\u3002\u5927\u5bb6\u53ef\u4ee5\u6d4b\u8bd5 SOUI \u4e2d\u7684 Edit\uff0c\u6548\u679c\u5e94\u8be5\u662f\u5404\u79cd\u7c7b \u4f3c\u5e93\u4e2d\u6700\u597d\u7684\u4e00\u4e2a\u4e4b\u4e00\u3002 XML+LUA \u90e8\u5206\u6a21\u5757\u5728 SOUI \u4e2d\u91c7\u7528\u4e86\u63a5\u53e3\u5316\u8bbe\u8ba1\uff0c\u5982\u524d\u9762\u63d0\u5230\u7684\u6e32\u67d3\u5f15\u64ce\uff0c\u4ee5\u53ca\u540e\u9762\u8981\u8bf4\u7684\u591a\u8bed\u8a00 \u7ffb\u8bd1\uff0c\u4ee5\u53ca\u8fd9\u91cc\u8981\u8bf4\u7684\u811a\u672c\u6a21\u5757\u3002 \u811a\u672c\u8bed\u8a00\u65b9\u4fbf\u7075\u6d3b\uff0c\u66f4\u65b0\u7b80\u5355\uff0cLUA \u811a\u672c\u8fd8\u6709\u9ad8\u6548\u7684\u7279\u70b9\u3002\u548c WEB \u7684 HTML+JS \u7c7b\u4f3c\uff0c SOUI \u5b9e\u73b0\u4e86 XML+LUA \u7684 UI \u5f00\u53d1\u89e3\u51b3\u65b9\u6848\u3002XML \u5b9e\u73b0 UI \u5e03\u5c40\uff0cLUA \u5b9e\u73b0\u903b\u8f91\u63a7\u5236\u3002 \u5b9e\u73b0\u65b9\u6cd5\uff1a \u5728 XML \u4e2d\u4f7f\u7528 <script> \u6807\u7b7e\u58f0\u660e UI \u4e2d\u9700\u8981\u811a\u672c\u652f\u6301\u3002 \u901a\u8fc7 XML \u521b\u5efa UI \u65f6\u81ea\u52a8\u4ece\u811a\u672c\u6a21\u5757\u4e3a\u8be5 UI \u5b9e\u4f8b\u5316\u811a\u672c\u5bf9\u8c61\u3002 \u91c7\u7528 lua_tinker \u81ea\u52a8\u5bfc\u51fa C++\u7c7b\u5230 LUA \u811a\u672c\u7a7a\u95f4\uff0c\u5305\u542b\u63a7\u4ef6\u5bf9\u8c61\uff0c\u53ca\u63a7\u4ef6\u4e8b\u4ef6\u5bf9\u8c61\u3002 \u5728 LUA \u811a\u672c\u4e2d\u5904\u7406\u4e8b\u4ef6\u54cd\u5e94\u3002 \u591a\u8bed\u8a00\u7ffb\u8bd1 \u591a\u8bed\u8a00\u7ffb\u8bd1\u5bf9\u4e8e\u9700\u8981\u56fd\u9645\u5316\u7684\u5e94\u7528\u6765\u8bf4\u53ef\u80fd\u975e\u5e38\u91cd\u8981\u3002SOUI \u901a\u8fc7\u4e00\u4e2a\u8bed\u8a00\u7ffb\u8bd1\u63a5\u53e3\u6765\u6267 \u884c\u7279\u5b9a\u4e0a\u4e0b\u6587\u7684\u591a\u8bed\u8a00\u7ffb\u8bd1\u5e76\u4e14\u5b9e\u73b0\u4e86\u4e00\u4e2a\u7c7b\u4f3c QT \u8bed\u8a00\u7ffb\u8bd1\u529f\u80fd\u7684\u57fa\u672c XML \u7684\u8bed\u8a00\u7ffb\u8bd1 \u6a21\u5757\u3002\u7528\u6237\u53ea\u9700\u8981\u6309\u7167 Demo \u4e2d\u7684\u8bed\u8a00\u7ffb\u8bd1\u6587\u4ef6\u7684\u7ec4\u7ec7\u65b9\u5f0f\u7ec4\u7ec7\u7ffb\u8bd1 XML \u5c31\u53ef\u4ee5\u4e86\u3002 String \u53ca\u5176\u5b83\u57fa\u4e8e\u6a21\u677f\u7684\u96c6\u5408\u5bf9\u8c61\u7684\u53c2\u6570\u4f20\u9012 \u7531\u4e8e String \u901a\u5e38\u8981\u540c\u65f6\u652f\u6301 char \u53ca wchar_t \u8fd9\u4e24\u79cd\u5b57\u7b26\u7c7b\u578b\uff0c\u901a\u5e38 String \u5728\u4e00\u4e2a\u7c7b\u5e93 \u90fd\u90fd\u662f\u4ee5\u6a21\u677f\u5f62\u5f0f\u5b58\u5728\uff0c\u6bd4\u5982 WTL\uff0cATL\uff0c\uff08MFC \u592a\u4e45\u4e0d\u7528\uff0c\u8bb0\u4e0d\u6e05\u4e86\uff09\u3002\u4f7f\u7528\u6a21\u677f\u5b9e \u73b0\u7684\u5bf9\u8c61\u6709\u4e00\u4e2a\u7279\u70b9\uff0c\u90a3\u5c31\u662f\u4ee3\u7801\u4f1a\u7f16\u8bd1\u5230\u4f7f\u7528\u5b83\u7684\u6a21\u5757\u4e2d\u3002\u5982\u6b64\u4e00\u6765\uff0c\u5982\u679c\u5728\u8fd9\u4e9b\u6a21\u677f \u7c7b\u4e2d\u76f4\u63a5\u8c03\u7528 malloc, new \u7b49\u5185\u5b58\u5206\u914d\u51fd\u6570\u65f6\u4f1a\u5728\u8c03\u7528\u6a21\u5757\u7684\u5806\u4e0a\u5206\u914d\u5185\u5b58\uff0c\u76f8\u5e94\u5730\uff0c\u5185 \u5b58\u7684\u7ffb\u8bd1\u4e5f\u9700\u8981\u5728\u8c03\u7528\u8005\u6a21\u5757\u4e2d\u6267\u884c\u3002 \u8fd9\u6709\u4ec0\u4e48\u95ee\u9898\u5462\uff1f\u6700\u5927\u7684\u95ee\u9898\u83ab\u8fc7\u4e8e\u8fd9\u6837\u7684\u5bf9\u8c61\u4e0d\u5b9c\u5728\u4e0d\u540c\u7684\u6a21\u5757\u4e4b\u95f4\u6bd4\u53c2\u6570\u8fdb\u884c\u4f20\u9012 \uff08\u5f53\u7136\uff0cconst \u53c2\u6570\u662f\u6ca1\u95ee\u9898\u7684\uff09\u3002\u5982\u679c\u4e00\u4e2a\u8fd9\u6837\u7684\u5bf9\u8c61\u5728 A \u6a21\u5757\u4e2d\u5206\u914d\u7684\u5185\u5b58\u5230 B \u6a21\u5757 \u4e2d\u88ab\u7ffb\u8bd1\uff0c\u7ed3\u679c\u53ea\u6709\u5d29\u6e83\u3002\uff08\u5982\u679c\u6240\u6709\u6a21\u5757\u91c7\u7528 MD \u65b9\u5f0f\u52a8\u6001\u94fe\u63a5 VS \u7684\u8fd0\u884c\u5e93\u662f\u6ca1\u6709\u95ee \u9898\u7684\uff09 \u5f88\u591a\u5c0f\u8f6f\u4ef6\u662f\u4e0d\u5e0c\u671b\u91c7\u7528 MD \u7f16\u8bd1\u7684\uff0c\u56e0\u4e3a\u8fd9\u6837\u7684\u8bdd\u4e3a\u4e86\u786e\u4fdd\u7a0b\u5e8f\u7684\u6b63\u5e38\u8fd0\u884c\uff0c\u8fd8\u9700\u8981\u5e26 \u4e0a VS \u4e2d\u76f8\u5bf9\u5e94\u7684\u8fd0\u884c\u5e93\uff0c\u5c3d\u7ba1\u4f53\u79ef\u4e0d\u5927\uff0c\u4f46\u4e5f\u9ebb\u70e6\u3002 SOUI \u4e2d\u91c7\u7528\u4e86\u4e00\u70b9\u6280\u5de7\uff0c\u6240\u6709\u4e0a\u8ff0\u6a21\u677f\u7c7b\u90fd\u5728\u4e00\u4e2a\u72ec\u7acb\u7684\u6a21\u5757\u4e2d\u5b9e\u73b0\uff0c\u540c\u65f6\u6539\u5199\u4e86\u8fd9\u4e9b \u7c7b\u4e2d\u7684\u5185\u5b58\u5206\u914d\u53ca\u91ca\u653e\u4ee3\u7801\u3002\u5c06\u5b83\u4eec\u91cd\u4f4d\u5411\u5230\u8be5\u6a21\u5757\u4e2d\u7684\u4e24\u4e2a\u5185\u5b58\u5206\u914d\u91ca\u653e\u65b9\u6cd5\u3002\u7ecf\u8fc7\u8fd9 \u6837\u5904\u7406\u540e\uff0c\u4e0d\u7ba1\u8fd9\u4e9b\u6a21\u677f\u7c7b\u5728\u54ea\u4e00\u4e2a\u6a21\u5757\u4e2d\u5b9e\u4f8b\u5316\uff0c\u5b83\u4eec\u8981\u5728\u5806\u4e0a\u7533\u8bf7\u53ca\u7ffb\u8bd1\u5185\u5b58\u65f6\u90fd\u662f \u5728\u8fd9\u4e2a\u72ec\u7acb\u6a21\u5757\u4e2d\u3002\u901a\u8fc7\u8fd9\u4e2a\u7b80\u5355\u7684\u6280\u672f\u6709\u6548\u7684\u89e3\u51b3\u4e86\u8fd9\u4e9b\u6a21\u677f\u5bf9\u8c61\u4e0d\u80fd\u5728\u4e0d\u540c\u6a21\u5757\u4e4b\u95f4 \u4f20\u9012\u53c2\u6570\u7684\u95ee\u9898\u3002 \u5148\u8fdb\u7684\u4e8b\u4ef6\u5904\u7406\u6a21\u578b SOUI \u540c\u65f6\u652f\u6301\u7c7b\u4f3c WTL \u6d88\u606f\u6620\u5c04\u8868\u65b9\u5f0f\u7684\u4e8b\u4ef6\u6620\u5c04\u8868\u6765\u54cd\u5e94\u4e8b\u4ef6\uff0c\u4e5f\u652f\u6301\u65b0\u5f0f\u4e8b\u4ef6\u8ba2\u9605 \u7684\u65b9\u5f0f\u54cd\u5e94\u4e8b\u4ef6\u3002\u4e8b\u4ef6\u6620\u5c04\u8868\u5904\u7406\u4e8b\u4ef6\u7684\u4f18\u70b9\u5728\u4e8e\u80fd\u591f\u89c4\u8303\u5316\u7684\u628a\u6240\u6709\u4e8b\u4ef6\u5904\u7406\u65b9\u6cd5\u5728\u4ee3 \u7801\u6c34\u5e73\u96c6\u4e2d\u5230\u4e00\u8d77\uff0c\u65b9\u4fbf\u4ee3\u7801\u7684\u9605\u8bfb\uff1b\u800c\u4e8b\u4ef6\u8ba2\u9605\u5219\u63d0\u4f9b\u4e86\u4e8b\u4ef6\u7684\u52a8\u6001\u5904\u7406\u80fd\u529b\uff0c\u80fd\u591f\u5728 \u4efb\u610f\u65f6\u523b\u7075\u6d3b\u7684\u54cd\u5e94\u4e0d\u540c\u63a7\u4ef6\u53d1\u51fa\u7684\u4e8b\u4ef6\u3002 \u7ed3\u675f\u8bed \u9664\u4e0a\u8ff0\u4eae\u70b9\uff0c\u6211\u76f8\u4fe1\u8fd8\u6709\u5f88\u591a\u7ec6\u8282\u7684\u5904\u7406\u90fd\u4f53\u73b0\u4e86 SOUI \u7684\u5de5\u5320\u7cbe\u795e\uff0c\u76f8\u4fe1\u7528\u5fc3\u7684\u670b\u53cb\u4e00 \u5b9a\u53ef\u4ee5\u5728\u9605\u8bfb\u53ca\u4f7f\u7528\u4ee3\u7801\u7684\u8fc7\u7a0b\u4e2d\u66f4\u6df1\u7684\u4f53\u4f1a\u5230\u3002SOUI \u662f\u542f\u7a0b\u8f6f\u4ef6\u5386\u65f6 5 \u5e74\u5fc3\u8840\u7684\u7ed3 \u6676\uff0c\u91cd\u590d\u4e00\u4e0b\u6211\u4ee5\u524d\u505a\u300a\u542f\u7a0b\u8f93\u5165\u4e4b\u661f\u300b\u65f6\u8bf4\u7684\u90a3\u53e5\u8bdd\uff1a\u56e0\u4e3a\u52aa\u529b\uff0c\u6240\u4ee5\u7f8e\u4e3d\uff01 \u5e0c\u671b\u80fd\u591f\u4e3a\u60a8\u80fd\u591f\u559c\u6b22\u3002","title":"\u524d\u8a00"},{"location":"Overview/11/","text":"1.1 SOUI \u662f\u4ec0\u4e48\uff1f \u00b6 SOUI \u662f\u4ec0\u4e48\uff1fSOUI \u662f\u542f\u7a0b\u8f6f\u4ef6\u5f00\u53d1\u7684\u4e00\u4e2a C++ Direct UI \u5e93\u3002DirectUI \u6280\u672f\u4e00\u822c\u662f\u6307 \u5c06\u6240\u6709\u7684\u754c\u9762\u63a7\u4ef6\u90fd\u7ed8\u5236\u5728\u4e00\u4e2a\u7a97\u53e3\u4e0a\uff0c\u8fd9\u4e9b\u63a7\u4ef6\u7684\u903b\u8f91\u548c\u7ed8\u56fe\u65b9\u5f0f\u90fd\u5fc5\u987b\u81ea\u5df1\u8fdb\u884c\u7f16\u5199 \u548c\u5c01\u88c5\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 Windows \u63a7\u4ef6\uff0c\u6240\u4ee5\u8fd9\u4e9b\u63a7\u4ef6\u90fd\u662f\u65e0\u53e5\u67c4\u7684\u3002\u867d\u7136 Direct UI \u4e0d\u662f \u4ec0\u4e48\u65b0\u6280\u672f\uff0c\u4f46\u662f\u8981\u628a UI \u505a\u597d\uff0cDirect UI \u786e\u5b9e\u662f\u76ee\u524d\u4e3a\u6b62\u6700\u6709\u6548\u7684\u89e3\u51b3\u65b9\u6848\u3002 DirectUI \u6280\u672f\u9700\u8981\u89e3\u51b3\u7684\u4e3b\u8981\u95ee\u9898\u5982\u4e0b\uff1a \u25c6 \u7a97\u53e3\u7684\u5b50\u7c7b\u5316\uff0c\u622a\u83b7\u7a97\u53e3\u7684\u6d88\u606f\u3002 \u25c6 \u5c01\u88c5\u81ea\u5df1\u7684\u63a7\u4ef6\uff0c\u5e76\u5c06\u81ea\u5df1\u7684\u63a7\u4ef6\u7ed8\u5236\u5230\u8be5\u7a97\u53e3\u4e0a\u3002 \u25c6 \u5c01\u88c5\u7a97\u53e3\u7684\u6d88\u606f\uff0c\u5e76\u5206\u53d1\u5230\u81ea\u5df1\u7684\u63a7\u4ef6\u4e0a\uff0c\u8ba9\u81ea\u5df1\u7684\u63a7\u4ef6\u6839\u636e\u6d88\u606f\u8fdb\u884c\u54cd\u5e94\u548c\u7ed8\u5236\u3002 \u25c6 \u6839\u636e\u4e0d\u540c\u7684\u884c\u4e3a\u53d1\u9001\u81ea\u5b9a\u4e49\u6d88\u606f\u7ed9\u7a97\u53e3\uff0c\u4ee5\u4fbf\u7a0b\u5e8f\u8fdb\u884c\u8c03\u7528\u3002 \u25c6 \u4e00\u822c\u7a97\u53e3\u4e0a\u63a7\u4ef6\u7684\u7ec4\u7ec7\u4f7f\u7528 XML \u6765\u63cf\u8ff0\u3002 \u901a\u5e38 DirectUI \u7684\u754c\u9762\u5e93\u90fd\u91c7\u7528 XML \u914d\u7f6e\u6587\u4ef6+\u56fe\u7247+\u63a7\u5236\u811a\u672c\uff08Lua\u3001Javascript \u7b49\uff09\u7684 \u5f00\u53d1\u65b9\u5f0f\uff0c\u975e\u5e38\u7c7b\u4f3c\u4e8e Web \u7a0b\u5e8f\u7684\u5f00\u53d1\u65b9\u5f0f\uff0c\u5f53\u7136\u8fd9\u91cc\u9762\u63a7\u5236\u811a\u672c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 C++ \u4ee3\u7801\u6765\u5b9e\u73b0\u3002\u8fd9\u79cd\u5f00\u53d1\u65b9\u5f0f\u53ef\u4ee5\u5927\u5927\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\uff0c\u5c06\u7a0b\u5e8f\u5458\u4ece\u7e41\u7410\u7684\u754c\u9762\u5de5\u4f5c\u4e2d\u89e3\u8131\u51fa \u6765\uff0c\u5e76\u4e14\u901a\u8fc7\u7f8e\u5de5\u7684\u8bbe\u8ba1\uff0c\u53ef\u4ee5\u4f7f\u754c\u9762\u66f4\u7f8e\u89c2\u3002 SOUI \u4e0d\u662f\u4e00\u4e2a\u65b0\u9879\u76ee\uff0c\u5b83\u662f\u57fa\u4e8e\u4e4b\u524d\u5f00\u53d1\u7684 DuiEngine \u754c\u9762\u5e93\uff0c\u518d\u7ecf\u8fc7\u4e3a\u671f\u8fd1\u534a\u5e74\u7684\u91cd \u6784\u540e\u5b8c\u6210\u7684\u7248\u672c\uff0c\u9664\u4e86 skia \u6e32\u67d3\u6a21\u5757\u8fd8\u6709\u5f85\u8fdb\u4e00\u6b65\u5b8c\u5584\u5916\uff0c\u5176\u5b83\u6a21\u5757\u5df2\u7ecf\u57fa\u672c\u8fbe\u5230\u53d1\u5e03\u6807 \u51c6\u3002\uff08DuiEngine \u662f\u4e00\u4e2a\u57fa\u4e8e\u91d1\u5c71 Bkwin \u91cd\u6784\u7684 UI \u5e93\uff0c\u7ecf\u8fc7\u4e0d\u65ad\u66f4\u65b0\uff0c\u5df2\u7ecf\u76f8\u5bf9\u7a33\u5b9a\uff0c \u5e76\u4e14\u5df2\u7ecf\u5728\u591a\u4e2a\u6709\u5927\u91cf\u7528\u6237\u7684\u5ba2\u6237\u7aef\u4ea7\u54c1\u4e2d\u4f7f\u7528\uff09","title":"1.1 SOUI \u662f\u4ec0\u4e48\uff1f"},{"location":"Overview/11/#11-soui","text":"SOUI \u662f\u4ec0\u4e48\uff1fSOUI \u662f\u542f\u7a0b\u8f6f\u4ef6\u5f00\u53d1\u7684\u4e00\u4e2a C++ Direct UI \u5e93\u3002DirectUI \u6280\u672f\u4e00\u822c\u662f\u6307 \u5c06\u6240\u6709\u7684\u754c\u9762\u63a7\u4ef6\u90fd\u7ed8\u5236\u5728\u4e00\u4e2a\u7a97\u53e3\u4e0a\uff0c\u8fd9\u4e9b\u63a7\u4ef6\u7684\u903b\u8f91\u548c\u7ed8\u56fe\u65b9\u5f0f\u90fd\u5fc5\u987b\u81ea\u5df1\u8fdb\u884c\u7f16\u5199 \u548c\u5c01\u88c5\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 Windows \u63a7\u4ef6\uff0c\u6240\u4ee5\u8fd9\u4e9b\u63a7\u4ef6\u90fd\u662f\u65e0\u53e5\u67c4\u7684\u3002\u867d\u7136 Direct UI \u4e0d\u662f \u4ec0\u4e48\u65b0\u6280\u672f\uff0c\u4f46\u662f\u8981\u628a UI \u505a\u597d\uff0cDirect UI \u786e\u5b9e\u662f\u76ee\u524d\u4e3a\u6b62\u6700\u6709\u6548\u7684\u89e3\u51b3\u65b9\u6848\u3002 DirectUI \u6280\u672f\u9700\u8981\u89e3\u51b3\u7684\u4e3b\u8981\u95ee\u9898\u5982\u4e0b\uff1a \u25c6 \u7a97\u53e3\u7684\u5b50\u7c7b\u5316\uff0c\u622a\u83b7\u7a97\u53e3\u7684\u6d88\u606f\u3002 \u25c6 \u5c01\u88c5\u81ea\u5df1\u7684\u63a7\u4ef6\uff0c\u5e76\u5c06\u81ea\u5df1\u7684\u63a7\u4ef6\u7ed8\u5236\u5230\u8be5\u7a97\u53e3\u4e0a\u3002 \u25c6 \u5c01\u88c5\u7a97\u53e3\u7684\u6d88\u606f\uff0c\u5e76\u5206\u53d1\u5230\u81ea\u5df1\u7684\u63a7\u4ef6\u4e0a\uff0c\u8ba9\u81ea\u5df1\u7684\u63a7\u4ef6\u6839\u636e\u6d88\u606f\u8fdb\u884c\u54cd\u5e94\u548c\u7ed8\u5236\u3002 \u25c6 \u6839\u636e\u4e0d\u540c\u7684\u884c\u4e3a\u53d1\u9001\u81ea\u5b9a\u4e49\u6d88\u606f\u7ed9\u7a97\u53e3\uff0c\u4ee5\u4fbf\u7a0b\u5e8f\u8fdb\u884c\u8c03\u7528\u3002 \u25c6 \u4e00\u822c\u7a97\u53e3\u4e0a\u63a7\u4ef6\u7684\u7ec4\u7ec7\u4f7f\u7528 XML \u6765\u63cf\u8ff0\u3002 \u901a\u5e38 DirectUI \u7684\u754c\u9762\u5e93\u90fd\u91c7\u7528 XML \u914d\u7f6e\u6587\u4ef6+\u56fe\u7247+\u63a7\u5236\u811a\u672c\uff08Lua\u3001Javascript \u7b49\uff09\u7684 \u5f00\u53d1\u65b9\u5f0f\uff0c\u975e\u5e38\u7c7b\u4f3c\u4e8e Web \u7a0b\u5e8f\u7684\u5f00\u53d1\u65b9\u5f0f\uff0c\u5f53\u7136\u8fd9\u91cc\u9762\u63a7\u5236\u811a\u672c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 C++ \u4ee3\u7801\u6765\u5b9e\u73b0\u3002\u8fd9\u79cd\u5f00\u53d1\u65b9\u5f0f\u53ef\u4ee5\u5927\u5927\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\uff0c\u5c06\u7a0b\u5e8f\u5458\u4ece\u7e41\u7410\u7684\u754c\u9762\u5de5\u4f5c\u4e2d\u89e3\u8131\u51fa \u6765\uff0c\u5e76\u4e14\u901a\u8fc7\u7f8e\u5de5\u7684\u8bbe\u8ba1\uff0c\u53ef\u4ee5\u4f7f\u754c\u9762\u66f4\u7f8e\u89c2\u3002 SOUI \u4e0d\u662f\u4e00\u4e2a\u65b0\u9879\u76ee\uff0c\u5b83\u662f\u57fa\u4e8e\u4e4b\u524d\u5f00\u53d1\u7684 DuiEngine \u754c\u9762\u5e93\uff0c\u518d\u7ecf\u8fc7\u4e3a\u671f\u8fd1\u534a\u5e74\u7684\u91cd \u6784\u540e\u5b8c\u6210\u7684\u7248\u672c\uff0c\u9664\u4e86 skia \u6e32\u67d3\u6a21\u5757\u8fd8\u6709\u5f85\u8fdb\u4e00\u6b65\u5b8c\u5584\u5916\uff0c\u5176\u5b83\u6a21\u5757\u5df2\u7ecf\u57fa\u672c\u8fbe\u5230\u53d1\u5e03\u6807 \u51c6\u3002\uff08DuiEngine \u662f\u4e00\u4e2a\u57fa\u4e8e\u91d1\u5c71 Bkwin \u91cd\u6784\u7684 UI \u5e93\uff0c\u7ecf\u8fc7\u4e0d\u65ad\u66f4\u65b0\uff0c\u5df2\u7ecf\u76f8\u5bf9\u7a33\u5b9a\uff0c \u5e76\u4e14\u5df2\u7ecf\u5728\u591a\u4e2a\u6709\u5927\u91cf\u7528\u6237\u7684\u5ba2\u6237\u7aef\u4ea7\u54c1\u4e2d\u4f7f\u7528\uff09","title":"1.1 SOUI \u662f\u4ec0\u4e48\uff1f"},{"location":"Overview/12/","text":"1.2 SOUI \u76f8\u5bf9\u4e8e DuiEngine \u7684\u6539\u8fdb \u00b6 \u505a SOUI \u6709\u51e0\u4e2a\u6838\u5fc3\u9700\u6c42\uff1a \u25c6 \u529f\u80fd\u6a21\u5757\u5316\uff1a\u7279\u522b\u662f\u6e32\u67d3\u90e8\u5206\u8981\u8ba9\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9009\u62e9\u9002\u5408\u7684\u6a21\u5757\uff0c\u5982 GDI\uff0c GDI+\uff0cSKIA\uff1b \u25c6 \u6027\u80fd\u4f18\u5316,\u7b80\u5316 XML \u914d\u7f6e\uff1b \u25c6 \u589e\u52a0\u4ee3\u7801\u6ce8\u91ca\uff1b \u25c6 \u5220\u9664\u539f\u6709\u9879\u76ee\u4e2d\u4e3a\u4e86\u7248\u672c\u517c\u5bb9\u800c\u9057\u7559\u7684\u5783\u573e\u4ee3\u7801; \u25c6 \u4f18\u5316\u9879\u76ee\u7ba1\u7406; \u540c\u65f6\u65b0\u7248\u672c\u4e5f\u589e\u52a0\u4e86\u4e00\u4e9b\u65b0\u7684\u7279\u6027\uff1a \u25c6 \u65b0\u589e\u591a\u8bed\u8a00\u7ffb\u8bd1\u652f\u6301; \u25c6 \u7a0b\u5e8f\u8d44\u6e90\u63d0\u4f9b\u6a21\u5757\u652f\u6301\u591a\u4efd\uff0c\u4ee5\u4fbf\u4e3a\u4ece\u811a\u672c\u521b\u5efa UI \u63d0\u4f9b\u66f4\u597d\u7684\u652f\u6301\uff0c\u5b8c\u5584 LUA \u811a\u672c\u6a21\u5757","title":"1.2 SOUI \u76f8\u5bf9\u4e8e DuiEngine \u7684\u6539\u8fdb"},{"location":"Overview/12/#12-soui-duiengine","text":"\u505a SOUI \u6709\u51e0\u4e2a\u6838\u5fc3\u9700\u6c42\uff1a \u25c6 \u529f\u80fd\u6a21\u5757\u5316\uff1a\u7279\u522b\u662f\u6e32\u67d3\u90e8\u5206\u8981\u8ba9\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9009\u62e9\u9002\u5408\u7684\u6a21\u5757\uff0c\u5982 GDI\uff0c GDI+\uff0cSKIA\uff1b \u25c6 \u6027\u80fd\u4f18\u5316,\u7b80\u5316 XML \u914d\u7f6e\uff1b \u25c6 \u589e\u52a0\u4ee3\u7801\u6ce8\u91ca\uff1b \u25c6 \u5220\u9664\u539f\u6709\u9879\u76ee\u4e2d\u4e3a\u4e86\u7248\u672c\u517c\u5bb9\u800c\u9057\u7559\u7684\u5783\u573e\u4ee3\u7801; \u25c6 \u4f18\u5316\u9879\u76ee\u7ba1\u7406; \u540c\u65f6\u65b0\u7248\u672c\u4e5f\u589e\u52a0\u4e86\u4e00\u4e9b\u65b0\u7684\u7279\u6027\uff1a \u25c6 \u65b0\u589e\u591a\u8bed\u8a00\u7ffb\u8bd1\u652f\u6301; \u25c6 \u7a0b\u5e8f\u8d44\u6e90\u63d0\u4f9b\u6a21\u5757\u652f\u6301\u591a\u4efd\uff0c\u4ee5\u4fbf\u4e3a\u4ece\u811a\u672c\u521b\u5efa UI \u63d0\u4f9b\u66f4\u597d\u7684\u652f\u6301\uff0c\u5b8c\u5584 LUA \u811a\u672c\u6a21\u5757","title":"1.2 SOUI \u76f8\u5bf9\u4e8e DuiEngine \u7684\u6539\u8fdb"},{"location":"Overview/13/","text":"1.3 SOUI \u6a21\u5757\u7ed3\u6784 \u00b6 \u4e0b\u56fe\u4e3a SOUI \u6a21\u5757\u622a\u56fe\uff1a \u25c6 soui \u6a21\u5757\u662f\u6574\u4e2a\u9879\u76ee\u7684\u6838\u5fc3\uff0c\u9664 utilities \u6a21\u5757\u5916\uff0c\u5176\u5b83\u6a21\u5757\u90fd\u4e3a soui \u6a21\u5757\u670d\u52a1\u3002 \u25c6 utilities \u6a21\u5757\u63d0\u4f9b\u4e00\u4e9b\u5de5\u5177\u7c7b\uff0c\u4e3b\u8981\u5305\u542b pugixml\uff0c\u53ca\u4e00\u4e2a String \u7c7b\u3002 \u25c6 soui-sys-resource \u6a21\u5757\u662f\u4e00\u4e2a\u7eaf\u8d44\u6e90 DLL\uff0c\u63d0\u4f9b\u4e00\u4e9b\u5185\u7f6e\u63a7\u4ef6\u5fc5\u987b\u7684\u8d44\u6e90\u3002 \u25c6 demo \u6a21\u5757\u662f SOUI \u754c\u9762\u5e93\u7684\u529f\u80fd\u6f14\u793a\u7a0b\u5e8f\u3002 \u25c6 translator \u5b9e\u73b0\u4e00\u4e2a\u4ece XML \u6587\u4ef6\u52a0\u8f7d\u591a\u8bed\u8a00\u7ffb\u8bd1\u8d44\u6599\u7684\u7c7b\u4f3c QT \u7684\u8bed\u8a00\u7ffb\u8bd1\u6a21\u5757\u3002 \u25c6 render-gdi \u548c render-skia \u5206\u522b\u5b9e\u73b0\u4e24\u4e2a\u57fa\u4e8e GDI \u53ca SKIA \u7684\u6e32\u67d3\u6a21\u5757\uff0c\u5b83\u4eec\u53ef\u4ee5\u76f8\u4e92 \u66ff\u6362\u3002GDI \u7684\u4f18\u70b9\u662f\u4f53\u79ef\u5c0f\uff0c\u4f46\u662f\u5bf9\u4e8e apha \u901a\u9053\u652f\u6301\u80fd\u529b\u6709\u9650\uff1b\u800c skia \u7684\u4f18\u70b9\u662f\u901f\u5ea6 \u5feb\uff0c\u5168\u9762\u652f\u6301 alpha \u901a\u9053\uff0c\u4f46\u662f\u7a0b\u5e8f\u4f53\u79ef\u4f1a\u6709\u6240\u589e\u52a0, DLL \u7f16\u8bd1\u540e\u6709 1M\uff0c\u538b\u7f29\u540e\u6709 600K\u3002 \u25c6 resprovider-zip \u5b9e\u73b0\u4e86\u4e00\u4e2a\u4ece ZIP \u6587\u4ef6\u52a0\u8f7d\u7a0b\u5e8f\u8d44\u6e90\u7684\u6a21\u5757\u3002\u52a0\u4e0a soui \u4e2d\u5185\u7f6e\u7684\u4e24\u4e2a \u8d44\u6e90\u52a0\u8f7d\u6a21\u5757\uff0cSOUI \u53ef\u4ee5\u9009\u62e9\u4ece\u6587\u4ef6\u4e2d\uff0c\u4ece EXE \u8d44\u6e90\u4e2d\u53ca\u4ece ZIP \u6587\u4ef6\u5305\u4e2d\u52a0\u8f7d\u7a0b\u5e8f\u8d44 \u6e90\u3002 .\u25c6 script-lua \u662f\u4e00\u4e2a\u811a\u672c\u652f\u6301\u6a21\u5757\uff0c\u76ee\u524d\u53ea\u5b9e\u73b0\u4e86\u51e0\u4e2a\u57fa\u672c\u7c7b\u7684\u5bfc\u51fa\uff0c\u8981\u4f7f\u7528\u66f4\u591a SOUI \u7c7b\u578b\uff0c\u8fd8\u9700\u8981\u589e\u52a0\u5bfc\u51fa\u4ee3\u7801\u3002","title":"1.3 SOUI \u6a21\u5757\u7ed3\u6784"},{"location":"Overview/13/#13-soui","text":"\u4e0b\u56fe\u4e3a SOUI \u6a21\u5757\u622a\u56fe\uff1a \u25c6 soui \u6a21\u5757\u662f\u6574\u4e2a\u9879\u76ee\u7684\u6838\u5fc3\uff0c\u9664 utilities \u6a21\u5757\u5916\uff0c\u5176\u5b83\u6a21\u5757\u90fd\u4e3a soui \u6a21\u5757\u670d\u52a1\u3002 \u25c6 utilities \u6a21\u5757\u63d0\u4f9b\u4e00\u4e9b\u5de5\u5177\u7c7b\uff0c\u4e3b\u8981\u5305\u542b pugixml\uff0c\u53ca\u4e00\u4e2a String \u7c7b\u3002 \u25c6 soui-sys-resource \u6a21\u5757\u662f\u4e00\u4e2a\u7eaf\u8d44\u6e90 DLL\uff0c\u63d0\u4f9b\u4e00\u4e9b\u5185\u7f6e\u63a7\u4ef6\u5fc5\u987b\u7684\u8d44\u6e90\u3002 \u25c6 demo \u6a21\u5757\u662f SOUI \u754c\u9762\u5e93\u7684\u529f\u80fd\u6f14\u793a\u7a0b\u5e8f\u3002 \u25c6 translator \u5b9e\u73b0\u4e00\u4e2a\u4ece XML \u6587\u4ef6\u52a0\u8f7d\u591a\u8bed\u8a00\u7ffb\u8bd1\u8d44\u6599\u7684\u7c7b\u4f3c QT \u7684\u8bed\u8a00\u7ffb\u8bd1\u6a21\u5757\u3002 \u25c6 render-gdi \u548c render-skia \u5206\u522b\u5b9e\u73b0\u4e24\u4e2a\u57fa\u4e8e GDI \u53ca SKIA \u7684\u6e32\u67d3\u6a21\u5757\uff0c\u5b83\u4eec\u53ef\u4ee5\u76f8\u4e92 \u66ff\u6362\u3002GDI \u7684\u4f18\u70b9\u662f\u4f53\u79ef\u5c0f\uff0c\u4f46\u662f\u5bf9\u4e8e apha \u901a\u9053\u652f\u6301\u80fd\u529b\u6709\u9650\uff1b\u800c skia \u7684\u4f18\u70b9\u662f\u901f\u5ea6 \u5feb\uff0c\u5168\u9762\u652f\u6301 alpha \u901a\u9053\uff0c\u4f46\u662f\u7a0b\u5e8f\u4f53\u79ef\u4f1a\u6709\u6240\u589e\u52a0, DLL \u7f16\u8bd1\u540e\u6709 1M\uff0c\u538b\u7f29\u540e\u6709 600K\u3002 \u25c6 resprovider-zip \u5b9e\u73b0\u4e86\u4e00\u4e2a\u4ece ZIP \u6587\u4ef6\u52a0\u8f7d\u7a0b\u5e8f\u8d44\u6e90\u7684\u6a21\u5757\u3002\u52a0\u4e0a soui \u4e2d\u5185\u7f6e\u7684\u4e24\u4e2a \u8d44\u6e90\u52a0\u8f7d\u6a21\u5757\uff0cSOUI \u53ef\u4ee5\u9009\u62e9\u4ece\u6587\u4ef6\u4e2d\uff0c\u4ece EXE \u8d44\u6e90\u4e2d\u53ca\u4ece ZIP \u6587\u4ef6\u5305\u4e2d\u52a0\u8f7d\u7a0b\u5e8f\u8d44 \u6e90\u3002 .\u25c6 script-lua \u662f\u4e00\u4e2a\u811a\u672c\u652f\u6301\u6a21\u5757\uff0c\u76ee\u524d\u53ea\u5b9e\u73b0\u4e86\u51e0\u4e2a\u57fa\u672c\u7c7b\u7684\u5bfc\u51fa\uff0c\u8981\u4f7f\u7528\u66f4\u591a SOUI \u7c7b\u578b\uff0c\u8fd8\u9700\u8981\u589e\u52a0\u5bfc\u51fa\u4ee3\u7801\u3002","title":"1.3 SOUI \u6a21\u5757\u7ed3\u6784"},{"location":"Overview/14/","text":"1.4 \u6a21\u5757\u7ed3\u6784\u56fe\u53ca\u6846\u67b6\u56fe \u00b6 \u6a21\u5757\u7ed3\u6784\u56fe\uff1a SOUI \u6846\u67b6\u56fe\uff1a","title":"1.4 \u6a21\u5757\u7ed3\u6784\u56fe\u53ca\u6846\u67b6\u56fe"},{"location":"Overview/14/#14","text":"\u6a21\u5757\u7ed3\u6784\u56fe\uff1a SOUI \u6846\u67b6\u56fe\uff1a","title":"1.4 \u6a21\u5757\u7ed3\u6784\u56fe\u53ca\u6846\u67b6\u56fe"}]}